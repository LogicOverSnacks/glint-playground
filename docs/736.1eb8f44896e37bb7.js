"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[736],{8831:(V,A,n)=>{n.d(A,{S:()=>e});var d=n(4650);const e=k=>{class E extends k{constructor(){super(...arguments),this.disableTransitions=!0}ngOnInit(){super.ngOnInit&&super.ngOnInit(),setTimeout(()=>{this.disableTransitions=!1},0)}static{this.\u0275fac=function(){let u;return function(I){return(u||(u=d.n5z(E)))(I||E)}}()}static{this.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac})}}return E}},8070:(V,A,n)=>{n.d(A,{r:()=>e});var d=n(4650);class e{transform(E,T,u=E+"s"){return 1===T?E:u}static{this.\u0275fac=function(T){return new(T||e)}}static{this.\u0275pipe=d.Yjl({name:"plural",type:e,pure:!0})}}},3448:(V,A,n)=>{n.d(A,{I:()=>e});var d=n(4650);class e{constructor(E){this.template=E}static{this.\u0275fac=function(T){return new(T||e)(d.Y36(d.Rgc))}}static{this.\u0275dir=d.lG2({type:e,selectors:[["","appVirtualTreeLeafNode",""]]})}}},1123:(V,A,n)=>{n.d(A,{J:()=>e});var d=n(4650);class e{constructor(E){this.template=E}static{this.\u0275fac=function(T){return new(T||e)(d.Y36(d.Rgc))}}static{this.\u0275dir=d.lG2({type:e,selectors:[["","appVirtualTreeNode",""]]})}}},6725:(V,A,n)=>{n.d(A,{L:()=>L});var d=n(7340),e=n(4883),k=n(4004),E=n(8926),T=n(9967),u=n(8831),y=n(2771),I=n(3448),W=n(1123),x=n(4650),B=n(6895);function c(P,v){1&P&&x.GkF(0)}const $=function(P){return{$implicit:P}};function Z(P,v){if(1&P&&(x.TgZ(0,"li"),x.YNc(1,c,1,0,"ng-container",2),x.qZA()),2&P){const g=v.$implicit,O=x.oxw();x.Udp("padding-left",10*g.depth,"px"),x.xp6(1),x.Q6J("ngTemplateOutlet",O.isLeaf(g)?O.leafNodeDirective.template:O.nodeDirective.template)("ngTemplateOutletContext",x.VKq(4,$,g))}}class L extends((0,E.j)(T.A,u.S,y.P)){constructor(){super(...arguments),this.isLeaf=v=>!v.children,this.expandVisibleNodes=v=>this.isLeaf(v)||!v.expanded?[v]:[v,...v.children.flatMap(this.expandVisibleNodes)]}ngOnInit(){super.ngOnInit(),this.visibleNodes=this.tree.pipe((0,k.U)(v=>v.reduce((g,O)=>[...g,...this.expandVisibleNodes(O)],[])))}trackById(v,g){return g.id}static{this.\u0275fac=function(){let v;return function(O){return(v||(v=x.n5z(L)))(O||L)}}()}static{this.\u0275cmp=x.Xpm({type:L,selectors:[["app-virtual-tree"]],contentQueries:function(g,O,b){if(1&g&&(x.Suo(b,W.J,5),x.Suo(b,I.I,5)),2&g){let R;x.iGM(R=x.CRH())&&(O.nodeDirective=R.first),x.iGM(R=x.CRH())&&(O.leafNodeDirective=R.first)}},viewQuery:function(g,O){if(1&g&&x.Gf(e.N7,5),2&g){let b;x.iGM(b=x.CRH())&&(O.viewports=b)}},inputs:{tree:"tree",itemSize:"itemSize"},features:[x.qOj],decls:5,vars:9,consts:[[3,"itemSize"],[3,"padding-left",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(g,O){1&g&&(x.TgZ(0,"cdk-virtual-scroll-viewport",0)(1,"ul"),x.ALo(2,"async"),x.YNc(3,Z,2,6,"li",1),x.ALo(4,"async"),x.qZA()()),2&g&&(x.Q6J("itemSize",O.itemSize)("@null",void 0),x.xp6(1),x.Q6J("@slide",x.lcZ(2,5,O.visibleNodes)),x.xp6(2),x.Q6J("cdkVirtualForOf",x.lcZ(4,7,O.visibleNodes))("cdkVirtualForTrackBy",O.trackById))},dependencies:[e.xd,e.x0,e.N7,B.tP,B.Ov],styles:["cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{transition:height 225ms ease-in-out}li[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}"],data:{animation:[(0,d.X$)("null",[(0,d.eR)(":enter",[]),(0,d.eR)(":leave",[])]),(0,d.X$)("slide",[(0,d.eR)("* => *",[(0,d.ru)([(0,d.IO)("li:enter",[(0,d.oB)({height:0}),(0,d.jt)("225ms ease-in-out",(0,d.oB)({height:"*"}))],{optional:!0}),(0,d.IO)("li:leave",[(0,d.oB)({height:"*"}),(0,d.jt)("225ms ease-in-out",(0,d.oB)({height:0}))],{optional:!0})])])])]},changeDetection:0})}}},9418:(V,A,n)=>{n.d(A,{c:()=>k});var d=n(3179),e=n(4650);class k{static{this.\u0275fac=function(u){return new(u||k)}}static{this.\u0275mod=e.oAB({type:k})}static{this.\u0275inj=e.cJS({imports:[d.I]})}}},7615:(V,A,n)=>{n.d(A,{d:()=>E});var d=n(6421),e=n(9418),k=n(4650);class E{getPatchPath(u){switch(u.status){case d.v.Added:case d.v.Untracked:return u.newFilePath;case d.v.Conflicted:case d.v.Modified:case d.v.Renamed:return u.oldFilePath===u.newFilePath?u.newFilePath:`${u.oldFilePath} --\x3e ${u.newFilePath}`;case d.v.Deleted:return u.oldFilePath;default:throw new Error(`Don't know how to deal with patch status: ${d.v[u.status]}`)}}getPatchIcon(u){switch(u.status){case d.v.Added:case d.v.Untracked:return"add";case d.v.Conflicted:return"warning";case d.v.Modified:return"create";case d.v.Deleted:return"remove";case d.v.Renamed:return"swap_horiz";default:throw new Error(`Don't know how to deal with patch status: ${d.v[u.status]}`)}}getPatchIconColorClass(u){switch(u.status){case d.v.Added:case d.v.Untracked:return"green";case d.v.Conflicted:case d.v.Modified:return"orange";case d.v.Deleted:return"red";case d.v.Renamed:return"blue";default:throw new Error(`Don't know how to deal with patch status: ${d.v[u.status]}`)}}static{this.\u0275fac=function(y){return new(y||E)}}static{this.\u0275prov=k.Yz7({token:E,factory:E.\u0275fac,providedIn:e.c})}}},1815:(V,A,n)=>{n.d(A,{E:()=>F});var d=n(4080),e=n(1135),k=n(5698),E=n(2722),T=n(4004),u=n(8926),y=n(9967),I=n(4462),W=n(8310),x=n(2120),B=n(6966),c=n(4650),$=n(8184),Z=n(9867),L=n(6271),P=n(3394),v=n(6895),g=n(4859),O=n(7392),b=n(266),R=n(5773);function q(a,M){if(1&a){const p=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(p);const f=c.oxw(2);return c.KtG(f.openWithTerminal())}),c.TgZ(1,"mat-icon"),c._uU(2,"terminal"),c.qZA(),c._uU(3," Terminal "),c.qZA()}}function G(a,M){if(1&a){const p=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(p);const f=c.oxw(2);return c.KtG(f.openWithVsCode())}),c._UZ(1,"mat-icon",9),c._uU(2," Visual Studio Code "),c.qZA()}}function ee(a,M){if(1&a){const p=c.EpF();c.TgZ(0,"button",10),c.NdJ("click",function(){const l=c.CHM(p).$implicit,_=c.oxw(2);return c.KtG(_.openRemote(l.url))}),c._UZ(1,"mat-icon",11),c._uU(2),c.qZA()}if(2&a){const p=M.$implicit;c.Q6J("matTooltip",p.url),c.xp6(1),c.s9C("svgIcon",p.type),c.xp6(1),c.AsE(" ","bitbucket"===p.type?"Bitbucket":"github"===p.type?"GitHub":"gitlab"===p.type?"GitLab":"",": ",p.name," ")}}function j(a,M){if(1&a){const p=c.EpF();c.TgZ(0,"div",4)(1,"div",5),c._uU(2,"Open with..."),c.qZA(),c.TgZ(3,"button",6),c.NdJ("click",function(){c.CHM(p);const f=c.oxw();return c.KtG(f.openWithFileExplorer())}),c.TgZ(4,"mat-icon"),c._uU(5,"folder"),c.qZA(),c._uU(6),c.qZA(),c.YNc(7,q,4,0,"button",7),c.ALo(8,"async"),c.YNc(9,G,3,0,"button",7),c.ALo(10,"async"),c.YNc(11,ee,3,4,"button",8),c.ALo(12,"async"),c.qZA()}if(2&a){const p=c.oxw();c.xp6(6),c.hij(" ",p.folderText," "),c.xp6(1),c.Q6J("ngIf",c.lcZ(8,4,p.hasTerminal)),c.xp6(2),c.Q6J("ngIf",c.lcZ(10,6,p.hasVsCode)),c.xp6(2),c.Q6J("ngForOf",c.lcZ(12,8,p.remotes))}}class F extends((0,u.j)(y.A)){constructor(M,p,m,f,l){super(),this.overlay=M,this.viewContainerRef=p,this.store=m,this.filesApi=f,this.providerUrlMatcherService=l,this.menuOverlayRef=new e.X(null),this.folderText=I.V?"Finder":I.E?"File Explorer":"File Manager",this.openMenu=(_,C,w)=>{_.preventDefault(),_.stopPropagation(),this.closeMenu();const U=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(C).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(U),U.attach(new d.UE(w,this.viewContainerRef)),(0,W.t)(U,!1).pipe((0,k.q)(1),(0,E.R)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))},this.openWithFileExplorer=()=>{const _=this.store.selectSnapshot(B.E.selectedRepositoryPath);if(!_)throw new Error("Cannot open repository in file explorer if repository has no path.");this.filesApi.openFileWithShell(_).subscribe(),this.closeMenu()},this.openWithTerminal=()=>{const _=this.store.selectSnapshot(B.E.selectedRepositoryPath);if(!_)throw new Error("Cannot open repository in terminal if repository has no path.");this.filesApi.openTerminal(_).subscribe(),this.closeMenu()},this.openWithVsCode=()=>{const _=this.store.selectSnapshot(B.E.selectedRepositoryPath);if(!_)throw new Error("Cannot open repository in vscode if repository has no path.");this.filesApi.openVsCode(_).subscribe(),this.closeMenu()},this.openRemote=_=>{window.open(_),this.closeMenu()}}ngOnInit(){this.remotes=this.store.select(B.E.selectedRemotes).pipe((0,T.U)(M=>(M??[]).map(p=>{const m=this.providerUrlMatcherService.matchProvider(p.url);return m?[p,m]:null}).filter(x.$K).map(([p,m])=>({type:m.type,url:this.providerUrlMatcherService.getUrl(m),name:p.name})))),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}static{this.\u0275fac=function(p){return new(p||F)(c.Y36($.aV),c.Y36(c.s_b),c.Y36(Z.yh),c.Y36(L.k),c.Y36(P.d))}}static{this.\u0275cmp=c.Xpm({type:F,selectors:[["app-repository-actions-open-with"]],features:[c.qOj],decls:6,vars:0,consts:[["type","button","mat-stroked-button","","matTooltip","Open repository with...","appElementRef","",1,"item",3,"click"],["openWithMenuBtn","appElementRef"],[1,"launch-icon"],["openWithMenu",""],[1,"open-with-menu"],[1,"menu-header"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"matTooltip","click"],[3,"svgIcon"]],template:function(p,m){if(1&p){const f=c.EpF();c.TgZ(0,"button",0,1),c.NdJ("click",function(_){c.CHM(f);const C=c.MAs(1),w=c.MAs(5);return c.KtG(m.openMenu(_,C,w))}),c.TgZ(2,"mat-icon",2),c._uU(3,"launch"),c.qZA()(),c.YNc(4,j,13,10,"ng-template",null,3,c.W1O)}},dependencies:[v.sg,v.O5,g.lW,O.Hw,b.gM,R.F,v.Ov],styles:[".open-with-menu[_ngcontent-%COMP%]{background:#424242;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;max-height:calc(100vh - 48px);max-width:25vw;min-height:48px;min-width:112px;overflow-x:hidden;overflow-y:auto}.open-with-menu[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%], .open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;display:flex;font-family:MontserratVariable;font-size:16px;height:48px;line-height:48px;max-width:100%;outline:none;overflow:hidden;padding:0 16px;user-select:none;text-align:left;text-overflow:ellipsis;width:100%;white-space:nowrap;align-items:center}.open-with-menu[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]:first-child, .open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.open-with-menu[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]:last-child, .open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}.open-with-menu[_ngcontent-%COMP%]   .menu-header.bold[_ngcontent-%COMP%], .open-with-menu[_ngcontent-%COMP%]   .menu-item.bold[_ngcontent-%COMP%]{font-weight:700}.open-with-menu[_ngcontent-%COMP%]   .menu-header[disabled][_ngcontent-%COMP%], .open-with-menu[_ngcontent-%COMP%]   .menu-item[disabled][_ngcontent-%COMP%]{pointer-events:none;color:#ffffff4d}.open-with-menu[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:12px 16px 12px 0;vertical-align:middle;flex:0 0 auto}.open-with-menu[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]   .mat-icon.expand-icon[_ngcontent-%COMP%], .open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon.expand-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:0}.open-with-menu[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.open-with-menu[_ngcontent-%COMP%]   .menu-header[_ngcontent-%COMP%]{display:block;color:#90a4ae;border-bottom:1px solid rgba(255,255,255,.12);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{cursor:pointer}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#565656}.open-with-menu.sub-menu-1[_ngcontent-%COMP%]{background:#4a4a4a}.item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0})}}},98:(V,A,n)=>{n.d(A,{z:()=>Z});var d=n(2843),e=n(4004),k=n(262),E=n(2435),T=n(2120),u=n(8523),y=n(4889),I=n(1129),W=n(8724),x=n(9077),B=n(4650),c=n(9867),$=n(790);class Z{constructor(P,v){this.store=P,this.commitsApi=v,this.startEdit=(g,O)=>this.store.dispatch(new I.z0(g,{name:"Edit commits",detail:`from ${O}`,do:()=>this.store.dispatch(new I.LF(g,O))})),this.discardEdit=g=>this.store.dispatch(new I.z0(g,{name:"Discard commit edits",do:()=>this.commitsApi.discardCommitEditing(g)})),this.saveEdits=g=>this.store.dispatch(new I.z0(g,{name:"Save commit edits",do:()=>this.commitsApi.completeCommitEditing(g).pipe((0,u.C)(()=>this.store.dispatch(new y.Vu(g,[y.nh.commits,y.nh.currentBranchCommitId,y.nh.headCommitId,y.nh.mergeHeads,y.nh.merges,y.nh.references,y.nh.stagedChanges,y.nh.submodules,y.nh.unstagedChanges]))))})),this.editCommitDetails=(g,O,b)=>this.store.dispatch(new I.z0(g,{name:"Edit commit",detail:b,do:()=>this.commitsApi.editCommitDetails(g,O,b,this.getCommitter())})).pipe((0,e.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(g))?.state)),this.squashCommit=(g,O,b)=>this.store.dispatch(new I.z0(g,{name:"Squash commit",detail:`${O} ${b}`,do:()=>this.commitsApi.squashCommit(g,O,b,this.getCommitter()).pipe((0,k.K)(R=>E.BO.matches(R)?(0,d._)(()=>new T.ZR(R.message)):(0,d._)(()=>R)))})).pipe((0,e.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(g))?.state)),this.insertCommit=(g,O,b)=>this.store.dispatch(new I.z0(g,{name:"Insert commit",detail:`${O} ${b}`,do:()=>this.commitsApi.insertCommit(g,O,b,this.getCommitter()).pipe((0,k.K)(R=>E.BO.matches(R)?(0,d._)(()=>new T.ZR(R.message)):(0,d._)(()=>R)))})).pipe((0,e.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(g))?.state)),this.moveCommitChanges=(g,O,b,R)=>this.store.dispatch(new I.z0(g,{name:"Move commit changes",detail:`${O} ${b}`,do:()=>this.commitsApi.moveCommitChanges(g,O,b,R,this.getCommitter())})).pipe((0,e.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(g))?.state))}getCommitter(){const P=this.store.selectSnapshot(x.$.selectedProfile);return P&&P.name&&P.email?{name:P.name,email:P.email}:null}static{this.\u0275fac=function(v){return new(v||Z)(B.LFG(c.yh),B.LFG($.T))}}static{this.\u0275prov=B.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"})}}},4874:(V,A,n)=>{n.d(A,{p:()=>k});var d=n(2686),e=n(4650);class k{constructor(){this.parseReference=T=>{const u=k.referenceRegex.exec(T);if(!u)throw new Error(`Reference invalid: ${T}`);if("remotes"===u[1]){const y=k.remoteBranchRegex.exec(T);if(!y)throw new Error(`Remote reference invalid: ${T}`);return{branch:y[2],sourceName:y[1],sourceType:"remote"}}return"stash"===u[1]?{branch:"stash",sourceName:"stash",sourceType:"stash"}:{branch:u[2],sourceName:"heads"===u[1]?"local":"tag",sourceType:"heads"===u[1]?"local":"tag"}},this.getBranchTypeIcon=T=>{switch(T){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"archive";case"tag":return"label";default:throw new Error(`Unknown reference type: ${T}`)}}}static{this.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/}static{this.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/}calculateBranches(T,u){const y=(0,d.Z)(T.map(this.parseReference),({branch:I})=>I);return Object.entries(y).map(([I,W])=>({name:I,sources:W.map(x=>({name:x.sourceName,type:x.sourceType,icon:this.getBranchTypeIcon(x.sourceType)}))})).sort((I,W)=>{const x=I.sources.some(P=>"local"===P.type&&`refs/heads/${I.name}`===u),B=I.sources.some(P=>"local"===P.type&&`refs/heads/${W.name}`===u);if(x&&!B)return-1;if(!x&&B)return 1;const c=I.sources.some(P=>"local"===P.type),$=W.sources.some(P=>"local"===P.type);if(c&&!$)return-1;if(!c&&$)return 1;const Z=I.sources.some(P=>"remote"===P.type),L=W.sources.some(P=>"remote"===P.type);return Z&&!L?-1:!Z&&L?1:I.sources.length>W.sources.length?-1:I.sources.length<W.sources.length?1:I.name>W.name?-1:I.name<W.name?1:0}).slice(0,30)}static{this.\u0275fac=function(u){return new(u||k)}}static{this.\u0275prov=e.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"})}}},3989:(V,A,n)=>{n.d(A,{$:()=>j});var d=n(1134),e=n(539);const E=function k(F,a){return F<a},u=function T(F,a){return F&&F.length?(0,d.Z)(F,(0,e.Z)(a,2),E):void 0};var y=n(2382);var x=n(1256),B=n(3713),c=n(7711),$=n(9512),Z=n(7988),L=n(6932),P=n(3228);var b=n(7965),R=n(7118);const G=(0,b.Z)(function(F,a){return(0,R.Z)(F)?function g(F,a,M,p){var m=-1,f=c.Z,l=!0,_=F.length,C=[],w=a.length;if(!_)return C;M&&(a=(0,Z.Z)(a,(0,L.Z)(M))),p?(f=$.Z,l=!1):a.length>=200&&(f=P.Z,l=!1,a=new B.Z(a));e:for(;++m<_;){var U=F[m],K=null==M?U:M(U);if(U=p||0!==U?U:0,l&&K==K){for(var S=w;S--;)if(a[S]===K)continue e;C.push(U)}else f(a,K,p)||C.push(U)}return C}(F,a):[]});var ee=n(4650);class j{constructor(){this.isDashed=a=>"head"===a.id||a.id.startsWith("merge:")}static{this.xUnit=15}static{this.yUnit=28}static{this.xOffset=7.5}static{this.yOffset=13}isIndexInBounds(a,M,p){const m=a*j.yUnit;return m>=M&&m<p-j.yUnit}calculateVisible(a,M,p,m,f){return{commitDetails:a.slice(m,f),commitTrails:M.filter(l=>l.minYIndexWithMerges<=f&&l.maxYIndexWithMerges>=m),mergePaths:p.filter(l=>l.from.yIndex>=m&&l.to.some(_=>_.yIndex<=f))}}calculate(a,M,p,m,f,l,_){const C={};let w=[],U=[],K=[];const S=(a?1:0)+M.length;m.forEach((o,t)=>{C[o.id]={id:o.id,yIndex:t+S,commit:o}});const Y=[];M.forEach((o,t)=>{const s=`merge:${o.fromCommitId}:${o.toCommitId}`,i={id:s,message:o.message??`merge: from '${o.fromCommitId}' into '${o.toCommitId}'`,parentIds:[o.toCommitId,o.fromCommitId],time:0,references:[],authorEmail:"",authorName:""};Y.push(i),C[s]={id:s,yIndex:t+(a?1:0),commit:i}}),p.forEach(o=>{const t=C[o.id];!t||2!==t.commit.parentIds.length||(t.stash={index:o.index,workingDirCommitId:o.id,indexCommitId:t.commit.parentIds[1]})});const Q=a?{id:"head",message:"",parentIds:a.parentId?[a.parentId,...a.mergeHeads]:[...a.mergeHeads],time:0,references:[],authorEmail:"",authorName:""}:null;a&&(C.head={id:"head",yIndex:0,commit:Q});const h=Q?[Q,...Y,...m]:[...Y,...m];if(h.forEach(o=>{const t=C[o.id];t.trail||this.calculateTrail(t,C,w,U),!t.stash&&o.parentIds.length>1&&o.parentIds.slice(1).forEach(s=>{const i=C[s];if(i)if(i.mergeFrom)i.mergeFrom.to.push(t);else{const r={from:i,to:[t]};i.mergeFrom=r,K.push(r)}})}),({mergePaths:K,lanes:U}=this.calculateMergePaths(K,U,f,l)),this.calculateColors(w,_),a&&a.parentId&&C[a.parentId]){const o=w.find(t=>0===t.minYIndex);if(o){o.commits=o.commits.filter(s=>"head"!==s.id);const t=u(o.commits,s=>s.yIndex);o.minYIndex=t?.yIndex??0,o.minYIndexWithMerges=t?.yIndex??0,this.createUncommittedTrail(C.head,C[a.parentId],w,o.colorIndex,o.lane)}}return Y.forEach((o,t)=>{const s=w.find(i=>i.minYIndex===t+(a?1:0));if(s&&C[o.parentIds[0]]){if(s.commits=s.commits.filter(i=>i.id!==o.id),s.commits.length<=0)w=w.filter(i=>i!==s);else{const i=u(s.commits.filter(r=>"head"!==r.id&&!r.id.startsWith("merge:")),r=>r.yIndex);s.minYIndex=i?.yIndex??0,s.minYIndexWithMerges=i?.yIndex??0}this.createUncommittedTrail(C[o.id],C[o.parentIds[0]],w,s.colorIndex,s.lane)}}),p.forEach(o=>{const t=C[o.id];if(!t)return;const i=t.trail,r=C[t.commit.parentIds[0]];if(r){if(i.commits=i.commits.filter(D=>D.id!==o.id),i.commits.length<=0)w=w.filter(D=>D!==i);else{const D=u(i.commits,N=>N.yIndex);i.minYIndex=D?.yIndex??0,i.minYIndexWithMerges=D?.yIndex??0}this.createUncommittedTrail(t,r,w,i.colorIndex,i.lane)}}),{commitDetails:C,commitTrails:w,lanes:U,mergePaths:K,headCommit:Q,orderedCommits:h}}createUncommittedTrail(a,M,p,m,f){let l=M.yIndex;M.mergeFrom&&M.mergeFrom.to.length>0&&M.mergeFrom.to.some(C=>!this.isDashed(C))&&(l=Math.min(...M.mergeFrom.to.filter(C=>!this.isDashed(C)).map(({yIndex:C})=>C))+.25,l<a.yIndex&&(l=a.yIndex+.5),p.push({trailIndex:p.length,minYIndex:l,maxYIndex:M.yIndex,minYIndexWithMerges:l,maxYIndexWithMerges:M.yIndex,colorIndex:m,commits:[],isDashed:!1,lane:f}));const _={trailIndex:p.length,minYIndex:a.yIndex,maxYIndex:l,minYIndexWithMerges:a.yIndex,maxYIndexWithMerges:l,colorIndex:m,commits:[a],isDashed:!0,lane:f};return a.trail=_,p.push(_),_}calculateTrail(a,M,p,m){const f={trailIndex:p.length,minYIndex:a.yIndex,maxYIndex:a.yIndex,minYIndexWithMerges:a.yIndex,maxYIndexWithMerges:a.yIndex,colorIndex:null,commits:[],isDashed:!1};if(a.commit.parentIds.length<=0)a.trail=f,f.commits.push(a),f.maxYIndex=a.yIndex,f.maxYIndexWithMerges=a.yIndex;else{let _=a;for(;_&&!_.trail&&_.commit.parentIds.length>0;)_.trail=f,f.maxYIndex=_.yIndex,f.maxYIndexWithMerges=_.yIndex,f.commits.push(_),_=M[_.commit.parentIds[0]];_&&(f.maxYIndex=_.yIndex,f.maxYIndexWithMerges=_.yIndex,_.trail||(_.trail=f,f.commits.push(_)))}let l=m.find(_=>this.getLaneMaxYIndex(_)<f.minYIndex);return l||(l={xIndex:m.length,occupations:[]},m.push(l)),l.occupations.push({type:"commit-trail",minYIndex:f.minYIndex,maxYIndex:f.maxYIndex}),f.lane=l,p.push(f),f}calculateMergePaths(a,M,p,m){M=M.map(l=>({...l,occupations:l.occupations.filter(_=>"merge-path"!==_.type)})).filter(l=>l.occupations.length>0);const f=[...a];return a.forEach(l=>{const _=[],C=[];let w;l.to.forEach(h=>{l.from.trail.minYIndexWithMerges>h.yIndex&&(l.from.trail.minYIndexWithMerges=h.yIndex),l.from.trail.maxYIndexWithMerges<h.yIndex&&(l.from.trail.maxYIndexWithMerges=h.yIndex),h.trail.minYIndexWithMerges>l.from.yIndex&&(h.trail.minYIndexWithMerges=l.from.yIndex),h.trail.maxYIndexWithMerges<l.from.yIndex&&(h.trail.maxYIndexWithMerges=l.from.yIndex)});const U=l.from.trail.lane.xIndex,K=p(U);let S=[],Y=l.to;const Q=l.to.every(this.isDashed);if(l.from.trail.minYIndex<l.from.yIndex){const h=l.from.trail.commits.findIndex(t=>t.id===l.from.id),o=l.from.trail.commits[h-1];S=l.to.filter(t=>t.yIndex>o.yIndex),Y=l.to.filter(t=>t.yIndex<=o.yIndex),w=o.yIndex}else{_.push(`M ${K} ${m(l.from.yIndex)}`),_.push(`V ${m(l.from.yIndex-.5)}`),w=l.from.yIndex-1;const h=function I(F,a){return F&&F.length?(0,d.Z)(F,(0,e.Z)(a,2),y.Z):void 0}(Y,o=>o.yIndex);if(h&&h.yIndex===l.from.yIndex-1){Y=Y.filter(t=>t.id!==h.id);const o=`L ${p(h.trail.lane.xIndex)} ${m(h.yIndex)}`;this.isDashed(h)?C.push(o):_.push(o)}}if(Y.length>0){const h=Math.min(...Y.map(r=>r.yIndex)),o=M.filter(r=>!this.isLaneOccupied(r,h+1,w)),t=u(o,r=>[...Y,l.from].reduce((D,N)=>D+Math.abs(N.trail.lane.xIndex-r.xIndex),0))??{xIndex:M.length,occupations:[]};0===o.length&&M.push(t),t.occupations.push({type:"merge-path",minYIndex:h+1,maxYIndex:w});const s=Y.filter(this.isDashed),i=Y.filter(r=>!this.isDashed(r));if(_.push(...i.flatMap(r=>[`M ${p(t.xIndex)} ${m(r.yIndex+.5)}`,`L ${this.adjustForDashedLine(!1,t.xIndex,r.trail.lane.xIndex,r.yIndex+.5,r.yIndex,p,m)}`])),C.push(...s.flatMap(r=>[`M ${p(t.xIndex)} ${m(r.yIndex+.5)}`,`L ${this.adjustForDashedLine(!0,t.xIndex,r.trail.lane.xIndex,r.yIndex+.5,r.yIndex,p,m)}`])),Q)_.push(`M ${K} ${m(w+.5)}`,`L ${p(t.xIndex)} ${m(w+.25)}`,`V ${m(h+.5)}`);else{const r=Math.min(...i.map(D=>D.yIndex));_.push(`M ${K} ${m(w+.5)}`,`L ${p(t.xIndex)} ${m(w+.25)}`,`V ${m(r+.5)}`),C.push(`M ${K} ${m(r+.5)}`,`V ${m(h+.5)}`)}}_.push(...S.filter(h=>!this.isDashed(h)).flatMap(h=>[`M ${K} ${m(h.yIndex+.25)}`,`L ${this.adjustForDashedLine(!1,U,h.trail.lane.xIndex,h.yIndex+.25,h.yIndex,p,m)}`])),C.push(...S.filter(this.isDashed).flatMap(h=>[`M ${K} ${m(h.yIndex+.25)}`,`L ${this.adjustForDashedLine(!0,U,h.trail.lane.xIndex,h.yIndex+.25,h.yIndex,p,m)}`])),Q?(l.isDashed=!0,l.path=[..._,...C].join(" ")):(l.isDashed=!1,l.path=_.join(" "),C.length>0&&f.push({from:l.from,isDashed:!0,path:C.join(" "),to:l.to.filter(this.isDashed)}))}),{mergePaths:f,lanes:M}}calculateColors(a,M){const p=(0,x.Z)(0,M),m=[];a.forEach(f=>{const l=m.filter(C=>C.minYIndexWithMerges<=f.maxYIndexWithMerges&&C.maxYIndexWithMerges>=f.minYIndexWithMerges).map(C=>C.colorIndex),_=G(p,...l);f.colorIndex=_.length>0?_[0]:f.trailIndex%M,m.push(f)})}getLaneMaxYIndex(a){return a.occupations[a.occupations.length-1].maxYIndex}isLaneOccupied(a,M,p){return a.occupations.some(m=>m.minYIndex<=p&&m.maxYIndex>=M)}adjustForDashedLine(a,M,p,m,f,l,_){const w=a?m>f?.15:-.15:0;return`${l(p+(a?M>p?.3:-.3:0))} ${_(f+w)}`}static{this.\u0275fac=function(M){return new(M||j)}}static{this.\u0275prov=ee.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"})}}},2960:(V,A,n)=>{n.d(A,{i:()=>Q});var d=n(655),e=n(4650),k=n(9867),E=n(1135),T=n(8926),u=n(9967),y=n(9077),I=n(9578),W=n(811),x=n(6895),B=n(7392),c=n(266),$=n(4883),Z=n(6377),L=n(6421),P=n(2771),v=n(4462),g=n(7615),O=n(6709),b=n(9131);function R(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"mat-checkbox",7),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().$implicit,D=e.oxw();return e.KtG(D.checkedChanged.next([r,i.checked]))}),e.qZA()}if(2&h){const t=e.oxw().$implicit,s=e.oxw();e.Q6J("checked",s.isChecked(t))}}function q(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"li",3),e.NdJ("contextmenu",function(i){const D=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.contextMenuOpened.next([D,i]))}),e.TgZ(1,"mat-icon",4),e._uU(2),e.qZA(),e.YNc(3,R,1,1,"mat-checkbox",5),e.TgZ(4,"app-condensed-path",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit,D=e.oxw();return e.KtG(D.selectedChanged.next(r))}),e.qZA()()}if(2&h){const t=o.$implicit,s=e.oxw();e.ekj("selected",s.isSelected(t))("checked",s.isChecked(t)),e.xp6(1),e.Q6J("ngClass",s.getPatchIconColorClass(t)),e.xp6(1),e.Oqu(s.getPatchIcon(t)),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("path",s.getPatchPath(t))}}class G extends((0,T.j)(u.A,P.P)){constructor(o){super(),this.commitDetailService=o,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.keyPressDisabled=!1}ngOnChanges(o){o.selected&&(this.keyPressDisabled=!1),o.patches&&(this.orderedPatches=(0,Z.Z)(this.patches,[t=>t.status===L.v.Conflicted,t=>(t.oldFilePath??t.newFilePath??"").toLowerCase()],["desc","asc"]))}trackByPatch(o,t){return`${t.oldFilePath}|${t.newFilePath}|${t.status}`}getPatchPath(o){return this.commitDetailService.getPatchPath(o)}getPatchIcon(o){return this.commitDetailService.getPatchIcon(o)}getPatchIconColorClass(o){return this.commitDetailService.getPatchIconColorClass(o)}isChecked(o){return this.checked?.some(({oldFilePath:t,newFilePath:s})=>t===o.oldFilePath&&s===o.newFilePath)}isSelected(o){return o.oldFilePath===this.selected?.oldFilePath&&o.newFilePath===this.selected.newFilePath}keyPressed(o,t){if(this.keyPressDisabled)return;o.preventDefault();const s=this.selected,i=t.findIndex(({oldFilePath:D,newFilePath:N})=>D===s?.oldFilePath&&N===s?.newFilePath);let r=null;switch(o.key){case"ArrowUp":if(!(v.V?o.metaKey:o.ctrlKey)){i>0&&(r=i-1);break}case"Home":r=0;break;case"ArrowDown":if(!(v.V?o.metaKey:o.ctrlKey)){i<t.length-1&&(r=i+1);break}case"End":r=t.length-1;break;case"Escape":i>=0&&(r=i)}if(null!==r){this.keyPressDisabled=!0,this.selectedChanged.next(t[r]);const D=this.viewports.first,N=D.measureScrollOffset("top"),H=N+D.getViewportSize(),z=22*r;(z<N||z>=H)&&D.scrollToIndex(r)}}static{this.\u0275fac=function(t){return new(t||G)(e.Y36(g.d))}}static{this.\u0275cmp=e.Xpm({type:G,selectors:[["app-patch-list"]],viewQuery:function(t,s){if(1&t&&e.Gf($.N7,5),2&t){let i;e.iGM(i=e.CRH())&&(s.viewports=i)}},inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj,e.TTD],decls:3,vars:7,consts:[["tabindex","0",1,"item-list-container",3,"itemSize","maxBufferPx","minBufferPx","keydown"],[1,"patch-list"],[3,"selected","checked","contextmenu",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"contextmenu"],["inline","",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"name",3,"path","click"],[3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0),e.NdJ("keydown",function(r){return s.keyPressed(r,s.patches)}),e.TgZ(1,"ul",1),e.YNc(2,q,5,8,"li",2),e.qZA()()),2&t&&(e.Q6J("itemSize",22)("maxBufferPx",400)("minBufferPx",200),e.xp6(1),e.ekj("checkboxes",s.checked),e.xp6(1),e.Q6J("cdkVirtualForOf",s.orderedPatches)("cdkVirtualForTrackBy",s.trackByPatch))},dependencies:[O.oG,$.xd,$.x0,$.N7,x.mk,x.O5,B.Hw,b.j],styles:["[_nghost-%COMP%]{display:contents}.item-list-container[_ngcontent-%COMP%]{margin-left:-16px;margin-right:-16px;height:100%;contain:content;outline:none}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{position:relative}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;height:22px;line-height:22px;padding-left:16px;padding-right:16px;position:relative;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background-color:#616161}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px;--mdc-checkbox-ripple-size: 28px;--mdc-checkbox-touch-target-size: 22px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px;margin-left:-2px;margin-right:2px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%]{color:#ef5350}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%]{color:#4caf50}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:calc(100% - 22px)}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:none}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%]{display:block}"],changeDetection:0})}}var ee=n(2686),j=n(9841),F=n(9646),a=n(4004),M=n(4782),p=n(6725),m=n(3448),f=n(1123);function l(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"mat-checkbox",8),e.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){e.CHM(t);const r=e.oxw().$implicit,D=e.oxw();return e.KtG(D.clickNodeCheckbox(r,i.checked))}),e.qZA()}if(2&h){const t=e.oxw().$implicit;e.Q6J("checked","all"===t.checked)("indeterminate","some"===t.checked)}}function _(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(i){const D=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.toggleNodeExpanded(i,D))}),e.TgZ(1,"mat-icon",4),e._uU(2,"folder"),e.qZA(),e.YNc(3,l,1,2,"mat-checkbox",5),e.TgZ(4,"span",6),e._uU(5),e.qZA(),e.TgZ(6,"mat-icon",7),e._uU(7),e.qZA()()}if(2&h){const t=o.$implicit,s=e.oxw();e.ekj("checked","all"===t.checked),e.xp6(3),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("matTooltip",t.id),e.xp6(1),e.Oqu(t.segment),e.xp6(2),e.Oqu(t.expanded?"expand_less":"expand_more")}}function C(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"mat-checkbox",13),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().$implicit,D=e.oxw();return e.KtG(D.checkedChanged.next([r.patch,i.checked]))}),e.qZA()}if(2&h){const t=e.oxw().$implicit;e.Q6J("checked",t.checked)}}function w(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("contextmenu",function(i){const D=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.contextMenuOpened.next([D.patch,i]))}),e.TgZ(1,"mat-icon",10),e._uU(2),e.qZA(),e.YNc(3,C,1,1,"mat-checkbox",11),e.TgZ(4,"span",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,D=e.oxw();return e.KtG(D.selectedChanged.next(r.patch))}),e._uU(5),e.qZA()()}if(2&h){const t=o.$implicit,s=e.oxw();let i;e.ekj("checked",t.checked)("selected",s.isSelected(t.patch)),e.xp6(1),e.Q6J("ngClass",s.getPatchIconColorClass(t.patch)),e.xp6(1),e.Oqu(s.getPatchIcon(t.patch)),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("matTooltip",null!==(i=s.getPatchPath(t.patch))&&void 0!==i?i:""),e.xp6(1),e.Oqu(t.segment)}}class U extends((0,T.j)(u.A)){constructor(o){super(),this.commitDetailService=o,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.collapsedNodeIds=new E.X(new Set),this.toggleNodeExpanded=(t,s)=>{t.preventDefault(),t.stopPropagation();const i=new Set(this.collapsedNodeIds.value);i.has(s.id)?(i.delete(s.id),this.collapsedNodeIds.next(i)):(i.add(s.id),this.collapsedNodeIds.next(i))}}ngOnInit(){this.tree=(0,j.a)([this.patches,this.checked??(0,F.of)(null),this.collapsedNodeIds]).pipe((0,a.U)(([o,t,s])=>{const i=o.map(r=>({patch:r,segments:(r.newFilePath??r.oldFilePath??"").split("/")}));return this.buildTree(i,"",0,t,s)}),(0,M.d)(1))}getPatchPath(o){return this.commitDetailService.getPatchPath(o)}getPatchIcon(o){return this.commitDetailService.getPatchIcon(o)}getPatchIconColorClass(o){return this.commitDetailService.getPatchIconColorClass(o)}isSelected(o){return o.oldFilePath===this.selected?.oldFilePath&&o.newFilePath===this.selected.newFilePath}clickNodeCheckbox(o,t){const s=i=>i.reduce((r,D)=>[...r,..."patch"in D?[D]:s(D.children)],[]);for(const i of s(o.children))this.checkedChanged.next([i.patch,t])}buildTree(o,t,s,i,r){return Object.entries((0,ee.Z)(o,({segments:H})=>H[0])).sort(([H],[z])=>H.localeCompare(z,void 0,{numeric:!0})).flatMap(([H,z])=>{const ce=`${t}${H}/`,ae=`${t}${H}`,se=z.filter(({segments:J})=>J.length>1),re=i?z.every(({patch:J})=>i.some(({oldFilePath:X,newFilePath:ie})=>X===J.oldFilePath&&ie===J.newFilePath))?"all":z.some(({patch:J})=>i.some(({oldFilePath:X,newFilePath:ie})=>X===J.oldFilePath&&ie===J.newFilePath))?"some":"none":"none",te=se.length>0?{id:ce,depth:s,expanded:!r.has(ce),children:this.buildTree(se.map(({patch:J,segments:X})=>({patch:J,segments:X.slice(1)})),ce,s+1,i,r),segment:H,checked:re}:null,ne=z.find(({segments:J})=>J.length<=1),oe=ne?{id:ae,depth:s,segment:H,patch:ne.patch,checked:i?.some(({oldFilePath:J,newFilePath:X})=>J===ne.patch.oldFilePath&&X===ne.patch.newFilePath)??!1}:null;return oe&&te?[oe,te]:te?[te]:oe?[oe]:[]})}static{this.\u0275fac=function(t){return new(t||U)(e.Y36(g.d))}}static{this.\u0275cmp=e.Xpm({type:U,selectors:[["app-patch-tree"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj],decls:3,vars:4,consts:[[3,"tree","itemSize"],["class","node-item",3,"checked","click",4,"appVirtualTreeNode"],["class","leaf-item",3,"checked","selected","contextmenu",4,"appVirtualTreeLeafNode"],[1,"node-item",3,"click"],["inline","",1,"node-icon"],[3,"checked","indeterminate","click","change",4,"ngIf"],[1,"text",3,"matTooltip"],[1,"expand-icon"],[3,"checked","indeterminate","click","change"],[1,"leaf-item",3,"contextmenu"],["inline","",1,"node-icon",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"text",3,"matTooltip","click"],[3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"app-virtual-tree",0),e.YNc(1,_,8,6,"div",1),e.YNc(2,w,6,9,"div",2),e.qZA()),2&t&&(e.ekj("checkboxes",!!s.checked),e.Q6J("tree",s.tree)("itemSize",22))},dependencies:[O.oG,x.mk,x.O5,B.Hw,c.gM,p.L,m.I,f.J],styles:["[_nghost-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport{contain:content;scrollbar-gutter:stable;margin-left:-16px;margin-right:-16px}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper{width:100%}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper>ul{overflow-x:auto;overflow-y:hidden}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-spacer{position:relative}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected){background-color:#616161}.node-item[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]{margin-left:16px;display:flex;justify-content:space-between;cursor:pointer;line-height:22px;height:22px;user-select:none;align-items:center;min-width:200px}.node-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px;margin-left:-2px;margin-right:2px}.node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%]{color:#ef5350}.node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%]{color:#4caf50}.node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px;--mdc-checkbox-ripple-size: 28px;--mdc-checkbox-touch-target-size: 22px}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%]{font-size:16px}.node-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.node-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%]{flex:0 0 auto;color:#ffffffb3;line-height:22px}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .node-icon[_ngcontent-%COMP%]{display:none}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .checkbox-button[_ngcontent-%COMP%]{display:block}"],changeDetection:0})}}function K(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"app-patch-list",6),e.NdJ("checkedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkedChanged.next(i))})("selectedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedChanged.next(i))})("contextMenuOpened",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.contextMenuOpened.next(i))}),e.ALo(1,"async"),e.qZA()}if(2&h){const t=e.oxw(2);e.Q6J("patches",t.patches)("checked",e.lcZ(1,3,t.checked))("selected",t.selected)}}function S(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"app-patch-tree",6),e.NdJ("checkedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkedChanged.next(i))})("selectedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedChanged.next(i))})("contextMenuOpened",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.contextMenuOpened.next(i))}),e.qZA()}if(2&h){const t=e.oxw(2);e.Q6J("patches",t.patches$)("checked",t.checked)("selected",t.selected)}}function Y(h,o){if(1&h){const t=e.EpF();e.ynx(0),e.TgZ(1,"header")(2,"mat-button-toggle-group",1),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.changePatchView(i.value))}),e.TgZ(3,"mat-button-toggle",2)(4,"mat-icon"),e._uU(5,"list"),e.qZA()(),e.TgZ(6,"mat-button-toggle",3),e._UZ(7,"mat-icon",4),e.qZA()()(),e.YNc(8,K,2,5,"app-patch-list",5),e.YNc(9,S,1,3,"app-patch-tree",5),e.BQk()}if(2&h){const t=o.ngIf;e.xp6(2),e.Q6J("value",t),e.xp6(6),e.Q6J("ngIf","list"===t),e.xp6(1),e.Q6J("ngIf","tree"===t)}}let Q=(()=>{class h extends((0,T.j)(u.A)){constructor(t){super(),this.store=t,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.patches$=new E.X([])}ngOnChanges(t){t.patches&&this.patches$.next(this.patches)}changePatchView(t){this.store.dispatch(new I.eh(t))}static{this.\u0275fac=function(s){return new(s||h)(e.Y36(k.yh))}}static{this.\u0275cmp=e.Xpm({type:h,selectors:[["app-patches-view"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj,e.TTD],decls:2,vars:3,consts:[[4,"ngIf"],[3,"value","change"],["value","list","matTooltip","List View"],["value","tree","matTooltip","Tree View"],["svgIcon","file-tree"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened",4,"ngIf"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened"]],template:function(s,i){1&s&&(e.YNc(0,Y,10,3,"ng-container",0),e.ALo(1,"async")),2&s&&e.Q6J("ngIf",e.lcZ(1,1,i.view))},dependencies:[W.A9,W.Yi,x.O5,B.Hw,c.gM,G,U,x.Ov],styles:["[_nghost-%COMP%]{display:contents}header[_ngcontent-%COMP%]{flex:0 0 auto;text-align:center;margin-bottom:-4px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{height:30px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{font-size:0}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:28px;padding:0 5px}"],changeDetection:0})}}return(0,d.gn)([(0,k.Ph)(y.$.patchView)],h.prototype,"view",void 0),h})()},6248:(V,A,n)=>{n.d(A,{Z:()=>I});var d=n(811),e=n(3546),k=n(6709),E=n(284),T=n(3179),u=n(9418),y=n(4650);class I{static{this.\u0275fac=function(B){return new(B||I)}}static{this.\u0275mod=y.oAB({type:I})}static{this.\u0275inj=y.cJS({imports:[d.vV,e.QW,k.p9,E.c,T.I,u.c]})}}},2686:(V,A,n)=>{n.d(A,{Z:()=>Z});var d=n(3496);const k=function e(L,P,v,g){for(var O=-1,b=null==L?0:L.length;++O<b;){var R=L[O];P(g,R,v(R),L)}return g};var E=n(3693);const u=function T(L,P,v,g){return(0,E.Z)(L,function(O,b,R){P(g,O,v(O),R)}),g};var y=n(539),I=n(4177),c=Object.prototype.hasOwnProperty;const Z=function W(L,P){return function(v,g){var O=(0,I.Z)(v)?k:u,b=P?P():{};return O(v,L,(0,y.Z)(g,2),b)}}(function(L,P,v){c.call(L,v)?L[v].push(P):(0,d.Z)(L,v,[P])})},6377:(V,A,n)=>{n.d(A,{Z:()=>E});var d=n(5944),e=n(4177);const E=function k(T,u,y,I){return null==T?[]:((0,e.Z)(u)||(u=null==u?[]:[u]),(0,e.Z)(y=I?void 0:y)||(y=null==y?[]:[y]),(0,d.Z)(T,u,y))}}}]);