"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[24],{9664:(B,v,e)=>{e.d(v,{X:()=>M});var s=e(4438);let M=(()=>{class p extends s.aKT{constructor(h){super(h.nativeElement)}static{this.\u0275fac=function(m){return new(m||p)(s.rXU(s.aKT))}}static{this.\u0275dir=s.FsC({type:p,selectors:[["","appElementRef",""]],exportAs:["appElementRef"],features:[s.Vt3]})}}return p})()},1307:(B,v,e)=>{e.d(v,{P:()=>r});var s=e(9630),M=e(4438),p=e(2021);let r=(()=>{class h{constructor(i){this.baseApi=i}getRelativePath(i,l){return this.baseApi.single(s.x.files.getRelativePath,i,l)}getResolvedPath(i,l){return this.baseApi.single(s.x.files.getResolvedPath,i,l)}getFileContents(i){return this.baseApi.single(s.x.files.getFileContents,i)}openFileDialog(i){return this.baseApi.single(s.x.files.openFileDialog,i)}openFolderDialog(i,l){return this.baseApi.single(s.x.files.openFolderDialog,i,l)}openFileWithShell(i){return this.baseApi.single(s.x.files.openFileWithShell,i)}hasTerminal(){return this.baseApi.single(s.x.files.hasTerminal)}openTerminal(i){return this.baseApi.single(s.x.files.openTerminal,i)}hasVsCode(){return this.baseApi.single(s.x.files.hasVsCode)}openVsCode(i){return this.baseApi.single(s.x.files.openVsCode,i)}static{this.\u0275fac=function(l){return new(l||h)(M.KVO(p.v))}}static{this.\u0275prov=M.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},9551:(B,v,e)=>{e.d(v,{_:()=>X});var s=e(6939),M=e(4412),p=e(6697),r=e(6977),h=e(6354),m=e(3130),i=e(949),l=e(2930),_=e(4315),E=e(319),f=e(877),c=e(4548),t=e(4438),g=e(6969),W=e(9843),I=e(1307),U=e(3382),O=e(177),A=e(8834),n=e(9213),D=e(4823),C=e(9664),o=e(1751);function R(d,L){if(1&d){const a=t.RV6();t.j41(0,"button",6),t.bIt("click",function(){t.eBV(a);const u=t.XpG(2);return t.Njj(u.openWithTerminal())}),t.j41(1,"mat-icon"),t.EFF(2,"terminal"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&d&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"Terminal")," "))}function $(d,L){if(1&d){const a=t.RV6();t.j41(0,"button",6),t.bIt("click",function(){t.eBV(a);const u=t.XpG(2);return t.Njj(u.openWithVsCode())}),t.nrm(1,"mat-icon",9),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&d&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"Visual Studio Code")," "))}function j(d,L){if(1&d){const a=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){const u=t.eBV(a).$implicit,K=t.XpG(2);return t.Njj(K.openRemote(u.url))}),t.nrm(1,"mat-icon",11),t.EFF(2),t.nI1(3,"translate"),t.nI1(4,"translate"),t.nI1(5,"translate"),t.k0s()}if(2&d){const a=L.$implicit;t.Y8G("matTooltip",a.url),t.R7$(),t.FS9("svgIcon",a.type),t.R7$(),t.Lme(" ","bitbucket"===a.type?t.bMT(3,4,"Bitbucket"):"github"===a.type?t.bMT(4,6,"GitHub"):"gitlab"===a.type?t.bMT(5,8,"GitLab"):"",": ",a.name," ")}}function V(d,L){if(1&d){const a=t.RV6();t.j41(0,"div",4)(1,"div",5),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",6),t.bIt("click",function(){t.eBV(a);const u=t.XpG();return t.Njj(u.openWithFileExplorer())}),t.j41(5,"mat-icon"),t.EFF(6,"folder"),t.k0s(),t.EFF(7),t.k0s(),t.DNE(8,R,5,3,"button",7),t.nI1(9,"async"),t.DNE(10,$,4,3,"button",7),t.nI1(11,"async"),t.DNE(12,j,6,10,"button",8),t.nI1(13,"async"),t.k0s()}if(2&d){const a=t.XpG();t.R7$(2),t.JRh(t.bMT(3,5,"Open with...")),t.R7$(5),t.SpI(" ",a.folderText," "),t.R7$(),t.Y8G("ngIf",t.bMT(9,7,a.hasTerminal)),t.R7$(2),t.Y8G("ngIf",t.bMT(11,9,a.hasVsCode)),t.R7$(2),t.Y8G("ngForOf",t.bMT(13,11,a.remotes))}}let X=(()=>{class d extends((0,m.c)(i.N)){constructor(a,T,u,K,b){super(),this.overlay=a,this.viewContainerRef=T,this.store=u,this.filesApi=K,this.providerUrlMatcherService=b,this.menuOverlayRef=new M.t(null),this.folderText=l.c?"Finder":l.u?"File Explorer":"File Manager",this.openMenu=(P,y,x)=>{P.preventDefault(),P.stopPropagation(),this.closeMenu();const F=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(y).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(F),F.attach(new s.VA(x,this.viewContainerRef)),(0,_.p)(F,!1).pipe((0,p.s)(1),(0,r.Q)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))},this.openWithFileExplorer=()=>{const P=this.store.selectSnapshot(f.s.selectedRepositoryPath);if(!P)throw new c.Jf;this.filesApi.openFileWithShell(P).subscribe(),this.closeMenu()},this.openWithTerminal=()=>{const P=this.store.selectSnapshot(f.s.selectedRepositoryPath);if(!P)throw new c.Jf;this.filesApi.openTerminal(P).subscribe(),this.closeMenu()},this.openWithVsCode=()=>{const P=this.store.selectSnapshot(f.s.selectedRepositoryPath);if(!P)throw new c.Jf;this.filesApi.openVsCode(P).subscribe(),this.closeMenu()},this.openRemote=P=>{window.open(P),this.closeMenu()}}ngOnInit(){this.remotes=this.store.select(f.s.selectedRemotes).pipe((0,h.T)(a=>(a??[]).map(T=>{const u=this.providerUrlMatcherService.matchProvider(T.url);return u?[T,u]:null}).filter(E.O9).map(([T,u])=>({type:u.type,url:this.providerUrlMatcherService.getUrl(u),name:T.name})))),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}static{this.\u0275fac=function(T){return new(T||d)(t.rXU(g.hJ),t.rXU(t.c1b),t.rXU(W.il),t.rXU(I.P),t.rXU(U.y))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["app-repository-actions-open-with"]],features:[t.Vt3],decls:7,vars:3,consts:[["openWithMenuBtn","appElementRef"],["openWithMenu",""],["type","button","mat-stroked-button","","appElementRef","",1,"item",3,"click","matTooltip"],[1,"launch-icon"],[1,"menu-panel"],[1,"menu-header"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"click","matTooltip"],[3,"svgIcon"]],template:function(T,u){if(1&T){const K=t.RV6();t.j41(0,"button",2,0),t.nI1(2,"translate"),t.bIt("click",function(P){t.eBV(K);const y=t.sdS(1),x=t.sdS(6);return t.Njj(u.openMenu(P,y,x))}),t.j41(3,"mat-icon",3),t.EFF(4,"launch"),t.k0s()(),t.DNE(5,V,14,13,"ng-template",null,1,t.C5r)}2&T&&t.Y8G("matTooltip",t.bMT(2,1,"Open repository with..."))},dependencies:[O.Sq,O.bT,A.$z,n.An,D.oV,C.X,O.Jj,o.D],styles:[".item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0})}}return d})()},538:(B,v,e)=>{e.d(v,{P:()=>W});var s=e(8810),M=e(9437),p=e(6354),r=e(4548),h=e(8672),m=e(319),i=e(2570),l=e(2039),_=e(7216),E=e(2158),f=e(5012),c=e(4438),t=e(9843),g=e(986);let W=(()=>{class I{constructor(O,A){this.store=O,this.commitsApi=A,this.startEdit=(n,D)=>this.store.dispatch(new _.Wi(n,{name:"Edit commits",detail:(0,h.Tl)("from _commit_",{commitId:D}),do:()=>this.store.dispatch(new _.iM(n,D))})),this.discardEdit=n=>this.store.dispatch(new _.Wi(n,{name:"Discard commit edits",do:()=>this.commitsApi.discardCommitEditing(n)})),this.saveEdits=n=>this.store.dispatch(new _.Wi(n,{name:"Save commit edits",do:()=>this.commitsApi.completeCommitEditing(n).pipe((0,i.P)(()=>this.store.dispatch(new l.cX(n,[l.iK.commits,l.iK.currentBranchCommitId,l.iK.headCommitId,l.iK.mergeHeads,l.iK.merges,l.iK.references,l.iK.stagedChanges,l.iK.submodules,l.iK.unstagedChanges]))))})),this.editCommitDetails=(n,D,C)=>this.store.dispatch(new _.Wi(n,{name:"Edit commit",detail:C,do:()=>this.commitsApi.editCommitDetails(n,D,C,this.getCommitter()).pipe((0,M.W)(o=>r.Q1.matches(o)?(0,s.$)(()=>new m.XR(o)):(0,s.$)(()=>o)))})).pipe((0,p.T)(()=>this.store.selectSnapshot(E.k.mostRecentActionState(n)))),this.squashCommit=(n,D,C)=>this.store.dispatch(new _.Wi(n,{name:"Squash commit",detail:(0,h.Tl)("_commit_ up/down",{commitId:D,isUpwards:"up"===C}),do:()=>this.commitsApi.squashCommit(n,D,C,this.getCommitter()).pipe((0,M.W)(o=>r.mI.matches(o)||r.Rt.matches(o)||r.r7.matches(o)||r.TN.matches(o)||r.RM.matches(o)||r.Q1.matches(o)?(0,s.$)(()=>new m.XR(o)):(0,s.$)(()=>o)))})).pipe((0,p.T)(()=>this.store.selectSnapshot(E.k.mostRecentActionState(n)))),this.insertCommit=(n,D,C)=>this.store.dispatch(new _.Wi(n,{name:"Insert commit",detail:(0,h.Tl)("above/below _commit_",{commitId:D,isAbove:"above"===C}),do:()=>this.commitsApi.insertCommit(n,D,C,this.getCommitter()).pipe((0,M.W)(o=>r.Q1.matches(o)?(0,s.$)(()=>new m.XR(o)):(0,s.$)(()=>o)))})).pipe((0,p.T)(()=>this.store.selectSnapshot(E.k.mostRecentActionState(n)))),this.moveCommitChanges=(n,D,C,o)=>this.store.dispatch(new _.Wi(n,{name:"Move commit changes",detail:(0,h.Tl)("_commit_ up/down",{commitId:D,isUpwards:"up"===C}),do:()=>this.commitsApi.moveCommitChanges(n,D,C,o,this.getCommitter()).pipe((0,M.W)(R=>r.Q1.matches(R)||r.PB.matches(R)||r.G7.matches(R)||r.u7.matches(R)||r.wP.matches(R)||r.QI.matches(R)?(0,s.$)(()=>new m.XR(R)):(0,s.$)(()=>R)))})).pipe((0,p.T)(()=>this.store.selectSnapshot(E.k.mostRecentActionState(n))))}getCommitter(){const O=this.store.selectSnapshot(f.d.selectedProfile);return O&&O.name&&O.email?{name:O.name,email:O.email}:null}static{this.\u0275fac=function(A){return new(A||I)(c.KVO(t.il),c.KVO(g.m))}}static{this.\u0275prov=c.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})()},2489:(B,v,e)=>{e.d(v,{A:()=>l});var s=e(5351),M=e(2102),p=e(9042),r=e(9183),h=e(2798),m=e(1117),i=e(4438);let l=(()=>{class _{static{this.\u0275fac=function(c){return new(c||_)}}static{this.\u0275mod=i.$C({type:_})}static{this.\u0275inj=i.G2t({imports:[s.hM,M.RG,p.fS,r.D6,h.Ve,m.U]})}}return _})()},8461:(B,v,e)=>{e.d(v,{Q:()=>m});var s=e(180),M=e(4548),p=e(8672),r=e(319),h=e(4438);let m=(()=>{class i{constructor(){this.parseReference=_=>{const E=i.referenceRegex.exec(_);if(!E)return null;if("remotes"===E[1]){const f=i.remoteBranchRegex.exec(_);if(!f)throw new M.k6(_);return{branch:f[2]??"",sourceName:f[1]??"",sourceType:"remote"}}return"stash"===E[1]?{branch:(0,p.Tl)("stash"),sourceName:(0,p.Tl)("stash"),sourceType:"stash"}:{branch:E[2],sourceName:(0,p.Tl)("heads"===E[1]?"local":"tag"),sourceType:"heads"===E[1]?"local":"tag"}},this.getBranchTypeIcon=_=>{switch(_){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"archive";case"tag":return"label"}}}static{this.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/}static{this.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/}calculateBranches(_,E){const f=(0,s.A)(_.map(this.parseReference).filter(r.O9),({branch:c})=>c);return Object.entries(f).map(([c,t])=>({name:c,sources:t.map(g=>({name:g.sourceName,type:g.sourceType,icon:this.getBranchTypeIcon(g.sourceType)}))})).sort((c,t)=>{const g=c.sources.some(n=>"local"===n.type&&`refs/heads/${c.name}`===E),W=c.sources.some(n=>"local"===n.type&&`refs/heads/${t.name}`===E);if(g&&!W)return-1;if(!g&&W)return 1;const I=c.sources.some(n=>"local"===n.type),U=t.sources.some(n=>"local"===n.type);if(I&&!U)return-1;if(!I&&U)return 1;const O=c.sources.some(n=>"remote"===n.type),A=t.sources.some(n=>"remote"===n.type);return O&&!A?-1:!O&&A?1:c.sources.length>t.sources.length?-1:c.sources.length<t.sources.length?1:c.name>t.name?-1:c.name<t.name?1:0}).slice(0,30)}static{this.\u0275fac=function(E){return new(E||i)}}static{this.\u0275prov=h.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}}]);