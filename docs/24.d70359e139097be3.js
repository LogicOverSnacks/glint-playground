"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[24],{9664:(B,I,e)=>{e.d(I,{X:()=>D});var s=e(4438);let D=(()=>{class p extends s.aKT{constructor(h){super(h.nativeElement)}static{this.\u0275fac=function(m){return new(m||p)(s.rXU(s.aKT))}}static{this.\u0275dir=s.FsC({type:p,selectors:[["","appElementRef",""]],exportAs:["appElementRef"],features:[s.Vt3]})}}return p})()},1307:(B,I,e)=>{e.d(I,{P:()=>r});var s=e(9630),D=e(4438),p=e(2021);let r=(()=>{class h{constructor(n){this.baseApi=n}getRelativePath(n,c){return this.baseApi.single(s.x.files.getRelativePath,n,c)}getResolvedPath(n,c){return this.baseApi.single(s.x.files.getResolvedPath,n,c)}getFileContents(n){return this.baseApi.single(s.x.files.getFileContents,n)}openFileDialog(n){return this.baseApi.single(s.x.files.openFileDialog,n)}openFolderDialog(n,c){return this.baseApi.single(s.x.files.openFolderDialog,n,c)}openFileWithShell(n){return this.baseApi.single(s.x.files.openFileWithShell,n)}hasTerminal(){return this.baseApi.single(s.x.files.hasTerminal)}openTerminal(n){return this.baseApi.single(s.x.files.openTerminal,n)}hasVsCode(){return this.baseApi.single(s.x.files.hasVsCode)}openVsCode(n){return this.baseApi.single(s.x.files.openVsCode,n)}static{this.\u0275fac=function(c){return new(c||h)(D.KVO(p.v))}}static{this.\u0275prov=D.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},9551:(B,I,e)=>{e.d(I,{_:()=>X});var s=e(6939),D=e(4412),p=e(6697),r=e(6977),h=e(6354),m=e(3130),n=e(949),c=e(2930),l=e(4315),E=e(319),g=e(877),A=e(4548),t=e(4438),d=e(6969),v=e(9843),C=e(1307),U=e(3382),R=e(177),W=e(8834),i=e(9213),u=e(4823),o=e(9664),a=e(1751);function T(O,y){if(1&O){const _=t.RV6();t.j41(0,"button",6),t.bIt("click",function(){t.eBV(_);const M=t.XpG(2);return t.Njj(M.openWithTerminal())}),t.j41(1,"mat-icon"),t.EFF(2,"terminal"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&O&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"Terminal")," "))}function $(O,y){if(1&O){const _=t.RV6();t.j41(0,"button",6),t.bIt("click",function(){t.eBV(_);const M=t.XpG(2);return t.Njj(M.openWithVsCode())}),t.nrm(1,"mat-icon",9),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&O&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"Visual Studio Code")," "))}function j(O,y){if(1&O){const _=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){const M=t.eBV(_).$implicit,K=t.XpG(2);return t.Njj(K.openRemote(M.url))}),t.nrm(1,"mat-icon",11),t.EFF(2),t.nI1(3,"translate"),t.nI1(4,"translate"),t.nI1(5,"translate"),t.k0s()}if(2&O){const _=y.$implicit;t.Y8G("matTooltip",_.url),t.R7$(),t.FS9("svgIcon",_.type),t.R7$(),t.Lme(" ","bitbucket"===_.type?t.bMT(3,4,"Bitbucket"):"github"===_.type?t.bMT(4,6,"GitHub"):"gitlab"===_.type?t.bMT(5,8,"GitLab"):"",": ",_.name," ")}}function V(O,y){if(1&O){const _=t.RV6();t.j41(0,"div",4)(1,"div",5),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",6),t.bIt("click",function(){t.eBV(_);const M=t.XpG();return t.Njj(M.openWithFileExplorer())}),t.j41(5,"mat-icon"),t.EFF(6,"folder"),t.k0s(),t.EFF(7),t.k0s(),t.DNE(8,T,5,3,"button",7),t.nI1(9,"async"),t.DNE(10,$,4,3,"button",7),t.nI1(11,"async"),t.DNE(12,j,6,10,"button",8),t.nI1(13,"async"),t.k0s()}if(2&O){const _=t.XpG();t.R7$(2),t.JRh(t.bMT(3,5,"Open with...")),t.R7$(5),t.SpI(" ",_.folderText," "),t.R7$(),t.Y8G("ngIf",t.bMT(9,7,_.hasTerminal)),t.R7$(2),t.Y8G("ngIf",t.bMT(11,9,_.hasVsCode)),t.R7$(2),t.Y8G("ngForOf",t.bMT(13,11,_.remotes))}}let X=(()=>{class O extends((0,m.c)(n.N)){constructor(_,P,M,K,b){super(),this.overlay=_,this.viewContainerRef=P,this.store=M,this.filesApi=K,this.providerUrlMatcherService=b,this.menuOverlayRef=new D.t(null),this.folderText=c.c?"Finder":c.u?"File Explorer":"File Manager",this.openMenu=(f,L,x)=>{f.preventDefault(),f.stopPropagation(),this.closeMenu();const F=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(L).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(F),F.attach(new s.VA(x,this.viewContainerRef)),(0,l.p)(F,!1).pipe((0,p.s)(1),(0,r.Q)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))},this.openWithFileExplorer=()=>{const f=this.store.selectSnapshot(g.s.selectedRepositoryPath);if(!f)throw new A.Jf;this.filesApi.openFileWithShell(f).subscribe(),this.closeMenu()},this.openWithTerminal=()=>{const f=this.store.selectSnapshot(g.s.selectedRepositoryPath);if(!f)throw new A.Jf;this.filesApi.openTerminal(f).subscribe(),this.closeMenu()},this.openWithVsCode=()=>{const f=this.store.selectSnapshot(g.s.selectedRepositoryPath);if(!f)throw new A.Jf;this.filesApi.openVsCode(f).subscribe(),this.closeMenu()},this.openRemote=f=>{window.open(f),this.closeMenu()}}ngOnInit(){this.remotes=this.store.select(g.s.selectedRemotes).pipe((0,h.T)(_=>(_??[]).map(P=>{const M=this.providerUrlMatcherService.matchProvider(P.url);return M?[P,M]:null}).filter(E.O9).map(([P,M])=>({type:M.type,url:this.providerUrlMatcherService.getUrl(M),name:P.name})))),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}static{this.\u0275fac=function(P){return new(P||O)(t.rXU(d.hJ),t.rXU(t.c1b),t.rXU(v.il),t.rXU(C.P),t.rXU(U.y))}}static{this.\u0275cmp=t.VBU({type:O,selectors:[["app-repository-actions-open-with"]],features:[t.Vt3],decls:7,vars:3,consts:[["openWithMenuBtn","appElementRef"],["openWithMenu",""],["type","button","mat-stroked-button","","appElementRef","",1,"item",3,"click","matTooltip"],[1,"launch-icon"],[1,"menu-panel"],[1,"menu-header"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"click","matTooltip"],[3,"svgIcon"]],template:function(P,M){if(1&P){const K=t.RV6();t.j41(0,"button",2,0),t.nI1(2,"translate"),t.bIt("click",function(f){t.eBV(K);const L=t.sdS(1),x=t.sdS(6);return t.Njj(M.openMenu(f,L,x))}),t.j41(3,"mat-icon",3),t.EFF(4,"launch"),t.k0s()(),t.DNE(5,V,14,13,"ng-template",null,1,t.C5r)}2&P&&t.Y8G("matTooltip",t.bMT(2,1,"Open repository with..."))},dependencies:[R.Sq,R.bT,W.$z,i.An,u.oV,o.X,R.Jj,a.D],styles:[".item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0})}}return O})()},538:(B,I,e)=>{e.d(I,{P:()=>v});var s=e(8810),D=e(9437),p=e(6354),r=e(4548),h=e(8672),m=e(319),n=e(2570),c=e(2039),l=e(7216),E=e(2158),g=e(5012),A=e(4438),t=e(9843),d=e(986);let v=(()=>{class C{constructor(R,W){this.store=R,this.commitsApi=W,this.startEdit=(i,u)=>this.store.dispatch(new l.Wi(i,{name:"Edit commits",detail:(0,h.Tl)("from _commit_",{commitId:u}),do:()=>this.store.dispatch(new l.iM(i,u))})),this.discardEdit=i=>this.store.dispatch(new l.Wi(i,{name:"Discard commit edits",do:()=>this.commitsApi.discardCommitEditing(i)})),this.saveEdits=i=>this.store.dispatch(new l.Wi(i,{name:"Save commit edits",do:()=>this.commitsApi.completeCommitEditing(i).pipe((0,n.P)(()=>this.store.dispatch(new c.cX(i,[c.iK.commits,c.iK.currentBranchCommitId,c.iK.headCommitId,c.iK.mergeHeads,c.iK.merges,c.iK.references,c.iK.stagedChanges,c.iK.submodules,c.iK.unstagedChanges]))))})),this.editCommitDetails=(i,u,o)=>this.store.dispatch(new l.Wi(i,{name:"Edit commit",detail:o,do:()=>this.commitsApi.editCommitDetails(i,u,o,this.getCommitter()).pipe((0,D.W)(a=>r.Q1.matches(a)?(0,s.$)(()=>new m.XR(a)):(0,s.$)(()=>a)))})).pipe((0,p.T)(()=>this.store.selectSnapshot(E.k.mostRecentActionState(i)))),this.squashCommit=(i,u,o)=>this.store.dispatch(new l.Wi(i,{name:"Squash commit",detail:(0,h.Tl)("_commit_ up/down",{commitId:u,isUpwards:"up"===o}),do:()=>this.commitsApi.squashCommit(i,u,o,this.getCommitter()).pipe((0,D.W)(a=>r.mI.matches(a)||r.Rt.matches(a)||r.r7.matches(a)||r.TN.matches(a)||r.RM.matches(a)||r.Q1.matches(a)?(0,s.$)(()=>new m.XR(a)):(0,s.$)(()=>a)))})).pipe((0,p.T)(()=>this.store.selectSnapshot(E.k.mostRecentActionState(i)))),this.insertCommit=(i,u,o)=>this.store.dispatch(new l.Wi(i,{name:"Insert commit",detail:(0,h.Tl)("above/below _commit_",{commitId:u,isAbove:"above"===o}),do:()=>this.commitsApi.insertCommit(i,u,o,this.getCommitter()).pipe((0,D.W)(a=>r.Q1.matches(a)?(0,s.$)(()=>new m.XR(a)):(0,s.$)(()=>a)))})).pipe((0,p.T)(()=>this.store.selectSnapshot(E.k.mostRecentActionState(i)))),this.moveCommitChanges=(i,u,o,a)=>this.store.dispatch(new l.Wi(i,{name:"Move commit changes",detail:(0,h.Tl)("_commit_ up/down",{commitId:u,isUpwards:"up"===o}),do:()=>this.commitsApi.moveCommitChanges(i,u,o,a,this.getCommitter()).pipe((0,D.W)(T=>r.Q1.matches(T)||r.PB.matches(T)||r.G7.matches(T)||r.u7.matches(T)||r.wP.matches(T)||r.QI.matches(T)?(0,s.$)(()=>new m.XR(T)):(0,s.$)(()=>T)))})).pipe((0,p.T)(()=>this.store.selectSnapshot(E.k.mostRecentActionState(i))))}getCommitter(){const R=this.store.selectSnapshot(g.d.selectedProfile);return R&&R.name&&R.email?{name:R.name,email:R.email}:null}static{this.\u0275fac=function(W){return new(W||C)(A.KVO(t.il),A.KVO(d.m))}}static{this.\u0275prov=A.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},2489:(B,I,e)=>{e.d(I,{A:()=>c});var s=e(5351),D=e(2102),p=e(9042),r=e(9183),h=e(2798),m=e(1117),n=e(4438);let c=(()=>{class l{static{this.\u0275fac=function(A){return new(A||l)}}static{this.\u0275mod=n.$C({type:l})}static{this.\u0275inj=n.G2t({imports:[s.hM,D.RG,p.fS,r.D6,h.Ve,m.U]})}}return l})()},8461:(B,I,e)=>{e.d(I,{Q:()=>m});var s=e(180),D=e(4548),p=e(8672),r=e(319),h=e(4438);let m=(()=>{class n{constructor(){this.parseReference=l=>{const E=n.referenceRegex.exec(l);if(!E)return null;if("remotes"===E[1]){const g=n.remoteBranchRegex.exec(l);if(!g)throw new D.k6(l);return{branch:g[2]??"",sourceName:g[1]??"",sourceType:"remote"}}return"stash"===E[1]?{branch:(0,p.Tl)("stash"),sourceName:(0,p.Tl)("stash"),sourceType:"stash"}:{branch:E[2],sourceName:(0,p.Tl)("heads"===E[1]?"local":"tag"),sourceType:"heads"===E[1]?"local":"tag"}},this.getBranchTypeIcon=l=>{switch(l){case"head":return"upload";case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"archive";case"tag":return"label"}}}static{this.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/}static{this.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/}calculateBranches(l,E,g){const A=(0,s.A)(l.map(this.parseReference).filter(r.O9),({branch:d})=>d),t=Object.entries(A).map(([d,v])=>({name:d,sources:v.map(C=>({name:C.sourceName,type:C.sourceType,icon:this.getBranchTypeIcon(C.sourceType)}))})).sort((d,v)=>{const C=d.sources.some(o=>"local"===o.type&&`refs/heads/${d.name}`===E),U=d.sources.some(o=>"local"===o.type&&`refs/heads/${v.name}`===E);if(C&&!U)return-1;if(!C&&U)return 1;const R=d.sources.some(o=>"local"===o.type),W=v.sources.some(o=>"local"===o.type);if(R&&!W)return-1;if(!R&&W)return 1;const i=d.sources.some(o=>"remote"===o.type),u=v.sources.some(o=>"remote"===o.type);return i&&!u?-1:!i&&u?1:d.sources.length>v.sources.length?-1:d.sources.length<v.sources.length?1:d.name>v.name?-1:d.name<v.name?1:0}).slice(0,30);return!E&&g?[{name:(0,p.Tl)("HEAD"),sources:[{name:(0,p.Tl)("HEAD"),type:"head",icon:this.getBranchTypeIcon("head")}]},...t]:t}static{this.\u0275fac=function(E){return new(E||n)}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()}}]);