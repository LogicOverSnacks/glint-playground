"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[552],{6552:(ve,H,a)=>{a.r(H),a.d(H,{OpenRepositoryLayoutModule:()=>xe});var L=a(6338),Z=a(4385),V=a(3179),A=a(7084),f=a(9549),T=a(284),N=a(1572),t=a(4650);let mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[A.To,f.lN,T.c,N.Cq,Z.LD,V.I]}),n})();var K=a(9643),x=a(3238),gt=a(2687),X=a(1281),s=a(4006);const dt=["input"],ut=function(n){return{enterDuration:n}},ht=["*"],ft=new t.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let _t=0;const Ct={provide:s.JU,useExisting:(0,t.Gpc)(()=>W),multi:!0};class xt{constructor(i,e){this.source=i,this.checked=e}}const yt=(0,x.sb)((0,x.pj)((0,x.Kr)((0,x.Id)(class{constructor(n){this._elementRef=n}}))));let vt=(()=>{class n extends yt{constructor(e,o,r,l,_,c,d){super(e),this._focusMonitor=o,this._changeDetectorRef=r,this.defaults=_,this._onChange=m=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new t.vpe,this.toggleChange=new t.vpe,this.tabIndex=parseInt(l)||0,this.color=this.defaultColor=_.color||"accent",this._noopAnimations="NoopAnimations"===c,this.id=this._uniqueId=`${d}${++_t}`}get required(){return this._required}set required(e){this._required=(0,X.Ig)(e)}get checked(){return this._checked}set checked(e){this._checked=(0,X.Ig)(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?this._focused=!0:e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(e){t.$Z()},n.\u0275dir=t.lG2({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[t.qOj]}),n})(),W=(()=>{class n extends vt{constructor(e,o,r,l,_,c){super(e,o,r,l,_,c,"mat-slide-toggle-")}_createChangeEvent(e){return new xt(this,e)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}focus(e,o){o?this._focusMonitor.focusVia(this._inputElement,o,e):this._inputElement.nativeElement.focus(e)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(gt.tE),t.Y36(t.sBO),t.$8M("tabindex"),t.Y36(ft),t.Y36(t.QbO,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(e,o){if(1&e&&t.Gf(dt,5),2&e){let r;t.iGM(r=t.CRH())&&(o._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(e,o){2&e&&(t.Ikx("id",o.id),t.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),t.ekj("mat-checked",o.checked)("mat-disabled",o.disabled)("mat-slide-toggle-label-before","before"==o.labelPosition)("_mat-animation-noopable",o._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[t._Bn([Ct]),t.qOj],ngContentSelectors:ht,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,o){if(1&e&&(t.F$t(),t.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),t.NdJ("change",function(l){return o._onChangeEvent(l)})("click",function(l){return o._onInputClick(l)}),t.qZA(),t.TgZ(5,"span",5),t._UZ(6,"span",6),t.TgZ(7,"span",7),t._UZ(8,"span",8),t.qZA()()(),t.TgZ(9,"span",9,10),t.NdJ("cdkObserveContent",function(){return o._onLabelTextChange()}),t.TgZ(11,"span",11),t._uU(12,"\xa0"),t.qZA(),t.Hsn(13),t.qZA()()),2&e){const r=t.MAs(1),l=t.MAs(10);t.uIk("for",o.inputId),t.xp6(2),t.ekj("mat-slide-toggle-bar-no-side-margin",!l.textContent||!l.textContent.trim()),t.xp6(1),t.Q6J("id",o.inputId)("required",o.required)("tabIndex",o.tabIndex)("checked",o.checked)("disabled",o.disabled),t.uIk("name",o.name)("aria-checked",o.checked)("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby)("aria-describedby",o.ariaDescribedby),t.xp6(4),t.Q6J("matRippleTrigger",r)("matRippleDisabled",o.disableRipple||o.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",t.VKq(18,ut,o._noopAnimations?0:150))}},dependencies:[x.wG,K.wD],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}"],encapsulation:2,changeDetection:0}),n})(),tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),Mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[tt,x.si,x.BQ,K.Q8,tt,x.BQ]}),n})();var E=a(3848);let Ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.lN,T.c,N.Cq,Z.LD,Mt,E.Nh,V.I]}),n})();var Zt=a(6093),Tt=a(3612);let Pt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.lN,T.c,V.I,Zt.i,Tt.e]}),n})();var w=a(7237),J=a(655),S=a(3668),M=a(9253),U=a(591),Rt=a(6053),O=a(1737),At=a(8929),et=a(1059),k=a(4850),v=a(7625),q=a(7221),g=a(7545),D=a(537),kt=a(2994),It=a(5154),Vt=a(3164),G=a(1712),F=a(4810),Q=a(9967),Nt=a(2771),P=a(1336),h=a(4889),y=a(9077),Jt=a(9578),nt=a(9392),B=a(6271),ot=a(3058),C=a(6895),Y=a(4859),$=a(7392),it=a(266),at=a(3051);function St(n,i){1&n&&(t.TgZ(0,"div",3),t._UZ(1,"mat-spinner"),t._uU(2," Cloning...\n"),t.qZA())}function Ut(n,i){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",+e.key),t.xp6(1),t.Oqu(e.value.credentialName)}}function qt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.clone())}),t.ALo(1,"async"),t.TgZ(2,"mat-form-field",5)(3,"mat-label"),t._uU(4,"URL"),t.qZA(),t.TgZ(5,"mat-icon",6),t._uU(6,"public"),t.qZA(),t._UZ(7,"input",7),t.qZA(),t.TgZ(8,"mat-form-field",8),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.browsePathIfEmpty())}),t.TgZ(9,"mat-label"),t._uU(10,"Path to clone to"),t.qZA(),t.TgZ(11,"mat-icon",6),t._uU(12,"folder"),t.qZA(),t._UZ(13,"input",9),t.TgZ(14,"button",10),t.NdJ("click",function(r){return t.CHM(e),t.oxw().browsePath(),t.KtG(r.stopPropagation())}),t._uU(15,"Browse"),t.qZA()(),t.TgZ(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Credential"),t.qZA(),t.TgZ(19,"mat-icon",6),t._uU(20,"key"),t.qZA(),t.TgZ(21,"mat-select",12)(22,"mat-option",13),t._uU(23,"None"),t.qZA(),t.YNc(24,Ut,2,2,"mat-option",14),t.ALo(25,"keyvalue"),t.ALo(26,"async"),t.qZA()(),t.TgZ(27,"button",15),t._uU(28,"Clone"),t.qZA()()}if(2&n){const e=t.oxw();t.ekj("vertical",t.lcZ(1,6,e.displayVertical)),t.Q6J("formGroup",e.form),t.xp6(22),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",t.lcZ(25,8,t.lcZ(26,10,e.validCredentials))),t.xp6(3),t.Q6J("disabled",e.form.invalid)}}function Ft(n,i){if(1&n&&t._UZ(0,"app-avatar",27),2&n){const e=t.oxw().$implicit;t.Q6J("email",e.email)("type",e.type)}}function Qt(n,i){if(1&n&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function Lt(n,i){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"lock"),t.qZA())}function Et(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"li",29),t.NdJ("click",function(){const l=t.CHM(e).$implicit,_=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.setFromIntegration(_,l))}),t.TgZ(1,"span",30),t._uU(2),t.qZA(),t.YNc(3,Lt,2,0,"mat-icon",31),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.private)}}function Dt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-expansion-panel",19),t.NdJ("afterCollapse",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.updateViewportSizes())})("afterExpand",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.updateViewportSizes())}),t.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title",20)(3,"span",21),t._UZ(4,"mat-icon",22),t.YNc(5,Ft,1,2,"app-avatar",23),t.qZA(),t.YNc(6,Qt,2,2,"span",24),t.qZA()(),t.TgZ(7,"cdk-virtual-scroll-viewport",25)(8,"ul"),t.YNc(9,Et,4,3,"li",26),t.ALo(10,"async"),t.qZA()()()}if(2&n){const e=i.$implicit;t.xp6(4),t.Q6J("svgIcon",e.type),t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("itemSize",29),t.xp6(2),t.Q6J("cdkVirtualForOf",t.lcZ(10,5,e.repositories))}}function Gt(n,i){if(1&n&&(t.TgZ(0,"div",16),t.ALo(1,"async"),t.TgZ(2,"mat-accordion",17),t.YNc(3,Dt,11,7,"mat-expansion-panel",18),t.ALo(4,"async"),t.qZA()()),2&n){const e=t.oxw();t.ekj("vertical",t.lcZ(1,3,e.displayVertical)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,5,e.integrationsWithRepos))}}let Bt=(()=>{class n extends((0,F.j)(Q.A,Nt.P)){constructor(e,o,r,l,_,c){super(),this.elementRef=e,this.router=o,this.store=r,this.githubApiService=l,this.filesApi=_,this.repositoriesApi=c,this.cloning=new U.X(!1),this.form=new s.cw({url:new s.NI(null,s.kI.required),path:new s.NI(null,s.kI.required),credential:new s.NI(null)}),this.validCredentials=(0,Rt.aj)([this.allCredentials,this.form.controls.url.valueChanges.pipe((0,et.O)(null))]).pipe((0,k.U)(([d,m])=>{const u=[...d.entries()];return Object.fromEntries(m?/^https?:\/\//.test(m)?u.filter(([b,p])=>"password"===p.type||"oauth-github"===p.type):/^(git|file)?:\/\//.test(m)||/^\//.test(m)||!/:/.test(m)?[]:u.filter(([b,p])=>"ssh"===p.type):u)})),this.displayVertical=new U.X(!1),this.browsePath=()=>{this.filesApi.openFolderDialog().pipe((0,v.R)(this.destroyed$)).subscribe(d=>{if(!d)return;const m=this.form.controls.url.value;if(null!==m){const b=/\/([^/]*?)(?:\.git)?\/?$/.exec(m);if(b)return void this.filesApi.getResolvedPath(d,b[1]).subscribe(p=>{this.form.controls.path.setValue(p)})}this.form.controls.path.setValue(d)})},this.browsePathIfEmpty=()=>{this.form.controls.path.value||this.browsePath()},this.clone=()=>{if(this.cloning.value)throw new Error("Already cloning");const{url:d,path:m,credential:u}=this.form.value;if(!d)throw new Error("Cannot clone repository with no url");if(!m)throw new Error("Cannot clone repository with no local path");const b=this.store.selectSnapshot(y.$.credentials);this.cloning.next(!0),this.repositoriesApi.cloneRepository(d,m,u?b.get(u):void 0).pipe((0,q.K)(p=>G.Ay.matches(p)||G.T0.matches(p)||G.o8.matches(p)?this.store.dispatch(new P.NN("error",p.message)).pipe((0,g.w)(()=>(0,O._)(p))):this.store.dispatch(new P.NN("unhandled",`${p}`)).pipe((0,g.w)(()=>(0,O._)(p)))),(0,g.w)(()=>this.store.dispatch(new h.gz(m))),(0,g.w)(()=>{const p=this.store.selectSnapshot(y.$.selectedProfile),I=u&&"all"!==p?.credentialIds&&!p?.credentialIds.includes(u)?0:this.store.selectSnapshot(y.$.selectedProfileId),j=u?{remotes:{origin:{credentialId:u}}}:null;return p&&I>0&&"all"!==p.allowedRepositories&&this.store.dispatch(new Jt.Bu(I,{...p,allowedRepositories:[...p.allowedRepositories,m]})),this.store.dispatch(new h.xs(m,I,j))}),(0,g.w)(()=>this.store.dispatch(new h.he(m))),(0,g.w)(()=>this.store.dispatch(new h.BZ(m))),(0,D.x)(()=>{this.cloning.next(!1)}),(0,v.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/"])})},this.updateViewportSizes=()=>{this.viewports.forEach(d=>d.checkViewportSize())}}get classVertical(){return this.displayVertical.value}ngOnInit(){this.integrationsWithRepos=this.integrations.pipe((0,k.U)(r=>r.filter(l=>"github"===l.type).map(l=>{if("github"===l.type)return{...l,repositories:this.githubApiService.getRepositories(l.token).pipe((0,k.U)(_=>_.map(c=>({type:"github",id:c.id,name:c.full_name,private:c.private,cloneUrl:c.clone_url}))),(0,kt.b)(()=>this.updateViewportSizes()),(0,It.d)(1))}})));const e=new At.xQ,o=new ResizeObserver(()=>e.next());e.pipe((0,Vt.p)(20,void 0,{leading:!0,trailing:!0}),(0,v.R)(this.destroyed$)).subscribe(()=>{this.displayVertical.next(this.elementRef.nativeElement.clientWidth<1020)}),o.observe(this.elementRef.nativeElement),this.destroyed$.subscribe(()=>o.disconnect())}setFromIntegration(e,o){this.form.controls.url.setValue(o.cloneUrl),this.store.selectSnapshot(y.$.credentials);const l=[...this.store.selectSnapshot(y.$.credentials)].find(([_,c])=>"oauth-github"===c.type&&c.githubId===e.id);l&&this.form.controls.credential.setValue(l[0])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(w.F0),t.Y36(M.yh),t.Y36(nt.q),t.Y36(B.k),t.Y36(ot.a))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-clone-repository-view"]],viewQuery:function(e,o){if(1&e&&t.Gf(S.N7,5),2&e){let r;t.iGM(r=t.CRH())&&(o.viewports=r)}},hostVars:2,hostBindings:function(e,o){2&e&&t.ekj("vertical",o.classVertical)},features:[t.qOj],decls:6,vars:9,consts:[["class","cloning",4,"ngIf"],[3,"formGroup","vertical","ngSubmit",4,"ngIf"],["class","integrations",3,"vertical",4,"ngIf"],[1,"cloning"],[3,"formGroup","ngSubmit"],[1,"url"],["matPrefix",""],["type","text","matInput","","required","","formControlName","url"],[1,"path",3,"click"],["type","text","matInput","","required","","formControlName","path"],["type","button","matSuffix","","mat-button","",3,"click"],[1,"credential"],["formControlName","credential","placeholder","Select credential"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"integrations"],["multi",""],[3,"afterCollapse","afterExpand",4,"ngFor","ngForOf"],[3,"afterCollapse","afterExpand"],[1,"info"],[1,"icons"],[3,"svgIcon"],[3,"email","type",4,"ngIf"],["class","email",3,"matTooltip",4,"ngIf"],[3,"itemSize"],[3,"click",4,"cdkVirtualFor","cdkVirtualForOf"],[3,"email","type"],[1,"email",3,"matTooltip"],[3,"click"],[3,"matTooltip"],["inline","","color","accent","matTooltip","Private",4,"ngIf"],["inline","","color","accent","matTooltip","Private"]],template:function(e,o){1&e&&(t.YNc(0,St,3,0,"div",0),t.ALo(1,"async"),t.YNc(2,qt,29,12,"form",1),t.ALo(3,"async"),t.YNc(4,Gt,5,7,"div",2),t.ALo(5,"async")),2&e&&(t.Q6J("ngIf",t.lcZ(1,3,o.cloning)),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,5,o.cloning)),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(5,7,o.cloning)))},dependencies:[A.pp,A.ib,A.yz,A.yK,f.KE,f.hX,f.qo,f.R9,T.Nt,N.Ou,Z.gD,x.ey,S.xd,S.x0,S.N7,C.sg,C.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,Y.lW,$.Hw,it.gM,at.A,C.Ov,C.Nd],styles:["[_nghost-%COMP%]{display:flex;height:100%;padding:10px}.vertical[_nghost-%COMP%]{display:block}.cloning[_ngcontent-%COMP%]{margin:10px;font-size:24px}.cloning[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:20px}form[_ngcontent-%COMP%]{max-width:500px;margin-bottom:20px;margin-right:20px}form.vertical[_ngcontent-%COMP%]{margin-right:0}form[_ngcontent-%COMP%]   .url[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .credential[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]     .mat-form-field-prefix{margin-right:10px}form[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]     .mat-form-field-suffix{top:-.25em}.integrations[_ngcontent-%COMP%]{display:flex}.integrations.vertical[_ngcontent-%COMP%]{max-height:calc(100% - 290px)}mat-accordion[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:500px;min-height:300px}mat-expansion-panel[_ngcontent-%COMP%]{flex-shrink:1;display:flex;flex-direction:column;min-height:48px}mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%]{min-height:112px}mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%] + mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%]{margin:0 0 16px}mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{flex:0 0 auto;height:48px}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:64px}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{flex:0 0 auto;cursor:pointer}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{width:24px;height:24px;vertical-align:middle;margin:0 5px}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content{overflow:hidden}mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content.ng-animating cdk-virtual-scroll-viewport{overflow-y:hidden}mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content .mat-expansion-panel-body{display:flex;flex-direction:column;overflow:hidden}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{contain:content;scrollbar-gutter:stable}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{position:relative}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:29px;line-height:29px;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:5px;margin-top:-2px}"],changeDetection:0}),(0,J.gn)([(0,M.Ph)(y.$.credentials)],n.prototype,"allCredentials",void 0),(0,J.gn)([(0,M.Ph)(y.$.integrations)],n.prototype,"integrations",void 0),n})();var Yt=a(1086),$t=a(2986);function zt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",12),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.create())}),t.TgZ(1,"div",13)(2,"mat-form-field",14),t.NdJ("click",function(r){t.CHM(e);const l=t.oxw();return t.KtG(l.browsePathIfEmpty(r,l.localForm.controls.path))}),t.TgZ(3,"mat-label"),t._uU(4,"Path to create in"),t.qZA(),t.TgZ(5,"mat-icon",15),t._uU(6,"folder"),t.qZA(),t._UZ(7,"input",16),t.TgZ(8,"button",17),t.NdJ("click",function(r){t.CHM(e);const l=t.oxw();return t.KtG(l.browsePath(r,l.localForm.controls.path))}),t._uU(9,"Browse"),t.qZA()(),t.TgZ(10,"mat-form-field",18)(11,"mat-label"),t._uU(12,"Default branch"),t.qZA(),t._UZ(13,"mat-icon",19)(14,"input",20),t.qZA()(),t.TgZ(15,"button",21),t._uU(16,"Create"),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.localForm),t.xp6(15),t.Q6J("disabled",e.localForm.invalid)}}function jt(n,i){if(1&n&&t._UZ(0,"app-avatar",35),2&n){const e=t.oxw().ngIf;t.Q6J("email",e.email)}}function Ht(n,i){if(1&n&&(t.TgZ(0,"span",36),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngIf;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function Kt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,jt,1,1,"app-avatar",33),t.YNc(2,Ht,2,2,"span",34),t.BQk()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email)}}function Xt(n,i){if(1&n&&t._UZ(0,"app-avatar",39),2&n){const e=t.oxw().$implicit;t.Q6J("email",e.email)}}function Wt(n,i){if(1&n&&(t.TgZ(0,"span",36),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function te(n,i){if(1&n&&(t.TgZ(0,"mat-option",37),t.YNc(1,Xt,1,1,"app-avatar",38),t.YNc(2,Wt,2,2,"span",34),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email)}}function ee(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"img",40),t.TgZ(2,"span",36),t._uU(3),t.qZA(),t.BQk()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("src",e.avatarUrl,t.LSH),t.xp6(1),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name)}}function ne(n,i){if(1&n&&(t.TgZ(0,"mat-option",37),t._UZ(1,"img",40),t.TgZ(2,"span",36),t._uU(3),t.qZA()()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("src",e.avatarUrl,t.LSH),t.xp6(1),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name)}}function oe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",22),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.createGitHub())}),t.TgZ(1,"div",13)(2,"mat-form-field",23)(3,"mat-label"),t._uU(4,"Credential"),t.qZA(),t.TgZ(5,"mat-select",24)(6,"mat-select-trigger"),t.YNc(7,Kt,3,2,"ng-container",25),t.qZA(),t.YNc(8,te,3,3,"mat-option",26),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"mat-form-field",27),t.ALo(11,"async"),t.TgZ(12,"mat-label"),t._uU(13,"Organization"),t.qZA(),t.TgZ(14,"mat-select",28)(15,"mat-select-trigger"),t.YNc(16,ee,4,3,"ng-container",25),t.qZA(),t.TgZ(17,"mat-option",29),t._uU(18,"None"),t.qZA(),t.YNc(19,ne,4,4,"mat-option",26),t.ALo(20,"async"),t.qZA(),t.TgZ(21,"mat-hint"),t._uU(22,"Leave blank to create the repository under your user"),t.qZA()(),t.TgZ(23,"mat-form-field",30)(24,"mat-label"),t._uU(25,"Name"),t.qZA(),t.TgZ(26,"mat-icon",15),t._uU(27,"short_text"),t.qZA(),t._UZ(28,"input",31),t.qZA(),t.TgZ(29,"mat-form-field",14),t.NdJ("click",function(r){t.CHM(e);const l=t.oxw();return t.KtG(l.browsePathIfEmpty(r,l.githubForm.controls.path))}),t.TgZ(30,"mat-label"),t._uU(31,"Path to create in"),t.qZA(),t.TgZ(32,"mat-icon",15),t._uU(33,"folder"),t.qZA(),t._UZ(34,"input",16),t.TgZ(35,"button",17),t.NdJ("click",function(r){t.CHM(e);const l=t.oxw();return t.KtG(l.browsePath(r,l.githubForm.controls.path))}),t._uU(36,"Browse"),t.qZA()(),t.TgZ(37,"mat-form-field",18)(38,"mat-label"),t._uU(39,"Default branch"),t.qZA(),t._UZ(40,"mat-icon",19)(41,"input",20),t.qZA()(),t.TgZ(42,"button",21),t._uU(43,"Create"),t.qZA(),t.TgZ(44,"mat-slide-toggle",32),t._uU(45,"Private"),t.qZA()()}if(2&n){const e=t.oxw();let o;t.Q6J("formGroup",e.githubForm),t.xp6(7),t.Q6J("ngIf",e.githubForm.controls.credential.value),t.xp6(1),t.Q6J("ngForOf",t.lcZ(9,9,e.validGithubCredentials)),t.xp6(2),t.ekj("show",null==(o=t.lcZ(11,11,e.validGithubOrganizations))?null:o.length),t.xp6(6),t.Q6J("ngIf",e.githubForm.controls.organization.value),t.xp6(1),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",t.lcZ(20,13,e.validGithubOrganizations)),t.xp6(23),t.Q6J("disabled",e.githubForm.invalid)}}function ie(n,i){1&n&&(t.TgZ(0,"div",41),t._UZ(1,"mat-spinner"),t._uU(2," Creating... "),t.qZA())}let ae=(()=>{class n extends((0,F.j)(Q.A)){constructor(e,o,r,l,_){super(),this.router=e,this.store=o,this.filesApi=r,this.githubApi=l,this.repositoriesApi=_,this.view=new U.X("local"),this.localForm=new s.cw({path:new s.NI(null,s.kI.required),defaultBranch:new s.NI("main",{nonNullable:!0})}),this.githubForm=new s.cw({credential:new s.NI(null,s.kI.required),organization:new s.NI(null),name:new s.NI(null,s.kI.required),private:new s.NI(!1,{nonNullable:!0,validators:s.kI.required}),path:new s.NI(null,s.kI.required),defaultBranch:new s.NI("main",{nonNullable:!0})}),this.validGithubOrganizations=new U.X([]),this.browsePath=(c,d)=>{c.preventDefault(),c.stopPropagation(),this.filesApi.openFolderDialog().pipe((0,v.R)(this.destroyed$)).subscribe(m=>{m&&d.setValue(m)})},this.browsePathIfEmpty=(c,d)=>{d.value||this.browsePath(c,d)},this.create=()=>{if("creating"===this.view.value)throw new Error("Already creating");const{path:c,defaultBranch:d}=this.localForm.value;if(!c)throw new Error("Cannot create repository with no local path.");const m=this.view.value;this.view.next("creating"),this.repositoriesApi.createRepository(c,d??"main").pipe((0,q.K)(u=>this.store.dispatch(new P.NN("unhandled",`${u}`)).pipe((0,g.w)(()=>(0,O._)(u)))),(0,g.w)(()=>this.store.dispatch(new h.gz(c))),(0,g.w)(()=>this.store.dispatch(new h.he(c))),(0,g.w)(()=>this.store.dispatch(new h.BZ(c))),(0,D.x)(()=>{this.view.next(m)})).subscribe(()=>{this.router.navigate(["/"])})},this.createGitHub=()=>{if("creating"===this.view.value)throw new Error("Already creating");const{credential:c,organization:d,name:m,path:u,private:b,defaultBranch:p}=this.githubForm.getRawValue();if(!c)throw new Error("Cannot create github repository without a credential.");if(!m)throw new Error("Cannot create github repository with no name.");if(!u)throw new Error("Cannot create github repository with no local path.");const I=this.view.value;this.view.next("creating");const j=d?this.githubApi.createOrganizationRepository(c.token,d.name,m,b):this.githubApi.createRepository(c.token,m,b),ct=[...this.store.selectSnapshot(y.$.credentials)].find(([R,pt])=>"oauth-github"===pt.type&&pt.githubId===c.githubId);if(!ct)throw new Error("Cannot create github repository without a credential.");const ye=new Map([[this.store.selectSnapshot(y.$.selectedProfileId),{remotes:{origin:{credentialId:ct[0]}}}]]);j.pipe((0,q.K)(R=>(0,O._)(new Error("Couldn't create repository on GitHub. Check your credentials are valid."))),(0,g.w)(R=>this.repositoriesApi.createRepository(u,p??"main",R?.clone_url)),(0,q.K)(R=>this.store.dispatch(new P.NN("unhandled",`${R}`)).pipe((0,g.w)(()=>(0,O._)(R)))),(0,g.w)(()=>this.store.dispatch(new h.gz(u,{profiles:ye}))),(0,g.w)(()=>this.store.dispatch(new h.he(u))),(0,g.w)(()=>this.store.dispatch(new h.BZ(u))),(0,D.x)(()=>{this.view.next(I)})).subscribe(()=>{this.router.navigate(["/"])})}}ngOnInit(){this.validGithubCredentials=this.allCredentials.pipe((0,k.U)(e=>[...e.values()].filter(o=>"oauth-github"===o.type))),this.githubForm.controls.credential.valueChanges.pipe((0,et.O)(this.githubForm.controls.credential.value),(0,g.w)(e=>e?this.githubApi.getOrganizations(e.token).pipe((0,k.U)(o=>o.map(r=>({name:r.login,avatarUrl:r.avatar_url})))):(0,Yt.of)([])),(0,v.R)(this.destroyed$)).subscribe(e=>{this.validGithubOrganizations.next(e)}),this.validGithubCredentials.pipe((0,$t.q)(1)).subscribe(e=>{this.githubForm.controls.credential.setValue(e[0]??null)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.F0),t.Y36(M.yh),t.Y36(B.k),t.Y36(nt.q),t.Y36(ot.a))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-repository-view"]],features:[t.qOj],decls:23,vars:12,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","click"],[1,"prefix"],["svgIcon","github",1,"prefix"],["matTooltip","Not yet available"],["mat-tab-link","","disabled",""],["svgIcon","gitlab",1,"prefix"],["svgIcon","bitbucket",1,"prefix"],[3,"ngSwitch"],["class","local",3,"formGroup","ngSubmit",4,"ngSwitchCase"],["class","github",3,"formGroup","ngSubmit",4,"ngSwitchCase"],["class","cloning",4,"ngSwitchCase"],[1,"local",3,"formGroup","ngSubmit"],[1,"form-fields"],[1,"path",3,"click"],["matPrefix",""],["type","text","matInput","","required","","formControlName","path"],["type","button","matSuffix","","mat-button","",3,"click"],[1,"default-branch"],["matPrefix","","svgIcon","source-branch"],["type","text","placeholder","main","matInput","","formControlName","defaultBranch"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"github",3,"formGroup","ngSubmit"],[1,"credential-selector"],["formControlName","credential"],[4,"ngIf"],["class","create-repository-select-option",3,"value",4,"ngFor","ngForOf"],[1,"organization-selector"],["formControlName","organization"],[3,"value"],[1,"name"],["type","text","matInput","","formControlName","name"],["formControlName","private"],["type","github",3,"email",4,"ngIf"],[3,"matTooltip",4,"ngIf"],["type","github",3,"email"],[3,"matTooltip"],[1,"create-repository-select-option",3,"value"],["class","create-repository-select-avatar","type","github",3,"email",4,"ngIf"],["type","github",1,"create-repository-select-avatar",3,"email"],[3,"src"],[1,"cloning"]],template:function(e,o){1&e&&(t.TgZ(0,"nav",0)(1,"a",1),t.NdJ("click",function(){return o.view.next("local")}),t.ALo(2,"async"),t.TgZ(3,"mat-icon",2),t._uU(4,"desktop_windows"),t.qZA(),t._uU(5," Local "),t.qZA(),t.TgZ(6,"a",1),t.NdJ("click",function(){return o.view.next("github")}),t.ALo(7,"async"),t._UZ(8,"mat-icon",3),t._uU(9," GitHub "),t.qZA(),t.TgZ(10,"span",4)(11,"a",5),t._UZ(12,"mat-icon",6),t._uU(13," GitLab "),t.qZA()(),t.TgZ(14,"span",4)(15,"a",5),t._UZ(16,"mat-icon",7),t._uU(17," Bitbucket "),t.qZA()()(),t.ynx(18,8),t.ALo(19,"async"),t.YNc(20,zt,17,2,"form",9),t.YNc(21,oe,46,15,"form",10),t.YNc(22,ie,3,0,"div",11),t.BQk()),2&e&&(t.xp6(1),t.Q6J("active","local"===t.lcZ(2,6,o.view)),t.xp6(5),t.Q6J("active","github"===t.lcZ(7,8,o.view)),t.xp6(12),t.Q6J("ngSwitch",t.lcZ(19,10,o.view)),t.xp6(2),t.Q6J("ngSwitchCase","local"),t.xp6(1),t.Q6J("ngSwitchCase","github"),t.xp6(1),t.Q6J("ngSwitchCase","creating"))},dependencies:[f.KE,f.bx,f.hX,f.qo,f.R9,T.Nt,N.Ou,Z.gD,Z.$L,x.ey,W,E.BU,E.Nj,C.sg,C.O5,C.RF,C.n9,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,Y.lW,$.Hw,it.gM,at.A,C.Ov],styles:["[_nghost-%COMP%]{display:block;padding:10px}nav[_ngcontent-%COMP%]{margin-bottom:10px}nav[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{margin-right:10px}.local[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]{max-width:1010px}.local[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.local[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .local[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:500px}.local[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{height:20px;width:20px;line-height:0;vertical-align:middle;margin-right:5px}.local[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px;width:20px;display:inline-block;border-radius:10%;vertical-align:middle;margin-right:5px}.local[_ngcontent-%COMP%]   .organization-selector[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   .organization-selector[_ngcontent-%COMP%]{display:none}.local[_ngcontent-%COMP%]   .organization-selector.show[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   .organization-selector.show[_ngcontent-%COMP%]{display:block}.local[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin-left:20px}.local[_ngcontent-%COMP%]     .mat-form-field-prefix, .github[_ngcontent-%COMP%]     .mat-form-field-prefix{margin-right:10px}.local[_ngcontent-%COMP%]     .mat-form-field-suffix, .github[_ngcontent-%COMP%]     .mat-form-field-suffix{top:-.25em}"],changeDetection:0}),(0,J.gn)([(0,M.Ph)(y.$.credentials)],n.prototype,"allCredentials",void 0),n})();var re=a(6197),rt=a(9251),z=a(3546),lt=a(5724),st=a(3943),le=a(5174),se=a(744);function ce(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.searchControl.setValue(null))}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function pe(n,i){if(1&n&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"Search"),t.qZA(),t.TgZ(3,"span",8)(4,"mat-icon"),t._uU(5,"search"),t.qZA(),t._uU(6,"\xa0"),t.qZA(),t._UZ(7,"input",9),t.YNc(8,ce,3,0,"button",10),t.qZA()),2&n){const e=t.oxw();t.xp6(7),t.Q6J("formControl",e.searchControl),t.xp6(1),t.Q6J("ngIf",e.searchControl.value)}}function me(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),t._uU(3,"history"),t.qZA(),t._uU(4," Recently opened"),t.qZA(),t.TgZ(5,"mat-card-content")(6,"app-repository-history-view",12),t.NdJ("clicked",function(r){t.CHM(e);const l=t.oxw();return t.KtG(l.openRecent(r))})("dragStarted",function(r){t.CHM(e);const l=t.oxw();return t.KtG(l.dragstartListener(r[0],r[1]))}),t.qZA()()()}}let ge=(()=>{class n extends((0,F.j)(Q.A)){constructor(e,o,r){super(),this.router=e,this.store=o,this.filesApi=r,this.searchControl=new s.NI(null),this.openBookmark=l=>{(0,rt.b)(l)||this.store.dispatch(new h.he(l.id)).pipe((0,g.w)(()=>this.store.dispatch(new h.BZ(l.id))),(0,v.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/"])})},this.openRecent=l=>{this.store.dispatch(new h.he(l)).pipe((0,g.w)(()=>this.store.dispatch(new h.BZ(l))),(0,v.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/"])})},this.openFromDisk=()=>{this.filesApi.openFolderDialog().pipe((0,v.R)(this.destroyed$)).subscribe(l=>{l&&this.store.dispatch(new h.gz(l)).pipe((0,g.w)(()=>this.store.dispatch(new h.he(l))),(0,g.w)(()=>this.store.dispatch(new h.BZ(l))),(0,v.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/"])})})},this.dragstartListener=(l,_)=>{l.dataTransfer&&(l.dataTransfer.setData("app/repository",_),l.dataTransfer.effectAllowed="move")}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.F0),t.Y36(M.yh),t.Y36(B.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-open-repository-view"]],features:[t.qOj],decls:20,vars:6,consts:[["type","button","mat-flat-button","",1,"open-from-disk-button",3,"click"],["class","search-box",4,"ngIf"],["id","open-repository-view"],["min","210px"],[3,"nodeClick"],["min","300px"],[4,"ngIf"],[1,"search-box"],["matPrefix",""],["matInput","","type","text",3,"formControl"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["matSuffix","","mat-icon-button","",3,"click"],[3,"clicked","dragStarted"]],template:function(e,o){1&e&&(t.TgZ(0,"header")(1,"button",0),t.NdJ("click",function(){return o.openFromDisk()}),t.TgZ(2,"mat-icon"),t._uU(3,"folder_open"),t.qZA(),t._uU(4," Open from disk "),t.qZA(),t.YNc(5,pe,9,2,"mat-form-field",1),t.qZA(),t.TgZ(6,"main")(7,"app-grid",2)(8,"app-grid-cell",3)(9,"mat-card")(10,"mat-card-title")(11,"mat-icon"),t._uU(12,"bookmarks"),t.qZA(),t._uU(13," Bookmarks"),t.qZA(),t.TgZ(14,"mat-card-content")(15,"app-repository-bookmarks-view",4),t.NdJ("nodeClick",function(l){return o.openBookmark(l)}),t.qZA()()()(),t.TgZ(16,"app-grid-cell",5),t.YNc(17,me,7,0,"mat-card",6),t.ALo(18,"nullEmpty"),t.ALo(19,"async"),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",!1),t.xp6(12),t.Q6J("ngIf",t.lcZ(18,2,t.lcZ(19,4,o.recentRepositories))))},dependencies:[f.KE,f.hX,f.qo,f.R9,T.Nt,C.O5,s.Fj,s.JJ,s.oH,Y.lW,z.a8,z.dn,z.n5,$.Hw,lt.Y,st.M,rt.j,le.J,C.Ov,se.x],styles:["header[_ngcontent-%COMP%]{margin:10px 10px 0;display:flex;align-items:baseline}header[_ngcontent-%COMP%]   .open-from-disk-button[_ngcontent-%COMP%]{margin-bottom:26px}header[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{flex:auto;margin-left:10px}main[_ngcontent-%COMP%]{padding:0 5px 10px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin:0 5px}"],changeDetection:0}),(0,J.gn)([(0,M.Ph)(re.E.recentRepositories)],n.prototype,"recentRepositories",void 0),n})();var de=a(4745);const ue=function(){return["./open"]},he=function(){return["./clone"]},fe=function(){return["./create"]},_e=[{path:"",component:(()=>{class n extends((0,F.j)(Q.A,de.H)){}return n.\u0275fac=function(){let i;return function(o){return(i||(i=t.n5z(n)))(o||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],features:[t.qOj],decls:11,vars:6,consts:[["id","open-repository-layout"],["min","150px"],[1,"links"],["routerLinkActive","active",3,"routerLink"],["min","510px"]],template:function(e,o){1&e&&(t.TgZ(0,"app-grid",0)(1,"app-grid-cell",1)(2,"mat-list",2)(3,"mat-list-item",3),t._uU(4,"Open"),t.qZA(),t.TgZ(5,"mat-list-item",3),t._uU(6,"Clone"),t.qZA(),t.TgZ(7,"mat-list-item",3),t._uU(8,"Create"),t.qZA()()(),t.TgZ(9,"app-grid-cell",4),t._UZ(10,"router-outlet"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(3,ue)),t.xp6(2),t.Q6J("routerLink",t.DdM(4,he)),t.xp6(2),t.Q6J("routerLink",t.DdM(5,fe)))},dependencies:[L.i$,L.Tg,lt.Y,st.M,w.lC,w.rH,w.Od],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 50px)}.links[_ngcontent-%COMP%]{padding-top:0}.links[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{outline:none;cursor:pointer}.links[_ngcontent-%COMP%]   mat-list-item.active[_ngcontent-%COMP%]{background:#78909c}"],changeDetection:0}),n})(),children:[{path:"open",component:ge},{path:"clone",component:Bt},{path:"create",component:ae},{path:"",redirectTo:"open",pathMatch:"full"}]}];let Ce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[w.Bz.forChild(_e),w.Bz]}),n})(),xe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[L.ie,Z.LD,V.I,mt,Ot,Pt,Ce]}),n})()}}]);