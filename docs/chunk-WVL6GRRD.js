import{a as lt}from"./chunk-5T66DEWK.js";import{$a as ut,$i as I,Ab as E,Ba as h,Cb as m,Db as p,Di as nt,Eb as A,Ei as ot,Fa as L,Fi as x,Ga as w,Hi as y,Ii as b,Ji as _,Ki as D,Nb as Ct,Oa as F,Ob as vt,Oi as at,Qa as O,Qi as rt,R as G,Sa as gt,Sb as xt,Ta as ft,Ua as s,Va as r,Wa as n,Xa as M,Yf as Z,Z as dt,a as P,ab as ht,df as $,fb as k,ff as z,hf as U,if as H,j as S,jf as J,ji as v,lf as K,ma as V,mf as Q,mj as yt,pf as W,qb as l,rb as c,rf as X,sb as C,sf as Y,tb as q,th as tt,uh as et,va as e,wi as it,za as f}from"./chunk-R5KNYV3F.js";var mt=(()=>{class t{constructor(){this.colorsByCommitId=new S({}),this.commitDetailsByCommitId=new S({})}getColors(){return this.colorsByCommitId.asObservable()}setColors(i){this.colorsByCommitId.next(i)}getCommits(){return this.commitDetailsByCommitId.asObservable()}setCommits(i){this.commitDetailsByCommitId.next(i)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=dt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Mt(t,d){t&1&&M(0,"mat-spinner",5)}function St(t,d){t&1&&(r(0,"div",7)(1,"mat-icon",8),l(2,"warning"),n(),l(3),m(4,"translate"),n()),t&2&&(e(3),C(" ",p(4,1,"There are changes to the working copy that will be lost.")," "))}function wt(t,d){if(t&1&&(r(0,"li",11),l(1),n()),t&2){let i=d.$implicit;s("matTooltip",i.id),e(),q(" ",i.message," - ",i.id," ")}}function Bt(t,d){if(t&1&&(r(0,"div",7)(1,"mat-icon",8),l(2,"warning"),n(),l(3),m(4,"translate"),r(5,"ul",9),w(6,wt,2,3,"li",10),m(7,"async"),n()()),t&2){let i=k(2);e(3),C(" ",p(4,2,"The following commits will no longer be reachable by any branch or tag and may be lost:")," "),e(3),s("ngForOf",p(7,4,i.atRiskCommits))}}function Tt(t,d){if(t&1&&(ut(0),w(1,St,5,3,"div",6),m(2,"async"),w(3,Bt,8,6,"div",6),m(4,"async"),m(5,"nullEmpty"),ht()),t&2){let i=k();e(),s("ngIf",p(2,2,i.workingCopyAtRisk)),e(2),s("ngIf",p(5,6,p(4,4,i.atRiskCommits)))}}function kt(t,d){t&1&&(r(0,"button",12),l(1),m(2,"translate"),n()),t&2&&(s("mat-dialog-close",!0),e(),C(" ",p(2,2,"Confirm")," "))}var Xt=(()=>{class t extends tt(et){constructor(i,o,a){super(),this.data=i,this.dialogRef=o,this.graphSharedService=a,this.loading=new S(!0),this.atRiskCommits=new S([]),this.workingCopyAtRisk=new S(!1)}ngOnInit(){this.graphSharedService.getCommits().pipe(G(this.destroyed$)).subscribe(i=>{let o=/^refs\/(heads|remotes)\//.test(this.data.branchName)?this.data.branchName:`refs/heads/${this.data.branchName}`,a=P({},i),B=Object.values(i).filter(u=>u.commit.references.length>0&&u.commit.references.some(j=>j!==o)).map(u=>u.id);a.head&&delete a.head;let T=this.data.toCommitId?[...B,this.data.toCommitId]:B,g=0;for(;g<T.length;){let u=T[g];if(u){let j=a[u];j&&(delete a[u],T.push(...j.commit.parentIds))}g++}let R=Object.values(a).filter(u=>!u.stash).map(u=>u.commit);this.atRiskCommits.next(R),this.loading.value&&R.length===0&&!this.workingCopyAtRisk.value?setTimeout(()=>this.dialogRef.close(!0),0):this.loading.next(!1)})}static{this.\u0275fac=function(o){return new(o||t)(f(x),f(ot),f(mt))}}static{this.\u0275cmp=h({type:t,selectors:[["ng-component"]],standalone:!1,features:[L],decls:13,vars:14,consts:[["mat-dialog-title",""],["diameter","48",4,"ngIf"],[4,"ngIf"],["type","button","mat-button","",3,"mat-dialog-close"],["type","button","mat-button","","color","warn",3,"mat-dialog-close",4,"ngIf"],["diameter","48"],["class","text-block",4,"ngIf"],[1,"text-block"],[1,"warning-icon"],[1,"commit-list"],[3,"matTooltip",4,"ngFor","ngForOf"],[3,"matTooltip"],["type","button","mat-button","","color","warn",3,"mat-dialog-close"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),n(),r(2,"mat-dialog-content"),w(3,Mt,1,0,"mat-spinner",1),m(4,"async"),w(5,Tt,6,8,"ng-container",2),m(6,"async"),n(),r(7,"mat-dialog-actions")(8,"button",3),l(9),m(10,"translate"),n(),w(11,kt,3,4,"button",4),m(12,"async"),n()),o&2&&(e(),c(a.data.title),e(2),s("ngIf",p(4,6,a.loading)),e(2),s("ngIf",p(6,8,a.loading)===!1),e(3),s("mat-dialog-close",void 0),e(),c(p(10,10,"Cancel")),e(2),s("ngIf",p(12,12,a.loading)===!1))},dependencies:[y,b,D,_,lt,Ct,vt,v,at,Z,xt,yt,I],styles:["mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.text-block[_ngcontent-%COMP%]{margin-bottom:10px}.warning-icon[_ngcontent-%COMP%]{margin-right:5px}.commit-list[_ngcontent-%COMP%]{list-style:inside;padding-left:20px;margin-top:10px;overflow-x:hidden}.commit-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"],changeDetection:0})}}return t})();var Et=(t,d)=>d.id;function At(t,d){t&1&&M(0,"mat-spinner",1)}function Rt(t,d){t&1&&(r(0,"div",4)(1,"mat-icon",5),l(2,"warning"),n(),l(3),m(4,"translate"),n()),t&2&&(e(3),C(" ",p(4,1,"There are changes to the working copy that will be lost.")," "))}function Ft(t,d){if(t&1&&(r(0,"li",7),l(1),n()),t&2){let i=d.$implicit;s("matTooltip",i.id),e(),q("",i.message," - ",i.id)}}function Ot(t,d){if(t&1&&(r(0,"div",4)(1,"mat-icon",5),l(2,"warning"),n(),l(3),m(4,"translate"),r(5,"ul",6),gt(6,Ft,2,3,"li",7,Et),n()()),t&2){let i=k(2);e(3),C(" ",p(4,1,"The following commits will no longer be reachable by any branch or tag and may be lost:")," "),e(3),ft(i.atRiskCommits())}}function Nt(t,d){if(t&1&&(F(0,Rt,5,3,"div",4),F(1,Ot,8,3,"div",4)),t&2){let i=k();O(i.workingCopyAtRisk()?0:-1),e(),O(i.atRiskCommits().length>0?1:-1)}}function jt(t,d){t&1&&(r(0,"button",3),l(1),m(2,"translate"),n()),t&2&&(s("mat-dialog-close",!0),e(),C(" ",p(2,2,"Confirm")," "))}var le=(()=>{class t extends tt(et){constructor(i,o,a){super(),this.data=i,this.dialogRef=o,this.graphSharedService=a,this.loading=V(!0),this.atRiskCommits=V([]),this.workingCopyAtRisk=V(!1)}ngOnInit(){if(this.data.currentBranch||!this.data.currentHeadCommitId){setTimeout(()=>this.dialogRef.close(!0),0);return}this.graphSharedService.getCommits().pipe(G(this.destroyed$)).subscribe(i=>{let o=P({},i),a=Object.values(i).filter(g=>g.commit.references.length>0).map(g=>g.id);o.head&&delete o.head;let B=0;for(;B<a.length;){let g=a[B];if(g){let R=o[g];R&&(delete o[g],a.push(...R.commit.parentIds))}B++}let T=Object.values(o).filter(g=>!g.stash).map(g=>g.commit);this.atRiskCommits.set(T),this.loading()&&T.length===0&&!this.workingCopyAtRisk()?setTimeout(()=>this.dialogRef.close(!0),0):this.loading.set(!1)})}static{this.\u0275fac=function(o){return new(o||t)(f(x),f(ot),f(mt))}}static{this.\u0275cmp=h({type:t,selectors:[["ng-component"]],standalone:!1,features:[L],decls:10,vars:7,consts:[["mat-dialog-title",""],["diameter","48"],["type","button","mat-button","",3,"mat-dialog-close"],["type","button","mat-button","","color","warn",3,"mat-dialog-close"],[1,"text-block"],[1,"warning-icon"],[1,"commit-list"],[3,"matTooltip"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),n(),r(2,"mat-dialog-content"),F(3,At,1,0,"mat-spinner",1)(4,Nt,2,2),n(),r(5,"mat-dialog-actions")(6,"button",2),l(7),m(8,"translate"),n(),F(9,jt,3,4,"button",3),n()),o&2&&(e(),c(a.data.title),e(2),O(a.loading()?3:4),e(3),s("mat-dialog-close",void 0),e(),c(p(8,5,"Cancel")),e(2),O(a.loading()?-1:9))},dependencies:[y,b,D,_,lt,v,at,Z,I],styles:["mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.text-block[_ngcontent-%COMP%]{margin-bottom:10px}.warning-icon[_ngcontent-%COMP%]{margin-right:5px}.commit-list[_ngcontent-%COMP%]{list-style:inside;padding-left:20px;margin-top:10px;overflow-x:hidden}.commit-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"],changeDetection:0})}}return t})();var Lt=t=>({item:t}),de=(()=>{class t{constructor(i){this.data=i,this.form=new J({name:new K(null,z.required)})}static{this.\u0275fac=function(o){return new(o||t)(f(x))}}static{this.\u0275cmp=h({type:t,selectors:[["app-create-branch-dialog"]],standalone:!1,decls:17,vars:19,consts:[["mat-dialog-title",""],[3,"formGroup"],["subscriptSizing","dynamic"],["type","text","matInput","","required","","formControlName","name",1,"name-ctrl"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close","disabled"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),m(2,"translate"),n(),r(3,"form",1)(4,"mat-dialog-content")(5,"mat-form-field",2)(6,"mat-label"),l(7),m(8,"translate"),n(),M(9,"input",3),n()(),r(10,"mat-dialog-actions")(11,"button",4),l(12),m(13,"translate"),n(),r(14,"button",5),l(15),m(16,"translate"),n()()()),o&2&&(e(),c(A(2,8,"Create _item_",E(17,Lt,a.data.title))),e(2),s("formGroup",a.form),e(4),c(p(8,11,"Name")),e(4),s("mat-dialog-close",void 0),e(),c(p(13,13,"Cancel")),e(2),s("mat-dialog-close",a.form.value)("disabled",a.form.invalid),e(),c(p(16,15,"Save")))},dependencies:[y,b,D,_,nt,it,rt,Q,$,U,H,Y,W,X,v,I],encapsulation:2,changeDetection:0})}}return t})();var qt=t=>({name:t}),ue=(()=>{class t{constructor(i){this.data=i}static{this.\u0275fac=function(o){return new(o||t)(f(x))}}static{this.\u0275cmp=h({type:t,selectors:[["app-remove-remote-dialog"]],standalone:!1,decls:13,vars:17,consts:[["mat-dialog-title",""],["type","button","mat-button","",3,"mat-dialog-close"],["type","submit","mat-button","","color","warn",3,"mat-dialog-close"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),m(2,"translate"),n(),r(3,"mat-dialog-content"),l(4),m(5,"translate"),n(),r(6,"mat-dialog-actions")(7,"button",1),l(8),m(9,"translate"),n(),r(10,"button",2),l(11),m(12,"translate"),n()()),o&2&&(e(),c(p(2,6,"Remove remote")),e(3),C(" ",A(5,8,"Are you sure you want to remove the remote _name_?",E(15,qt,a.data.name))," "),e(3),s("mat-dialog-close",null),e(),c(p(9,11,"Cancel")),e(2),s("mat-dialog-close",!0),e(),c(p(12,13,"Confirm")))},dependencies:[y,b,D,_,v,I],encapsulation:2,changeDetection:0})}}return t})();var $t=t=>({title:t}),xe=(()=>{class t{constructor(i){this.data=i,this.form=new J({name:new K(this.data.name,{nonNullable:!0,validators:z.required})})}static{this.\u0275fac=function(o){return new(o||t)(f(x))}}static{this.\u0275cmp=h({type:t,selectors:[["app-rename-branch-dialog"]],standalone:!1,decls:17,vars:19,consts:[["mat-dialog-title",""],[3,"formGroup"],["subscriptSizing","dynamic"],["type","text","matInput","","required","","formControlName","name"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close","disabled"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),m(2,"translate"),n(),r(3,"form",1)(4,"mat-dialog-content")(5,"mat-form-field",2)(6,"mat-label"),l(7),m(8,"translate"),n(),M(9,"input",3),n()(),r(10,"mat-dialog-actions")(11,"button",4),l(12),m(13,"translate"),n(),r(14,"button",5),l(15),m(16,"translate"),n()()()),o&2&&(e(),c(A(2,8,"Rename _title_",E(17,$t,a.data.title))),e(2),s("formGroup",a.form),e(4),c(p(8,11,"Name")),e(4),s("mat-dialog-close",void 0),e(),c(p(13,13,"Cancel")),e(2),s("mat-dialog-close",a.form.value.name)("disabled",a.form.invalid),e(),c(p(16,15,"Save")))},dependencies:[y,b,D,_,nt,it,rt,Q,$,U,H,Y,W,X,v,I],encapsulation:2,changeDetection:0})}}return t})();export{mt as a,Xt as b,le as c,de as d,ue as e,xe as f};
