"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[450],{5773:(L,f,e)=>{e.d(f,{F:()=>m});var s=e(4650);class m extends s.SBq{constructor(a){super(a.nativeElement)}static{this.\u0275fac=function(p){return new(p||m)(s.Y36(s.SBq))}}static{this.\u0275dir=s.lG2({type:m,selectors:[["","appElementRef",""]],exportAs:["appElementRef"],features:[s.qOj]})}}},6271:(L,f,e)=>{e.d(f,{k:()=>a});var s=e(3779),m=e(4650),g=e(7016);class a{constructor(n){this.baseApi=n}getRelativePath(n,c){return this.baseApi.single(s.w.files.getRelativePath,n,c)}getResolvedPath(n,c){return this.baseApi.single(s.w.files.getResolvedPath,n,c)}getFileContents(n){return this.baseApi.single(s.w.files.getFileContents,n)}openFileDialog(n){return this.baseApi.single(s.w.files.openFileDialog,n)}openFolderDialog(n,c){return this.baseApi.single(s.w.files.openFolderDialog,n,c)}openFileWithShell(n){return this.baseApi.single(s.w.files.openFileWithShell,n)}hasTerminal(){return this.baseApi.single(s.w.files.hasTerminal)}openTerminal(n){return this.baseApi.single(s.w.files.openTerminal,n)}hasVsCode(){return this.baseApi.single(s.w.files.hasVsCode)}openVsCode(n){return this.baseApi.single(s.w.files.openVsCode,n)}static{this.\u0275fac=function(c){return new(c||a)(m.LFG(g._))}}static{this.\u0275prov=m.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}}},1815:(L,f,e)=>{e.d(f,{E:()=>B});var s=e(4080),m=e(1135),g=e(5698),a=e(2722),p=e(4004),n=e(8926),c=e(9967),i=e(4462),d=e(8310),r=e(2120),u=e(6966),D=e(2270),t=e(4650),W=e(9615),R=e(9867),U=e(6271),C=e(3394),h=e(6895),_=e(4859),O=e(7392),A=e(266),l=e(5773),M=e(4442);function F(v,T){if(1&v){const o=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(o);const I=t.oxw(2);return t.KtG(I.openWithTerminal())}),t.TgZ(1,"mat-icon"),t._uU(2,"terminal"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&v&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"Terminal")," "))}function w(v,T){if(1&v){const o=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(o);const I=t.oxw(2);return t.KtG(I.openWithVsCode())}),t._UZ(1,"mat-icon",9),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&v&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Visual Studio Code")," "))}function b(v,T){if(1&v){const o=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){const K=t.CHM(o).$implicit,E=t.oxw(2);return t.KtG(E.openRemote(K.url))}),t._UZ(1,"mat-icon",11),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA()}if(2&v){const o=T.$implicit;t.Q6J("matTooltip",o.url),t.xp6(1),t.s9C("svgIcon",o.type),t.xp6(1),t.AsE(" ","bitbucket"===o.type?t.lcZ(3,4,"Bitbucket"):"github"===o.type?t.lcZ(4,6,"GitHub"):"gitlab"===o.type?t.lcZ(5,8,"GitLab"):"",": ",o.name," ")}}function S(v,T){if(1&v){const o=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",6),t.NdJ("click",function(){t.CHM(o);const I=t.oxw();return t.KtG(I.openWithFileExplorer())}),t.TgZ(5,"mat-icon"),t._uU(6,"folder"),t.qZA(),t._uU(7),t.qZA(),t.YNc(8,F,5,3,"button",7),t.ALo(9,"async"),t.YNc(10,w,4,3,"button",7),t.ALo(11,"async"),t.YNc(12,b,6,10,"button",8),t.ALo(13,"async"),t.qZA()}if(2&v){const o=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"Open with...")),t.xp6(5),t.hij(" ",o.folderText," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,7,o.hasTerminal)),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,9,o.hasVsCode)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(13,11,o.remotes))}}class B extends((0,n.j)(c.A)){constructor(T,o,P,I,K){super(),this.overlay=T,this.viewContainerRef=o,this.store=P,this.filesApi=I,this.providerUrlMatcherService=K,this.menuOverlayRef=new m.X(null),this.folderText=i.V?"Finder":i.E?"File Explorer":"File Manager",this.openMenu=(E,x,y)=>{E.preventDefault(),E.stopPropagation(),this.closeMenu();const Z=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(x).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(Z),Z.attach(new s.UE(y,this.viewContainerRef)),(0,d.t)(Z,!1).pipe((0,g.q)(1),(0,a.R)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))},this.openWithFileExplorer=()=>{const E=this.store.selectSnapshot(u.E.selectedRepositoryPath);if(!E)throw new D.uX;this.filesApi.openFileWithShell(E).subscribe(),this.closeMenu()},this.openWithTerminal=()=>{const E=this.store.selectSnapshot(u.E.selectedRepositoryPath);if(!E)throw new D.uX;this.filesApi.openTerminal(E).subscribe(),this.closeMenu()},this.openWithVsCode=()=>{const E=this.store.selectSnapshot(u.E.selectedRepositoryPath);if(!E)throw new D.uX;this.filesApi.openVsCode(E).subscribe(),this.closeMenu()},this.openRemote=E=>{window.open(E),this.closeMenu()}}ngOnInit(){this.remotes=this.store.select(u.E.selectedRemotes).pipe((0,p.U)(T=>(T??[]).map(o=>{const P=this.providerUrlMatcherService.matchProvider(o.url);return P?[o,P]:null}).filter(r.$K).map(([o,P])=>({type:P.type,url:this.providerUrlMatcherService.getUrl(P),name:o.name})))),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}static{this.\u0275fac=function(o){return new(o||B)(t.Y36(W.aV),t.Y36(t.s_b),t.Y36(R.yh),t.Y36(U.k),t.Y36(C.d))}}static{this.\u0275cmp=t.Xpm({type:B,selectors:[["app-repository-actions-open-with"]],features:[t.qOj],decls:7,vars:3,consts:[["type","button","mat-stroked-button","","appElementRef","",1,"item",3,"matTooltip","click"],["openWithMenuBtn","appElementRef"],[1,"launch-icon"],["openWithMenu",""],[1,"menu-panel"],[1,"menu-header"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"matTooltip","click"],[3,"svgIcon"]],template:function(o,P){if(1&o){const I=t.EpF();t.TgZ(0,"button",0,1),t.NdJ("click",function(E){t.CHM(I);const x=t.MAs(1),y=t.MAs(6);return t.KtG(P.openMenu(E,x,y))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon",2),t._uU(4,"launch"),t.qZA()(),t.YNc(5,S,14,13,"ng-template",null,3,t.W1O)}2&o&&t.Q6J("matTooltip",t.lcZ(2,1,"Open repository with..."))},dependencies:[h.sg,h.O5,_.lW,O.Hw,A.gM,l.F,h.Ov,M.X],styles:[".item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0})}}},98:(L,f,e)=>{e.d(f,{z:()=>R});var s=e(2843),m=e(262),g=e(4004),a=e(2270),p=e(3825),n=e(2120),c=e(8523),i=e(4889),d=e(1129),r=e(8724),u=e(4924),D=e(4650),t=e(9867),W=e(790);class R{constructor(C,h){this.store=C,this.commitsApi=h,this.startEdit=(_,O)=>this.store.dispatch(new d.z0(_,{name:"Edit commits",detail:(0,p.Iu)("from _commit_",{commitId:O}),do:()=>this.store.dispatch(new d.LF(_,O))})),this.discardEdit=_=>this.store.dispatch(new d.z0(_,{name:"Discard commit edits",do:()=>this.commitsApi.discardCommitEditing(_)})),this.saveEdits=_=>this.store.dispatch(new d.z0(_,{name:"Save commit edits",do:()=>this.commitsApi.completeCommitEditing(_).pipe((0,c.C)(()=>this.store.dispatch(new i.Vu(_,[i.nh.commits,i.nh.currentBranchCommitId,i.nh.headCommitId,i.nh.mergeHeads,i.nh.merges,i.nh.references,i.nh.stagedChanges,i.nh.submodules,i.nh.unstagedChanges]))))})),this.editCommitDetails=(_,O,A)=>this.store.dispatch(new d.z0(_,{name:"Edit commit",detail:A,do:()=>this.commitsApi.editCommitDetails(_,O,A,this.getCommitter()).pipe((0,m.K)(l=>a.L8.matches(l)?(0,s._)(()=>new n.ZR(l)):(0,s._)(()=>l)))})).pipe((0,g.U)(()=>this.store.selectSnapshot(r.h.mostRecentAction(_))?.state)),this.squashCommit=(_,O,A)=>this.store.dispatch(new d.z0(_,{name:"Squash commit",detail:(0,p.Iu)("_commit_ up/down",{commitId:O,isUpwards:"up"===A}),do:()=>this.commitsApi.squashCommit(_,O,A,this.getCommitter()).pipe((0,m.K)(l=>a.bk.matches(l)||a.xb.matches(l)||a.Ak.matches(l)||a.zd.matches(l)||a.zN.matches(l)||a.L8.matches(l)?(0,s._)(()=>new n.ZR(l)):(0,s._)(()=>l)))})).pipe((0,g.U)(()=>this.store.selectSnapshot(r.h.mostRecentAction(_))?.state)),this.insertCommit=(_,O,A)=>this.store.dispatch(new d.z0(_,{name:"Insert commit",detail:(0,p.Iu)("_commit_ above/below",{commitId:O,isAbove:"above"===A}),do:()=>this.commitsApi.insertCommit(_,O,A,this.getCommitter()).pipe((0,m.K)(l=>a.L8.matches(l)?(0,s._)(()=>new n.ZR(l)):(0,s._)(()=>l)))})).pipe((0,g.U)(()=>this.store.selectSnapshot(r.h.mostRecentAction(_))?.state)),this.moveCommitChanges=(_,O,A,l)=>this.store.dispatch(new d.z0(_,{name:"Move commit changes",detail:(0,p.Iu)("_commit_ up/down",{commitId:O,isUpwards:"up"===A}),do:()=>this.commitsApi.moveCommitChanges(_,O,A,l,this.getCommitter()).pipe((0,m.K)(M=>a.L8.matches(M)||a.ND.matches(M)||a._5.matches(M)||a.x4.matches(M)||a.KS.matches(M)||a.wX.matches(M)?(0,s._)(()=>new n.ZR(M)):(0,s._)(()=>M)))})).pipe((0,g.U)(()=>this.store.selectSnapshot(r.h.mostRecentAction(_))?.state))}getCommitter(){const C=this.store.selectSnapshot(u.$.selectedProfile);return C&&C.name&&C.email?{name:C.name,email:C.email}:null}static{this.\u0275fac=function(h){return new(h||R)(D.LFG(t.yh),D.LFG(W.T))}}static{this.\u0275prov=D.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}}},7093:(L,f,e)=>{e.d(f,{v:()=>i});var s=e(5412),m=e(9549),g=e(284),a=e(1572),p=e(4385),n=e(3179),c=e(4650);class i{static{this.\u0275fac=function(u){return new(u||i)}}static{this.\u0275mod=c.oAB({type:i})}static{this.\u0275inj=c.cJS({imports:[s.Is,m.lN,g.c,a.Cq,p.LD,n.I]})}}},4874:(L,f,e)=>{e.d(f,{p:()=>p});var s=e(2686),m=e(2270),g=e(3825),a=e(4650);class p{constructor(){this.parseReference=c=>{const i=p.referenceRegex.exec(c);if(!i)throw new m.xB(c);if("remotes"===i[1]){const d=p.remoteBranchRegex.exec(c);if(!d)throw new m.xB(c);return{branch:d[2]??"",sourceName:d[1]??"",sourceType:"remote"}}return"stash"===i[1]?{branch:(0,g.Iu)("stash"),sourceName:(0,g.Iu)("stash"),sourceType:"stash"}:{branch:i[2],sourceName:(0,g.Iu)("heads"===i[1]?"local":"tag"),sourceType:"heads"===i[1]?"local":"tag"}},this.getBranchTypeIcon=c=>{switch(c){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"archive";case"tag":return"label"}}}static{this.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/}static{this.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/}calculateBranches(c,i){const d=(0,s.Z)(c.map(this.parseReference),({branch:r})=>r);return Object.entries(d).map(([r,u])=>({name:r,sources:u.map(D=>({name:D.sourceName,type:D.sourceType,icon:this.getBranchTypeIcon(D.sourceType)}))})).sort((r,u)=>{const D=r.sources.some(h=>"local"===h.type&&`refs/heads/${r.name}`===i),t=r.sources.some(h=>"local"===h.type&&`refs/heads/${u.name}`===i);if(D&&!t)return-1;if(!D&&t)return 1;const W=r.sources.some(h=>"local"===h.type),R=u.sources.some(h=>"local"===h.type);if(W&&!R)return-1;if(!W&&R)return 1;const U=r.sources.some(h=>"remote"===h.type),C=u.sources.some(h=>"remote"===h.type);return U&&!C?-1:!U&&C?1:r.sources.length>u.sources.length?-1:r.sources.length<u.sources.length?1:r.name>u.name?-1:r.name<u.name?1:0}).slice(0,30)}static{this.\u0275fac=function(i){return new(i||p)}}static{this.\u0275prov=a.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}}}}]);