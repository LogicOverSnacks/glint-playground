import{b as si}from"./chunk-7JLJ6BPP.js";import{a as ri,b as ke,c as Ie,d as ci}from"./chunk-DLIDMTHY.js";import{b as ni}from"./chunk-DAMMMNIE.js";import{a as li}from"./chunk-W4WVVNAR.js";import{a as oi,b as ai}from"./chunk-HHP4IUCA.js";import{D as P,j as ti,q as Se,r as ii}from"./chunk-AHHMW4YH.js";import{$ as se,$i as Jt,Aa as _,Ae as Ct,Af as Rt,Ai as Qt,B as oe,Ba as nt,Bb as Le,Be as ft,Bf as K,Bi as Gt,Cb as N,Ce as Ne,Ci as Xt,De as ue,E as qe,Ea as H,Eb as dt,Ee as vt,Ei as $t,Ff as Dt,G as I,Ga as W,Gf as A,Ha as Re,Hb as ht,I as Qe,Ia as v,Ib as Y,Ii as ye,Ja as ot,Jf as Vt,Ka as De,L as Ge,La as m,Lg as ee,Mb as z,Me as Ot,Mf as Bt,Mi as be,Na as le,Ne as Pt,Nf as Ce,Nh as jt,Oa as at,Oe as Mt,Of as Lt,Pb as _t,Pi as xe,Qf as J,Qi as we,R as X,Rf as Nt,S as ae,Se as yt,Sf as He,T,U as Xe,Ua as r,Uh as Oe,Va as l,Wa as k,We as bt,Xa as pe,Xh as Ht,Ya as me,Z as $e,Ze as xt,Zf as fe,Zh as Wt,Zi as Zt,_a as M,_h as Pe,aa as Ee,ab as f,aj as ei,bb as d,ca as re,cb as st,da as R,db as rt,df as Ue,ea as ce,eb as ct,f as te,fa as Ze,fb as Ve,fi as Yt,gb as $,h as Ye,ha as Je,hb as V,hh as q,hi as zt,i as Ae,ia as u,ib as B,ig as ve,ih as Q,j,ja as C,jb as Z,kb as h,kh as Ut,lb as O,lh as G,ma as et,mb as L,mf as wt,mg as x,n as y,nb as lt,nf as St,ni as Kt,oa as tt,ob as Be,of as kt,oi as qt,pa as b,pb as pt,pf as It,q as ze,qa as it,qb as mt,qf as Tt,rf as At,s as D,sa as Fe,sc as _e,se as gt,sf as je,t as ie,u as Ke,ub as s,ue as ut,vb as c,ve as ge,w as ne,wb as de,xf as Et,yb as he,yf as Ft,z as F,za as a,zi as Me}from"./chunk-RKMHOEIU.js";function yi(n,g){if(n&1){let e=M();r(0,"app-new-commit",3),f("patchChanged",function(i){u(e);let o=d(2);return C(o.patchChanged.next(i))}),l()}}function bi(n,g){if(n&1){let e=M();r(0,"app-commit",4),f("patchChanged",function(i){u(e);let o=d(2);return C(o.patchChanged.next(i))}),l()}if(n&2){let e=d(2);m("commit",e.commit)("selectedFile",e.selectedFile)}}function xi(n,g){if(n&1&&(pe(0),v(1,yi,1,0,"app-new-commit",1)(2,bi,1,2,"app-commit",2),me()),n&2){let e=g.ngIf;a(),m("ngIf",e==="head"),a(),m("ngIf",e!=="head")}}var pi=(()=>{class n extends q(Q){constructor(){super(...arguments),this.patchChanged=new b}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=et(n)))(i||n)}})()}static{this.\u0275cmp=R({type:n,selectors:[["app-commit-detail-view"]],inputs:{commit:"commit",selectedFile:"selectedFile"},outputs:{patchChanged:"patchChanged"},features:[W],decls:2,vars:3,consts:[[4,"ngIf"],[3,"patchChanged",4,"ngIf"],[3,"commit","selectedFile","patchChanged",4,"ngIf"],[3,"patchChanged"],[3,"patchChanged","commit","selectedFile"]],template:function(t,i){t&1&&(v(0,xi,3,2,"ng-container",0),s(1,"async")),t&2&&m("ngIf",c(1,1,i.commit))},encapsulation:2,changeDetection:0})}}return n})();function Vi(n,g){if(n&1){let e=M();r(0,"li",21),f("click",function(){let i=u(e).$implicit,o=d(4);return C(o.changeCommit(i))}),h(1),l()}if(n&2){let e=g.$implicit,t=g.first;m("matTooltip",e),a(),lt("",t?"":", ","",e,"")}}function Bi(n,g){if(n&1&&(r(0,"div",18)(1,"span",5),h(2),s(3,"translate"),l(),r(4,"div",19)(5,"ul"),v(6,Vi,2,3,"li",20),l()()()),n&2){let e=d(2).ngIf;le("plural",e.parentIds.length>1),a(2),L("",c(3,4,e.parentIds.length===1?"Parent:":"Parents:")," "),a(4),m("ngForOf",e.parentIds)}}function Li(n,g){if(n&1&&(r(0,"div",22),h(1),s(2,"translate"),k(3,"app-avatar",12),s(4,"async"),r(5,"span",13),h(6),l()()),n&2){let e=d(2).ngIf,t=d();m("matTooltip",e.committerName+" ("+e.committerEmail+")"),a(),L(" ",c(2,5,"committed by")," "),a(2),m("remotes",c(4,7,t.remotes))("email",e.committerEmail),a(3),O(e.committerName)}}function Ni(n,g){if(n&1){let e=M();r(0,"div",23)(1,"div",24),h(2),l(),r(3,"button",25),f("click",function(){let i=u(e).data,o=d(3);return C(o.copyToClipboard(o.getPatchPath(i)))}),r(4,"mat-icon"),h(5,"content_copy"),l(),r(6,"span"),h(7),s(8,"translate"),l()(),r(9,"button",26),f("click",function(){let i=u(e).data,o=d(3);return C(o.blamePatch(i))}),r(10,"mat-icon"),h(11,"document_scanner"),l(),r(12,"span"),h(13),s(14,"translate"),l()()()}if(n&2){let e,t=g.data,i=d(3);a(),m("matTooltip",(e=i.getPatchPath(t))!==null&&e!==void 0?e:""),a(),O(i.getPatchFilename(t)),a(5),O(c(8,4,"Copy Path")),a(6),O(c(14,6,"Blame"))}}function Ui(n,g){if(n&1){let e=M();r(0,"div",3)(1,"header")(2,"div",4),f("click",function(){u(e);let i=d().ngIf,o=d();return C(o.copyToClipboard(i.id))}),r(3,"span",5),h(4),s(5,"translate"),l(),h(6),l(),v(7,Bi,7,6,"div",6),l(),r(8,"app-grid",7)(9,"app-grid-cell")(10,"mat-card",8)(11,"div",9)(12,"span",10),h(13),l(),k(14,"br"),r(15,"span"),h(16),l()(),r(17,"div",11),h(18),s(19,"translate"),k(20,"app-avatar",12),s(21,"async"),r(22,"span",13),h(23),l(),k(24,"br"),l(),v(25,Li,7,9,"div",14),r(26,"div",15),s(27,"translateDate"),h(28),s(29,"translate"),r(30,"span",13),h(31),s(32,"translateDate"),l(),h(33),s(34,"translate"),r(35,"span",13),h(36),s(37,"translateDate"),l()()()(),r(38,"app-grid-cell")(39,"mat-card",16)(40,"app-patches-view",17),s(41,"async"),f("selectedChanged",function(i){u(e);let o=d(2);return C(o.changeFile(i.oldFilePath,i.newFilePath))})("contextMenuOpened",function(i){u(e);let o=Z(43),p=d(2);return C(p.openContextMenu(o,i[0],i[1]))}),l()()()(),v(42,Ni,15,8,"ng-template",null,0,he),l()}if(n&2){let e=d().ngIf,t=d();a(2),m("matTooltip",e.id),a(2),O(c(5,19,"Commit:")),a(2),L(" ",e.id," "),a(),m("ngIf",e.parentIds.length),a(6),O(t.getMessageSubject(e.message)),a(3),O(t.getMessageBody(e.message)),a(),m("matTooltip",e.authorName+" ("+e.authorEmail+")"),a(),L(" ",c(19,21,"authored by")," "),a(2),m("remotes",c(21,23,t.remotes))("email",e.authorEmail),a(3),O(e.authorName),a(2),m("ngIf",e.committerName&&e.committerEmail&&(e.authorName!==e.committerName||e.authorEmail!==e.committerEmail)),a(),m("matTooltip",de(27,25,e.date,"z")||""),a(2),L(" ",c(29,28,"on !date!")," "),a(3),O(de(32,30,e.date,"longDate")),a(2),L(" ",c(34,33,"at !time!")," "),a(3),O(de(37,35,e.date,"HH:mm")),a(4),m("patches",e.patches)("selected",c(41,38,t.selectedFile))}}function ji(n,g){if(n&1&&(pe(0),v(1,Ui,44,40,"div",2),me()),n&2){let e=g.ngIf;a(),m("ngIf",e&&e!=="head")}}var hi=(()=>{class n extends q(Q){constructor(e,t,i,o,p){super(),this.overlay=e,this.router=t,this.viewContainerRef=i,this.store=o,this.commitDetailService=p,this.patchChanged=new b,this.overlayRef=null}getPatchPath(e){return this.commitDetailService.getPatchPath(e)}getPatchFilename(e){let t=this.commitDetailService.getPatchPath(e);return t?t.slice(t.lastIndexOf("/")+1):null}getMessageSubject(e){return e.split(`
`)[0]??""}getMessageBody(e){return e.split(`
`).slice(1).join(`
`).trimEnd()}copyToClipboard(e){navigator.clipboard.writeText(e??"").then(()=>{})}changeCommit(e){this.selectedRepositoryPath.pipe(I(1)).subscribe(t=>{t!==null&&(this.store.dispatch(new ti(t,e)),e&&this.store.dispatch(new Se(t,e)))})}changeFile(e,t){this.patchChanged.next({area:"commit",oldFilePath:e,newFilePath:t})}blamePatch(e){this.commit.pipe(I(1)).subscribe(t=>{this.router.navigate(["/standard/blame"],{queryParams:{area:"commit","commit-id":t==="head"?"head":t?.id,path:e.newFilePath}})})}openContextMenu(e,t,i){i.preventDefault(),i.stopPropagation(),this.closeContextMenu(),this.overlayRef=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo({x:i.x,y:i.y}).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this.overlayRef.attach(new K(e,this.viewContainerRef,{data:t})),ye(this.overlayRef).pipe(I(1),T(this.destroyed$)).subscribe(()=>this.closeContextMenu())}closeContextMenu(){this.overlayRef?.dispose(),this.overlayRef=null}static{this.\u0275fac=function(t){return new(t||n)(_(A),_(_e),_(H),_(ve),_(ke))}}static{this.\u0275cmp=R({type:n,selectors:[["app-commit"]],inputs:{commit:"commit",selectedFile:"selectedFile"},outputs:{patchChanged:"patchChanged"},features:[W],decls:2,vars:3,consts:[["fileContextMenu",""],[4,"ngIf"],["class","detail-container",4,"ngIf"],[1,"detail-container"],[1,"this-commit",3,"click","matTooltip"],[1,"title"],["class","parent-commits",3,"plural",4,"ngIf"],["id","commit-detail-view","vertical",""],["appearance","outlined",1,"message"],[1,"content"],[1,"subject"],[1,"author",3,"matTooltip"],[3,"remotes","email"],[1,"highlight"],["class","committer",3,"matTooltip",4,"ngIf"],[1,"date",3,"matTooltip"],["appearance","outlined",1,"files"],[3,"selectedChanged","contextMenuOpened","patches","selected"],[1,"parent-commits"],[1,"parent-commit-ids"],[3,"matTooltip","click",4,"ngFor","ngForOf"],[3,"click","matTooltip"],[1,"committer",3,"matTooltip"],[1,"menu-panel"],[1,"menu-header",3,"matTooltip"],[1,"menu-item",3,"click"],["matTooltip","Show file history",1,"menu-item",3,"click"]],template:function(t,i){t&1&&(v(0,ji,2,1,"ng-container",1),s(1,"async")),t&2&&m("ngIf",c(1,1,i.commit))},dependencies:[Pe,ht,Y,Me,fe,$t,xe,we,Ie,z,Jt,be],styles:[".detail-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;gap:10px}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;column-gap:10px;padding:0 10px;flex:0 0 auto;overflow-x:hidden;overflow-y:auto;font-weight:600}header[_ngcontent-%COMP%]   .this-commit[_ngcontent-%COMP%]{flex:1 1 113px;min-width:113px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}header[_ngcontent-%COMP%]   .parent-commits[_ngcontent-%COMP%]{flex:1 1 106px;min-width:106px;overflow:hidden}header[_ngcontent-%COMP%]   .parent-commits[_ngcontent-%COMP%]   .parent-commit-ids[_ngcontent-%COMP%]{display:inline-block;width:calc(100% - 61px)}header[_ngcontent-%COMP%]   .parent-commits[_ngcontent-%COMP%]   .parent-commit-ids[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}header[_ngcontent-%COMP%]   .parent-commits[_ngcontent-%COMP%]   .parent-commit-ids[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}header[_ngcontent-%COMP%]   .parent-commits.plural[_ngcontent-%COMP%]{flex-basis:163px;min-width:163px}header[_ngcontent-%COMP%]   .parent-commits.plural[_ngcontent-%COMP%]   .parent-commit-ids[_ngcontent-%COMP%]{width:calc(100% - 63px)}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:400}.message[_ngcontent-%COMP%]{height:calc(100% - 5px);margin:0 10px 5px;padding:16px;overflow:auto;white-space:pre-line}.message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:1rem;overflow-wrap:anywhere}.message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{font-size:1.25rem}.message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{margin-top:20px}.message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]{margin-bottom:2px}.message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{width:auto;height:1.5625rem;aspect-ratio:1/1;margin:0 3px 0 5px;vertical-align:bottom}.message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{font-size:1.25rem}.files[_ngcontent-%COMP%]{height:calc(100% - 5px);margin:5px 10px 0;padding:16px;white-space:nowrap;overflow:auto;display:flex;flex-direction:column;gap:10px}.dark-theme[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff}.dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#ffffffb3}.dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#fff}.light-theme[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#000000de}.light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#0000008a}.light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#000000de}"],changeDetection:0})}}return y([x(P.selectedRemotes)],n.prototype,"remotes",void 0),y([x(P.selectedRepositoryPath)],n.prototype,"selectedRepositoryPath",void 0),n})();function Hi(n,g){if(n&1){let e=M();r(0,"button",21),s(1,"async"),s(2,"nullEmpty"),s(3,"translate"),f("click",function(){u(e);let i=d(2);return C(i.stage())}),k(4,"mat-icon",19),s(5,"async"),s(6,"nullEmpty"),l()}if(n&2){let e=d(2);m("matTooltip",c(3,6,c(2,4,c(1,2,e.checkedUnstaged))?"Stage selected changes":"Stage all changes")),a(4),m("svgIcon",c(6,10,c(5,8,e.checkedUnstaged))?"tray-plus":"tray-arrow-down")}}function Wi(n,g){n&1&&(r(0,"div",22),s(1,"translate"),r(2,"button",23)(3,"mat-icon"),h(4,"warning"),l()()()),n&2&&m("matTooltip",c(1,1,"Cannot stage conflicted files, resolve the conflicts first"))}function Yi(n,g){if(n&1){let e=M();r(0,"app-grid-cell",3)(1,"mat-card",12)(2,"div",13)(3,"button",14),s(4,"async"),s(5,"translate"),f("click",function(){u(e);let i=d();return C(i.clickAllUnstagedCheckbox())}),r(6,"mat-icon"),h(7),s(8,"async"),l()(),r(9,"div",15),v(10,Hi,7,12,"button",16),s(11,"async"),v(12,Wi,5,3,"div",17),s(13,"async"),r(14,"button",18),s(15,"async"),s(16,"nullEmpty"),s(17,"translate"),f("click",function(){u(e);let i=d();return C(i.discard())}),k(18,"mat-icon",19),s(19,"async"),s(20,"nullEmpty"),l()()(),r(21,"app-patches-view",20),s(22,"async"),f("checkedChanged",function(i){u(e);let o=d();return C(o.setPatchChecked("unstaged",i[0],i[1]))})("selectedChanged",function(i){u(e);let o=d();return C(o.selectFile("unstaged",i.oldFilePath,i.newFilePath))})("contextMenuOpened",function(i){u(e);let o=d(),p=Z(23);return C(o.openContextMenu("unstaged",p,i[0],i[1]))}),l()()()}if(n&2){let e=g.ngIf,t=d();a(3),m("matTooltip",c(5,11,c(4,9,t.allUnstagedCheckboxIcon)==="check_box_outline_blank"?"Select all":"Deselect all")),a(4),O(c(8,13,t.allUnstagedCheckboxIcon)),a(3),m("ngIf",c(11,15,t.hasConflicts)===!1),a(2),m("ngIf",c(13,17,t.hasConflicts)),a(2),m("matTooltip",c(17,23,c(16,21,c(15,19,t.checkedUnstaged))?"Discard selected changes":"Discard all changes")),a(4),m("svgIcon",c(20,27,c(19,25,t.checkedUnstaged))?"tray-remove":"tray"),a(3),m("patches",e)("checked",t.checkedUnstaged)("selected",c(22,29,t.selectedUnstagedFile))}}function zi(n,g){if(n&1){let e=M();r(0,"mat-card",24)(1,"div",13)(2,"button",14),s(3,"async"),s(4,"translate"),f("click",function(){u(e);let i=d();return C(i.clickAllStagedCheckbox())}),r(5,"mat-icon"),h(6),s(7,"async"),l()(),r(8,"div",15)(9,"button",25),s(10,"async"),s(11,"nullEmpty"),s(12,"translate"),f("click",function(){u(e);let i=d();return C(i.unstage())}),k(13,"mat-icon",19),s(14,"async"),s(15,"nullEmpty"),l()()(),r(16,"app-patches-view",20),s(17,"async"),f("checkedChanged",function(i){u(e);let o=d();return C(o.setPatchChecked("staged",i[0],i[1]))})("selectedChanged",function(i){u(e);let o=d();return C(o.selectFile("staged",i.oldFilePath,i.newFilePath))})("contextMenuOpened",function(i){u(e);let o=d(),p=Z(23);return C(o.openContextMenu("staged",p,i[0],i[1]))}),l()()}if(n&2){let e=g.ngIf,t=d();a(2),m("matTooltip",c(4,9,c(3,7,t.allStagedCheckboxIcon)==="check_box_outline_blank"?"Select all":"Deselect all")),a(4),O(c(7,11,t.allStagedCheckboxIcon)),a(3),m("matTooltip",c(12,17,c(11,15,c(10,13,t.checkedStaged))?"Unstage selected changes":"Unstage all changes")),a(4),m("svgIcon",c(15,21,c(14,19,t.checkedStaged))?"tray-minus":"tray-arrow-up"),a(3),m("patches",e)("checked",t.checkedStaged)("selected",c(17,23,t.selectedStagedFile))}}function Ki(n,g){n&1&&k(0,"mat-spinner",26)}function qi(n,g){n&1&&(r(0,"span"),h(1),s(2,"translate"),l()),n&2&&(a(),O(c(2,1,"Commit changes")))}function Qi(n,g){if(n&1){let e=M();r(0,"button",31),f("click",function(){u(e);let i=d().data,o=d();return C(o.blamePatch(i.area,i.patch))}),r(1,"mat-icon"),h(2,"document_scanner"),l(),r(3,"span"),h(4),s(5,"translate"),l()()}n&2&&(a(4),O(c(5,1,"Blame")))}function Gi(n,g){if(n&1){let e=M();r(0,"div",27)(1,"div",28),h(2),l(),r(3,"button",29),f("click",function(){let i=u(e).data,o=d();return C(o.copyToClipboard(o.getPatchPath(i.patch)))}),r(4,"mat-icon"),h(5,"content_copy"),l(),r(6,"span"),h(7),s(8,"translate"),l()(),v(9,Qi,6,3,"button",30),l()}if(n&2){let e,t=g.data,i=d();a(),m("matTooltip",(e=i.getPatchPath(t.patch))!==null&&e!==void 0?e:""),a(),O(i.getPatchFilename(t.patch)),a(5),O(c(8,4,"Copy Path")),a(2),m("ngIf",!i.isPatchAdded(t.patch))}}var _i=(()=>{class n extends q(Q,Ut){constructor(e,t,i,o,p,w,E){super(),this.overlay=e,this.router=t,this.viewContainerRef=i,this.store=o,this.commitDetailService=p,this.repositoryActionsService=w,this.stagingActionsService=E,this.patchChanged=new b,this.commitMessageControl=new bt(null),this.commitButtonLoading=new j(!1),this.checkedStaged=new j([]),this.checkedUnstaged=new j([]),this.allStagedCheckboxIcon=new j("check_box_outline_blank"),this.allUnstagedCheckboxIcon=new j("check_box_outline_blank"),this.overlayRef=null,this.isPatchAdded=U=>U.status===ee.Added}ngOnInit(){this.stagedChanges=this.allStagedChanges.pipe(D(e=>e?.filter(t=>t.status!==ee.Conflicted)??null)),this.selectedRepositoryCommitMessage.pipe(T(this.destroyed$)).subscribe(e=>{this.commitMessageControl.setValue(e,{emitEvent:!1})}),this.commitMessageControl.valueChanges.pipe(qe(200),T(this.destroyed$)).subscribe(e=>{let t=this.store.selectSnapshot(P.selectedRepositoryPath);t&&this.store.dispatch(new ii(t,e))}),this.commitButtonDisabled=ie([this.commitButtonLoading,this.stagedChanges,F(this.selectedRepositoryCommitMessage,this.commitMessageControl.valueChanges.pipe(X(this.commitMessageControl.value)))]).pipe(D(([e,t,i])=>e||!i||!t||t.length===0)),this.commitButtonTooltip=ie([this.stagedChanges,F(this.selectedRepositoryCommitMessage,this.commitMessageControl.valueChanges.pipe(X(this.commitMessageControl.value)))]).pipe(D(([e,t])=>t?!e||e.length===0?G("There must be staged changes to commit"):"":G("The commit message cannot be empty"))),this.hasConflicts=ie([this.unstagedChanges,this.checkedUnstaged]).pipe(D(([e,t])=>t.length>0&&t.some(i=>i.status===ee.Conflicted)||t.length===0&&!!e&&e.some(i=>i.status===ee.Conflicted)))}getPatchPath(e){return this.commitDetailService.getPatchPath(e)}getPatchFilename(e){let t=this.commitDetailService.getPatchPath(e);return t?t.slice(t.lastIndexOf("/")+1):null}selectFile(e,t,i){this.patchChanged.next({area:e,oldFilePath:t,newFilePath:i})}discard(){let e=this.store.selectSnapshot(P.selectedRepositoryPath);e&&(this.checkedUnstaged.value.length>0?this.stagingActionsService.discardFiles(e,this.checkedUnstaged.value):this.stagingActionsService.discardAllChanges(e)).pipe(T(this.destroyed$)).subscribe(()=>{this.checkedStaged.next([]),this.checkedUnstaged.next([]),this.allUnstagedCheckboxIcon.next("check_box_outline_blank")})}stage(){let e=this.store.selectSnapshot(P.selectedRepositoryPath);e&&(this.checkedUnstaged.value.length>0?this.stagingActionsService.stageFiles(e,this.checkedUnstaged.value):this.stagingActionsService.stageAllChanges(e)).pipe(T(this.destroyed$)).subscribe(()=>{this.checkedStaged.next([]),this.checkedUnstaged.next([]),this.allUnstagedCheckboxIcon.next("check_box_outline_blank")})}unstage(){let e=this.store.selectSnapshot(P.selectedRepositoryPath);e&&(this.checkedStaged.value.length>0?this.stagingActionsService.unstageFiles(e,this.checkedStaged.value):this.stagingActionsService.unstageAllChanges(e)).pipe(T(this.destroyed$)).subscribe(()=>{this.checkedStaged.next([]),this.checkedUnstaged.next([]),this.allStagedCheckboxIcon.next("check_box_outline_blank")})}setPatchChecked(e,t,i){let o=e==="staged"?this.checkedStaged.value:this.checkedUnstaged.value,p=o.findIndex(U=>U.oldFilePath===t.oldFilePath&&U.newFilePath===t.newFilePath);p>=0&&!i?o.splice(p,1):p<0&&i&&o.push(t),e==="staged"?this.checkedStaged.next(o):this.checkedUnstaged.next(o);let w=e==="staged"?this.allStagedCheckboxIcon:this.allUnstagedCheckboxIcon;(this.store.selectSnapshot(e==="staged"?P.selectedStagedChanges:P.selectedUnstagedChanges)?.length??0)===o.length?w.next("check_box"):o.length===0?w.next("check_box_outline_blank"):w.next("indeterminate_check_box")}commitChanges(){let e=this.store.selectSnapshot(P.selectedRepositoryPath),t=this.store.selectSnapshot(Oe.selectedProfile),i=[];e||i.push(G("Cannot commit if no repository is selected")),t||i.push(G("Cannot commit if no profile is selected"));let o=this.commitMessageControl.value;if(o||i.push(G("Cannot commit with empty commit message")),i.length>0){this.store.dispatch(i.map(E=>new jt("error",E)));return}this.commitButtonLoading.next(!0);let p=e,w=t;this.repositoryActionsService.createCommit(p,w,o??"").pipe(Ge(()=>{this.commitButtonLoading.next(!1)})).subscribe(E=>{this.store.dispatch(new Se(p,E))})}copyToClipboard(e){navigator.clipboard.writeText(e??"")}blamePatch(e,t){this.router.navigate(["/standard/blame"],{queryParams:{area:e,"commit-id":"head",path:t.newFilePath}})}clickAllStagedCheckbox(){switch(this.allStagedCheckboxIcon.value){case"check_box":case"indeterminate_check_box":this.checkedStaged.next([]),this.allStagedCheckboxIcon.next("check_box_outline_blank");break;case"check_box_outline_blank":let e=this.store.selectSnapshot(P.selectedStagedChanges);this.checkedStaged.next([...e??[]]),this.allStagedCheckboxIcon.next("check_box");break}}clickAllUnstagedCheckbox(){switch(this.allUnstagedCheckboxIcon.value){case"check_box":case"indeterminate_check_box":this.checkedUnstaged.next([]),this.allUnstagedCheckboxIcon.next("check_box_outline_blank");break;case"check_box_outline_blank":let e=this.store.selectSnapshot(P.selectedUnstagedChanges);this.checkedUnstaged.next([...e??[]]),this.allUnstagedCheckboxIcon.next("check_box");break}}openContextMenu(e,t,i,o){o.preventDefault(),o.stopPropagation(),this.closeContextMenu(),this.overlayRef=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo({x:o.x,y:o.y}).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this.overlayRef.attach(new K(t,this.viewContainerRef,{data:{area:e,patch:i}})),ye(this.overlayRef).pipe(I(1),T(this.destroyed$)).subscribe(()=>this.closeContextMenu())}closeContextMenu(){this.overlayRef?.dispose(),this.overlayRef=null}static{this.\u0275fac=function(t){return new(t||n)(_(A),_(_e),_(H),_(ve),_(ke),_(si),_(li))}}static{this.\u0275cmp=R({type:n,selectors:[["app-new-commit"]],viewQuery:function(t,i){if(t&1&&$(Ft,5),t&2){let o;V(o=B())&&(i.viewports=o)}},outputs:{patchChanged:"patchChanged"},features:[W],decls:24,vars:27,consts:[["fileContextMenu",""],["vertical",""],["min","150px",4,"ngIf"],["min","150px"],["appearance","outlined","class","staged",4,"ngIf"],["appearance","outlined",1,"commit"],[1,"description"],["matInput","","cdkTextareaAutosize","",3,"placeholder","formControl"],[1,"button-container",3,"matTooltip"],["mat-flat-button","","color","primary",1,"commit-btn",3,"click","disabled"],["diameter","24",4,"ngIf"],[4,"ngIf"],["appearance","outlined",1,"unstaged"],[1,"header-buttons"],["type","button","mat-icon-button","",1,"checkbox-button","app-icon-button-md",3,"click","matTooltip"],[1,"buttons"],["type","button","mat-stroked-button","","class","stage-button",3,"matTooltip","click",4,"ngIf"],["class","conflicts-wrapper",3,"matTooltip",4,"ngIf"],["type","button","mat-stroked-button","","color","warn",1,"discard-button",3,"click","matTooltip"],[3,"svgIcon"],[3,"checkedChanged","selectedChanged","contextMenuOpened","patches","checked","selected"],["type","button","mat-stroked-button","",1,"stage-button",3,"click","matTooltip"],[1,"conflicts-wrapper",3,"matTooltip"],["type","button","mat-stroked-button","","disabled","",1,"stage-button","has-conflicts"],["appearance","outlined",1,"staged"],["type","button","mat-stroked-button","",1,"unstage-button",3,"click","matTooltip"],["diameter","24"],[1,"menu-panel"],[1,"menu-header",3,"matTooltip"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item","matTooltip","Show file history",3,"click",4,"ngIf"],["type","button","matTooltip","Show file history",1,"menu-item",3,"click"]],template:function(t,i){if(t&1){let o=M();r(0,"app-grid",1),v(1,Yi,23,31,"app-grid-cell",2),s(2,"async"),s(3,"nullEmpty"),r(4,"app-grid-cell",3),v(5,zi,18,25,"mat-card",4),s(6,"async"),l()(),r(7,"mat-card",5)(8,"mat-form-field",6)(9,"mat-label"),h(10),s(11,"translate"),l(),k(12,"textarea",7),s(13,"translate"),l(),r(14,"div",8),s(15,"async"),r(16,"button",9),s(17,"async"),f("click",function(){return u(o),C(i.commitChanges())}),v(18,Ki,1,0,"mat-spinner",10),s(19,"async"),v(20,qi,3,3,"span",11),s(21,"async"),l()()(),v(22,Gi,10,6,"ng-template",null,0,he)}t&2&&(a(),m("ngIf",c(3,11,c(2,9,i.unstagedChanges))),a(4),m("ngIf",c(6,13,i.stagedChanges)),a(5),O(c(11,15,"Commit Message")),a(2),ct("placeholder",c(13,17,"Enter a description...")),m("formControl",i.commitMessageControl),a(2),m("matTooltip",c(15,19,i.commitButtonTooltip)||""),a(2),m("disabled",c(17,21,i.commitButtonDisabled)),a(2),m("ngIf",c(19,23,i.commitButtonLoading)),a(2),m("ngIf",c(21,25,i.commitButtonLoading)===!1))},dependencies:[Pe,Gt,qt,zt,Qt,oi,Y,Mt,yt,xt,Ht,Wt,Me,fe,xe,we,Ie,z,Zt,be],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:stretch;height:100%;gap:10px}.staged[_ngcontent-%COMP%]{margin:5px 10px 0;height:calc(100% - 5px)}.unstaged[_ngcontent-%COMP%]{margin:0 10px 5px;height:calc(100% - 5px)}app-grid-cell[_ngcontent-%COMP%]:first-child   .staged[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;height:100%}.staged[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]{padding:16px;white-space:nowrap;overflow:auto;display:flex;flex-direction:column;gap:10px}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]{flex:0 0 auto;position:relative}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:space-between;min-height:40px;margin-left:32px}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%]{flex:1 1 calc(50% - 16px)}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%] + button[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{flex:1 1 calc(50% - 16px)}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 auto}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%]{cursor:default}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]{position:absolute;top:0;left:-12px}.commit[_ngcontent-%COMP%]{flex:0 0 auto;margin:0 10px;padding:16px;overflow:auto;display:flex;flex-direction:column;min-height:158px;max-height:33%}.commit[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{width:100%}.commit[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:34px}.commit[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex:0 0 auto}.commit[_ngcontent-%COMP%]   .commit-btn[_ngcontent-%COMP%]{width:100%}.dark-theme[_nghost-%COMP%]   .staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%]{color:#cb8837}.light-theme[_nghost-%COMP%]   .staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%]{color:#d8a669}"],changeDetection:0})}}return y([x(P.selectedRepositoryPath)],n.prototype,"repositoryPath",void 0),y([x(P.selectedStagedChanges)],n.prototype,"allStagedChanges",void 0),y([x(P.selectedUnstagedChanges)],n.prototype,"unstagedChanges",void 0),y([x(P.selectedFileForArea("staged"))],n.prototype,"selectedStagedFile",void 0),y([x(P.selectedFileForArea("unstaged"))],n.prototype,"selectedUnstagedFile",void 0),y([x(P.selectedRepositoryCommitMessage)],n.prototype,"selectedRepositoryCommitMessage",void 0),y([x(Oe.selectedProfile)],n.prototype,"selectedProfile",void 0),y([x(Oe.profiles)],n.prototype,"profiles",void 0),n})();var vo=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=se({imports:[Yt,ni,Xt,ai,ei,ri,ci]})}}return n})();mt(pi,[Y,hi,_i],[z]);var Ji=["panel"],en=["*"];function tn(n,g){if(n&1){let e=M();r(0,"div",1,0),f("@panelAnimation.done",function(i){u(e);let o=d();return C(o._animationDone.next(i))}),rt(2),l()}if(n&2){let e=g.id,t=d();at(t._classList),le("mat-mdc-autocomplete-visible",t.showPanel)("mat-mdc-autocomplete-hidden",!t.showPanel)("mat-primary",t._color==="primary")("mat-accent",t._color==="accent")("mat-warn",t._color==="warn"),m("id",t.id)("@panelAnimation",t.isOpen?"visible":"hidden"),De("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby(e))}}var nn=Bt("panelAnimation",[Nt("void, hidden",J({opacity:0,transform:"scaleY(0.8)"})),He(":enter, hidden => visible",[Lt([Ce("0.03s linear",J({opacity:1})),Ce("0.12s cubic-bezier(0, 0, 0.2, 1)",J({transform:"scaleY(1)"}))])]),He(":leave, visible => hidden",[Ce("0.075s linear",J({opacity:0}))])]),on=0,We=class{constructor(g,e){this.source=g,this.option=e}},Ci=new Ee("mat-autocomplete-default-options",{providedIn:"root",factory:an});function an(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}var $o=(()=>{class n{get isOpen(){return this._isOpen&&this.showPanel}_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}constructor(e,t,i,o){this._changeDetectorRef=e,this._elementRef=t,this._defaults=i,this._activeOptionChanges=te.EMPTY,this._animationDone=new b,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new b,this.opened=new b,this.closed=new b,this.optionActivated=new b,this.id=`mat-autocomplete-${on++}`,this.inertGroups=o?.SAFARI||!1,this.autoActiveFirstOption=!!i.autoActiveFirstOption,this.autoSelectActiveOption=!!i.autoSelectActiveOption,this.requireSelection=!!i.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new vt(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let t=new We(this,e);this.optionSelected.emit(t)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_skipPredicate(){return!1}static{this.\u0275fac=function(t){return new(t||n)(_(Le),_(Fe),_(Ci),_(gt))}}static{this.\u0275cmp=R({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(t,i,o){if(t&1&&(Ve(o,It,5),Ve(o,St,5)),t&2){let p;V(p=B())&&(i.options=p),V(p=B())&&(i.optionGroups=p)}},viewQuery:function(t,i){if(t&1&&($(nt,7),$(Ji,5)),t&2){let o;V(o=B())&&(i.template=o.first),V(o=B())&&(i.panel=o.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",N],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",N],requireSelection:[2,"requireSelection","requireSelection",N],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",N],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",N]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[Be([{provide:wt,useExisting:n}]),Re,pt],ngContentSelectors:en,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(t,i){t&1&&(st(),v(0,tn,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-app-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[nn]},changeDetection:0})}}return n})();var sn={provide:Pt,useExisting:$e(()=>ln),multi:!0};var fi=new Ee("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let n=re(A);return()=>n.scrollStrategies.reposition()}});function rn(n){return()=>n.scrollStrategies.reposition()}var cn={provide:fi,deps:[A],useFactory:rn},ln=(()=>{class n{constructor(e,t,i,o,p,w,E,U,vi,Oi,Pi){this._element=e,this._overlay=t,this._viewContainerRef=i,this._zone=o,this._changeDetectorRef=p,this._dir=E,this._formField=U,this._document=vi,this._viewportRuler=Oi,this._defaults=Pi,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=te.EMPTY,this._breakpointObserver=re(Ct),this._handsetLandscapeSubscription=te.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Ae,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._initialized=new Ae,this._injector=re(tt),this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=Ke(()=>{let S=this.autocomplete?this.autocomplete.options:null;return S?S.changes.pipe(X(S),ae(()=>F(...S.map(Mi=>Mi.onSelectionChange)))):this._initialized.pipe(ae(()=>this.optionSelections))}),this._handlePanelKeydown=S=>{(S.keyCode===27&&!ge(S)||S.keyCode===38&&ge(S,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),S.stopPropagation(),S.preventDefault())},this._trackedModal=null,this._scrollStrategy=w}ngAfterViewInit(){this._initialized.next(),this._initialized.complete();let e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){let e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&ue(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return F(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(oe(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(oe(()=>this._overlayAttached)):ze()).pipe(D(e=>e instanceof kt?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return F(ne(this._document,"click"),ne(this._document,"auxclick"),ne(this._document,"touchend")).pipe(oe(e=>{let t=ut(e),i=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,o=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&t!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!i||!i.contains(t))&&(!o||!o.contains(t))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(t)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let t=e.keyCode,i=ge(e);if(t===27&&!i&&e.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&t===13&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){let o=this.autocomplete._keyManager.activeItem,p=t===38||t===40;t===9||p&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):p&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(p||this.autocomplete._keyManager.activeItem!==o)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let t=e.target,i=t.value;if(t.type==="number"&&(i=i==""?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),!i)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let o=this.autocomplete.options?.find(p=>p.selected);if(o){let p=this._getDisplayValue(o.value);i!==p&&o.deselect(!1)}}if(this._canOpen()&&this._document.activeElement===e.target){let o=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(o)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new Ye(i=>{ot(()=>{i.next()},{injector:this._injector})}),t=this.autocomplete.options.changes.pipe(Xe(()=>this._positionStrategy.reapplyLastPosition()),Qe(0));return F(e,t).pipe(ae(()=>this._zone.run(()=>{let i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),I(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let t=this.autocomplete;return t&&t.displayWith?t.displayWith(e):e}_assignOptionValue(e){let t=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(t??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let t=this.autocomplete,i=e?e.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),t._emitSelectEvent(i),this._element.nativeElement.focus()):t.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),t._animationDone?t._animationDone.pipe(I(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,t){this.autocomplete?.options?.forEach(i=>{i!==e&&i.selected&&i.deselect(t)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let t=this.autocomplete.id;Ne(this._trackedModal,"aria-owns",t)}}_attachOverlay(e){this.autocomplete;let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new K(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(ft.HandsetLandscape).subscribe(o=>{o.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new Dt({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){let e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,o=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}],p;this.position==="above"?p=o:this.position==="below"?p=t:p=[...t,...o],e.withPositions(p)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let t=-1;for(let i=0;i<e.options.length;i++)if(!e.options.get(i).disabled){t=i;break}e._keyManager.setActiveItem(t)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){let t=this.autocomplete,i=Tt(e,t.options,t.optionGroups);if(e===0&&i===1)t._setScrollTop(0);else if(t.panel){let o=t.options.toArray()[e];if(o){let p=o._getHostElement(),w=At(p.offsetTop,p.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(w)}}}_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=this.autocomplete.id;this._trackedModal&&ue(this._trackedModal,"aria-owns",t),Ne(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;ue(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static{this.\u0275fac=function(t){return new(t||n)(_(Fe),_(A),_(H),_(it),_(Le),_(fi),_(Ot,8),_(Kt,9),_(dt,8),_(Et),_(Ci,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(t,i){t&1&&f("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(p){return i._handleInput(p)})("keydown",function(p){return i._handleKeydown(p)})("click",function(){return i._handleClick()}),t&2&&De("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||i.autocomplete==null?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",N]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[Be([sn]),Re,Je]})}}return n})(),Zo=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=se({providers:[cn],imports:[Vt,je,Ue,_t,Rt,je,Ue]})}}return n})();export{$o as a,ln as b,Zo as c,pi as d,vo as e};
