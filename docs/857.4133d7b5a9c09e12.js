"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[857],{8831:($,W,n)=>{n.d(W,{S:()=>e});var d=n(4650);const e=T=>{class M extends T{constructor(){super(...arguments),this.disableTransitions=!0}ngOnInit(){super.ngOnInit&&super.ngOnInit(),setTimeout(()=>{this.disableTransitions=!1},0)}static{this.\u0275fac=function(){let u;return function(k){return(u||(u=d.n5z(M)))(k||M)}}()}static{this.\u0275prov=d.Yz7({token:M,factory:M.\u0275fac})}}return M}},2771:($,W,n)=>{n.d(W,{P:()=>O});var d=n(7579),e=n(9468),T=n(2722),M=n(4650);const O=u=>{class b extends u{ngAfterViewInit(){super.ngAfterViewInit&&super.ngAfterViewInit();const D=this.viewports.map(_=>{const R=new d.x,o=new ResizeObserver(()=>R.next());return R.pipe((0,e.p)(20,void 0,{leading:!0,trailing:!0}),(0,T.R)(this.destroyed$)).subscribe(()=>{_.checkViewportSize()}),o.observe(_.elementRef.nativeElement),o});this.destroyed$.subscribe(()=>{D.forEach(_=>_.disconnect())})}static{this.\u0275fac=function(){let D;return function(R){return(D||(D=M.n5z(b)))(R||b)}}()}static{this.\u0275prov=M.Yz7({token:b,factory:b.\u0275fac})}}return b}},8070:($,W,n)=>{n.d(W,{r:()=>e});var d=n(4650);class e{transform(M,O,u=M+"s"){return 1===O?M:u}static{this.\u0275fac=function(O){return new(O||e)}}static{this.\u0275pipe=d.Yjl({name:"plural",type:e,pure:!0})}}},3448:($,W,n)=>{n.d(W,{I:()=>e});var d=n(4650);class e{constructor(M){this.template=M}static{this.\u0275fac=function(O){return new(O||e)(d.Y36(d.Rgc))}}static{this.\u0275dir=d.lG2({type:e,selectors:[["","appVirtualTreeLeafNode",""]]})}}},1123:($,W,n)=>{n.d(W,{J:()=>e});var d=n(4650);class e{constructor(M){this.template=M}static{this.\u0275fac=function(O){return new(O||e)(d.Y36(d.Rgc))}}static{this.\u0275dir=d.lG2({type:e,selectors:[["","appVirtualTreeNode",""]]})}}},6725:($,W,n)=>{n.d(W,{L:()=>A});var d=n(7340),e=n(6326),T=n(4004),M=n(8926),O=n(9967),u=n(8831),b=n(2771),k=n(3448),D=n(1123),_=n(4650),R=n(6895);function o(P,C){1&P&&_.GkF(0)}const K=function(P){return{$implicit:P}};function J(P,C){if(1&P&&(_.TgZ(0,"li"),_.YNc(1,o,1,0,"ng-container",2),_.qZA()),2&P){const E=C.$implicit,w=_.oxw();_.Udp("padding-left",10*E.depth,"px"),_.xp6(1),_.Q6J("ngTemplateOutlet",w.isLeaf(E)?w.leafNodeDirective.template:w.nodeDirective.template)("ngTemplateOutletContext",_.VKq(4,K,E))}}class A extends((0,M.j)(O.A,u.S,b.P)){constructor(){super(...arguments),this.isLeaf=C=>!C.children,this.expandVisibleNodes=C=>this.isLeaf(C)||!C.expanded?[C]:[C,...C.children.flatMap(this.expandVisibleNodes)]}ngOnInit(){super.ngOnInit(),this.visibleNodes=this.tree.pipe((0,T.U)(C=>C.reduce((E,w)=>[...E,...this.expandVisibleNodes(w)],[])))}trackById(C,E){return E.id}static{this.\u0275fac=function(){let C;return function(w){return(C||(C=_.n5z(A)))(w||A)}}()}static{this.\u0275cmp=_.Xpm({type:A,selectors:[["app-virtual-tree"]],contentQueries:function(E,w,Y){if(1&E&&(_.Suo(Y,D.J,5),_.Suo(Y,k.I,5)),2&E){let B;_.iGM(B=_.CRH())&&(w.nodeDirective=B.first),_.iGM(B=_.CRH())&&(w.leafNodeDirective=B.first)}},viewQuery:function(E,w){if(1&E&&_.Gf(e.N7,5),2&E){let Y;_.iGM(Y=_.CRH())&&(w.viewports=Y)}},inputs:{tree:"tree",itemSize:"itemSize"},features:[_.qOj],decls:5,vars:9,consts:[[3,"itemSize"],[3,"padding-left",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(E,w){1&E&&(_.TgZ(0,"cdk-virtual-scroll-viewport",0)(1,"ul"),_.ALo(2,"async"),_.YNc(3,J,2,6,"li",1),_.ALo(4,"async"),_.qZA()()),2&E&&(_.Q6J("itemSize",w.itemSize)("@null",void 0),_.xp6(1),_.Q6J("@slide",_.lcZ(2,5,w.visibleNodes)),_.xp6(2),_.Q6J("cdkVirtualForOf",_.lcZ(4,7,w.visibleNodes))("cdkVirtualForTrackBy",w.trackById))},dependencies:[e.xd,e.x0,e.N7,R.tP,R.Ov],styles:["cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{transition:height 225ms ease-in-out}li[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}"],data:{animation:[(0,d.X$)("null",[(0,d.eR)(":enter",[]),(0,d.eR)(":leave",[])]),(0,d.X$)("slide",[(0,d.eR)("* => *",[(0,d.ru)([(0,d.IO)("li:enter",[(0,d.oB)({height:0}),(0,d.jt)("225ms ease-in-out",(0,d.oB)({height:"*"}))],{optional:!0}),(0,d.IO)("li:leave",[(0,d.oB)({height:"*"}),(0,d.jt)("225ms ease-in-out",(0,d.oB)({height:0}))],{optional:!0})])])])]},changeDetection:0})}}},9418:($,W,n)=>{n.d(W,{c:()=>T});var d=n(3179),e=n(4650);class T{static{this.\u0275fac=function(u){return new(u||T)}}static{this.\u0275mod=e.oAB({type:T})}static{this.\u0275inj=e.cJS({imports:[d.I]})}}},7615:($,W,n)=>{n.d(W,{d:()=>M});var d=n(6421),e=n(9418),T=n(4650);class M{getPatchPath(u){switch(u.status){case d.v.Added:case d.v.Untracked:return u.newFilePath;case d.v.Conflicted:case d.v.Modified:case d.v.Renamed:return u.oldFilePath===u.newFilePath?u.newFilePath:`${u.oldFilePath} --\x3e ${u.newFilePath}`;case d.v.Deleted:return u.oldFilePath;default:throw new Error(`Don't know how to deal with patch status: ${d.v[u.status]}`)}}getPatchIcon(u){switch(u.status){case d.v.Added:case d.v.Untracked:return"add";case d.v.Conflicted:return"warning";case d.v.Modified:return"create";case d.v.Deleted:return"remove";case d.v.Renamed:return"swap_horiz";default:throw new Error(`Don't know how to deal with patch status: ${d.v[u.status]}`)}}getPatchIconColorClass(u){switch(u.status){case d.v.Added:case d.v.Untracked:return"green";case d.v.Conflicted:case d.v.Modified:return"orange";case d.v.Deleted:return"red";case d.v.Renamed:return"blue";default:throw new Error(`Don't know how to deal with patch status: ${d.v[u.status]}`)}}static{this.\u0275fac=function(b){return new(b||M)}}static{this.\u0275prov=T.Yz7({token:M,factory:M.\u0275fac,providedIn:e.c})}}},1815:($,W,n)=>{n.d(W,{E:()=>L});var d=n(4080),e=n(1135),T=n(5698),M=n(2722),O=n(4004),u=n(8926),b=n(9967),k=n(4462),D=n(8310),_=n(2120),R=n(6966),o=n(4650),K=n(8184),J=n(9867),A=n(6271),P=n(3394),C=n(6895),E=n(4859),w=n(7392),Y=n(266),B=n(5773);function z(a,g){if(1&a){const h=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(h);const i=o.oxw(2);return o.KtG(i.openWithTerminal())}),o.TgZ(1,"mat-icon"),o._uU(2,"terminal"),o.qZA(),o._uU(3," Terminal "),o.qZA()}}function G(a,g){if(1&a){const h=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(h);const i=o.oxw(2);return o.KtG(i.openWithVsCode())}),o._UZ(1,"mat-icon",8),o._uU(2," Visual Studio Code "),o.qZA()}}function X(a,g){if(1&a){const h=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(){const f=o.CHM(h).$implicit,l=o.oxw(2);return o.KtG(l.openRemote(f.url))}),o._UZ(1,"mat-icon",10),o._uU(2),o.qZA()}if(2&a){const h=g.$implicit;o.Q6J("matTooltip",h.url),o.xp6(1),o.s9C("svgIcon",h.type),o.xp6(1),o.AsE(" ","bitbucket"===h.type?"Bitbucket":"github"===h.type?"GitHub":"gitlab"===h.type?"GitLab":"",": ",h.name," ")}}function N(a,g){if(1&a){const h=o.EpF();o.TgZ(0,"div",4)(1,"button",5),o.NdJ("click",function(){o.CHM(h);const i=o.oxw();return o.KtG(i.openWithFileExplorer())}),o.TgZ(2,"mat-icon"),o._uU(3,"folder"),o.qZA(),o._uU(4),o.qZA(),o.YNc(5,z,4,0,"button",6),o.ALo(6,"async"),o.YNc(7,G,3,0,"button",6),o.ALo(8,"async"),o.YNc(9,X,3,4,"button",7),o.ALo(10,"async"),o.qZA()}if(2&a){const h=o.oxw();o.xp6(4),o.hij(" ",h.folderText," "),o.xp6(1),o.Q6J("ngIf",o.lcZ(6,4,h.hasTerminal)),o.xp6(2),o.Q6J("ngIf",o.lcZ(8,6,h.hasVsCode)),o.xp6(2),o.Q6J("ngForOf",o.lcZ(10,8,h.remotes))}}class L extends((0,u.j)(b.A)){constructor(g,h,m,i,f){super(),this.overlay=g,this.viewContainerRef=h,this.store=m,this.filesApi=i,this.providerUrlMatcherService=f,this.menuOverlayRef=new e.X(null),this.folderText=k.V?"Finder":k.E?"File Explorer":"File Manager",this.openMenu=(l,v,F)=>{l.preventDefault(),l.stopPropagation(),this.closeMenu();const U=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(v).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(U),U.attach(new d.UE(F,this.viewContainerRef)),(0,D.t)(U,!1).pipe((0,T.q)(1),(0,M.R)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))},this.openWithFileExplorer=()=>{const l=this.store.selectSnapshot(R.E.selectedRepositoryPath);if(!l)throw new Error("Cannot open repository in file explorer if repository has no path.");this.filesApi.openFileWithShell(l).subscribe(),this.closeMenu()},this.openWithTerminal=()=>{const l=this.store.selectSnapshot(R.E.selectedRepositoryPath);if(!l)throw new Error("Cannot open repository in terminal if repository has no path.");this.filesApi.openTerminal(l).subscribe(),this.closeMenu()},this.openWithVsCode=()=>{const l=this.store.selectSnapshot(R.E.selectedRepositoryPath);if(!l)throw new Error("Cannot open repository in vscode if repository has no path.");this.filesApi.openVsCode(l).subscribe(),this.closeMenu()},this.openRemote=l=>{window.open(l),this.closeMenu()}}ngOnInit(){this.remotes=this.store.select(R.E.selectedRemotes).pipe((0,O.U)(g=>(g??[]).map(h=>{const m=this.providerUrlMatcherService.matchProvider(h.url);return m?[h,m]:null}).filter(_.$K).map(([h,m])=>({type:m.type,url:this.providerUrlMatcherService.getUrl(m),name:h.name})))),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}static{this.\u0275fac=function(h){return new(h||L)(o.Y36(K.aV),o.Y36(o.s_b),o.Y36(J.yh),o.Y36(A.k),o.Y36(P.d))}}static{this.\u0275cmp=o.Xpm({type:L,selectors:[["app-repository-actions-open-with"]],features:[o.qOj],decls:6,vars:0,consts:[["type","button","mat-stroked-button","","matTooltip","Open repository with...","appElementRef","",1,"item",3,"click"],["openWithMenuBtn","appElementRef"],[1,"launch-icon"],["openWithMenu",""],[1,"open-with-menu"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"matTooltip","click"],[3,"svgIcon"]],template:function(h,m){if(1&h){const i=o.EpF();o.TgZ(0,"button",0,1),o.NdJ("click",function(l){o.CHM(i);const v=o.MAs(1),F=o.MAs(5);return o.KtG(m.openMenu(l,v,F))}),o.TgZ(2,"mat-icon",2),o._uU(3,"launch"),o.qZA()(),o.YNc(4,N,11,10,"ng-template",null,3,o.W1O)}},dependencies:[C.sg,C.O5,E.lW,w.Hw,Y.gM,B.F,C.Ov],styles:[".open-with-menu[_ngcontent-%COMP%]{background:#424242;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;max-height:calc(100vh - 48px);max-width:25vw;min-height:48px;min-width:112px;overflow-x:hidden;overflow-y:auto}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;display:flex;font-family:MontserratVariable;font-size:16px;height:48px;line-height:48px;max-width:100%;outline:none;overflow:hidden;padding:0 16px;user-select:none;text-align:left;text-overflow:ellipsis;width:100%;white-space:nowrap;align-items:center}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#565656}.open-with-menu[_ngcontent-%COMP%]   .menu-item[disabled][_ngcontent-%COMP%]{pointer-events:none;color:#ffffff4d}.open-with-menu[_ngcontent-%COMP%]   .menu-item.bold[_ngcontent-%COMP%]{font-weight:700}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:12px 16px 12px 0;vertical-align:middle;flex:0 0 auto}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon.expand-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:0}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.open-with-menu.sub-menu-1[_ngcontent-%COMP%]{background:#4a4a4a}.item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0})}}},4874:($,W,n)=>{n.d(W,{p:()=>T});var d=n(2686),e=n(4650);class T{constructor(){this.parseReference=O=>{const u=T.referenceRegex.exec(O);if(!u)throw new Error(`Reference invalid: ${O}`);if("remotes"===u[1]){const b=T.remoteBranchRegex.exec(O);if(!b)throw new Error(`Remote reference invalid: ${O}`);return{branch:b[2],sourceName:b[1],sourceType:"remote"}}return"stash"===u[1]?{branch:"stash",sourceName:"stash",sourceType:"stash"}:{branch:u[2],sourceName:"heads"===u[1]?"local":"tag",sourceType:"heads"===u[1]?"local":"tag"}},this.getBranchTypeIcon=O=>{switch(O){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"edit";case"tag":return"label";default:throw new Error(`Unknown reference type: ${O}`)}}}static{this.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/}static{this.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/}calculateBranches(O,u){const b=(0,d.Z)(O.map(this.parseReference),({branch:k})=>k);return Object.entries(b).map(([k,D])=>({name:k,sources:D.map(_=>({name:_.sourceName,type:_.sourceType,icon:this.getBranchTypeIcon(_.sourceType)}))})).sort((k,D)=>{const _=k.sources.some(P=>"local"===P.type&&`refs/heads/${k.name}`===u),R=k.sources.some(P=>"local"===P.type&&`refs/heads/${D.name}`===u);if(_&&!R)return-1;if(!_&&R)return 1;const o=k.sources.some(P=>"local"===P.type),K=D.sources.some(P=>"local"===P.type);if(o&&!K)return-1;if(!o&&K)return 1;const J=k.sources.some(P=>"remote"===P.type),A=D.sources.some(P=>"remote"===P.type);return J&&!A?-1:!J&&A?1:k.sources.length>D.sources.length?-1:k.sources.length<D.sources.length?1:k.name>D.name?-1:k.name<D.name?1:0}).slice(0,30)}static{this.\u0275fac=function(u){return new(u||T)}}static{this.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}}},3989:($,W,n)=>{n.d(W,{$:()=>N});var d=n(1134),e=n(539);const M=function T(L,a){return L<a},u=function O(L,a){return L&&L.length?(0,d.Z)(L,(0,e.Z)(a,2),M):void 0};var b=n(2382);var _=n(1256),R=n(3713),o=n(7711),K=n(9512),J=n(7988),A=n(6932),P=n(3228);var Y=n(7965),B=n(7118);const G=(0,Y.Z)(function(L,a){return(0,B.Z)(L)?function E(L,a,g,h){var m=-1,i=o.Z,f=!0,l=L.length,v=[],F=a.length;if(!l)return v;g&&(a=(0,J.Z)(a,(0,A.Z)(g))),h?(i=K.Z,f=!1):a.length>=200&&(i=P.Z,f=!1,a=new R.Z(a));e:for(;++m<l;){var U=L[m],Z=null==g?U:g(U);if(U=h||0!==U?U:0,f&&Z==Z){for(var I=F;I--;)if(a[I]===Z)continue e;v.push(U)}else i(a,Z,h)||v.push(U)}return v}(L,a):[]});var X=n(4650);class N{static{this.xUnit=15}static{this.yUnit=26}static{this.xOffset=N.xUnit/2}static{this.yOffset=N.yUnit/2}isIndexInBounds(a,g,h){const m=a*N.yUnit;return m>=g&&m<h-N.yUnit}calculateVisible(a,g,h,m,i){return{commitDetails:a.slice(m,i),commitTrails:g.filter(f=>f.minYIndexWithMerges<=i&&f.maxYIndexWithMerges>=m),mergePaths:h.filter(f=>f.from.yIndex>=m&&f.to.some(l=>l.yIndex<=i))}}calculate(a,g,h,m,i,f){const l={};let v=[],F=[],U=[];const Z=(a?1:0)+g.length;h.forEach((t,s)=>{l[t.id]={id:t.id,yIndex:s+Z,commit:t}});const I=[];g.forEach((t,s)=>{const c=`merge:${t.fromCommitId}:${t.toCommitId}`,p={id:c,message:t.message??`merge: from '${t.fromCommitId}' into '${t.toCommitId}'`,parentIds:[t.toCommitId,t.fromCommitId],time:0,references:[],authorEmail:"",authorName:""};I.push(p),l[c]={id:c,yIndex:s+(a?1:0),commit:p}});const x=a?{id:"head",message:"",parentIds:a.parentId?[a.parentId,...a.mergeHeads]:[...a.mergeHeads],time:0,references:[],authorEmail:"",authorName:""}:null;a&&(l.head={id:"head",yIndex:0,commit:x});const r=x?[x,...I,...h]:[...I,...h];if(r.forEach(t=>{const s=l[t.id];s.trail||this.calculateTrail(s,l,v,F),t.parentIds.length>1&&t.parentIds.slice(1).forEach(c=>{const p=l[c];if(p)if(p.mergeFrom)p.mergeFrom.to.push(s);else{const y={from:p,to:[s],isDashed:"head"===t.id||t.id.startsWith("merge:")};p.mergeFrom=y,U.push(y)}})}),({mergePaths:U,lanes:F}=this.calculateMergePaths(U,F,m,i)),this.calculateColors(v,f),a&&a.parentId&&l[a.parentId]){const t=v.find(s=>0===s.minYIndex);if(t){t.commits=t.commits.filter(c=>"head"!==c.id);const s=u(t.commits,c=>c.yIndex);t.minYIndex=s?.yIndex??0,t.minYIndexWithMerges=s?.yIndex??0,this.createUncommittedTrail(l.head,l[a.parentId],v,t.colorIndex,t.lane)}}return I.forEach((t,s)=>{const c=v.find(p=>p.minYIndex===s+(a?1:0));if(c&&l[t.parentIds[0]]){if(c.commits=c.commits.filter(p=>p.id!==t.id),c.commits.length<=0)v=v.filter(p=>p!==c);else{const p=u(c.commits.filter(y=>"head"!==y.id&&!y.id.startsWith("merge:")),y=>y.yIndex);c.minYIndex=p?.yIndex??0,c.minYIndexWithMerges=p?.yIndex??0}this.createUncommittedTrail(l[t.id],l[t.parentIds[0]],v,c.colorIndex,c.lane)}}),{commitDetails:l,commitTrails:v,lanes:F,mergePaths:U,headCommit:x,orderedCommits:r}}createUncommittedTrail(a,g,h,m,i){let f=g.yIndex;g.mergeFrom&&g.mergeFrom.to.length>0&&!g.mergeFrom.isDashed&&(f=Math.min(...g.mergeFrom.to.map(v=>v.yIndex))+.25,h.push({trailIndex:h.length,minYIndex:f,maxYIndex:g.yIndex,minYIndexWithMerges:f,maxYIndexWithMerges:g.yIndex,colorIndex:m,commits:[],isDashed:!1,lane:i}));const l={trailIndex:h.length,minYIndex:a.yIndex,maxYIndex:f,minYIndexWithMerges:a.yIndex,maxYIndexWithMerges:f,colorIndex:m,commits:[a],isDashed:!0,lane:i};return a.trail=l,h.push(l),l}calculateTrail(a,g,h,m){const i={trailIndex:h.length,minYIndex:a.yIndex,maxYIndex:a.yIndex,minYIndexWithMerges:a.yIndex,maxYIndexWithMerges:a.yIndex,colorIndex:null,commits:[],isDashed:!1};if(a.commit.parentIds.length<=0)a.trail=i,i.commits.push(a),i.maxYIndex=a.yIndex,i.maxYIndexWithMerges=a.yIndex;else{let l=a;for(;l&&!l.trail&&l.commit.parentIds.length>0;)l.trail=i,i.maxYIndex=l.yIndex,i.maxYIndexWithMerges=l.yIndex,i.commits.push(l),l=g[l.commit.parentIds[0]];l&&(i.maxYIndex=l.yIndex,i.maxYIndexWithMerges=l.yIndex,l.trail||(l.trail=i,i.commits.push(l)))}let f=m.find(l=>this.getLaneMaxYIndex(l)<i.minYIndex);return f||(f={xIndex:m.length,occupations:[]},m.push(f)),f.occupations.push({type:"commit-trail",minYIndex:i.minYIndex,maxYIndex:i.maxYIndex}),i.lane=f,h.push(i),i}calculateMergePaths(a,g,h,m){return g=g.map(i=>({...i,occupations:i.occupations.filter(f=>"merge-path"!==f.type)})).filter(i=>i.occupations.length>0),a.forEach(i=>{const f=[];let l;i.to.forEach(I=>{i.from.trail.minYIndexWithMerges>I.yIndex&&(i.from.trail.minYIndexWithMerges=I.yIndex),i.from.trail.maxYIndexWithMerges<I.yIndex&&(i.from.trail.maxYIndexWithMerges=I.yIndex),I.trail.minYIndexWithMerges>i.from.yIndex&&(I.trail.minYIndexWithMerges=i.from.yIndex),I.trail.maxYIndexWithMerges<i.from.yIndex&&(I.trail.maxYIndexWithMerges=i.from.yIndex)});const v=i.from.trail.lane.xIndex,F=h(v);let U=[],Z=i.to;if(i.from.trail.minYIndex<i.from.yIndex){const I=i.from.trail.commits.findIndex(r=>r.id===i.from.id),x=i.from.trail.commits[I-1];U=i.to.filter(r=>r.yIndex>x.yIndex),Z=i.to.filter(r=>r.yIndex<=x.yIndex),l=x.yIndex}else{l=i.from.yIndex-1;const I=function k(L,a){return L&&L.length?(0,d.Z)(L,(0,e.Z)(a,2),b.Z):void 0}(Z,x=>x.yIndex);I&&I.yIndex===i.from.yIndex-1&&(Z=Z.filter(x=>x.id!==I.id),f.push(`M ${F} ${m(i.from.yIndex-.5)}`,`L ${h(I.trail.lane.xIndex)} ${m(I.yIndex)}`)),f.push(`M ${F} ${m(i.from.yIndex)}`),f.push(`V ${m(i.from.yIndex-.5)}`)}if(Z.length>0){const I=Math.min(...Z.map(t=>t.yIndex)),x=g.filter(t=>!this.isLaneOccupied(t,I+1,l)),r=u(x,t=>[...Z,i.from].reduce((s,c)=>s+Math.abs(c.trail.lane.xIndex-t.xIndex),0))??{xIndex:g.length,occupations:[]};0===x.length&&g.push(r),r.occupations.push({type:"merge-path",minYIndex:I+1,maxYIndex:l}),f.push(`M ${F} ${m(l+.5)}`,`L ${h(r.xIndex)} ${m(l+.25)}`,`V ${m(I+.5)}`,...Z.flatMap(t=>[`M ${h(r.xIndex)} ${m(t.yIndex+.5)}`,`L ${this.adjustForDashedLine(i.isDashed,r.xIndex,t.trail.lane.xIndex,t.yIndex+.5,t.yIndex,h,m)}`]))}f.push(...U.flatMap(I=>[`M ${F} ${m(I.yIndex+.25)}`,`L ${this.adjustForDashedLine(i.isDashed,v,I.trail.lane.xIndex,I.yIndex+.25,I.yIndex,h,m)}`])),i.path=f.join(" ")}),{mergePaths:a,lanes:g}}calculateColors(a,g){const h=(0,_.Z)(0,g),m=[];a.forEach(i=>{const f=m.filter(v=>v.minYIndexWithMerges<=i.maxYIndexWithMerges&&v.maxYIndexWithMerges>=i.minYIndexWithMerges).map(v=>v.colorIndex),l=G(h,...f);i.colorIndex=l.length>0?l[0]:i.trailIndex%g,m.push(i)})}getLaneMaxYIndex(a){return a.occupations[a.occupations.length-1].maxYIndex}isLaneOccupied(a,g,h){return a.occupations.some(m=>m.minYIndex<=h&&m.maxYIndex>=g)}adjustForDashedLine(a,g,h,m,i,f,l){const F=a?m>i?.15:-.15:0;return`${f(h+(a?g>h?.3:-.3:0))} ${l(i+F)}`}static{this.\u0275fac=function(g){return new(g||N)}}static{this.\u0275prov=X.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"})}}},2960:($,W,n)=>{n.d(W,{i:()=>I});var d=n(655),e=n(4650),T=n(9867),M=n(1135),O=n(8926),u=n(9967),b=n(9077),k=n(9578),D=n(6895),_=n(7392),R=n(266),o=n(811),K=n(6326),J=n(2771),A=n(4462),P=n(7615),C=n(9131),E=n(6709);function w(x,r){if(1&x){const t=e.EpF();e.TgZ(0,"mat-checkbox",7),e.NdJ("change",function(c){e.CHM(t);const p=e.oxw().$implicit,y=e.oxw();return e.KtG(y.checkedChanged.next([p,c.checked]))}),e.qZA()}if(2&x){const t=e.oxw().$implicit,s=e.oxw();e.Q6J("checked",s.isChecked(t))}}function Y(x,r){if(1&x){const t=e.EpF();e.TgZ(0,"li",3),e.NdJ("contextmenu",function(c){const y=e.CHM(t).$implicit,j=e.oxw();return e.KtG(j.contextMenuOpened.next([y,c]))}),e.TgZ(1,"mat-icon",4),e._uU(2),e.qZA(),e.YNc(3,w,1,1,"mat-checkbox",5),e.TgZ(4,"app-condensed-path",6),e.NdJ("click",function(){const p=e.CHM(t).$implicit,y=e.oxw();return e.KtG(y.selectedChanged.next(p))}),e.qZA()()}if(2&x){const t=r.$implicit,s=e.oxw();e.ekj("selected",s.isSelected(t))("checked",s.isChecked(t)),e.xp6(1),e.Q6J("ngClass",s.getPatchIconColorClass(t)),e.xp6(1),e.Oqu(s.getPatchIcon(t)),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("path",s.getPatchPath(t))}}class B extends((0,O.j)(u.A,J.P)){constructor(r){super(),this.commitDetailService=r,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.keyPressDisabled=!1}ngOnChanges(r){r.selected&&(this.keyPressDisabled=!1)}trackByPatch(r,t){return`${t.oldFilePath}|${t.newFilePath}|${t.status}`}getPatchPath(r){return this.commitDetailService.getPatchPath(r)}getPatchIcon(r){return this.commitDetailService.getPatchIcon(r)}getPatchIconColorClass(r){return this.commitDetailService.getPatchIconColorClass(r)}isChecked(r){return this.checked?.some(({oldFilePath:t,newFilePath:s})=>t===r.oldFilePath&&s===r.newFilePath)}isSelected(r){return r.oldFilePath===this.selected?.oldFilePath&&r.newFilePath===this.selected.newFilePath}keyPressed(r,t){if(this.keyPressDisabled)return;r.preventDefault();const s=this.selected,c=t.findIndex(({oldFilePath:y,newFilePath:j})=>y===s?.oldFilePath&&j===s?.newFilePath);let p=null;switch(r.key){case"ArrowUp":if(!(A.V?r.metaKey:r.ctrlKey)){c>0&&(p=c-1);break}case"Home":p=0;break;case"ArrowDown":if(!(A.V?r.metaKey:r.ctrlKey)){c<t.length-1&&(p=c+1);break}case"End":p=t.length-1;break;case"Escape":c>=0&&(p=c)}if(null!==p){this.keyPressDisabled=!0,this.selectedChanged.next(t[p]);const y=this.viewports.first,j=y.measureScrollOffset("top"),H=j+y.getViewportSize(),S=22*p;(S<j||S>=H)&&y.scrollToIndex(p)}}static{this.\u0275fac=function(t){return new(t||B)(e.Y36(P.d))}}static{this.\u0275cmp=e.Xpm({type:B,selectors:[["app-patch-list"]],viewQuery:function(t,s){if(1&t&&e.Gf(K.N7,5),2&t){let c;e.iGM(c=e.CRH())&&(s.viewports=c)}},inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj,e.TTD],decls:3,vars:7,consts:[["tabindex","0",1,"item-list-container",3,"itemSize","maxBufferPx","minBufferPx","keydown"],[1,"patch-list"],[3,"selected","checked","contextmenu",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"contextmenu"],["inline","",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"name",3,"path","click"],[3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0),e.NdJ("keydown",function(p){return s.keyPressed(p,s.patches)}),e.TgZ(1,"ul",1),e.YNc(2,Y,5,8,"li",2),e.qZA()()),2&t&&(e.Q6J("itemSize",22)("maxBufferPx",400)("minBufferPx",200),e.xp6(1),e.ekj("checkboxes",s.checked),e.xp6(1),e.Q6J("cdkVirtualForOf",s.patches)("cdkVirtualForTrackBy",s.trackByPatch))},dependencies:[K.xd,K.x0,K.N7,D.mk,D.O5,_.Hw,C.j,E.oG],styles:["[_nghost-%COMP%]{display:contents}.item-list-container[_ngcontent-%COMP%]{margin-left:-16px;margin-right:-16px;height:100%;contain:content;outline:none}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{position:relative}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;height:22px;line-height:22px;padding-left:16px;padding-right:16px;position:relative;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background-color:#616161}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px;--mdc-checkbox-ripple-size: 28px;--mdc-checkbox-touch-target-size: 22px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px;margin-left:-2px;margin-right:2px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%]{color:#ef5350}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%]{color:#4caf50}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:calc(100% - 22px)}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:none}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%]{display:block}"],changeDetection:0})}}var z=n(2686),G=n(9841),X=n(9646),N=n(4004),L=n(4782),a=n(6725),g=n(3448),h=n(1123);function m(x,r){if(1&x){const t=e.EpF();e.TgZ(0,"mat-checkbox",8),e.NdJ("click",function(c){return c.stopPropagation()})("change",function(c){e.CHM(t);const p=e.oxw().$implicit,y=e.oxw();return e.KtG(y.clickNodeCheckbox(p,c.checked))}),e.qZA()}if(2&x){const t=e.oxw().$implicit;e.Q6J("checked","all"===t.checked)("indeterminate","some"===t.checked)}}function i(x,r){if(1&x){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(c){const y=e.CHM(t).$implicit,j=e.oxw();return e.KtG(j.toggleNodeExpanded(c,y))}),e.TgZ(1,"mat-icon",4),e._uU(2,"folder"),e.qZA(),e.YNc(3,m,1,2,"mat-checkbox",5),e.TgZ(4,"span",6),e._uU(5),e.qZA(),e.TgZ(6,"mat-icon",7),e._uU(7),e.qZA()()}if(2&x){const t=r.$implicit,s=e.oxw();e.ekj("checked","all"===t.checked),e.xp6(3),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("matTooltip",t.id),e.xp6(1),e.Oqu(t.segment),e.xp6(2),e.Oqu(t.expanded?"expand_less":"expand_more")}}function f(x,r){if(1&x){const t=e.EpF();e.TgZ(0,"mat-checkbox",13),e.NdJ("change",function(c){e.CHM(t);const p=e.oxw().$implicit,y=e.oxw();return e.KtG(y.checkedChanged.next([p.patch,c.checked]))}),e.qZA()}if(2&x){const t=e.oxw().$implicit;e.Q6J("checked",t.checked)}}function l(x,r){if(1&x){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("contextmenu",function(c){const y=e.CHM(t).$implicit,j=e.oxw();return e.KtG(j.contextMenuOpened.next([y.patch,c]))}),e.TgZ(1,"mat-icon",10),e._uU(2),e.qZA(),e.YNc(3,f,1,1,"mat-checkbox",11),e.TgZ(4,"span",12),e.NdJ("click",function(){const p=e.CHM(t).$implicit,y=e.oxw();return e.KtG(y.selectedChanged.next(p.patch))}),e._uU(5),e.qZA()()}if(2&x){const t=r.$implicit,s=e.oxw();let c;e.ekj("checked",t.checked)("selected",s.isSelected(t.patch)),e.xp6(1),e.Q6J("ngClass",s.getPatchIconColorClass(t.patch)),e.xp6(1),e.Oqu(s.getPatchIcon(t.patch)),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("matTooltip",null!==(c=s.getPatchPath(t.patch))&&void 0!==c?c:""),e.xp6(1),e.Oqu(t.segment)}}class v extends((0,O.j)(u.A)){constructor(r){super(),this.commitDetailService=r,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.collapsedNodeIds=new M.X(new Set),this.toggleNodeExpanded=(t,s)=>{t.preventDefault(),t.stopPropagation();const c=new Set(this.collapsedNodeIds.value);c.has(s.id)?(c.delete(s.id),this.collapsedNodeIds.next(c)):(c.add(s.id),this.collapsedNodeIds.next(c))}}ngOnInit(){this.tree=(0,G.a)([this.patches,this.checked??(0,X.of)(null),this.collapsedNodeIds]).pipe((0,N.U)(([r,t,s])=>{const c=r.map(p=>({patch:p,segments:(p.newFilePath??p.oldFilePath??"").split("/")}));return this.buildTree(c,"",0,t,s)}),(0,L.d)(1))}getPatchPath(r){return this.commitDetailService.getPatchPath(r)}getPatchIcon(r){return this.commitDetailService.getPatchIcon(r)}getPatchIconColorClass(r){return this.commitDetailService.getPatchIconColorClass(r)}isSelected(r){return r.oldFilePath===this.selected?.oldFilePath&&r.newFilePath===this.selected.newFilePath}clickNodeCheckbox(r,t){const s=c=>c.reduce((p,y)=>[...p,..."patch"in y?[y]:s(y.children)],[]);for(const c of s(r.children))this.checkedChanged.next([c.patch,t])}buildTree(r,t,s,c,p){return Object.entries((0,z.Z)(r,({segments:H})=>H[0])).sort(([H],[S])=>H.localeCompare(S,void 0,{numeric:!0})).flatMap(([H,S])=>{const ne=`${t}${H}/`,ie=`${t}${H}`,ce=S.filter(({segments:V})=>V.length>1),se=c?S.every(({patch:V})=>c.some(({oldFilePath:Q,newFilePath:oe})=>Q===V.oldFilePath&&oe===V.newFilePath))?"all":S.some(({patch:V})=>c.some(({oldFilePath:Q,newFilePath:oe})=>Q===V.oldFilePath&&oe===V.newFilePath))?"some":"none":"none",q=ce.length>0?{id:ne,depth:s,expanded:!p.has(ne),children:this.buildTree(ce.map(({patch:V,segments:Q})=>({patch:V,segments:Q.slice(1)})),ne,s+1,c,p),segment:H,checked:se}:null,ee=S.find(({segments:V})=>V.length<=1),te=ee?{id:ie,depth:s,segment:H,patch:ee.patch,checked:c?.some(({oldFilePath:V,newFilePath:Q})=>V===ee.patch.oldFilePath&&Q===ee.patch.newFilePath)??!1}:null;return te&&q?[te,q]:q?[q]:te?[te]:[]})}static{this.\u0275fac=function(t){return new(t||v)(e.Y36(P.d))}}static{this.\u0275cmp=e.Xpm({type:v,selectors:[["app-patch-tree"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj],decls:3,vars:4,consts:[[3,"tree","itemSize"],["class","node-item",3,"checked","click",4,"appVirtualTreeNode"],["class","leaf-item",3,"checked","selected","contextmenu",4,"appVirtualTreeLeafNode"],[1,"node-item",3,"click"],["inline","",1,"node-icon"],[3,"checked","indeterminate","click","change",4,"ngIf"],[1,"text",3,"matTooltip"],[1,"expand-icon"],[3,"checked","indeterminate","click","change"],[1,"leaf-item",3,"contextmenu"],["inline","",1,"node-icon",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"text",3,"matTooltip","click"],[3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"app-virtual-tree",0),e.YNc(1,i,8,6,"div",1),e.YNc(2,l,6,9,"div",2),e.qZA()),2&t&&(e.ekj("checkboxes",!!s.checked),e.Q6J("tree",s.tree)("itemSize",22))},dependencies:[D.mk,D.O5,_.Hw,R.gM,a.L,g.I,h.J,E.oG],styles:["[_nghost-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport{contain:content;scrollbar-gutter:stable;margin-left:-16px;margin-right:-16px}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper{width:100%}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper>ul{overflow-x:auto;overflow-y:hidden}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-spacer{position:relative}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected){background-color:#616161}.node-item[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]{margin-left:16px;display:flex;justify-content:space-between;cursor:pointer;line-height:22px;height:22px;user-select:none;align-items:center;min-width:200px}.node-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px;margin-left:-2px;margin-right:2px}.node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%]{color:#ef5350}.node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%]{color:#4caf50}.node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px;--mdc-checkbox-ripple-size: 28px;--mdc-checkbox-touch-target-size: 22px}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%]{font-size:16px}.node-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.node-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%]{flex:0 0 auto;color:#ffffffb3;line-height:22px}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .node-icon[_ngcontent-%COMP%]{display:none}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .checkbox-button[_ngcontent-%COMP%]{display:block}"],changeDetection:0})}}function F(x,r){if(1&x){const t=e.EpF();e.TgZ(0,"app-patch-list",6),e.NdJ("checkedChanged",function(c){e.CHM(t);const p=e.oxw(2);return e.KtG(p.checkedChanged.next(c))})("selectedChanged",function(c){e.CHM(t);const p=e.oxw(2);return e.KtG(p.selectedChanged.next(c))})("contextMenuOpened",function(c){e.CHM(t);const p=e.oxw(2);return e.KtG(p.contextMenuOpened.next(c))}),e.ALo(1,"async"),e.qZA()}if(2&x){const t=e.oxw(2);e.Q6J("patches",t.patches)("checked",e.lcZ(1,3,t.checked))("selected",t.selected)}}function U(x,r){if(1&x){const t=e.EpF();e.TgZ(0,"app-patch-tree",6),e.NdJ("checkedChanged",function(c){e.CHM(t);const p=e.oxw(2);return e.KtG(p.checkedChanged.next(c))})("selectedChanged",function(c){e.CHM(t);const p=e.oxw(2);return e.KtG(p.selectedChanged.next(c))})("contextMenuOpened",function(c){e.CHM(t);const p=e.oxw(2);return e.KtG(p.contextMenuOpened.next(c))}),e.qZA()}if(2&x){const t=e.oxw(2);e.Q6J("patches",t.patches$)("checked",t.checked)("selected",t.selected)}}function Z(x,r){if(1&x){const t=e.EpF();e.ynx(0),e.TgZ(1,"header")(2,"mat-button-toggle-group",1),e.NdJ("change",function(c){e.CHM(t);const p=e.oxw();return e.KtG(p.changePatchView(c.value))}),e.TgZ(3,"mat-button-toggle",2)(4,"mat-icon"),e._uU(5,"list"),e.qZA()(),e.TgZ(6,"mat-button-toggle",3),e._UZ(7,"mat-icon",4),e.qZA()()(),e.YNc(8,F,2,5,"app-patch-list",5),e.YNc(9,U,1,3,"app-patch-tree",5),e.BQk()}if(2&x){const t=r.ngIf;e.xp6(2),e.Q6J("value",t),e.xp6(6),e.Q6J("ngIf","list"===t),e.xp6(1),e.Q6J("ngIf","tree"===t)}}let I=(()=>{class x extends((0,O.j)(u.A)){constructor(t){super(),this.store=t,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.patches$=new M.X([])}ngOnChanges(t){t.patches&&this.patches$.next(this.patches)}changePatchView(t){this.store.dispatch(new k.eh(t))}static{this.\u0275fac=function(s){return new(s||x)(e.Y36(T.yh))}}static{this.\u0275cmp=e.Xpm({type:x,selectors:[["app-patches-view"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj,e.TTD],decls:2,vars:3,consts:[[4,"ngIf"],[3,"value","change"],["value","list","matTooltip","List View"],["value","tree","matTooltip","Tree View"],["svgIcon","file-tree"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened",4,"ngIf"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened"]],template:function(s,c){1&s&&(e.YNc(0,Z,10,3,"ng-container",0),e.ALo(1,"async")),2&s&&e.Q6J("ngIf",e.lcZ(1,1,c.view))},dependencies:[D.O5,_.Hw,R.gM,o.A9,o.Yi,B,v,D.Ov],styles:["[_nghost-%COMP%]{display:contents}header[_ngcontent-%COMP%]{flex:0 0 auto;text-align:center;margin-bottom:-4px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{height:30px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{font-size:0}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:28px;padding:0 5px}"],changeDetection:0})}}return(0,d.gn)([(0,T.Ph)(b.$.patchView)],x.prototype,"view",void 0),x})()},6248:($,W,n)=>{n.d(W,{Z:()=>k});var d=n(811),e=n(3546),T=n(6709),M=n(284),O=n(3179),u=n(9418),b=n(4650);class k{static{this.\u0275fac=function(R){return new(R||k)}}static{this.\u0275mod=b.oAB({type:k})}static{this.\u0275inj=b.cJS({imports:[O.I,d.vV,e.QW,T.p9,M.c,u.c]})}}},2686:($,W,n)=>{n.d(W,{Z:()=>J});var d=n(3496);const T=function e(A,P,C,E){for(var w=-1,Y=null==A?0:A.length;++w<Y;){var B=A[w];P(E,B,C(B),A)}return E};var M=n(3693);const u=function O(A,P,C,E){return(0,M.Z)(A,function(w,Y,B){P(E,w,C(w),B)}),E};var b=n(539),k=n(4177),o=Object.prototype.hasOwnProperty;const J=function D(A,P){return function(C,E){var w=(0,k.Z)(C)?T:u,Y=P?P():{};return w(C,A,(0,b.Z)(E,2),Y)}}(function(A,P,C){o.call(A,C)?A[C].push(P):(0,d.Z)(A,C,[P])})}}]);