import{b as cn}from"./chunk-GCKMX4QD.js";import{a as ln,b as ye,c as xe,d as pn}from"./chunk-E2HT647D.js";import{b as an}from"./chunk-SEZ3CXED.js";import{a as mn}from"./chunk-DYDJMYQO.js";import{b as Xt,c as Zt,d as $t,e as Jt,f as en,g as tn,h as je}from"./chunk-LASU6GW6.js";import{a as sn,b as rn}from"./chunk-5T66DEWK.js";import{G as P,m as nn,t as Me,u as on}from"./chunk-ZK5OAROB.js";import{$ as Ie,$a as ae,$e as de,$i as Oe,Aa as U,Ba as E,C as Ye,Ca as oe,Cb as s,Cf as Ne,Ci as jt,Da as et,Db as r,Di as Wt,E as I,Eb as ce,Fa as j,G as Ke,Ga as v,Gb as le,Ha as tt,Hf as kt,Ia as S,If as Tt,J as ze,Ja as nt,Jb as Ve,Je as _t,Ka as it,Kb as L,Kc as pe,Ke as gt,Kf as At,Le as ut,Lf as Y,Na as Fe,Nb as ht,Ob as W,Oi as fe,P as q,Pf as Ue,Pi as Ht,Q as te,Qf as It,Qi as Yt,R as A,Re as Ct,Rf as Et,Ri as Kt,S as Ge,Sb as H,Se as ft,Sf as Ft,Tf as he,Ti as zt,Ua as m,Va as c,Wa as p,We as vt,Wf as Rt,Xa as k,Xe as me,Xg as Z,Xi as ve,Y as qe,Ya as ot,Ye as Ot,Yf as _e,Za as at,_ as ne,_e as Be,_h as Vt,ab as se,af as Pt,ba as f,ca as Qe,cb as y,cf as bt,cj as Pe,da as g,db as st,df as Mt,dj as be,ea as u,eb as C,f as J,fb as d,fi as ue,gb as rt,h as Se,ha as ie,hb as ct,hf as yt,i as ke,ib as Re,ii as Bt,j as N,jb as Q,ji as Lt,kb as D,lb as V,lf as xt,li as Ce,m as x,mb as X,mj as Gt,na as Xe,o as Te,oa as Ze,ob as re,of as wt,oj as qt,pa as Ee,pb as lt,pj as Qt,q as F,qb as h,r as ee,rb as O,s as He,sb as B,si as Nt,tb as pt,th as K,ug as ge,uh as z,va as a,vb as mt,vf as St,wa as $e,wh as Dt,wi as Ut,x as R,xb as De,xf as Le,xh as G,ya as Je,yb as dt,yg as w,z as Ae,za as M}from"./chunk-R5KNYV3F.js";function On(i,_){if(i&1){let e=y();c(0,"app-new-commit",3),C("patchChanged",function(n){g(e);let o=d(2);return u(o.patchChanged.next(n))}),p()}}function Pn(i,_){if(i&1){let e=y();c(0,"app-commit",4),C("patchChanged",function(n){g(e);let o=d(2);return u(o.patchChanged.next(n))}),p()}if(i&2){let e=d(2);m("commit",e.commit)("selectedFile",e.selectedFile)}}function bn(i,_){if(i&1&&(ae(0),v(1,On,1,0,"app-new-commit",1)(2,Pn,1,2,"app-commit",2),se()),i&2){let e=_.ngIf;a(),m("ngIf",e==="head"),a(),m("ngIf",e!=="head")}}var dn=(()=>{class i extends K(z){constructor(){super(...arguments),this.patchChanged=new S}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=Ze(i)))(n||i)}})()}static{this.\u0275cmp=E({type:i,selectors:[["app-commit-detail-view"]],inputs:{commit:"commit",selectedFile:"selectedFile"},outputs:{patchChanged:"patchChanged"},standalone:!1,features:[j],decls:2,vars:3,consts:[[4,"ngIf"],[3,"patchChanged",4,"ngIf"],[3,"commit","selectedFile","patchChanged",4,"ngIf"],[3,"patchChanged"],[3,"patchChanged","commit","selectedFile"]],template:function(t,n){t&1&&(v(0,bn,3,2,"ng-container",0),s(1,"async")),t&2&&m("ngIf",r(1,1,n.commit))},encapsulation:2,changeDetection:0})}}return i})();function Rn(i,_){if(i&1){let e=y();c(0,"li",21),C("click",function(){let n=g(e).$implicit,o=d(4);return u(o.changeCommit(n))}),h(1),p()}if(i&2){let e=_.$implicit,t=_.first;m("matTooltip",e),a(),pt("",t?"":", ","",e)}}function Dn(i,_){if(i&1&&(c(0,"div",18)(1,"span",5),h(2),s(3,"translate"),p(),c(4,"div",19)(5,"ul"),v(6,Rn,2,3,"li",20),p()()()),i&2){let e=d(2).ngIf;re("plural",e.parentIds.length>1),a(2),B("",r(3,4,e.parentIds.length===1?"Parent:":"Parents:")," "),a(4),m("ngForOf",e.parentIds)}}function Vn(i,_){if(i&1&&(c(0,"div",22),h(1),s(2,"translate"),k(3,"app-avatar",12),s(4,"async"),c(5,"span",13),h(6),p()()),i&2){let e=d(2).ngIf,t=d();m("matTooltip",e.committerName+" ("+e.committerEmail+")"),a(),B(" ",r(2,5,"committed by")," "),a(2),m("remotes",r(4,7,t.remotes))("email",e.committerEmail),a(3),O(e.committerName)}}function Bn(i,_){if(i&1){let e=y();c(0,"div",23)(1,"div",24),h(2),p(),c(3,"button",25),C("click",function(){let n=g(e).data,o=d(3);return u(o.copyToClipboard(o.getPatchPath(n)))}),c(4,"mat-icon"),h(5,"content_copy"),p(),c(6,"span"),h(7),s(8,"translate"),p()(),c(9,"button",26),C("click",function(){let n=g(e).data,o=d(3);return u(o.blamePatch(n))}),c(10,"mat-icon"),h(11,"document_scanner"),p(),c(12,"span"),h(13),s(14,"translate"),p()()()}if(i&2){let e=_.data,t=d(3);a(),m("matTooltip",t.getPatchPath(e)??""),a(),O(t.getPatchFilename(e)),a(5),O(r(8,4,"Copy Path")),a(6),O(r(14,6,"Blame"))}}function Ln(i,_){if(i&1){let e=y();c(0,"div",3)(1,"header")(2,"div",4),C("click",function(){g(e);let n=d().ngIf,o=d();return u(o.copyToClipboard(n.id))}),c(3,"span",5),h(4),s(5,"translate"),p(),h(6),p(),v(7,Dn,7,6,"div",6),p(),c(8,"app-grid",7)(9,"app-grid-cell")(10,"mat-card",8)(11,"div",9)(12,"span",10),h(13),p(),k(14,"br"),c(15,"span"),h(16),p()(),c(17,"div",11),h(18),s(19,"translate"),k(20,"app-avatar",12),s(21,"async"),c(22,"span",13),h(23),p(),k(24,"br"),p(),v(25,Vn,7,9,"div",14),c(26,"div",15),s(27,"translateDate"),h(28),s(29,"translate"),c(30,"span",13),h(31),s(32,"translateDate"),p(),h(33),s(34,"translate"),c(35,"span",13),h(36),s(37,"translateDate"),p()()()(),c(38,"app-grid-cell")(39,"mat-card",16)(40,"app-patches-view",17),s(41,"async"),C("selectedChanged",function(n){g(e);let o=d(2);return u(o.changeFile(n.oldFilePath,n.newFilePath))})("contextMenuOpened",function(n){g(e);let o=X(43),l=d(2);return u(l.openContextMenu(o,n[0],n[1]))}),p()()()(),v(42,Bn,15,8,"ng-template",null,0,le),p()}if(i&2){let e=d().ngIf,t=d();a(2),m("matTooltip",e.id),a(2),O(r(5,19,"Commit:")),a(2),B(" ",e.id," "),a(),m("ngIf",e.parentIds.length),a(6),O(t.getMessageSubject(e.message)),a(3),O(t.getMessageBody(e.message)),a(),m("matTooltip",e.authorName+" ("+e.authorEmail+")"),a(),B(" ",r(19,21,"authored by")," "),a(2),m("remotes",r(21,23,t.remotes))("email",e.authorEmail),a(3),O(e.authorName),a(2),m("ngIf",e.committerName&&e.committerEmail&&(e.authorName!==e.committerName||e.authorEmail!==e.committerEmail)),a(),m("matTooltip",ce(27,25,e.date,"z")||""),a(2),B(" ",r(29,28,"on !date!")," "),a(3),O(ce(32,30,e.date,"longDate")),a(2),B(" ",r(34,33,"at !time!")," "),a(3),O(ce(37,35,e.date,"HH:mm")),a(4),m("patches",e.patches)("selected",r(41,38,t.selectedFile))}}function Nn(i,_){if(i&1&&(ae(0),v(1,Ln,44,40,"div",2),se()),i&2){let e=_.ngIf;a(),m("ngIf",e&&e!=="head")}}var _n=(()=>{class i extends K(z){constructor(e,t,n,o,l){super(),this.overlay=e,this.router=t,this.viewContainerRef=n,this.store=o,this.commitDetailService=l,this.patchChanged=new S,this.overlayRef=null}getPatchPath(e){return this.commitDetailService.getPatchPath(e)}getPatchFilename(e){let t=this.commitDetailService.getPatchPath(e);return t?t.slice(t.lastIndexOf("/")+1):null}getMessageSubject(e){return e.split(`
`)[0]??""}getMessageBody(e){return e.split(`
`).slice(1).join(`
`).trimEnd()}copyToClipboard(e){navigator.clipboard.writeText(e??"").then(()=>{})}changeCommit(e){this.selectedRepositoryPath.pipe(I(1)).subscribe(t=>{t!==null&&(this.store.dispatch(new nn(t,e)),e&&this.store.dispatch(new Me(t,e)))})}changeFile(e,t){this.patchChanged.next({area:"commit",oldFilePath:e,newFilePath:t})}blamePatch(e){this.commit.pipe(I(1)).subscribe(t=>{this.router.navigate(["/standard/blame"],{queryParams:{area:"commit","commit-id":t==="head"?"head":t?.id,path:e.newFilePath}})})}openContextMenu(e,t,n){n.preventDefault(),n.stopPropagation(),this.closeContextMenu(),this.overlayRef=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo({x:n.x,y:n.y}).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this.overlayRef.attach(new Y(e,this.viewContainerRef,{data:t})),ve(this.overlayRef).pipe(I(1),A(this.destroyed$)).subscribe(()=>this.closeContextMenu())}closeContextMenu(){this.overlayRef?.dispose(),this.overlayRef=null}static{this.\u0275fac=function(t){return new(t||i)(M(he),M(pe),M(U),M(ge),M(ye))}}static{this.\u0275cmp=E({type:i,selectors:[["app-commit"]],inputs:{commit:"commit",selectedFile:"selectedFile"},outputs:{patchChanged:"patchChanged"},standalone:!1,features:[j],decls:2,vars:3,consts:[["fileContextMenu",""],[4,"ngIf"],["class","detail-container",4,"ngIf"],[1,"detail-container"],[1,"this-commit",3,"click","matTooltip"],[1,"title"],["class","parent-commits",3,"plural",4,"ngIf"],["id","commit-detail-view","vertical",""],["appearance","outlined",1,"message"],[1,"content"],[1,"subject"],[1,"author",3,"matTooltip"],[3,"remotes","email"],[1,"highlight"],["class","committer",3,"matTooltip",4,"ngIf"],[1,"date",3,"matTooltip"],["appearance","outlined",1,"files"],[3,"selectedChanged","contextMenuOpened","patches","selected"],[1,"parent-commits"],[1,"parent-commit-ids"],[3,"matTooltip","click",4,"ngFor","ngForOf"],[3,"click","matTooltip"],[1,"committer",3,"matTooltip"],[1,"menu-panel"],[1,"menu-header",3,"matTooltip"],[1,"menu-item",3,"click"],["matTooltip","Show file history",1,"menu-item",3,"click"]],template:function(t,n){t&1&&(v(0,Nn,2,1,"ng-container",1),s(1,"async")),t&2&&m("ngIf",r(1,1,n.commit))},dependencies:[Ce,ht,W,fe,_e,zt,Pe,be,xe,H,qt,Oe],styles:[".detail-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;gap:10px}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;column-gap:10px;padding:0 10px;flex:0 0 auto;overflow-x:hidden;overflow-y:auto;font-weight:600}header[_ngcontent-%COMP%]   .this-commit[_ngcontent-%COMP%]{flex:1 1 113px;min-width:113px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}header[_ngcontent-%COMP%]   .parent-commits[_ngcontent-%COMP%]{flex:1 1 106px;min-width:106px;overflow:hidden}header[_ngcontent-%COMP%]   .parent-commits[_ngcontent-%COMP%]   .parent-commit-ids[_ngcontent-%COMP%]{display:inline-block;width:calc(100% - 61px)}header[_ngcontent-%COMP%]   .parent-commits[_ngcontent-%COMP%]   .parent-commit-ids[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}header[_ngcontent-%COMP%]   .parent-commits[_ngcontent-%COMP%]   .parent-commit-ids[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}header[_ngcontent-%COMP%]   .parent-commits.plural[_ngcontent-%COMP%]{flex-basis:163px;min-width:163px}header[_ngcontent-%COMP%]   .parent-commits.plural[_ngcontent-%COMP%]   .parent-commit-ids[_ngcontent-%COMP%]{width:calc(100% - 63px)}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:400}.message[_ngcontent-%COMP%]{height:calc(100% - 5px);margin:0 10px 5px;padding:16px;overflow:auto;white-space:pre-line}.message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:1rem;overflow-wrap:anywhere}.message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{font-size:1.25rem}.message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{margin-top:20px}.message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]{margin-bottom:2px}.message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{width:auto;height:1.5625rem;aspect-ratio:1/1;margin:0 3px 0 5px;vertical-align:bottom}.message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{font-size:1.25rem}.files[_ngcontent-%COMP%]{height:calc(100% - 5px);margin:5px 10px 0;padding:16px;white-space:nowrap;overflow:auto;display:flex;flex-direction:column;gap:10px}.dark-theme[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff}.dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#ffffffb3}.dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#fff}.light-theme[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#000000de}.light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#0000008a}.light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .committer[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#000000de}"],changeDetection:0})}}return x([w(P.selectedRemotes)],i.prototype,"remotes",void 0),x([w(P.selectedRepositoryPath)],i.prototype,"selectedRepositoryPath",void 0),i})();function Un(i,_){if(i&1){let e=y();c(0,"button",21),s(1,"async"),s(2,"nullEmpty"),s(3,"translate"),C("click",function(){g(e);let n=d(2);return u(n.stage())}),k(4,"mat-icon",19),s(5,"async"),s(6,"nullEmpty"),p()}if(i&2){let e=d(2);m("matTooltip",r(3,6,r(2,4,r(1,2,e.checkedUnstaged))?"Stage selected changes":"Stage all changes")),a(4),m("svgIcon",r(6,10,r(5,8,e.checkedUnstaged))?"tray-plus":"tray-arrow-down")}}function jn(i,_){i&1&&(c(0,"div",22),s(1,"translate"),c(2,"button",23)(3,"mat-icon"),h(4,"warning"),p()()()),i&2&&m("matTooltip",r(1,1,"Cannot stage conflicted files, resolve the conflicts first"))}function Wn(i,_){if(i&1){let e=y();c(0,"app-grid-cell",3)(1,"mat-card",12)(2,"div",13)(3,"button",14),s(4,"async"),s(5,"translate"),C("click",function(){g(e);let n=d();return u(n.clickAllUnstagedCheckbox())}),c(6,"mat-icon"),h(7),s(8,"async"),p()(),c(9,"div",15),v(10,Un,7,12,"button",16),s(11,"async"),v(12,jn,5,3,"div",17),s(13,"async"),c(14,"button",18),s(15,"async"),s(16,"nullEmpty"),s(17,"translate"),C("click",function(){g(e);let n=d();return u(n.discard())}),k(18,"mat-icon",19),s(19,"async"),s(20,"nullEmpty"),p()()(),c(21,"app-patches-view",20),s(22,"async"),C("checkedChanged",function(n){g(e);let o=d();return u(o.setPatchChecked("unstaged",n[0],n[1]))})("selectedChanged",function(n){g(e);let o=d();return u(o.selectFile("unstaged",n.oldFilePath,n.newFilePath))})("contextMenuOpened",function(n){g(e);let o=d(),l=X(23);return u(o.openContextMenu("unstaged",l,n[0],n[1]))}),p()()()}if(i&2){let e=_.ngIf,t=d();a(3),m("matTooltip",r(5,11,r(4,9,t.allUnstagedCheckboxIcon)==="check_box_outline_blank"?"Select all":"Deselect all")),a(4),O(r(8,13,t.allUnstagedCheckboxIcon)),a(3),m("ngIf",r(11,15,t.hasConflicts)===!1),a(2),m("ngIf",r(13,17,t.hasConflicts)),a(2),m("matTooltip",r(17,23,r(16,21,r(15,19,t.checkedUnstaged))?"Discard selected changes":"Discard all changes")),a(4),m("svgIcon",r(20,27,r(19,25,t.checkedUnstaged))?"tray-remove":"tray"),a(3),m("patches",e)("checked",t.checkedUnstaged)("selected",r(22,29,t.selectedUnstagedFile))}}function Hn(i,_){if(i&1){let e=y();c(0,"mat-card",24)(1,"div",13)(2,"button",14),s(3,"async"),s(4,"translate"),C("click",function(){g(e);let n=d();return u(n.clickAllStagedCheckbox())}),c(5,"mat-icon"),h(6),s(7,"async"),p()(),c(8,"div",15)(9,"button",25),s(10,"async"),s(11,"nullEmpty"),s(12,"translate"),C("click",function(){g(e);let n=d();return u(n.unstage())}),k(13,"mat-icon",19),s(14,"async"),s(15,"nullEmpty"),p()()(),c(16,"app-patches-view",20),s(17,"async"),C("checkedChanged",function(n){g(e);let o=d();return u(o.setPatchChecked("staged",n[0],n[1]))})("selectedChanged",function(n){g(e);let o=d();return u(o.selectFile("staged",n.oldFilePath,n.newFilePath))})("contextMenuOpened",function(n){g(e);let o=d(),l=X(23);return u(o.openContextMenu("staged",l,n[0],n[1]))}),p()()}if(i&2){let e=_.ngIf,t=d();a(2),m("matTooltip",r(4,9,r(3,7,t.allStagedCheckboxIcon)==="check_box_outline_blank"?"Select all":"Deselect all")),a(4),O(r(7,11,t.allStagedCheckboxIcon)),a(3),m("matTooltip",r(12,17,r(11,15,r(10,13,t.checkedStaged))?"Unstage selected changes":"Unstage all changes")),a(4),m("svgIcon",r(15,21,r(14,19,t.checkedStaged))?"tray-minus":"tray-arrow-up"),a(3),m("patches",e)("checked",t.checkedStaged)("selected",r(17,23,t.selectedStagedFile))}}function Yn(i,_){i&1&&k(0,"mat-spinner",26)}function Kn(i,_){i&1&&(c(0,"span"),h(1),s(2,"translate"),p()),i&2&&(a(),O(r(2,1,"Commit changes")))}function zn(i,_){if(i&1){let e=y();c(0,"button",31),C("click",function(){g(e);let n=d().data,o=d();return u(o.blamePatch(n.area,n.patch))}),c(1,"mat-icon"),h(2,"document_scanner"),p(),c(3,"span"),h(4),s(5,"translate"),p()()}i&2&&(a(4),O(r(5,1,"Blame")))}function Gn(i,_){if(i&1){let e=y();c(0,"div",27)(1,"div",28),h(2),p(),c(3,"button",29),C("click",function(){let n=g(e).data,o=d();return u(o.copyToClipboard(o.getPatchPath(n.patch)))}),c(4,"mat-icon"),h(5,"content_copy"),p(),c(6,"span"),h(7),s(8,"translate"),p()(),v(9,zn,6,3,"button",30),p()}if(i&2){let e=_.data,t=d();a(),m("matTooltip",t.getPatchPath(e.patch)??""),a(),O(t.getPatchFilename(e.patch)),a(5),O(r(8,4,"Copy Path")),a(2),m("ngIf",!t.isPatchAdded(e.patch))}}var gn=(()=>{class i extends K(z,Dt){constructor(e,t,n,o,l,b,T){super(),this.overlay=e,this.router=t,this.viewContainerRef=n,this.store=o,this.commitDetailService=l,this.repositoryActionsService=b,this.stagingActionsService=T,this.patchChanged=new S,this.commitMessageControl=new xt(null),this.commitButtonLoading=new N(!1),this.checkedStaged=new N([]),this.checkedUnstaged=new N([]),this.allStagedCheckboxIcon=new N("check_box_outline_blank"),this.allUnstagedCheckboxIcon=new N("check_box_outline_blank"),this.overlayRef=null,this.isPatchAdded=$=>$.status===Z.Added}ngOnInit(){this.stagedChanges=this.allStagedChanges.pipe(F(e=>e?.filter(t=>t.status!==Z.Conflicted)??null)),this.selectedRepositoryCommitMessage.pipe(A(this.destroyed$)).subscribe(e=>{this.commitMessageControl.setValue(e,{emitEvent:!1})}),this.commitMessageControl.valueChanges.pipe(Ye(200),A(this.destroyed$)).subscribe(e=>{let t=this.store.selectSnapshot(P.selectedRepositoryPath);t&&this.store.dispatch(new on(t,e))}),this.commitButtonDisabled=ee([this.commitButtonLoading,this.stagedChanges,R(this.selectedRepositoryCommitMessage,this.commitMessageControl.valueChanges.pipe(q(this.commitMessageControl.value)))]).pipe(F(([e,t,n])=>e||!n||!t||t.length===0)),this.commitButtonTooltip=ee([this.stagedChanges,R(this.selectedRepositoryCommitMessage,this.commitMessageControl.valueChanges.pipe(q(this.commitMessageControl.value)))]).pipe(F(([e,t])=>t?!e||e.length===0?G("There must be staged changes to commit"):"":G("The commit message cannot be empty"))),this.hasConflicts=ee([this.unstagedChanges,this.checkedUnstaged]).pipe(F(([e,t])=>t.length>0&&t.some(n=>n.status===Z.Conflicted)||t.length===0&&!!e&&e.some(n=>n.status===Z.Conflicted)))}getPatchPath(e){return this.commitDetailService.getPatchPath(e)}getPatchFilename(e){let t=this.commitDetailService.getPatchPath(e);return t?t.slice(t.lastIndexOf("/")+1):null}selectFile(e,t,n){this.patchChanged.next({area:e,oldFilePath:t,newFilePath:n})}discard(){let e=this.store.selectSnapshot(P.selectedRepositoryPath);e&&(this.checkedUnstaged.value.length>0?this.stagingActionsService.discardFiles(e,this.checkedUnstaged.value):this.stagingActionsService.discardAllChanges(e)).pipe(A(this.destroyed$)).subscribe(()=>{this.checkedStaged.next([]),this.checkedUnstaged.next([]),this.allUnstagedCheckboxIcon.next("check_box_outline_blank")})}stage(){let e=this.store.selectSnapshot(P.selectedRepositoryPath);e&&(this.checkedUnstaged.value.length>0?this.stagingActionsService.stageFiles(e,this.checkedUnstaged.value):this.stagingActionsService.stageAllChanges(e)).pipe(A(this.destroyed$)).subscribe(()=>{this.checkedStaged.next([]),this.checkedUnstaged.next([]),this.allUnstagedCheckboxIcon.next("check_box_outline_blank")})}unstage(){let e=this.store.selectSnapshot(P.selectedRepositoryPath);e&&(this.checkedStaged.value.length>0?this.stagingActionsService.unstageFiles(e,this.checkedStaged.value):this.stagingActionsService.unstageAllChanges(e)).pipe(A(this.destroyed$)).subscribe(()=>{this.checkedStaged.next([]),this.checkedUnstaged.next([]),this.allStagedCheckboxIcon.next("check_box_outline_blank")})}setPatchChecked(e,t,n){let o=e==="staged"?this.checkedStaged.value:this.checkedUnstaged.value,l=o.findIndex($=>$.oldFilePath===t.oldFilePath&&$.newFilePath===t.newFilePath);l>=0&&!n?o.splice(l,1):l<0&&n&&o.push(t),e==="staged"?this.checkedStaged.next(o):this.checkedUnstaged.next(o);let b=e==="staged"?this.allStagedCheckboxIcon:this.allUnstagedCheckboxIcon;(this.store.selectSnapshot(e==="staged"?P.selectedStagedChanges:P.selectedUnstagedChanges)?.length??0)===o.length?b.next("check_box"):o.length===0?b.next("check_box_outline_blank"):b.next("indeterminate_check_box")}commitChanges(){let e=this.store.selectSnapshot(P.selectedRepositoryPath),t=this.store.selectSnapshot(ue.selectedProfile),n=[];e||n.push(G("Cannot commit if no repository is selected")),t||n.push(G("Cannot commit if no profile is selected"));let o=this.commitMessageControl.value;if(o||n.push(G("Cannot commit with empty commit message")),n.length>0){this.store.dispatch(n.map(T=>new Vt("error",T)));return}this.commitButtonLoading.next(!0);let l=e,b=t;this.repositoryActionsService.createCommit(l,b,o??"").pipe(ze(()=>{this.commitButtonLoading.next(!1)})).subscribe(T=>{this.store.dispatch(new Me(l,T))})}copyToClipboard(e){navigator.clipboard.writeText(e??"")}blamePatch(e,t){this.router.navigate(["/standard/blame"],{queryParams:{area:e,"commit-id":"head",path:t.newFilePath}})}clickAllStagedCheckbox(){switch(this.allStagedCheckboxIcon.value){case"check_box":case"indeterminate_check_box":this.checkedStaged.next([]),this.allStagedCheckboxIcon.next("check_box_outline_blank");break;case"check_box_outline_blank":let e=this.store.selectSnapshot(P.selectedStagedChanges);this.checkedStaged.next([...e??[]]),this.allStagedCheckboxIcon.next("check_box");break}}clickAllUnstagedCheckbox(){switch(this.allUnstagedCheckboxIcon.value){case"check_box":case"indeterminate_check_box":this.checkedUnstaged.next([]),this.allUnstagedCheckboxIcon.next("check_box_outline_blank");break;case"check_box_outline_blank":let e=this.store.selectSnapshot(P.selectedUnstagedChanges);this.checkedUnstaged.next([...e??[]]),this.allUnstagedCheckboxIcon.next("check_box");break}}openContextMenu(e,t,n,o){o.preventDefault(),o.stopPropagation(),this.closeContextMenu(),this.overlayRef=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo({x:o.x,y:o.y}).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this.overlayRef.attach(new Y(t,this.viewContainerRef,{data:{area:e,patch:n}})),ve(this.overlayRef).pipe(I(1),A(this.destroyed$)).subscribe(()=>this.closeContextMenu())}closeContextMenu(){this.overlayRef?.dispose(),this.overlayRef=null}static{this.\u0275fac=function(t){return new(t||i)(M(he),M(pe),M(U),M(ge),M(ye),M(cn),M(mn))}}static{this.\u0275cmp=E({type:i,selectors:[["app-new-commit"]],viewQuery:function(t,n){if(t&1&&Q(Tt,5),t&2){let o;D(o=V())&&(n.viewports=o)}},outputs:{patchChanged:"patchChanged"},standalone:!1,features:[j],decls:24,vars:28,consts:[["fileContextMenu",""],["vertical",""],["min","150px",4,"ngIf"],["min","150px"],["appearance","outlined","class","staged",4,"ngIf"],["appearance","outlined",1,"commit"],[1,"description"],["matInput","","cdkTextareaAutosize","",3,"placeholder","formControl"],[1,"button-container",3,"matTooltip"],["mat-flat-button","","color","primary",1,"commit-btn",3,"click","disabled"],["diameter","24",4,"ngIf"],[4,"ngIf"],["appearance","outlined",1,"unstaged"],[1,"header-buttons"],["type","button","mat-icon-button","",1,"checkbox-button","app-icon-button-md",3,"click","matTooltip"],[1,"buttons"],["type","button","mat-stroked-button","","class","stage-button",3,"matTooltip","click",4,"ngIf"],["class","conflicts-wrapper",3,"matTooltip",4,"ngIf"],["type","button","mat-stroked-button","","color","warn",1,"discard-button",3,"click","matTooltip"],[3,"svgIcon"],[3,"checkedChanged","selectedChanged","contextMenuOpened","patches","checked","selected"],["type","button","mat-stroked-button","",1,"stage-button",3,"click","matTooltip"],[1,"conflicts-wrapper",3,"matTooltip"],["type","button","mat-stroked-button","","disabled","",1,"stage-button","has-conflicts"],["appearance","outlined",1,"staged"],["type","button","mat-stroked-button","",1,"unstage-button",3,"click","matTooltip"],["diameter","24"],[1,"menu-panel"],[1,"menu-header",3,"matTooltip"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item","matTooltip","Show file history",3,"click",4,"ngIf"],["type","button","matTooltip","Show file history",1,"menu-item",3,"click"]],template:function(t,n){if(t&1){let o=y();c(0,"app-grid",1),v(1,Wn,23,31,"app-grid-cell",2),s(2,"async"),s(3,"nullEmpty"),c(4,"app-grid-cell",3),v(5,Hn,18,25,"mat-card",4),s(6,"async"),p()(),c(7,"mat-card",5)(8,"mat-form-field",6)(9,"mat-label"),h(10),s(11,"translate"),p(),k(12,"textarea",7),s(13,"translate"),p(),c(14,"div",8),s(15,"async"),c(16,"button",9),s(17,"async"),C("click",function(){return g(o),u(n.commitChanges())}),v(18,Yn,1,0,"mat-spinner",10),s(19,"async"),v(20,Kn,3,3,"span",11),s(21,"async"),p()()(),v(22,Gn,10,6,"ng-template",null,0,le)}t&2&&(a(),m("ngIf",r(3,12,r(2,10,n.unstagedChanges))),a(4),m("ngIf",r(6,14,n.stagedChanges)),a(5),O(r(11,16,"Commit Message")),a(2),m("placeholder",mt(r(13,18,"Enter a description...")))("formControl",n.commitMessageControl),a(2),m("matTooltip",r(15,20,n.commitButtonTooltip)||""),a(2),m("disabled",r(17,22,n.commitButtonDisabled)),a(2),m("ngIf",r(19,24,n.commitButtonLoading)),a(2),m("ngIf",r(21,26,n.commitButtonLoading)===!1))},dependencies:[Ce,Yt,Wt,Ut,Ht,sn,W,Mt,yt,wt,Lt,Bt,fe,_e,Pe,be,xe,H,Gt,Oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:stretch;height:100%;gap:10px}.staged[_ngcontent-%COMP%]{margin:5px 10px 0;height:calc(100% - 5px)}.unstaged[_ngcontent-%COMP%]{margin:0 10px 5px;height:calc(100% - 5px)}app-grid-cell[_ngcontent-%COMP%]:first-child   .staged[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;height:100%}.staged[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]{padding:16px;white-space:nowrap;overflow:auto;display:flex;flex-direction:column;gap:10px}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]{flex:0 0 auto;position:relative}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:space-between;min-height:40px;margin-left:32px}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%]{flex:1 1 calc(50% - 16px)}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%] + button[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .conflicts-wrapper[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{flex:1 1 calc(50% - 16px)}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 auto}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%]{cursor:default}.staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]{position:absolute;top:0;left:-12px}.commit[_ngcontent-%COMP%]{flex:0 0 auto;margin:0 10px;padding:16px;overflow:auto;display:flex;flex-direction:column;min-height:158px;max-height:33%}.commit[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{width:100%}.commit[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:34px}.commit[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex:0 0 auto}.commit[_ngcontent-%COMP%]   .commit-btn[_ngcontent-%COMP%]{width:100%}.dark-theme[_nghost-%COMP%]   .staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%]{color:#cb8837}.light-theme[_nghost-%COMP%]   .staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .staged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .unstaged[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button.has-conflicts[_ngcontent-%COMP%]{color:#d8a669}"],changeDetection:0})}}return x([w(P.selectedRepositoryPath)],i.prototype,"repositoryPath",void 0),x([w(P.selectedStagedChanges)],i.prototype,"allStagedChanges",void 0),x([w(P.selectedUnstagedChanges)],i.prototype,"unstagedChanges",void 0),x([w(P.selectedFileForArea("staged"))],i.prototype,"selectedStagedFile",void 0),x([w(P.selectedFileForArea("unstaged"))],i.prototype,"selectedUnstagedFile",void 0),x([w(P.selectedRepositoryCommitMessage)],i.prototype,"selectedRepositoryCommitMessage",void 0),x([w(ue.selectedProfile)],i.prototype,"selectedProfile",void 0),x([w(ue.profiles)],i.prototype,"profiles",void 0),i})();var _o=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=oe({type:i})}static{this.\u0275inj=ne({imports:[Nt,an,Kt,rn,Qt,ln,pn]})}}return i})();dt(dn,[W,_n,gn],[H]);var Zn=["panel"],$n=["*"];function Jn(i,_){if(i&1&&(ot(0,"div",1,0),ct(2),at()),i&2){let e=_.id,t=d();lt(t._classList),re("mat-mdc-autocomplete-visible",t.showPanel)("mat-mdc-autocomplete-hidden",!t.showPanel)("mat-autocomplete-panel-animations-enabled",!t._animationsDisabled)("mat-primary",t._color==="primary")("mat-accent",t._color==="accent")("mat-warn",t._color==="warn"),st("id",t.id),Fe("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby(e))}}var We=class{source;option;constructor(_,e){this.source=_,this.option=e}},fn=new Ie("mat-autocomplete-default-options",{providedIn:"root",factory:ei});function ei(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1,hasBackdrop:!1}}var Ho=(()=>{class i{_changeDetectorRef=f(Ve);_elementRef=f(Ee);_defaults=f(fn);_animationsDisabled=Le();_activeOptionChanges=J.EMPTY;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new S;opened=new S;closed=new S;optionActivated=new S;set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}id=f(vt).getId("mat-autocomplete-");inertGroups;constructor(){let e=f(ut);this.inertGroups=e?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new Ot(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options?.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let t=new We(this,e);this.optionSelected.emit(t)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_skipPredicate(){return!1}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["mat-autocomplete"]],contentQueries:function(t,n,o){if(t&1&&(Re(o,Jt,5),Re(o,Zt,5)),t&2){let l;D(l=V())&&(n.options=l),D(l=V())&&(n.optionGroups=l)}},viewQuery:function(t,n){if(t&1&&(Q($e,7),Q(Zn,5)),t&2){let o;D(o=V())&&(n.template=o.first),D(o=V())&&(n.panel=o.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",L],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",L],requireSelection:[2,"requireSelection","requireSelection",L],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",L],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",L]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[De([{provide:Xt,useExisting:i}])],ngContentSelectors:$n,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(t,n){t&1&&(rt(),tt(0,Jn,3,17,"ng-template"))},styles:[`div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:relative;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}@keyframes _mat-autocomplete-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}.mat-autocomplete-panel-animations-enabled{animation:_mat-autocomplete-enter 120ms cubic-bezier(0, 0, 0.2, 1)}mat-autocomplete{display:none}
`],encapsulation:2,changeDetection:0})}return i})();var ti={provide:bt,useExisting:qe(()=>oi),multi:!0};var vn=new Ie("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let i=f(ie);return()=>Ue(i)}});function ni(i){let _=f(ie);return()=>Ue(_)}var ii={provide:vn,deps:[],useFactory:ni},oi=(()=>{class i{_environmentInjector=f(Qe);_element=f(Ee);_injector=f(ie);_viewContainerRef=f(U);_zone=f(nt);_changeDetectorRef=f(Ve);_dir=f(Pt,{optional:!0});_formField=f(jt,{optional:!0,host:!0});_viewportRuler=f(kt);_scrollStrategy=f(vn);_renderer=f(Je);_animationsDisabled=Le();_defaults=f(fn,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new ke;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=J.EMPTY;_breakpointObserver=f(ft);_handsetLandscapeSubscription=J.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new ke;_overlayPanelClass=Ct(this._defaults?.overlayPanelClass||[]);_windowBlurHandler=()=>{this._canOpenOnNextFocus=this.panelOpen||!this._hasFocus()};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&de(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return R(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Ae(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Ae(()=>this._overlayAttached)):Te()).pipe(F(e=>e instanceof $t?e:null))}optionSelections=He(()=>{let e=this.autocomplete?this.autocomplete.options:null;return e?e.changes.pipe(q(e),te(()=>R(...e.map(t=>t.onSelectionChange)))):this._initialized.pipe(te(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new Se(e=>{let t=o=>{let l=gt(o),b=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,T=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&l!==this._element.nativeElement&&!this._hasFocus()&&(!b||!b.contains(l))&&(!T||!T.contains(l))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(l)&&e.next(o)},n=[this._renderer.listen("document","click",t),this._renderer.listen("document","auxclick",t),this._renderer.listen("document","touchend",t)];return()=>{n.forEach(o=>o())}})}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let t=e,n=t.keyCode,o=me(t);if(n===27&&!o&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&n===13&&this.panelOpen&&!o)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){let l=this.autocomplete._keyManager.activeItem,b=n===38||n===40;n===9||b&&!o&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):b&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(b||this.autocomplete._keyManager.activeItem!==l)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let t=e.target,n=t.value;if(t.type==="number"&&(n=n==""?null:parseFloat(n)),this._previousValue!==n){if(this._previousValue=n,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(n),!n)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let o=this.autocomplete.options?.find(l=>l.selected);if(o){let l=this._getDisplayValue(o.value);n!==l&&o.deselect(!1)}}if(this._canOpen()&&this._hasFocus()){let o=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(o)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_hasFocus(){return _t()===this._element.nativeElement}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new Se(n=>{it(()=>{n.next()},{injector:this._environmentInjector})}),t=this.autocomplete.options?.changes.pipe(Ge(()=>this._positionStrategy.reapplyLastPosition()),Ke(0))??Te();return R(e,t).pipe(te(()=>this._zone.run(()=>{let n=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),n!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),I(1)).subscribe(n=>this._setValueAndClose(n))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let t=this.autocomplete;return t&&t.displayWith?t.displayWith(e):e}_assignOptionValue(e){let t=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(t??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let t=this.autocomplete,n=e?e.source:this._pendingAutoselectedOption;n?(this._clearPreviousSelectedOption(n),this._assignOptionValue(n.value),this._onChange(n.value),t._emitSelectEvent(n),this._element.nativeElement.focus()):t.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,t){this.autocomplete?.options?.forEach(n=>{n!==e&&n.selected&&n.deselect(t)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let t=this.autocomplete.id;Be(this._trackedModal,"aria-owns",t)}}_attachOverlay(e){this.autocomplete;let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new Y(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=Ft(this._injector,this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(St.HandsetLandscape).subscribe(o=>{o.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let n=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&n!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=e=>{(e.keyCode===27&&!me(e)||e.keyCode===38&&me(e,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),e.stopPropagation(),e.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new It({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,hasBackdrop:this._defaults?.hasBackdrop,backdropClass:this._defaults?.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this._overlayPanelClass,disableAnimations:this._animationsDisabled})}_getOverlayPosition(){let e=Et(this._injector,this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],n=this._aboveClass,o=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:n},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:n}],l;this.position==="above"?l=o:this.position==="below"?l=t:l=[...t,...o],e.withPositions(l)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let t=-1;for(let n=0;n<e.options.length;n++)if(!e.options.get(n).disabled){t=n;break}e._keyManager.setActiveItem(t)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_scrollToOption(e){let t=this.autocomplete,n=en(e,t.options,t.optionGroups);if(e===0&&n===1)t._setScrollTop(0);else if(t.panel){let o=t.options.toArray()[e];if(o){let l=o._getHostElement(),b=tn(l.offsetTop,l.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(b)}}}_trackedModal=null;_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=this.autocomplete.id;this._trackedModal&&de(this._trackedModal,"aria-owns",t),Be(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;de(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static \u0275fac=function(t){return new(t||i)};static \u0275dir=et({type:i,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(t,n){t&1&&C("focusin",function(){return n._handleFocus()})("blur",function(){return n._onTouched()})("input",function(l){return n._handleInput(l)})("keydown",function(l){return n._handleKeydown(l)})("click",function(){return n._handleClick()}),t&2&&Fe("autocomplete",n.autocompleteAttribute)("role",n.autocompleteDisabled?null:"combobox")("aria-autocomplete",n.autocompleteDisabled?null:"list")("aria-activedescendant",n.panelOpen&&n.activeOption?n.activeOption.id:null)("aria-expanded",n.autocompleteDisabled?null:n.panelOpen.toString())("aria-controls",n.autocompleteDisabled||!n.panelOpen||n.autocomplete==null?null:n.autocomplete.id)("aria-haspopup",n.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",L]},exportAs:["matAutocompleteTrigger"],features:[De([ti]),Xe]})}return i})(),Yo=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=oe({type:i});static \u0275inj=ne({providers:[ii],imports:[Rt,je,Ne,At,je,Ne]})}return i})();export{Ho as a,oi as b,Yo as c,dn as d,_o as e};
