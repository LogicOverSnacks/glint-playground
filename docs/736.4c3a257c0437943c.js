"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[736],{8831:(V,w,n)=>{n.d(w,{S:()=>e});var d=n(4650);const e=D=>{class E extends D{constructor(){super(...arguments),this.disableTransitions=!0}ngOnInit(){super.ngOnInit&&super.ngOnInit(),setTimeout(()=>{this.disableTransitions=!1},0)}static{this.\u0275fac=function(){let g;return function(I){return(g||(g=d.n5z(E)))(I||E)}}()}static{this.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac})}}return E}},8070:(V,w,n)=>{n.d(w,{r:()=>e});var d=n(4650);class e{transform(E,y,g=E+"s"){return 1===y?E:g}static{this.\u0275fac=function(y){return new(y||e)}}static{this.\u0275pipe=d.Yjl({name:"plural",type:e,pure:!0})}}},3448:(V,w,n)=>{n.d(w,{I:()=>e});var d=n(4650);class e{constructor(E){this.template=E}static{this.\u0275fac=function(y){return new(y||e)(d.Y36(d.Rgc))}}static{this.\u0275dir=d.lG2({type:e,selectors:[["","appVirtualTreeLeafNode",""]]})}}},1123:(V,w,n)=>{n.d(w,{J:()=>e});var d=n(4650);class e{constructor(E){this.template=E}static{this.\u0275fac=function(y){return new(y||e)(d.Y36(d.Rgc))}}static{this.\u0275dir=d.lG2({type:e,selectors:[["","appVirtualTreeNode",""]]})}}},6725:(V,w,n)=>{n.d(w,{L:()=>L});var d=n(7340),e=n(4883),D=n(4004),E=n(8926),y=n(9967),g=n(8831),T=n(2771),I=n(3448),W=n(1123),M=n(4650),B=n(6895);function c(P,v){1&P&&M.GkF(0)}const $=function(P){return{$implicit:P}};function Z(P,v){if(1&P&&(M.TgZ(0,"li"),M.YNc(1,c,1,0,"ng-container",2),M.qZA()),2&P){const u=v.$implicit,f=M.oxw();M.Udp("padding-left",10*u.depth,"px"),M.xp6(1),M.Q6J("ngTemplateOutlet",f.isLeaf(u)?f.leafNodeDirective.template:f.nodeDirective.template)("ngTemplateOutletContext",M.VKq(4,$,u))}}class L extends((0,E.j)(y.A,g.S,T.P)){constructor(){super(...arguments),this.isLeaf=v=>!v.children,this.expandVisibleNodes=v=>this.isLeaf(v)||!v.expanded?[v]:[v,...v.children.flatMap(this.expandVisibleNodes)]}ngOnInit(){super.ngOnInit(),this.visibleNodes=this.tree.pipe((0,D.U)(v=>v.reduce((u,f)=>[...u,...this.expandVisibleNodes(f)],[])))}trackById(v,u){return u.id}static{this.\u0275fac=function(){let v;return function(f){return(v||(v=M.n5z(L)))(f||L)}}()}static{this.\u0275cmp=M.Xpm({type:L,selectors:[["app-virtual-tree"]],contentQueries:function(u,f,b){if(1&u&&(M.Suo(b,W.J,5),M.Suo(b,I.I,5)),2&u){let R;M.iGM(R=M.CRH())&&(f.nodeDirective=R.first),M.iGM(R=M.CRH())&&(f.leafNodeDirective=R.first)}},viewQuery:function(u,f){if(1&u&&M.Gf(e.N7,5),2&u){let b;M.iGM(b=M.CRH())&&(f.viewports=b)}},inputs:{tree:"tree",itemSize:"itemSize"},features:[M.qOj],decls:5,vars:9,consts:[[3,"itemSize"],[3,"padding-left",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(u,f){1&u&&(M.TgZ(0,"cdk-virtual-scroll-viewport",0)(1,"ul"),M.ALo(2,"async"),M.YNc(3,Z,2,6,"li",1),M.ALo(4,"async"),M.qZA()()),2&u&&(M.Q6J("itemSize",f.itemSize)("@null",void 0),M.xp6(1),M.Q6J("@slide",M.lcZ(2,5,f.visibleNodes)),M.xp6(2),M.Q6J("cdkVirtualForOf",M.lcZ(4,7,f.visibleNodes))("cdkVirtualForTrackBy",f.trackById))},dependencies:[e.xd,e.x0,e.N7,B.tP,B.Ov],styles:["cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{transition:height 225ms ease-in-out}li[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}"],data:{animation:[(0,d.X$)("null",[(0,d.eR)(":enter",[]),(0,d.eR)(":leave",[])]),(0,d.X$)("slide",[(0,d.eR)("* => *",[(0,d.ru)([(0,d.IO)("li:enter",[(0,d.oB)({height:0}),(0,d.jt)("225ms ease-in-out",(0,d.oB)({height:"*"}))],{optional:!0}),(0,d.IO)("li:leave",[(0,d.oB)({height:"*"}),(0,d.jt)("225ms ease-in-out",(0,d.oB)({height:0}))],{optional:!0})])])])]},changeDetection:0})}}},9418:(V,w,n)=>{n.d(w,{c:()=>D});var d=n(3179),e=n(4650);class D{static{this.\u0275fac=function(g){return new(g||D)}}static{this.\u0275mod=e.oAB({type:D})}static{this.\u0275inj=e.cJS({imports:[d.I]})}}},7615:(V,w,n)=>{n.d(w,{d:()=>E});var d=n(6421),e=n(9418),D=n(4650);class E{getPatchPath(g){switch(g.status){case d.v.Added:case d.v.Untracked:return g.newFilePath;case d.v.Conflicted:case d.v.Modified:case d.v.Renamed:return g.oldFilePath===g.newFilePath?g.newFilePath:`${g.oldFilePath} --\x3e ${g.newFilePath}`;case d.v.Deleted:return g.oldFilePath;default:throw new Error(`Don't know how to deal with patch status: ${d.v[g.status]}`)}}getPatchIcon(g){switch(g.status){case d.v.Added:case d.v.Untracked:return"add";case d.v.Conflicted:return"warning";case d.v.Modified:return"create";case d.v.Deleted:return"remove";case d.v.Renamed:return"swap_horiz";default:throw new Error(`Don't know how to deal with patch status: ${d.v[g.status]}`)}}getPatchIconColorClass(g){switch(g.status){case d.v.Added:case d.v.Untracked:return"green";case d.v.Conflicted:case d.v.Modified:return"orange";case d.v.Deleted:return"red";case d.v.Renamed:return"blue";default:throw new Error(`Don't know how to deal with patch status: ${d.v[g.status]}`)}}static{this.\u0275fac=function(T){return new(T||E)}}static{this.\u0275prov=D.Yz7({token:E,factory:E.\u0275fac,providedIn:e.c})}}},1815:(V,w,n)=>{n.d(w,{E:()=>F});var d=n(4080),e=n(1135),D=n(5698),E=n(2722),y=n(4004),g=n(8926),T=n(9967),I=n(4462),W=n(8310),M=n(2120),B=n(6966),c=n(4650),$=n(8184),Z=n(9867),L=n(6271),P=n(3394),v=n(6895),u=n(4859),f=n(7392),b=n(266),R=n(5773);function q(a,C){if(1&a){const _=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(_);const x=c.oxw(2);return c.KtG(x.openWithTerminal())}),c.TgZ(1,"mat-icon"),c._uU(2,"terminal"),c.qZA(),c._uU(3," Terminal "),c.qZA()}}function z(a,C){if(1&a){const _=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(_);const x=c.oxw(2);return c.KtG(x.openWithVsCode())}),c._UZ(1,"mat-icon",9),c._uU(2," Visual Studio Code "),c.qZA()}}function ee(a,C){if(1&a){const _=c.EpF();c.TgZ(0,"button",10),c.NdJ("click",function(){const l=c.CHM(_).$implicit,m=c.oxw(2);return c.KtG(m.openRemote(l.url))}),c._UZ(1,"mat-icon",11),c._uU(2),c.qZA()}if(2&a){const _=C.$implicit;c.Q6J("matTooltip",_.url),c.xp6(1),c.s9C("svgIcon",_.type),c.xp6(1),c.AsE(" ","bitbucket"===_.type?"Bitbucket":"github"===_.type?"GitHub":"gitlab"===_.type?"GitLab":"",": ",_.name," ")}}function j(a,C){if(1&a){const _=c.EpF();c.TgZ(0,"div",4)(1,"div",5),c._uU(2,"Open with..."),c.qZA(),c.TgZ(3,"button",6),c.NdJ("click",function(){c.CHM(_);const x=c.oxw();return c.KtG(x.openWithFileExplorer())}),c.TgZ(4,"mat-icon"),c._uU(5,"folder"),c.qZA(),c._uU(6),c.qZA(),c.YNc(7,q,4,0,"button",7),c.ALo(8,"async"),c.YNc(9,z,3,0,"button",7),c.ALo(10,"async"),c.YNc(11,ee,3,4,"button",8),c.ALo(12,"async"),c.qZA()}if(2&a){const _=c.oxw();c.xp6(6),c.hij(" ",_.folderText," "),c.xp6(1),c.Q6J("ngIf",c.lcZ(8,4,_.hasTerminal)),c.xp6(2),c.Q6J("ngIf",c.lcZ(10,6,_.hasVsCode)),c.xp6(2),c.Q6J("ngForOf",c.lcZ(12,8,_.remotes))}}class F extends((0,g.j)(T.A)){constructor(C,_,p,x,l){super(),this.overlay=C,this.viewContainerRef=_,this.store=p,this.filesApi=x,this.providerUrlMatcherService=l,this.menuOverlayRef=new e.X(null),this.folderText=I.V?"Finder":I.E?"File Explorer":"File Manager",this.openMenu=(m,O,A)=>{m.preventDefault(),m.stopPropagation(),this.closeMenu();const U=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(O).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(U),U.attach(new d.UE(A,this.viewContainerRef)),(0,W.t)(U,!1).pipe((0,D.q)(1),(0,E.R)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))},this.openWithFileExplorer=()=>{const m=this.store.selectSnapshot(B.E.selectedRepositoryPath);if(!m)throw new Error("Cannot open repository in file explorer if repository has no path.");this.filesApi.openFileWithShell(m).subscribe(),this.closeMenu()},this.openWithTerminal=()=>{const m=this.store.selectSnapshot(B.E.selectedRepositoryPath);if(!m)throw new Error("Cannot open repository in terminal if repository has no path.");this.filesApi.openTerminal(m).subscribe(),this.closeMenu()},this.openWithVsCode=()=>{const m=this.store.selectSnapshot(B.E.selectedRepositoryPath);if(!m)throw new Error("Cannot open repository in vscode if repository has no path.");this.filesApi.openVsCode(m).subscribe(),this.closeMenu()},this.openRemote=m=>{window.open(m),this.closeMenu()}}ngOnInit(){this.remotes=this.store.select(B.E.selectedRemotes).pipe((0,y.U)(C=>(C??[]).map(_=>{const p=this.providerUrlMatcherService.matchProvider(_.url);return p?[_,p]:null}).filter(M.$K).map(([_,p])=>({type:p.type,url:this.providerUrlMatcherService.getUrl(p),name:_.name})))),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}static{this.\u0275fac=function(_){return new(_||F)(c.Y36($.aV),c.Y36(c.s_b),c.Y36(Z.yh),c.Y36(L.k),c.Y36(P.d))}}static{this.\u0275cmp=c.Xpm({type:F,selectors:[["app-repository-actions-open-with"]],features:[c.qOj],decls:6,vars:0,consts:[["type","button","mat-stroked-button","","matTooltip","Open repository with...","appElementRef","",1,"item",3,"click"],["openWithMenuBtn","appElementRef"],[1,"launch-icon"],["openWithMenu",""],[1,"menu-panel"],[1,"menu-header"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"matTooltip","click"],[3,"svgIcon"]],template:function(_,p){if(1&_){const x=c.EpF();c.TgZ(0,"button",0,1),c.NdJ("click",function(m){c.CHM(x);const O=c.MAs(1),A=c.MAs(5);return c.KtG(p.openMenu(m,O,A))}),c.TgZ(2,"mat-icon",2),c._uU(3,"launch"),c.qZA()(),c.YNc(4,j,13,10,"ng-template",null,3,c.W1O)}},dependencies:[v.sg,v.O5,u.lW,f.Hw,b.gM,R.F,v.Ov],styles:[".item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0})}}},98:(V,w,n)=>{n.d(w,{z:()=>Z});var d=n(2843),e=n(4004),D=n(262),E=n(2435),y=n(2120),g=n(8523),T=n(4889),I=n(1129),W=n(8724),M=n(9077),B=n(4650),c=n(9867),$=n(790);class Z{constructor(P,v){this.store=P,this.commitsApi=v,this.startEdit=(u,f)=>this.store.dispatch(new I.z0(u,{name:"Edit commits",detail:`from ${f}`,do:()=>this.store.dispatch(new I.LF(u,f))})),this.discardEdit=u=>this.store.dispatch(new I.z0(u,{name:"Discard commit edits",do:()=>this.commitsApi.discardCommitEditing(u)})),this.saveEdits=u=>this.store.dispatch(new I.z0(u,{name:"Save commit edits",do:()=>this.commitsApi.completeCommitEditing(u).pipe((0,g.C)(()=>this.store.dispatch(new T.Vu(u,[T.nh.commits,T.nh.currentBranchCommitId,T.nh.headCommitId,T.nh.mergeHeads,T.nh.merges,T.nh.references,T.nh.stagedChanges,T.nh.submodules,T.nh.unstagedChanges]))))})),this.editCommitDetails=(u,f,b)=>this.store.dispatch(new I.z0(u,{name:"Edit commit",detail:b,do:()=>this.commitsApi.editCommitDetails(u,f,b,this.getCommitter())})).pipe((0,e.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(u))?.state)),this.squashCommit=(u,f,b)=>this.store.dispatch(new I.z0(u,{name:"Squash commit",detail:`${f} ${b}`,do:()=>this.commitsApi.squashCommit(u,f,b,this.getCommitter()).pipe((0,D.K)(R=>E.BO.matches(R)?(0,d._)(()=>new y.ZR(R.message)):(0,d._)(()=>R)))})).pipe((0,e.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(u))?.state)),this.insertCommit=(u,f,b)=>this.store.dispatch(new I.z0(u,{name:"Insert commit",detail:`${f} ${b}`,do:()=>this.commitsApi.insertCommit(u,f,b,this.getCommitter()).pipe((0,D.K)(R=>E.BO.matches(R)?(0,d._)(()=>new y.ZR(R.message)):(0,d._)(()=>R)))})).pipe((0,e.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(u))?.state)),this.moveCommitChanges=(u,f,b,R)=>this.store.dispatch(new I.z0(u,{name:"Move commit changes",detail:`${f} ${b}`,do:()=>this.commitsApi.moveCommitChanges(u,f,b,R,this.getCommitter())})).pipe((0,e.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(u))?.state))}getCommitter(){const P=this.store.selectSnapshot(M.$.selectedProfile);return P&&P.name&&P.email?{name:P.name,email:P.email}:null}static{this.\u0275fac=function(v){return new(v||Z)(B.LFG(c.yh),B.LFG($.T))}}static{this.\u0275prov=B.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"})}}},4874:(V,w,n)=>{n.d(w,{p:()=>D});var d=n(2686),e=n(4650);class D{constructor(){this.parseReference=y=>{const g=D.referenceRegex.exec(y);if(!g)throw new Error(`Reference invalid: ${y}`);if("remotes"===g[1]){const T=D.remoteBranchRegex.exec(y);if(!T)throw new Error(`Remote reference invalid: ${y}`);return{branch:T[2],sourceName:T[1],sourceType:"remote"}}return"stash"===g[1]?{branch:"stash",sourceName:"stash",sourceType:"stash"}:{branch:g[2],sourceName:"heads"===g[1]?"local":"tag",sourceType:"heads"===g[1]?"local":"tag"}},this.getBranchTypeIcon=y=>{switch(y){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"archive";case"tag":return"label";default:throw new Error(`Unknown reference type: ${y}`)}}}static{this.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/}static{this.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/}calculateBranches(y,g){const T=(0,d.Z)(y.map(this.parseReference),({branch:I})=>I);return Object.entries(T).map(([I,W])=>({name:I,sources:W.map(M=>({name:M.sourceName,type:M.sourceType,icon:this.getBranchTypeIcon(M.sourceType)}))})).sort((I,W)=>{const M=I.sources.some(P=>"local"===P.type&&`refs/heads/${I.name}`===g),B=I.sources.some(P=>"local"===P.type&&`refs/heads/${W.name}`===g);if(M&&!B)return-1;if(!M&&B)return 1;const c=I.sources.some(P=>"local"===P.type),$=W.sources.some(P=>"local"===P.type);if(c&&!$)return-1;if(!c&&$)return 1;const Z=I.sources.some(P=>"remote"===P.type),L=W.sources.some(P=>"remote"===P.type);return Z&&!L?-1:!Z&&L?1:I.sources.length>W.sources.length?-1:I.sources.length<W.sources.length?1:I.name>W.name?-1:I.name<W.name?1:0}).slice(0,30)}static{this.\u0275fac=function(g){return new(g||D)}}static{this.\u0275prov=e.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}}},3989:(V,w,n)=>{n.d(w,{$:()=>j});var d=n(1134),e=n(539);const E=function D(F,a){return F<a},g=function y(F,a){return F&&F.length?(0,d.Z)(F,(0,e.Z)(a,2),E):void 0};var T=n(2382);var M=n(1256),B=n(3713),c=n(7711),$=n(9512),Z=n(7988),L=n(6932),P=n(3228);var b=n(7965),R=n(7118);const z=(0,b.Z)(function(F,a){return(0,R.Z)(F)?function u(F,a,C,_){var p=-1,x=c.Z,l=!0,m=F.length,O=[],A=a.length;if(!m)return O;C&&(a=(0,Z.Z)(a,(0,L.Z)(C))),_?(x=$.Z,l=!1):a.length>=200&&(x=P.Z,l=!1,a=new B.Z(a));e:for(;++p<m;){var U=F[p],K=null==C?U:C(U);if(U=_||0!==U?U:0,l&&K==K){for(var S=A;S--;)if(a[S]===K)continue e;O.push(U)}else x(a,K,_)||O.push(U)}return O}(F,a):[]});var ee=n(4650);class j{constructor(){this.isDashed=a=>"head"===a.id||a.id.startsWith("merge:")}static{this.xUnit=15}static{this.yUnit=28}static{this.xOffset=7.5}static{this.yOffset=13}isIndexInBounds(a,C,_){const p=a*j.yUnit;return p>=C&&p<_-j.yUnit}calculateVisible(a,C,_,p,x){return{commitDetails:a.slice(p,x),commitTrails:C.filter(l=>l.minYIndexWithMerges<=x&&l.maxYIndexWithMerges>=p),mergePaths:_.filter(l=>l.from.yIndex>=p&&l.to.some(m=>m.yIndex<=x))}}calculate(a,C,_,p,x,l,m){const O={};let A=[],U=[],K=[];const S=(a?1:0)+C.length;p.forEach((o,t)=>{O[o.id]={id:o.id,yIndex:t+S,commit:o}});const Y=[];C.forEach((o,t)=>{const s=`merge:${o.fromCommitId}:${o.toCommitId}`,i={id:s,message:o.message??`merge: from '${o.fromCommitId}' into '${o.toCommitId}'`,parentIds:[o.toCommitId,o.fromCommitId],time:0,references:[],authorEmail:"",authorName:""};Y.push(i),O[s]={id:s,yIndex:t+(a?1:0),commit:i}}),_.forEach(o=>{const t=O[o.id];!t||2!==t.commit.parentIds.length||(t.stash={index:o.index,workingDirCommitId:o.id,indexCommitId:t.commit.parentIds[1]})});const Q=a?{id:"head",message:"",parentIds:a.parentId?[a.parentId,...a.mergeHeads]:[...a.mergeHeads],time:0,references:[],authorEmail:"",authorName:""}:null;a&&(O.head={id:"head",yIndex:0,commit:Q});const h=Q?[Q,...Y,...p]:[...Y,...p];if(h.forEach(o=>{const t=O[o.id];t.trail||this.calculateTrail(t,O,A,U),!t.stash&&o.parentIds.length>1&&o.parentIds.slice(1).forEach(s=>{const i=O[s];if(i)if(i.mergeFrom)i.mergeFrom.to.push(t);else{const r={from:i,to:[t]};i.mergeFrom=r,K.push(r)}})}),({mergePaths:K,lanes:U}=this.calculateMergePaths(K,U,x,l)),this.calculateColors(A,m),a&&a.parentId&&O[a.parentId]){const o=A.find(t=>0===t.minYIndex);if(o){o.commits=o.commits.filter(s=>"head"!==s.id);const t=g(o.commits,s=>s.yIndex);o.minYIndex=t?.yIndex??0,o.minYIndexWithMerges=t?.yIndex??0,this.createUncommittedTrail(O.head,O[a.parentId],A,o.colorIndex,o.lane)}}return Y.forEach((o,t)=>{const s=A.find(i=>i.minYIndex===t+(a?1:0));if(s&&O[o.parentIds[0]]){if(s.commits=s.commits.filter(i=>i.id!==o.id),s.commits.length<=0)A=A.filter(i=>i!==s);else{const i=g(s.commits.filter(r=>"head"!==r.id&&!r.id.startsWith("merge:")),r=>r.yIndex);s.minYIndex=i?.yIndex??0,s.minYIndexWithMerges=i?.yIndex??0}this.createUncommittedTrail(O[o.id],O[o.parentIds[0]],A,s.colorIndex,s.lane)}}),_.forEach(o=>{const t=O[o.id];if(!t)return;const i=t.trail,r=O[t.commit.parentIds[0]];if(r){if(i.commits=i.commits.filter(k=>k.id!==o.id),i.commits.length<=0)A=A.filter(k=>k!==i);else{const k=g(i.commits,N=>N.yIndex);i.minYIndex=k?.yIndex??0,i.minYIndexWithMerges=k?.yIndex??0}this.createUncommittedTrail(t,r,A,i.colorIndex,i.lane)}}),{commitDetails:O,commitTrails:A,lanes:U,mergePaths:K,headCommit:Q,orderedCommits:h}}createUncommittedTrail(a,C,_,p,x){let l=C.yIndex;C.mergeFrom&&C.mergeFrom.to.length>0&&C.mergeFrom.to.some(O=>!this.isDashed(O))&&(l=Math.min(...C.mergeFrom.to.filter(O=>!this.isDashed(O)).map(({yIndex:O})=>O))+.25,l<a.yIndex&&(l=a.yIndex+.5),_.push({trailIndex:_.length,minYIndex:l,maxYIndex:C.yIndex,minYIndexWithMerges:l,maxYIndexWithMerges:C.yIndex,colorIndex:p,commits:[],isDashed:!1,lane:x}));const m={trailIndex:_.length,minYIndex:a.yIndex,maxYIndex:l,minYIndexWithMerges:a.yIndex,maxYIndexWithMerges:l,colorIndex:p,commits:[a],isDashed:!0,lane:x};return a.trail=m,_.push(m),m}calculateTrail(a,C,_,p){const x={trailIndex:_.length,minYIndex:a.yIndex,maxYIndex:a.yIndex,minYIndexWithMerges:a.yIndex,maxYIndexWithMerges:a.yIndex,colorIndex:null,commits:[],isDashed:!1};if(a.commit.parentIds.length<=0)a.trail=x,x.commits.push(a),x.maxYIndex=a.yIndex,x.maxYIndexWithMerges=a.yIndex;else{let m=a;for(;m&&!m.trail&&m.commit.parentIds.length>0;)m.trail=x,x.maxYIndex=m.yIndex,x.maxYIndexWithMerges=m.yIndex,x.commits.push(m),m=C[m.commit.parentIds[0]];m&&(x.maxYIndex=m.yIndex,x.maxYIndexWithMerges=m.yIndex,m.trail||(m.trail=x,x.commits.push(m)))}let l=p.find(m=>this.getLaneMaxYIndex(m)<x.minYIndex);return l||(l={xIndex:p.length,occupations:[]},p.push(l)),l.occupations.push({type:"commit-trail",minYIndex:x.minYIndex,maxYIndex:x.maxYIndex}),x.lane=l,_.push(x),x}calculateMergePaths(a,C,_,p){C=C.map(l=>({...l,occupations:l.occupations.filter(m=>"merge-path"!==m.type)})).filter(l=>l.occupations.length>0);const x=[...a];return a.forEach(l=>{const m=[],O=[];let A;l.to.forEach(h=>{l.from.trail.minYIndexWithMerges>h.yIndex&&(l.from.trail.minYIndexWithMerges=h.yIndex),l.from.trail.maxYIndexWithMerges<h.yIndex&&(l.from.trail.maxYIndexWithMerges=h.yIndex),h.trail.minYIndexWithMerges>l.from.yIndex&&(h.trail.minYIndexWithMerges=l.from.yIndex),h.trail.maxYIndexWithMerges<l.from.yIndex&&(h.trail.maxYIndexWithMerges=l.from.yIndex)});const U=l.from.trail.lane.xIndex,K=_(U);let S=[],Y=l.to;const Q=l.to.every(this.isDashed);if(l.from.trail.minYIndex<l.from.yIndex){const h=l.from.trail.commits.findIndex(t=>t.id===l.from.id),o=l.from.trail.commits[h-1];S=l.to.filter(t=>t.yIndex>o.yIndex),Y=l.to.filter(t=>t.yIndex<=o.yIndex),A=o.yIndex}else{m.push(`M ${K} ${p(l.from.yIndex)}`),m.push(`V ${p(l.from.yIndex-.5)}`),A=l.from.yIndex-1;const h=function I(F,a){return F&&F.length?(0,d.Z)(F,(0,e.Z)(a,2),T.Z):void 0}(Y,o=>o.yIndex);if(h&&h.yIndex===l.from.yIndex-1){Y=Y.filter(t=>t.id!==h.id);const o=`L ${_(h.trail.lane.xIndex)} ${p(h.yIndex)}`;this.isDashed(h)?O.push(o):m.push(o)}}if(Y.length>0){const h=Math.min(...Y.map(r=>r.yIndex)),o=C.filter(r=>!this.isLaneOccupied(r,h+1,A)),t=g(o,r=>[...Y,l.from].reduce((k,N)=>k+Math.abs(N.trail.lane.xIndex-r.xIndex),0))??{xIndex:C.length,occupations:[]};0===o.length&&C.push(t),t.occupations.push({type:"merge-path",minYIndex:h+1,maxYIndex:A});const s=Y.filter(this.isDashed),i=Y.filter(r=>!this.isDashed(r));if(m.push(...i.flatMap(r=>[`M ${_(t.xIndex)} ${p(r.yIndex+.5)}`,`L ${this.adjustForDashedLine(!1,t.xIndex,r.trail.lane.xIndex,r.yIndex+.5,r.yIndex,_,p)}`])),O.push(...s.flatMap(r=>[`M ${_(t.xIndex)} ${p(r.yIndex+.5)}`,`L ${this.adjustForDashedLine(!0,t.xIndex,r.trail.lane.xIndex,r.yIndex+.5,r.yIndex,_,p)}`])),Q)m.push(`M ${K} ${p(A+.5)}`,`L ${_(t.xIndex)} ${p(A+.25)}`,`V ${p(h+.5)}`);else{const r=Math.min(...i.map(k=>k.yIndex));m.push(`M ${K} ${p(A+.5)}`,`L ${_(t.xIndex)} ${p(A+.25)}`,`V ${p(r+.5)}`),O.push(`M ${K} ${p(r+.5)}`,`V ${p(h+.5)}`)}}m.push(...S.filter(h=>!this.isDashed(h)).flatMap(h=>[`M ${K} ${p(h.yIndex+.25)}`,`L ${this.adjustForDashedLine(!1,U,h.trail.lane.xIndex,h.yIndex+.25,h.yIndex,_,p)}`])),O.push(...S.filter(this.isDashed).flatMap(h=>[`M ${K} ${p(h.yIndex+.25)}`,`L ${this.adjustForDashedLine(!0,U,h.trail.lane.xIndex,h.yIndex+.25,h.yIndex,_,p)}`])),Q?(l.isDashed=!0,l.path=[...m,...O].join(" ")):(l.isDashed=!1,l.path=m.join(" "),O.length>0&&x.push({from:l.from,isDashed:!0,path:O.join(" "),to:l.to.filter(this.isDashed)}))}),{mergePaths:x,lanes:C}}calculateColors(a,C){const _=(0,M.Z)(0,C),p=[];a.forEach(x=>{const l=p.filter(O=>O.minYIndexWithMerges<=x.maxYIndexWithMerges&&O.maxYIndexWithMerges>=x.minYIndexWithMerges).map(O=>O.colorIndex),m=z(_,...l);x.colorIndex=m.length>0?m[0]:x.trailIndex%C,p.push(x)})}getLaneMaxYIndex(a){return a.occupations[a.occupations.length-1].maxYIndex}isLaneOccupied(a,C,_){return a.occupations.some(p=>p.minYIndex<=_&&p.maxYIndex>=C)}adjustForDashedLine(a,C,_,p,x,l,m){const A=a?p>x?.15:-.15:0;return`${l(_+(a?C>_?.3:-.3:0))} ${m(x+A)}`}static{this.\u0275fac=function(C){return new(C||j)}}static{this.\u0275prov=ee.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"})}}},2960:(V,w,n)=>{n.d(w,{i:()=>Q});var d=n(655),e=n(4650),D=n(9867),E=n(1135),y=n(8926),g=n(9967),T=n(9077),I=n(9578),W=n(811),M=n(6895),B=n(7392),c=n(266),$=n(4883),Z=n(6377),L=n(6421),P=n(2771),v=n(4462),u=n(7615),f=n(6709),b=n(9131);function R(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"mat-checkbox",7),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().$implicit,k=e.oxw();return e.KtG(k.checkedChanged.next([r,i.checked]))}),e.qZA()}if(2&h){const t=e.oxw().$implicit,s=e.oxw();e.Q6J("checked",s.isChecked(t))}}function q(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"li",3),e.NdJ("contextmenu",function(i){const k=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.contextMenuOpened.next([k,i]))}),e.TgZ(1,"mat-icon",4),e._uU(2),e.qZA(),e.YNc(3,R,1,1,"mat-checkbox",5),e.TgZ(4,"app-condensed-path",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit,k=e.oxw();return e.KtG(k.selectedChanged.next(r))}),e.qZA()()}if(2&h){const t=o.$implicit,s=e.oxw();e.ekj("selected",s.isSelected(t))("checked",s.isChecked(t)),e.xp6(1),e.Q6J("ngClass",s.getPatchIconColorClass(t)),e.xp6(1),e.Oqu(s.getPatchIcon(t)),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("path",s.getPatchPath(t))}}class z extends((0,y.j)(g.A,P.P)){constructor(o){super(),this.commitDetailService=o,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.keyPressDisabled=!1}ngOnChanges(o){o.selected&&(this.keyPressDisabled=!1),o.patches&&(this.orderedPatches=(0,Z.Z)(this.patches,[t=>t.status===L.v.Conflicted,t=>(t.oldFilePath??t.newFilePath??"").toLowerCase()],["desc","asc"]))}trackByPatch(o,t){return`${t.oldFilePath}|${t.newFilePath}|${t.status}`}getPatchPath(o){return this.commitDetailService.getPatchPath(o)}getPatchIcon(o){return this.commitDetailService.getPatchIcon(o)}getPatchIconColorClass(o){return this.commitDetailService.getPatchIconColorClass(o)}isChecked(o){return this.checked?.some(({oldFilePath:t,newFilePath:s})=>t===o.oldFilePath&&s===o.newFilePath)}isSelected(o){return o.oldFilePath===this.selected?.oldFilePath&&o.newFilePath===this.selected.newFilePath}keyPressed(o,t){if(this.keyPressDisabled)return;o.preventDefault();const s=this.selected,i=t.findIndex(({oldFilePath:k,newFilePath:N})=>k===s?.oldFilePath&&N===s?.newFilePath);let r=null;switch(o.key){case"ArrowUp":if(!(v.V?o.metaKey:o.ctrlKey)){i>0&&(r=i-1);break}case"Home":r=0;break;case"ArrowDown":if(!(v.V?o.metaKey:o.ctrlKey)){i<t.length-1&&(r=i+1);break}case"End":r=t.length-1;break;case"Escape":i>=0&&(r=i)}if(null!==r){this.keyPressDisabled=!0,this.selectedChanged.next(t[r]);const k=this.viewports.first,N=k.measureScrollOffset("top"),H=N+k.getViewportSize(),G=22*r;(G<N||G>=H)&&k.scrollToIndex(r)}}static{this.\u0275fac=function(t){return new(t||z)(e.Y36(u.d))}}static{this.\u0275cmp=e.Xpm({type:z,selectors:[["app-patch-list"]],viewQuery:function(t,s){if(1&t&&e.Gf($.N7,5),2&t){let i;e.iGM(i=e.CRH())&&(s.viewports=i)}},inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj,e.TTD],decls:3,vars:7,consts:[["tabindex","0",1,"item-list-container",3,"itemSize","maxBufferPx","minBufferPx","keydown"],[1,"patch-list"],[3,"selected","checked","contextmenu",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"contextmenu"],["inline","",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"name",3,"path","click"],[3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0),e.NdJ("keydown",function(r){return s.keyPressed(r,s.patches)}),e.TgZ(1,"ul",1),e.YNc(2,q,5,8,"li",2),e.qZA()()),2&t&&(e.Q6J("itemSize",22)("maxBufferPx",400)("minBufferPx",200),e.xp6(1),e.ekj("checkboxes",s.checked),e.xp6(1),e.Q6J("cdkVirtualForOf",s.orderedPatches)("cdkVirtualForTrackBy",s.trackByPatch))},dependencies:[f.oG,$.xd,$.x0,$.N7,M.mk,M.O5,B.Hw,b.j],styles:["[_nghost-%COMP%]{display:contents}.item-list-container[_ngcontent-%COMP%]{margin-left:-16px;margin-right:-16px;height:100%;contain:content;outline:none}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{position:relative}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;height:22px;line-height:22px;padding-left:16px;padding-right:16px;position:relative;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px;--mdc-checkbox-ripple-size: 28px;--mdc-checkbox-touch-target-size: 22px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px;margin-left:-2px;margin-right:2px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:calc(100% - 22px)}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:none}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%]{display:block}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background-color:#616161}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%]{color:#ef5350}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%]{color:#4caf50}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background-color:#e0e0e0}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%]{color:#ef5350}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%]{color:#4caf50}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%]{color:#d8a669}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}"],changeDetection:0})}}var ee=n(2686),j=n(9841),F=n(9646),a=n(4004),C=n(4782),_=n(6725),p=n(3448),x=n(1123);function l(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"mat-checkbox",8),e.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){e.CHM(t);const r=e.oxw().$implicit,k=e.oxw();return e.KtG(k.clickNodeCheckbox(r,i.checked))}),e.qZA()}if(2&h){const t=e.oxw().$implicit;e.Q6J("checked","all"===t.checked)("indeterminate","some"===t.checked)}}function m(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(i){const k=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.toggleNodeExpanded(i,k))}),e.TgZ(1,"mat-icon",4),e._uU(2,"folder"),e.qZA(),e.YNc(3,l,1,2,"mat-checkbox",5),e.TgZ(4,"span",6),e._uU(5),e.qZA(),e.TgZ(6,"mat-icon",7),e._uU(7),e.qZA()()}if(2&h){const t=o.$implicit,s=e.oxw();e.ekj("checked","all"===t.checked),e.xp6(3),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("matTooltip",t.id),e.xp6(1),e.Oqu(t.segment),e.xp6(2),e.Oqu(t.expanded?"expand_less":"expand_more")}}function O(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"mat-checkbox",13),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().$implicit,k=e.oxw();return e.KtG(k.checkedChanged.next([r.patch,i.checked]))}),e.qZA()}if(2&h){const t=e.oxw().$implicit;e.Q6J("checked",t.checked)}}function A(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("contextmenu",function(i){const k=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.contextMenuOpened.next([k.patch,i]))}),e.TgZ(1,"mat-icon",10),e._uU(2),e.qZA(),e.YNc(3,O,1,1,"mat-checkbox",11),e.TgZ(4,"span",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,k=e.oxw();return e.KtG(k.selectedChanged.next(r.patch))}),e._uU(5),e.qZA()()}if(2&h){const t=o.$implicit,s=e.oxw();let i;e.ekj("checked",t.checked)("selected",s.isSelected(t.patch)),e.xp6(1),e.Q6J("ngClass",s.getPatchIconColorClass(t.patch)),e.xp6(1),e.Oqu(s.getPatchIcon(t.patch)),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("matTooltip",null!==(i=s.getPatchPath(t.patch))&&void 0!==i?i:""),e.xp6(1),e.Oqu(t.segment)}}class U extends((0,y.j)(g.A)){constructor(o){super(),this.commitDetailService=o,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.collapsedNodeIds=new E.X(new Set),this.toggleNodeExpanded=(t,s)=>{t.preventDefault(),t.stopPropagation();const i=new Set(this.collapsedNodeIds.value);i.has(s.id)?(i.delete(s.id),this.collapsedNodeIds.next(i)):(i.add(s.id),this.collapsedNodeIds.next(i))}}ngOnInit(){this.tree=(0,j.a)([this.patches,this.checked??(0,F.of)(null),this.collapsedNodeIds]).pipe((0,a.U)(([o,t,s])=>{const i=o.map(r=>({patch:r,segments:(r.newFilePath??r.oldFilePath??"").split("/")}));return this.buildTree(i,"",0,t,s)}),(0,C.d)(1))}getPatchPath(o){return this.commitDetailService.getPatchPath(o)}getPatchIcon(o){return this.commitDetailService.getPatchIcon(o)}getPatchIconColorClass(o){return this.commitDetailService.getPatchIconColorClass(o)}isSelected(o){return o.oldFilePath===this.selected?.oldFilePath&&o.newFilePath===this.selected.newFilePath}clickNodeCheckbox(o,t){const s=i=>i.reduce((r,k)=>[...r,..."patch"in k?[k]:s(k.children)],[]);for(const i of s(o.children))this.checkedChanged.next([i.patch,t])}buildTree(o,t,s,i,r){return Object.entries((0,ee.Z)(o,({segments:H})=>H[0])).sort(([H],[G])=>H.localeCompare(G,void 0,{numeric:!0})).flatMap(([H,G])=>{const ce=`${t}${H}/`,ae=`${t}${H}`,se=G.filter(({segments:J})=>J.length>1),re=i?G.every(({patch:J})=>i.some(({oldFilePath:X,newFilePath:ie})=>X===J.oldFilePath&&ie===J.newFilePath))?"all":G.some(({patch:J})=>i.some(({oldFilePath:X,newFilePath:ie})=>X===J.oldFilePath&&ie===J.newFilePath))?"some":"none":"none",te=se.length>0?{id:ce,depth:s,expanded:!r.has(ce),children:this.buildTree(se.map(({patch:J,segments:X})=>({patch:J,segments:X.slice(1)})),ce,s+1,i,r),segment:H,checked:re}:null,ne=G.find(({segments:J})=>J.length<=1),oe=ne?{id:ae,depth:s,segment:H,patch:ne.patch,checked:i?.some(({oldFilePath:J,newFilePath:X})=>J===ne.patch.oldFilePath&&X===ne.patch.newFilePath)??!1}:null;return oe&&te?[oe,te]:te?[te]:oe?[oe]:[]})}static{this.\u0275fac=function(t){return new(t||U)(e.Y36(u.d))}}static{this.\u0275cmp=e.Xpm({type:U,selectors:[["app-patch-tree"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj],decls:3,vars:4,consts:[[3,"tree","itemSize"],["class","node-item",3,"checked","click",4,"appVirtualTreeNode"],["class","leaf-item",3,"checked","selected","contextmenu",4,"appVirtualTreeLeafNode"],[1,"node-item",3,"click"],["inline","",1,"node-icon"],[3,"checked","indeterminate","click","change",4,"ngIf"],[1,"text",3,"matTooltip"],[1,"expand-icon"],[3,"checked","indeterminate","click","change"],[1,"leaf-item",3,"contextmenu"],["inline","",1,"node-icon",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"text",3,"matTooltip","click"],[3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"app-virtual-tree",0),e.YNc(1,m,8,6,"div",1),e.YNc(2,A,6,9,"div",2),e.qZA()),2&t&&(e.ekj("checkboxes",!!s.checked),e.Q6J("tree",s.tree)("itemSize",22))},dependencies:[f.oG,M.mk,M.O5,B.Hw,c.gM,_.L,p.I,x.J],styles:["[_nghost-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport{contain:content;scrollbar-gutter:stable;margin-left:-16px;margin-right:-16px}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper{width:100%}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper>ul{overflow-x:auto;overflow-y:hidden}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-spacer{position:relative}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected){background-color:#616161}.node-item[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]{margin-left:16px;display:flex;justify-content:space-between;cursor:pointer;line-height:22px;height:22px;user-select:none;align-items:center;min-width:200px}.node-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px;margin-left:-2px;margin-right:2px}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px;--mdc-checkbox-ripple-size: 28px;--mdc-checkbox-touch-target-size: 22px}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%]{font-size:16px}.node-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.node-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%]{flex:0 0 auto;color:#ffffffb3;line-height:22px}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .node-icon[_ngcontent-%COMP%]{display:none}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .checkbox-button[_ngcontent-%COMP%]{display:block}.dark-theme[_nghost-%COMP%]   app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected), .dark-theme   [_nghost-%COMP%]   app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected){background-color:#616161}.dark-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%]{color:#ef5350}.dark-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%]{color:#4caf50}.dark-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.dark-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.light-theme[_nghost-%COMP%]   app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected), .light-theme   [_nghost-%COMP%]   app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected){background-color:#e0e0e0}.light-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%]{color:#ef5350}.light-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%]{color:#4caf50}.light-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%]{color:#d8a669}.light-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}"],changeDetection:0})}}function K(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"app-patch-list",6),e.NdJ("checkedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkedChanged.next(i))})("selectedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedChanged.next(i))})("contextMenuOpened",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.contextMenuOpened.next(i))}),e.ALo(1,"async"),e.qZA()}if(2&h){const t=e.oxw(2);e.Q6J("patches",t.patches)("checked",e.lcZ(1,3,t.checked))("selected",t.selected)}}function S(h,o){if(1&h){const t=e.EpF();e.TgZ(0,"app-patch-tree",6),e.NdJ("checkedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkedChanged.next(i))})("selectedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedChanged.next(i))})("contextMenuOpened",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.contextMenuOpened.next(i))}),e.qZA()}if(2&h){const t=e.oxw(2);e.Q6J("patches",t.patches$)("checked",t.checked)("selected",t.selected)}}function Y(h,o){if(1&h){const t=e.EpF();e.ynx(0),e.TgZ(1,"header")(2,"mat-button-toggle-group",1),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.changePatchView(i.value))}),e.TgZ(3,"mat-button-toggle",2)(4,"mat-icon"),e._uU(5,"list"),e.qZA()(),e.TgZ(6,"mat-button-toggle",3),e._UZ(7,"mat-icon",4),e.qZA()()(),e.YNc(8,K,2,5,"app-patch-list",5),e.YNc(9,S,1,3,"app-patch-tree",5),e.BQk()}if(2&h){const t=o.ngIf;e.xp6(2),e.Q6J("value",t),e.xp6(6),e.Q6J("ngIf","list"===t),e.xp6(1),e.Q6J("ngIf","tree"===t)}}let Q=(()=>{class h extends((0,y.j)(g.A)){constructor(t){super(),this.store=t,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.patches$=new E.X([])}ngOnChanges(t){t.patches&&this.patches$.next(this.patches)}changePatchView(t){this.store.dispatch(new I.eh(t))}static{this.\u0275fac=function(s){return new(s||h)(e.Y36(D.yh))}}static{this.\u0275cmp=e.Xpm({type:h,selectors:[["app-patches-view"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj,e.TTD],decls:2,vars:3,consts:[[4,"ngIf"],[3,"value","change"],["value","list","matTooltip","List View"],["value","tree","matTooltip","Tree View"],["svgIcon","file-tree"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened",4,"ngIf"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened"]],template:function(s,i){1&s&&(e.YNc(0,Y,10,3,"ng-container",0),e.ALo(1,"async")),2&s&&e.Q6J("ngIf",e.lcZ(1,1,i.view))},dependencies:[W.A9,W.Yi,M.O5,B.Hw,c.gM,z,U,M.Ov],styles:["[_nghost-%COMP%]{display:contents}header[_ngcontent-%COMP%]{flex:0 0 auto;text-align:center;margin-bottom:-4px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{height:30px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{font-size:0}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:28px;padding:0 5px}"],changeDetection:0})}}return(0,d.gn)([(0,D.Ph)(T.$.patchView)],h.prototype,"view",void 0),h})()},6248:(V,w,n)=>{n.d(w,{Z:()=>I});var d=n(811),e=n(3546),D=n(6709),E=n(284),y=n(3179),g=n(9418),T=n(4650);class I{static{this.\u0275fac=function(B){return new(B||I)}}static{this.\u0275mod=T.oAB({type:I})}static{this.\u0275inj=T.cJS({imports:[d.vV,e.QW,D.p9,E.c,y.I,g.c]})}}},2686:(V,w,n)=>{n.d(w,{Z:()=>Z});var d=n(3496);const D=function e(L,P,v,u){for(var f=-1,b=null==L?0:L.length;++f<b;){var R=L[f];P(u,R,v(R),L)}return u};var E=n(3693);const g=function y(L,P,v,u){return(0,E.Z)(L,function(f,b,R){P(u,f,v(f),R)}),u};var T=n(539),I=n(4177),c=Object.prototype.hasOwnProperty;const Z=function W(L,P){return function(v,u){var f=(0,I.Z)(v)?D:g,b=P?P():{};return f(v,L,(0,T.Z)(u,2),b)}}(function(L,P,v){c.call(L,v)?L[v].push(P):(0,d.Z)(L,v,[P])})},6377:(V,w,n)=>{n.d(w,{Z:()=>E});var d=n(5944),e=n(4177);const E=function D(y,g,T,I){return null==y?[]:((0,e.Z)(g)||(g=null==g?[]:[g]),(0,e.Z)(T=I?void 0:T)||(T=null==T?[]:[T]),(0,d.Z)(y,g,T))}}}]);