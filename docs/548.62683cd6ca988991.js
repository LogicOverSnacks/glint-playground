"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[548],{3548:(Yt,B,o)=>{o.r(B),o.d(B,{OpenRepositoryLayoutModule:()=>Ft});var N=o(6338),I=o(4385),T=o(3179),M=o(7084),f=o(9549),w=o(284),A=o(1572),t=o(4650);let q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[M.To,f.lN,w.c,A.Cq,I.LD,T.I]}),e})(),X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.lN,w.c,A.Cq,T.I]}),e})();var W=o(6093),tt=o(3612);let et=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.lN,w.c,T.I,W.i,tt.e]}),e})();var y=o(7237),J=o(655),l=o(4006),O=o(9253),U=o(591),nt=o(6053),P=o(1737),ot=o(8929),it=o(1059),k=o(4850),C=o(7625),j=o(7221),m=o(7545),z=o(537),at=o(5154),rt=o(3164),L=o(1712),V=o(4810),b=o(9967),st=o(9556),R=o(1336),g=o(4889),_=o(9077),lt=o(9578),pt=o(9392),S=o(6271),H=o(3058),ct=o(3238),F=o(3668),v=o(6895),Q=o(4859),Y=o(7392),mt=o(266),dt=o(3051);function ut(e,i){1&e&&(t.TgZ(0,"div",3),t._UZ(1,"mat-spinner"),t._uU(2," Cloning...\n"),t.qZA())}function ft(e,i){if(1&e&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("value",+n.key),t.xp6(1),t.Oqu(n.value.credentialName)}}function gt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.clone())}),t.ALo(1,"async"),t.TgZ(2,"mat-form-field",5)(3,"mat-label"),t._uU(4,"URL"),t.qZA(),t.TgZ(5,"mat-icon",6),t._uU(6,"public"),t.qZA(),t._UZ(7,"input",7),t.qZA(),t.TgZ(8,"mat-form-field",8),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.browsePathIfEmpty())}),t.TgZ(9,"mat-label"),t._uU(10,"Path to clone to"),t.qZA(),t.TgZ(11,"mat-icon",6),t._uU(12,"folder"),t.qZA(),t._UZ(13,"input",9),t.TgZ(14,"button",10),t.NdJ("click",function(s){return t.CHM(n),t.oxw().browsePath(),t.KtG(s.stopPropagation())}),t._uU(15,"Browse"),t.qZA()(),t.TgZ(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Credential"),t.qZA(),t.TgZ(19,"mat-icon",6),t._uU(20,"key"),t.qZA(),t.TgZ(21,"mat-select",12)(22,"mat-option",13),t._uU(23,"None"),t.qZA(),t.YNc(24,ft,2,2,"mat-option",14),t.ALo(25,"keyvalue"),t.ALo(26,"async"),t.qZA()(),t.TgZ(27,"button",15),t._uU(28,"Clone"),t.qZA()()}if(2&e){const n=t.oxw();t.ekj("vertical",t.lcZ(1,6,n.displayVertical)),t.Q6J("formGroup",n.form),t.xp6(22),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",t.lcZ(25,8,t.lcZ(26,10,n.validCredentials))),t.xp6(3),t.Q6J("disabled",n.form.invalid)}}function ht(e,i){if(1&e&&t._UZ(0,"app-avatar",27),2&e){const n=t.oxw().$implicit;t.Q6J("email",n.email)("type",n.type)}}function xt(e,i){if(1&e&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.Q6J("matTooltip",n.email),t.xp6(1),t.Oqu(n.email)}}function Ct(e,i){1&e&&(t.TgZ(0,"mat-icon",32),t._uU(1,"lock"),t.qZA())}function yt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"li",29),t.NdJ("click",function(){const a=t.CHM(n).$implicit,c=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.setFromIntegration(c,a))}),t.TgZ(1,"span",30),t._uU(2),t.qZA(),t.YNc(3,Ct,2,0,"mat-icon",31),t.qZA()}if(2&e){const n=i.$implicit;t.xp6(1),t.Q6J("matTooltip",n.name),t.xp6(1),t.Oqu(n.name),t.xp6(1),t.Q6J("ngIf",n.private)}}function vt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"mat-expansion-panel",19),t.NdJ("afterExpand",function(){t.CHM(n);const s=t.oxw(2);return t.KtG(s.updateViewportSizes())})("afterCollapse",function(){t.CHM(n);const s=t.oxw(2);return t.KtG(s.updateViewportSizes())}),t.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title",20)(3,"span",21),t._UZ(4,"mat-icon",22),t.YNc(5,ht,1,2,"app-avatar",23),t.qZA(),t.YNc(6,xt,2,2,"span",24),t.qZA()(),t.TgZ(7,"cdk-virtual-scroll-viewport",25)(8,"ul"),t.YNc(9,yt,4,3,"li",26),t.ALo(10,"async"),t.qZA()()()}if(2&e){const n=i.$implicit;t.xp6(4),t.Q6J("svgIcon",n.type),t.xp6(1),t.Q6J("ngIf",n.email),t.xp6(1),t.Q6J("ngIf",n.email),t.xp6(1),t.Q6J("itemSize",29),t.xp6(2),t.Q6J("cdkVirtualForOf",t.lcZ(10,5,n.repositories))}}function _t(e,i){if(1&e&&(t.TgZ(0,"div",16),t.ALo(1,"async"),t.TgZ(2,"mat-accordion",17),t.YNc(3,vt,11,7,"mat-expansion-panel",18),t.ALo(4,"async"),t.qZA()()),2&e){const n=t.oxw();t.ekj("vertical",t.lcZ(1,3,n.displayVertical)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,5,n.integrationsWithRepos))}}let wt=(()=>{class e extends((0,V.j)(b.A,st.V)){constructor(n,r,s,a,c,d){super(),this.elementRef=n,this.router=r,this.store=s,this.githubApiService=a,this.filesApi=c,this.repositoriesApi=d,this.cloning=new U.X(!1),this.form=new l.cw({url:new l.NI(null,l.kI.required),path:new l.NI(null,l.kI.required),credential:new l.NI(null)}),this.validCredentials=(0,nt.aj)([this.allCredentials,this.form.controls.url.valueChanges.pipe((0,it.O)(null))]).pipe((0,k.U)(([h,u])=>{const x=[...h.entries()];return Object.fromEntries(u?/^https?:\/\//.test(u)?x.filter(([Z,p])=>"password"===p.type||"oauth-github"===p.type):/^(git|file)?:\/\//.test(u)||/^\//.test(u)||!/:/.test(u)?[]:x.filter(([Z,p])=>"ssh"===p.type):x)})),this.displayVertical=new U.X(!1),this.browsePath=()=>{this.filesApi.openFolderDialog().pipe((0,C.R)(this.destroyed$)).subscribe(h=>{if(!h)return;const u=this.form.controls.url.value;if(null!==u){const Z=/\/([^/]*?)(?:\.git)?\/?$/.exec(u);if(Z)return void this.filesApi.getResolvedPath(h,Z[1]).subscribe(p=>{this.form.controls.path.setValue(p)})}this.form.controls.path.setValue(h)})},this.browsePathIfEmpty=()=>{this.form.controls.path.value||this.browsePath()},this.clone=()=>{if(this.cloning.value)throw new Error("Already cloning");const{url:h,path:u,credential:x}=this.form.value;if(!h)throw new Error("Cannot clone repository with no url");if(!u)throw new Error("Cannot clone repository with no local path");const Z=this.store.selectSnapshot(_.$.credentials);this.cloning.next(!0),this.repositoriesApi.cloneRepository(h,u,x?Z.get(x):void 0).pipe((0,j.K)(p=>L.Ay.matches(p)||L.T0.matches(p)||L.o8.matches(p)?this.store.dispatch(new R.NN("error",p.message)).pipe((0,m.w)(()=>(0,P._)(p))):this.store.dispatch(new R.NN("unhandled",`${p}`)).pipe((0,m.w)(()=>(0,P._)(p)))),(0,m.w)(()=>this.store.dispatch(new g.gz(u))),(0,m.w)(()=>{const p=this.store.selectSnapshot(_.$.selectedProfile),$=x&&"all"!==p?.credentialIds&&!p?.credentialIds.includes(x)?0:this.store.selectSnapshot(_.$.selectedProfileId),Qt=x?{remotes:{origin:{credentialId:x}}}:null;return p&&$>0&&"all"!==p.allowedRepositories&&this.store.dispatch(new lt.Bu($,{...p,allowedRepositories:[...p.allowedRepositories,u]})),this.store.dispatch(new g.xs(u,$,Qt))}),(0,m.w)(()=>this.store.dispatch(new g.he(u))),(0,m.w)(()=>this.store.dispatch(new g.BZ(u))),(0,z.x)(()=>{this.cloning.next(!1)}),(0,C.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/"])})}}get classVertical(){return this.displayVertical.value}ngOnInit(){this.integrationsWithRepos=this.integrations.pipe((0,k.U)(s=>s.filter(a=>"github"===a.type).map(a=>{if("github"===a.type)return{...a,repositories:this.githubApiService.getRepositories(a.token).pipe((0,k.U)(c=>c.map(d=>({type:"github",id:d.id,name:d.full_name,private:d.private,cloneUrl:d.clone_url}))),(0,at.d)(1))}})));const n=new ot.xQ,r=new ResizeObserver(()=>n.next());n.pipe((0,rt.p)(20,void 0,{leading:!0,trailing:!0}),(0,C.R)(this.destroyed$)).subscribe(()=>{this.displayVertical.next(this.elementRef.nativeElement.clientWidth<1020)}),r.observe(this.elementRef.nativeElement),this.destroyed$.subscribe(()=>r.disconnect())}setFromIntegration(n,r){this.form.controls.url.setValue(r.cloneUrl),this.store.selectSnapshot(_.$.credentials);const a=[...this.store.selectSnapshot(_.$.credentials)].find(([c,d])=>"oauth-github"===d.type&&d.githubId===n.id);a&&this.form.controls.credential.setValue(a[0])}updateViewportSizes(){this.viewports.forEach(n=>n.checkViewportSize())}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq),t.Y36(y.F0),t.Y36(O.yh),t.Y36(pt.q),t.Y36(S.k),t.Y36(H.a))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-clone-repository-view"]],hostVars:2,hostBindings:function(n,r){2&n&&t.ekj("vertical",r.classVertical)},features:[t.qOj],decls:6,vars:9,consts:[["class","cloning",4,"ngIf"],[3,"formGroup","vertical","ngSubmit",4,"ngIf"],["class","integrations",3,"vertical",4,"ngIf"],[1,"cloning"],[3,"formGroup","ngSubmit"],[1,"url"],["matPrefix",""],["type","text","matInput","","required","","formControlName","url"],[1,"path",3,"click"],["type","text","matInput","","required","","formControlName","path"],["type","button","matSuffix","","mat-button","",3,"click"],[1,"credential"],["formControlName","credential","placeholder","Select credential"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"integrations"],["multi",""],[3,"afterExpand","afterCollapse",4,"ngFor","ngForOf"],[3,"afterExpand","afterCollapse"],[1,"info"],[1,"icons"],[3,"svgIcon"],[3,"email","type",4,"ngIf"],["class","email",3,"matTooltip",4,"ngIf"],[3,"itemSize"],[3,"click",4,"cdkVirtualFor","cdkVirtualForOf"],[3,"email","type"],[1,"email",3,"matTooltip"],[3,"click"],[3,"matTooltip"],["inline","","color","accent","matTooltip","Private",4,"ngIf"],["inline","","color","accent","matTooltip","Private"]],template:function(n,r){1&n&&(t.YNc(0,ut,3,0,"div",0),t.ALo(1,"async"),t.YNc(2,gt,29,12,"form",1),t.ALo(3,"async"),t.YNc(4,_t,5,7,"div",2),t.ALo(5,"async")),2&n&&(t.Q6J("ngIf",t.lcZ(1,3,r.cloning)),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,5,r.cloning)),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(5,7,r.cloning)))},dependencies:[M.pp,M.ib,M.yz,M.yK,f.KE,f.hX,f.qo,f.R9,w.Nt,A.Ou,I.gD,ct.ey,F.xd,F.x0,F.N7,v.sg,v.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,Q.lW,Y.Hw,mt.gM,dt.A,v.Ov,v.Nd],styles:["[_nghost-%COMP%]{display:flex;height:100%;padding:10px}.vertical[_nghost-%COMP%]{display:block}.cloning[_ngcontent-%COMP%]{margin:10px;font-size:24px}.cloning[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:20px}form[_ngcontent-%COMP%]{max-width:500px;margin-bottom:20px;margin-right:20px}form.vertical[_ngcontent-%COMP%]{margin-right:0}form[_ngcontent-%COMP%]   .url[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .credential[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]     .mat-form-field-prefix{margin-right:10px}form[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]     .mat-form-field-suffix{top:-.25em}.integrations[_ngcontent-%COMP%]{display:flex}.integrations.vertical[_ngcontent-%COMP%]{max-height:calc(100% - 290px)}mat-accordion[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:500px;min-height:300px}mat-expansion-panel[_ngcontent-%COMP%]{flex-shrink:1;display:flex;flex-direction:column;min-height:48px}mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%]{min-height:112px}mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%] + mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%]{margin:0 0 16px}mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{flex:0 0 auto;height:48px}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:64px}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{flex:0 0 auto;cursor:pointer}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{width:24px;height:24px;vertical-align:middle;margin:0 5px}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content{overflow:hidden}mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content.ng-animating cdk-virtual-scroll-viewport{overflow-y:hidden}mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content .mat-expansion-panel-body{display:flex;flex-direction:column;overflow:hidden}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{contain:content;scrollbar-gutter:stable}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{position:relative}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:29px;line-height:29px;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:5px;margin-top:-2px}"],changeDetection:0}),(0,J.gn)([(0,O.Ph)(_.$.credentials)],e.prototype,"allCredentials",void 0),(0,J.gn)([(0,O.Ph)(_.$.integrations)],e.prototype,"integrations",void 0),e})();function Ot(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.create())}),t.TgZ(1,"mat-form-field",3),t.NdJ("click",function(s){t.CHM(n);const a=t.oxw();return t.KtG(a.browsePathIfEmpty(s))}),t.TgZ(2,"mat-label"),t._uU(3,"Path to create in"),t.qZA(),t.TgZ(4,"mat-icon",4),t._uU(5,"folder"),t.qZA(),t._UZ(6,"input",5),t.TgZ(7,"button",6),t.NdJ("click",function(s){t.CHM(n);const a=t.oxw();return t.KtG(a.browsePath(s))}),t._uU(8,"Browse"),t.qZA()(),t.TgZ(9,"mat-form-field",7)(10,"mat-label"),t._uU(11,"Default branch"),t.qZA(),t._UZ(12,"mat-icon",8)(13,"input",9),t.qZA(),t.TgZ(14,"button",10),t._uU(15,"Create"),t.qZA()()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.form),t.xp6(14),t.Q6J("disabled",n.form.invalid)}}function Zt(e,i){1&e&&(t.TgZ(0,"div",11),t._UZ(1,"mat-spinner"),t._uU(2," Creating...\n"),t.qZA())}let Mt=(()=>{class e extends((0,V.j)(b.A)){constructor(n,r,s,a){super(),this.router=n,this.store=r,this.filesApi=s,this.repositoriesApi=a,this.creating=new U.X(!1),this.form=new l.cw({path:new l.NI(null,l.kI.required),defaultBranch:new l.NI("main",{nonNullable:!0})}),this.browsePath=c=>{c.preventDefault(),c.stopPropagation(),this.filesApi.openFolderDialog().pipe((0,C.R)(this.destroyed$)).subscribe(d=>{d&&this.form.controls.path.setValue(d)})},this.browsePathIfEmpty=c=>{this.form.controls.path.value||this.browsePath(c)},this.create=()=>{if(this.creating.value)throw new Error("Already creating");const{path:c,defaultBranch:d}=this.form.value;if(!c)throw new Error("Cannot create repository with no local path");this.creating.next(!0),this.repositoriesApi.createRepository(c,d??"main").pipe((0,j.K)(h=>this.store.dispatch(new R.NN("unhandled",`${h}`)).pipe((0,m.w)(()=>(0,P._)(h)))),(0,m.w)(()=>this.store.dispatch(new g.gz(c))),(0,m.w)(()=>this.store.dispatch(new g.he(c))),(0,m.w)(()=>this.store.dispatch(new g.BZ(c))),(0,z.x)(()=>{this.creating.next(!1)}),(0,C.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/"])})}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(y.F0),t.Y36(O.yh),t.Y36(S.k),t.Y36(H.a))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-create-repository-view"]],features:[t.qOj],decls:4,vars:6,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","cloning",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"path",3,"click"],["matPrefix",""],["type","text","matInput","","required","","formControlName","path"],["type","button","matSuffix","","mat-button","",3,"click"],[1,"default-branch"],["matPrefix","","svgIcon","source-branch"],["type","text","placeholder","main","matInput","","formControlName","defaultBranch"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"cloning"]],template:function(n,r){1&n&&(t.YNc(0,Ot,16,2,"form",0),t.ALo(1,"async"),t.YNc(2,Zt,3,0,"div",1),t.ALo(3,"async")),2&n&&(t.Q6J("ngIf",!1===t.lcZ(1,2,r.creating)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,r.creating)))},dependencies:[f.KE,f.hX,f.qo,f.R9,w.Nt,A.Ou,v.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,Q.lW,Y.Hw,v.Ov],styles:["form[_ngcontent-%COMP%]{margin:10px;max-width:500px}form[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .default-branch[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]     .mat-form-field-prefix{margin-right:10px}form[_ngcontent-%COMP%]     .mat-form-field-suffix{top:-.25em}"],changeDetection:0}),e})();var Pt=o(6197),D=o(9251),E=o(3546),G=o(5724),K=o(3943),Rt=o(5174),Tt=o(744);function At(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(n);const s=t.oxw(2);return t.KtG(s.searchControl.setValue(null))}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Vt(e,i){if(1&e&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"Search"),t.qZA(),t.TgZ(3,"span",8)(4,"mat-icon"),t._uU(5,"search"),t.qZA(),t._uU(6,"\xa0"),t.qZA(),t._UZ(7,"input",9),t.YNc(8,At,3,0,"button",10),t.qZA()),2&e){const n=t.oxw();t.xp6(7),t.Q6J("formControl",n.searchControl),t.xp6(1),t.Q6J("ngIf",n.searchControl.value)}}function bt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),t._uU(3,"history"),t.qZA(),t._uU(4," Recently opened"),t.qZA(),t.TgZ(5,"mat-card-content")(6,"app-repository-history-view",12),t.NdJ("clicked",function(s){t.CHM(n);const a=t.oxw();return t.KtG(a.openRecent(s))})("dragStarted",function(s){t.CHM(n);const a=t.oxw();return t.KtG(a.dragstartListener(s[0],s[1]))}),t.qZA()()()}}let Nt=(()=>{class e extends((0,V.j)(b.A)){constructor(n,r,s){super(),this.router=n,this.store=r,this.filesApi=s,this.searchControl=new l.NI(null),this.openBookmark=a=>{(0,D.b)(a)||this.store.dispatch(new g.he(a.id)).pipe((0,m.w)(()=>this.store.dispatch(new g.BZ(a.id))),(0,C.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/"])})},this.openRecent=a=>{this.store.dispatch(new g.he(a)).pipe((0,m.w)(()=>this.store.dispatch(new g.BZ(a))),(0,C.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/"])})},this.openFromDisk=()=>{this.filesApi.openFolderDialog().pipe((0,C.R)(this.destroyed$)).subscribe(a=>{a&&this.store.dispatch(new g.gz(a)).pipe((0,m.w)(()=>this.store.dispatch(new g.he(a))),(0,m.w)(()=>this.store.dispatch(new g.BZ(a))),(0,C.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/"])})})},this.dragstartListener=(a,c)=>{a.dataTransfer&&(a.dataTransfer.setData("app/repository",c),a.dataTransfer.effectAllowed="move")}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(y.F0),t.Y36(O.yh),t.Y36(S.k))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-open-repository-view"]],features:[t.qOj],decls:20,vars:6,consts:[["type","button","mat-flat-button","",1,"open-from-disk-button",3,"click"],["class","search-box",4,"ngIf"],["id","open-repository-view"],["min","210px"],[3,"nodeClick"],["min","300px"],[4,"ngIf"],[1,"search-box"],["matPrefix",""],["matInput","","type","text",3,"formControl"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["matSuffix","","mat-icon-button","",3,"click"],[3,"clicked","dragStarted"]],template:function(n,r){1&n&&(t.TgZ(0,"header")(1,"button",0),t.NdJ("click",function(){return r.openFromDisk()}),t.TgZ(2,"mat-icon"),t._uU(3,"folder_open"),t.qZA(),t._uU(4," Open from disk "),t.qZA(),t.YNc(5,Vt,9,2,"mat-form-field",1),t.qZA(),t.TgZ(6,"main")(7,"app-grid",2)(8,"app-grid-cell",3)(9,"mat-card")(10,"mat-card-title")(11,"mat-icon"),t._uU(12,"bookmarks"),t.qZA(),t._uU(13," Bookmarks"),t.qZA(),t.TgZ(14,"mat-card-content")(15,"app-repository-bookmarks-view",4),t.NdJ("nodeClick",function(a){return r.openBookmark(a)}),t.qZA()()()(),t.TgZ(16,"app-grid-cell",5),t.YNc(17,bt,7,0,"mat-card",6),t.ALo(18,"nullEmpty"),t.ALo(19,"async"),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("ngIf",!1),t.xp6(12),t.Q6J("ngIf",t.lcZ(18,2,t.lcZ(19,4,r.recentRepositories))))},dependencies:[f.KE,f.hX,f.qo,f.R9,w.Nt,v.O5,l.Fj,l.JJ,l.oH,Q.lW,E.a8,E.dn,E.n5,Y.Hw,G.Y,K.M,D.j,Rt.J,v.Ov,Tt.x],styles:["header[_ngcontent-%COMP%]{margin:10px 10px 0;display:flex;align-items:baseline}header[_ngcontent-%COMP%]   .open-from-disk-button[_ngcontent-%COMP%]{margin-bottom:26px}header[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{flex:auto;margin-left:10px}main[_ngcontent-%COMP%]{padding:0 5px 10px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin:0 5px}"],changeDetection:0}),(0,J.gn)([(0,O.Ph)(Pt.E.recentRepositories)],e.prototype,"recentRepositories",void 0),e})();var It=o(4745);const Jt=function(){return["./open"]},Ut=function(){return["./clone"]},kt=function(){return["./create"]},Lt=[{path:"",component:(()=>{class e extends((0,V.j)(b.A,It.H)){}return e.\u0275fac=function(){let i;return function(r){return(i||(i=t.n5z(e)))(r||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],features:[t.qOj],decls:11,vars:6,consts:[["id","open-repository-layout"],["min","150px"],[1,"links"],["routerLinkActive","active",3,"routerLink"],["min","510px"]],template:function(n,r){1&n&&(t.TgZ(0,"app-grid",0)(1,"app-grid-cell",1)(2,"mat-list",2)(3,"mat-list-item",3),t._uU(4,"Open"),t.qZA(),t.TgZ(5,"mat-list-item",3),t._uU(6,"Clone"),t.qZA(),t.TgZ(7,"mat-list-item",3),t._uU(8,"Create"),t.qZA()()(),t.TgZ(9,"app-grid-cell",4),t._UZ(10,"router-outlet"),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("routerLink",t.DdM(3,Jt)),t.xp6(2),t.Q6J("routerLink",t.DdM(4,Ut)),t.xp6(2),t.Q6J("routerLink",t.DdM(5,kt)))},dependencies:[N.i$,N.Tg,G.Y,K.M,y.lC,y.rH,y.Od],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 50px)}.links[_ngcontent-%COMP%]{padding-top:0}.links[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{outline:none;cursor:pointer}.links[_ngcontent-%COMP%]   mat-list-item.active[_ngcontent-%COMP%]{background:#78909c}"],changeDetection:0}),e})(),children:[{path:"open",component:Nt},{path:"clone",component:wt},{path:"create",component:Mt},{path:"",redirectTo:"open",pathMatch:"full"}]}];let St=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[y.Bz.forChild(Lt),y.Bz]}),e})(),Ft=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[N.ie,I.LD,T.I,q,X,et,St]}),e})()}}]);