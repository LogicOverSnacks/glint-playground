"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[181],{3178:(j,b,o)=>{o.d(b,{l:()=>M});var P=o(4080),w=o(2986),f=o(7625),Z=o(9967),t=o(8926),L=o(8310),u=o(4650),N=o(8184);let M=(()=>{class O extends((0,t.j)(Z.A)){constructor(a,s){super(),this.overlay=a,this.viewContainerRef=s,this.overlayRef=null,this.closeMenu=()=>{this.overlayRef?.dispose(),this.overlayRef=null},this.openMenu=(r,C)=>{this.closeMenu(),this.overlayRef=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo({x:r,y:C}).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this.overlayRef.attach(new P.UE(this.menuTemplate,this.viewContainerRef,{data:this.data})),(0,L.t)(this.overlayRef).pipe((0,w.q)(1),(0,f.R)(this.destroyed$)).subscribe(this.closeMenu)},this.toggleMenu=(r,C)=>{this.overlayRef?this.closeMenu():this.openMenu(r,C)}}contextmenuListener(a){a.preventDefault(),a.stopPropagation(),this.openMenu(a.x,a.y)}ngOnDestroy(){super.ngOnDestroy(),this.closeMenu()}}return O.\u0275fac=function(a){return new(a||O)(u.Y36(N.aV),u.Y36(u.s_b))},O.\u0275dir=u.lG2({type:O,selectors:[["","appContextMenu",""]],hostBindings:function(a,s){1&a&&u.NdJ("contextmenu",function(C){return s.contextmenuListener(C)})},inputs:{menuTemplate:["appContextMenu","menuTemplate"],data:["appContextMenuData","data"]},exportAs:["appContextMenu"],features:[u.qOj]}),O})()},8310:(j,b,o)=>{o.d(b,{t:()=>Z});var P=o(6787),w=o(3753),f=o(2198);const Z=(t,L=!0)=>(0,P.T)(t.backdropClick(),t.outsidePointerEvents().pipe((0,f.h)(u=>"auxclick"!==u.type)),...L?[(0,w.R)(t.overlayElement,"click")]:[])},8181:(j,b,o)=>{o.r(b),o.d(b,{BlameLayoutModule:()=>Tt});var P=o(4385),w=o(3179),f=o(1572),Z=o(8853),t=o(4650);let L=(()=>{class c{}return c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[f.Cq,w.I,Z.m]}),c})();var u=o(1800),N=o(655),M=o(7340),O=o(4006),h=o(240),a=o(7717),s=o(591),r=o(1086),C=o(6053),B=o(567),$=o(1737),T=o(4850),_=o(7625),R=o(5778),tt=o(3164),Q=o(2994),I=o(7545),S=o(7221),D=o(1712),Y=o(8926),K=o(9967),k=o(8523),E=o(2187),A=o(6966),et=o(790),nt=o(127),ot=o(3058),it=o(7784),X=o(9549),ct=o(3238),x=o(6895),at=o(4859),W=o(7392),z=o(266),H=o(3051),st=o(9131),rt=o(3061),lt=o(1580),dt=o(2986),G=o(4889),gt=o(315),J=o(3668),pt=o(3178),mt=o(744),ut=o(1899),ht=o(1453);function Ct(c,d){1&c&&(t.TgZ(0,"div",6),t._UZ(1,"mat-spinner"),t._uU(2," Loading...\n"),t.qZA())}function Mt(c,d){if(1&c&&(t.TgZ(0,"span",12)(1,"span",13),t._uU(2),t.qZA(),t._UZ(3,"app-avatar",14),t.ALo(4,"async"),t.TgZ(5,"span",15),t._uU(6),t.qZA(),t.TgZ(7,"span",16),t._uU(8),t.ALo(9,"date"),t.qZA()()),2&c){const e=d.ngIf,n=t.oxw(2),i=t.MAs(11);t.Udp("left",-n.lineNumberMargin-26-400,"px"),t.Q6J("appContextMenu",i)("appContextMenuData",e),t.xp6(1),t.Q6J("matTooltip",e.commitId),t.xp6(1),t.Oqu(e.commitId),t.xp6(1),t.Q6J("matTooltip",e.name+" ("+e.email+")")("remotes",t.lcZ(4,12,n.remotes))("email",e.email),t.xp6(2),t.Q6J("matTooltip",e.message),t.xp6(1),t.Oqu(e.message),t.xp6(2),t.Oqu(t.xi3(9,14,e.date,"d MMM y"))}}function Ot(c,d){if(1&c&&(t.TgZ(0,"span",18),t._uU(1),t.qZA()),2&c){const e=d.$implicit;t.Q6J("ngClass",e.class),t.xp6(1),t.Oqu(e.text)}}function Pt(c,d){if(1&c&&(t.ynx(0),t.YNc(1,Ot,2,2,"span",17),t.ALo(2,"tokens"),t.ALo(3,"searchToken"),t.ALo(4,"async"),t.BQk()),2&c){const e=d.ngIf,n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.Dn7(3,4,e.tokens,e.text,t.lcZ(4,8,n.search)),e.text))}}function ft(c,d){if(1&c&&(t.TgZ(0,"li",7),t.YNc(1,Mt,10,17,"span",8),t.ALo(2,"async"),t.TgZ(3,"span",9),t._uU(4),t.qZA(),t.TgZ(5,"span",10),t._uU(6),t.qZA(),t.YNc(7,Pt,5,10,"ng-container",11),t.qZA()),2&c){const e=d.$implicit,n=t.oxw();let i;t.Q6J("ngClass","line-"+e.status),t.xp6(1),t.Q6J("ngIf",null==(i=t.lcZ(2,11,n.blameLines$))?null:i[null==e.newLine?null:e.newLine.lineNumber]),t.xp6(2),t.Udp("right","calc(100% + 26px + "+(n.lineNumberMargin/2).toString()+"px)")("width",n.lineNumberMargin/2-5,"px"),t.xp6(1),t.Oqu(null==e.oldLine?null:e.oldLine.lineNumber),t.xp6(1),t.Udp("width",n.lineNumberMargin/2-5,"px"),t.xp6(1),t.Oqu(null==e.newLine?null:e.newLine.lineNumber),t.xp6(1),t.Q6J("ngIf",n.getLineView(e))}}function _t(c,d){if(1&c){const e=t.EpF();t.TgZ(0,"div",19)(1,"button",20),t.NdJ("click",function(){const g=t.CHM(e).data,l=t.oxw();return t.KtG(l.copyToClipboard(g.commitId))}),t.TgZ(2,"mat-icon"),t._uU(3,"content_copy"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Copy Commit ID"),t.qZA()(),t.TgZ(6,"button",20),t.NdJ("click",function(){const g=t.CHM(e).data,l=t.oxw();return t.KtG(l.selectCommit(g.commitId))}),t.TgZ(7,"mat-icon"),t._uU(8,"document_scanner"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Blame from this Commit"),t.qZA()(),t.TgZ(11,"button",20),t.NdJ("click",function(){const g=t.CHM(e).data,l=t.oxw();return t.KtG(l.jumpToCommit(g.commitId))}),t.TgZ(12,"mat-icon"),t._uU(13,"launch"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Jump to Commit"),t.qZA()()()}if(2&c){const e=d.data;t.xp6(1),t.Q6J("matTooltip",e.commitId),t.xp6(5),t.Q6J("matTooltip",e.commitId),t.xp6(5),t.Q6J("matTooltip",e.commitId)}}let xt=(()=>{class c extends((0,Y.j)(K.A)){constructor(e,n,i){super(),this.router=e,this.store=n,this.diffService=i,this.commitChanged=new t.vpe,this.lineNumberMargin=0,this.lines$=new s.X([]),this.blameLines$=new s.X({})}ngOnInit(){this.remotes=this.repository.pipe((0,T.U)(e=>e?.remotes??[])),this.blame.pipe((0,_.R)(this.destroyed$)).subscribe(e=>{if(e){const n=e.hunks.map(i=>[i.startLineNo,{name:i.authorName,email:i.authorEmail,commitId:i.commitId,message:i.commitMessage,date:i.commitDate}]);this.blameLines$.next(Object.fromEntries(n))}else this.blameLines$.next({})}),this.diffLines.pipe((0,_.R)(this.destroyed$)).subscribe(e=>{if(e){const n=(0,lt.Z)([e.oldLines.length,e.newLines.length])??0;this.lineNumberMargin=this.diffService.calculateMargin(n.toString().length),this.diffService.calculateInlineLines(e.oldLines,e.newLines,e.hunks).pipe((0,_.R)(this.destroyed$)).subscribe(i=>{this.lines$.next(i)})}else this.lineNumberMargin=0,this.lines$.next([])})}getLineView(e){return"added"===e.status?e.newLine:"removed"===e.status?e.oldLine:"unchanged"===e.status?e.newLine??e.oldLine:null}trackByDiffLine(e,n){return e}copyToClipboard(e){navigator.clipboard.writeText(e??"")}selectCommit(e){this.commitChanged.next(e)}jumpToCommit(e){this.repository.pipe((0,dt.q)(1),(0,_.R)(this.destroyed$)).subscribe(n=>{if(!n)throw new Error("Cannot jump to commit when no repository is selected");this.store.dispatch([new G.jQ(n.path,e),new G.BK(n.path,e)]).subscribe(()=>{this.router.navigate(["/standard/default"])})})}}return c.\u0275fac=function(e){return new(e||c)(t.Y36(u.F0),t.Y36(h.yh),t.Y36(gt.S))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-blame-view"]],inputs:{repository:"repository",blame:"blame",diffLines:"diffLines",search:"search"},outputs:{commitChanged:"commitChanged"},features:[t.qOj],decls:12,vars:14,consts:[["class","loading",4,"ngIf"],[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["scrollContainer",""],["code",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["contextMenu",""],[1,"loading"],[1,"line",3,"ngClass"],["class","blame",3,"left","appContextMenu","appContextMenuData",4,"ngIf"],[1,"old-line-number"],[1,"new-line-number"],[4,"ngIf"],[1,"blame",3,"appContextMenu","appContextMenuData"],[1,"commit-id",3,"matTooltip"],[3,"matTooltip","remotes","email"],[1,"message",3,"matTooltip"],[1,"date"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"menu-panel"],[1,"menu-item",3,"matTooltip","click"]],template:function(e,n){1&e&&(t.YNc(0,Ct,3,0,"div",0),t.ALo(1,"nullEmpty"),t.ALo(2,"async"),t.TgZ(3,"cdk-virtual-scroll-viewport",1,2)(5,"code",null,3)(7,"ul"),t.YNc(8,ft,8,13,"li",4),t.ALo(9,"async"),t.qZA()()(),t.YNc(10,_t,16,3,"ng-template",null,5,t.W1O)),2&e&&(t.Q6J("ngIf",!t.lcZ(1,8,t.lcZ(2,10,n.lines$))),t.xp6(3),t.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),t.xp6(4),t.Udp("margin-left",n.lineNumberMargin+26+400+10,"px"),t.xp6(1),t.Q6J("cdkVirtualForOf",t.lcZ(9,12,n.lines$))("cdkVirtualForTrackBy",n.trackByDiffLine))},dependencies:[f.Ou,J.xd,J.x0,J.N7,x.mk,x.sg,x.O5,W.Hw,z.gM,H.A,pt.l,x.Ov,x.uU,mt.x,ut.y,ht.U],styles:[".loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;margin:20px;width:100px}code[_ngcontent-%COMP%]{display:block;white-space:pre;color:#d4d4d4;font-family:Consolas,Courier New,monospace;font-size:14px;font-weight:400;letter-spacing:0px;line-height:19px}code[_ngcontent-%COMP%]     .line{height:19px}code[_ngcontent-%COMP%]     .line.line-added{background:#1f2c19}code[_ngcontent-%COMP%]     .line.line-removed{background:#501515}code[_ngcontent-%COMP%]     .line.line-void{background:#111}code[_ngcontent-%COMP%]     .diff-added{background-color:#1d572c}code[_ngcontent-%COMP%]     .diff-removed{background-color:#803030}code[_ngcontent-%COMP%]     .search-result{background-color:#a14e1b}code[_ngcontent-%COMP%]     .meta-embedded, code[_ngcontent-%COMP%]     .source-groovy-embedded{color:#d4d4d4}code[_ngcontent-%COMP%]     .emphasis{font-style:italic}code[_ngcontent-%COMP%]     .strong{font-weight:700}code[_ngcontent-%COMP%]     .header{color:navy}code[_ngcontent-%COMP%]     .comment{color:#6a9955}code[_ngcontent-%COMP%]     .constant-language{color:#569cd6}code[_ngcontent-%COMP%]     .constant-numeric, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-number, code[_ngcontent-%COMP%]     .variable-other-enummember, code[_ngcontent-%COMP%]     .keyword-operator-plus-exponent, code[_ngcontent-%COMP%]     .keyword-operator-minus-exponent{color:#b5cea8}code[_ngcontent-%COMP%]     .constant-regexp{color:#646695}code[_ngcontent-%COMP%]     .entity-name-tag{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-tag-css{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-other-attribute-name{color:#9cdcfe}code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-mixin-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-id-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-parent-selector-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-element-css, code[_ngcontent-%COMP%]     .source-css-less .entity-other-attribute-name-id, code[_ngcontent-%COMP%]     .entity-other-attribute-name-attribute-scss, code[_ngcontent-%COMP%]     .entity-other-attribute-name-scss{color:#d7ba7d}code[_ngcontent-%COMP%]     .invalid{color:#f44747}code[_ngcontent-%COMP%]     .markup-underline{text-decoration:underline}code[_ngcontent-%COMP%]     .markup-bold{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-heading{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-italic{font-style:italic}code[_ngcontent-%COMP%]     .markup-inserted{color:#b5cea8}code[_ngcontent-%COMP%]     .markup-deleted{color:#ce9178}code[_ngcontent-%COMP%]     .markup-changed{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-quote-begin-markdown{color:#6a9955}code[_ngcontent-%COMP%]     .punctuation-definition-list-begin-markdown{color:#6796e6}code[_ngcontent-%COMP%]     .markup-inline-raw{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-tag{color:gray}code[_ngcontent-%COMP%]     .meta-preprocessor{color:#569cd6}code[_ngcontent-%COMP%]     .meta-preprocessor-string{color:#ce9178}code[_ngcontent-%COMP%]     .meta-preprocessor-numeric{color:#b5cea8}code[_ngcontent-%COMP%]     .meta-structure-dictionary-key-python{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-diff-header{color:#569cd6}code[_ngcontent-%COMP%]     .storage{color:#569cd6}code[_ngcontent-%COMP%]     .storage-type{color:#569cd6}code[_ngcontent-%COMP%]     .storage-modifier, code[_ngcontent-%COMP%]     .keyword-operator-noexcept{color:#569cd6}code[_ngcontent-%COMP%]     .string, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-string{color:#ce9178}code[_ngcontent-%COMP%]     .string-tag{color:#ce9178}code[_ngcontent-%COMP%]     .string-value{color:#ce9178}code[_ngcontent-%COMP%]     .string-regexp{color:#d16969}code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-begin, code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-end, code[_ngcontent-%COMP%]     .punctuation-section-embedded{color:#569cd6}code[_ngcontent-%COMP%]     .meta-template-expression{color:#d4d4d4}code[_ngcontent-%COMP%]     .support-type-vendored-property-name, code[_ngcontent-%COMP%]     .support-type-property-name, code[_ngcontent-%COMP%]     .variable-css, code[_ngcontent-%COMP%]     .variable-scss, code[_ngcontent-%COMP%]     .variable-other-less, code[_ngcontent-%COMP%]     .source-coffee-embedded{color:#9cdcfe}code[_ngcontent-%COMP%]     .keyword{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-control{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-operator{color:#d4d4d4}code[_ngcontent-%COMP%]     .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-expression, code[_ngcontent-%COMP%]     .keyword-operator-cast, code[_ngcontent-%COMP%]     .keyword-operator-sizeof, code[_ngcontent-%COMP%]     .keyword-operator-typeid, code[_ngcontent-%COMP%]     .keyword-operator-alignas, code[_ngcontent-%COMP%]     .keyword-operator-instanceof, code[_ngcontent-%COMP%]     .keyword-operator-logical-python, code[_ngcontent-%COMP%]     .keyword-operator-wordlike{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-other-unit{color:#b5cea8}code[_ngcontent-%COMP%]     .punctuation-section-embedded-begin-php, code[_ngcontent-%COMP%]     .punctuation-section-embedded-end-php{color:#569cd6}code[_ngcontent-%COMP%]     .support-function-git-rebase{color:#9cdcfe}code[_ngcontent-%COMP%]     .constant-sha-git-rebase{color:#b5cea8}code[_ngcontent-%COMP%]     .storage-modifier-import-java, code[_ngcontent-%COMP%]     .variable-language-wildcard-java, code[_ngcontent-%COMP%]     .storage-modifier-package-java{color:#d4d4d4}code[_ngcontent-%COMP%]     .variable-language{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-function, code[_ngcontent-%COMP%]     .support-function, code[_ngcontent-%COMP%]     .support-constant-handlebars, code[_ngcontent-%COMP%]     .source-powershell .variable-other-member{color:#dcdcaa}code[_ngcontent-%COMP%]     .meta-return-type, code[_ngcontent-%COMP%]     .support-class, code[_ngcontent-%COMP%]     .support-type, code[_ngcontent-%COMP%]     .entity-name-type, code[_ngcontent-%COMP%]     .entity-name-namespace, code[_ngcontent-%COMP%]     .entity-other-attribute, code[_ngcontent-%COMP%]     .entity-name-scope-resolution, code[_ngcontent-%COMP%]     .entity-name-class, code[_ngcontent-%COMP%]     .storage-type-numeric-go, code[_ngcontent-%COMP%]     .storage-type-byte-go, code[_ngcontent-%COMP%]     .storage-type-boolean-go, code[_ngcontent-%COMP%]     .storage-type-string-go, code[_ngcontent-%COMP%]     .storage-type-uintptr-go, code[_ngcontent-%COMP%]     .storage-type-error-go, code[_ngcontent-%COMP%]     .storage-type-rune-go, code[_ngcontent-%COMP%]     .storage-type-cs, code[_ngcontent-%COMP%]     .storage-type-generic-cs, code[_ngcontent-%COMP%]     .storage-type-modifier-cs, code[_ngcontent-%COMP%]     .storage-type-variable-cs, code[_ngcontent-%COMP%]     .storage-type-annotation-java, code[_ngcontent-%COMP%]     .storage-type-generic-java, code[_ngcontent-%COMP%]     .storage-type-java, code[_ngcontent-%COMP%]     .storage-type-object-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-java, code[_ngcontent-%COMP%]     .storage-type-token-java, code[_ngcontent-%COMP%]     .storage-type-groovy, code[_ngcontent-%COMP%]     .storage-type-annotation-groovy, code[_ngcontent-%COMP%]     .storage-type-parameters-groovy, code[_ngcontent-%COMP%]     .storage-type-generic-groovy, code[_ngcontent-%COMP%]     .storage-type-object-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-groovy{color:#4ec9b0}code[_ngcontent-%COMP%]     .meta-type-cast-expr, code[_ngcontent-%COMP%]     .meta-type-new-expr, code[_ngcontent-%COMP%]     .support-constant-math, code[_ngcontent-%COMP%]     .support-constant-dom, code[_ngcontent-%COMP%]     .support-constant-json, code[_ngcontent-%COMP%]     .entity-other-inherited-class{color:#4ec9b0}code[_ngcontent-%COMP%]     .keyword-control, code[_ngcontent-%COMP%]     .source-cpp .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-delete, code[_ngcontent-%COMP%]     .keyword-other-using, code[_ngcontent-%COMP%]     .keyword-other-operator, code[_ngcontent-%COMP%]     .entity-name-operator{color:#c586c0}code[_ngcontent-%COMP%]     .variable, code[_ngcontent-%COMP%]     .meta-definition-variable-name, code[_ngcontent-%COMP%]     .support-variable, code[_ngcontent-%COMP%]     .entity-name-variable{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-object-literal-key{color:#9cdcfe}code[_ngcontent-%COMP%]     .support-constant-property-value, code[_ngcontent-%COMP%]     .support-constant-font-name, code[_ngcontent-%COMP%]     .support-constant-media-type, code[_ngcontent-%COMP%]     .support-constant-media, code[_ngcontent-%COMP%]     .constant-other-color-rgb-value, code[_ngcontent-%COMP%]     .constant-other-rgb-value, code[_ngcontent-%COMP%]     .support-constant-color{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-group-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-group-assertion-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-character-class-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-begin-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-end-regexp, code[_ngcontent-%COMP%]     .keyword-operator-negation-regexp, code[_ngcontent-%COMP%]     .support-other-parenthesis-regexp{color:#ce9178}code[_ngcontent-%COMP%]     .constant-character-character-class-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-set-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-regexp, code[_ngcontent-%COMP%]     .constant-character-set-regexp{color:#d16969}code[_ngcontent-%COMP%]     .keyword-operator-or-regexp, code[_ngcontent-%COMP%]     .keyword-control-anchor-regexp{color:#dcdcaa}code[_ngcontent-%COMP%]     .keyword-operator-quantifier-regexp{color:#d7ba7d}code[_ngcontent-%COMP%]     .constant-character{color:#569cd6}code[_ngcontent-%COMP%]     .constant-character-escape{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-name-label{color:#c8c8c8}code[_ngcontent-%COMP%]     .punctuation-definition-string{color:#ce9178}code[_ngcontent-%COMP%]     .variable-language-this{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-comment{color:#6a9955}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]{position:absolute;width:400px;overflow:hidden;user-select:none;font-size:0;display:flex;justify-content:space-between;align-items:center;gap:5px}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{width:16px;height:16px;flex:0 0 auto}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .commit-id[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .commit-id[_ngcontent-%COMP%]{max-width:50px}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{flex:1 1 auto}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{flex:0 0 auto;color:#90a4ae}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none;color:#858585}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{right:calc(100% + 26px)}.viewport[_ngcontent-%COMP%]{height:100%;width:100%}.menu-panel[_ngcontent-%COMP%]{background:#424242;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;max-height:calc(100vh - 48px);max-width:25vw;min-height:48px;min-width:112px;overflow-x:hidden;overflow-y:auto}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;display:flex;font-family:MontserratVariable;font-size:14px;height:48px;line-height:48px;max-width:100%;outline:none;overflow:hidden;padding:0 16px;user-select:none;text-align:left;text-overflow:ellipsis;width:100%;white-space:nowrap}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#565656}.menu-panel[_ngcontent-%COMP%]   .menu-item[disabled][_ngcontent-%COMP%]{pointer-events:none;color:#ffffff4d}.menu-panel[_ngcontent-%COMP%]   .menu-item.bold[_ngcontent-%COMP%]{font-weight:700}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:12px 16px 12px 0;vertical-align:middle;flex:0 0 auto}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon.expand-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:0}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.menu-panel.sub-menu-1[_ngcontent-%COMP%]{background:#4a4a4a}"],changeDetection:0}),c})();function yt(c,d){if(1&c&&(t.TgZ(0,"span"),t._UZ(1,"app-avatar",8),t.ALo(2,"async"),t.TgZ(3,"span",9),t._uU(4),t.qZA()()),2&c){const e=d.ngIf,n=t.oxw();t.xp6(1),t.Q6J("matTooltip",e.name+" ("+e.email+")")("remotes",t.lcZ(2,4,n.remotes))("email",e.email),t.xp6(3),t.Oqu(e.message)}}function vt(c,d){if(1&c&&(t.TgZ(0,"mat-option",10),t._UZ(1,"app-avatar",8),t.ALo(2,"async"),t.TgZ(3,"span",11),t._uU(4),t.qZA(),t.TgZ(5,"span",12),t._uU(6),t.ALo(7,"date"),t.qZA()()),2&c){const e=d.$implicit,n=t.oxw();t.Q6J("value",e.id),t.xp6(1),t.Q6J("matTooltip",e.name+" ("+e.email+")")("remotes",t.lcZ(2,7,n.remotes))("email",e.email),t.xp6(2),t.Q6J("matTooltip",e.message),t.xp6(1),t.Oqu(e.message),t.xp6(2),t.Oqu(t.xi3(7,9,e.date,"d MMM y"))}}const bt=[{path:"",component:(()=>{class c extends((0,Y.j)(K.A)){constructor(e,n,i,g,l,U,p){super(),this.route=e,this.router=n,this.store=i,this.commitsApi=g,this.highlightApi=l,this.repositoriesApi=U,this.routerHistoryService=p,this.blame=new s.X(null),this.headBlame=new s.X(null),this.commits=new s.X([]),this.diffLines=new s.X(null),this.search$=new s.X(null),this.selectedCommitControl=new O.NI(null),this.selectedCommit=new s.X(null),this.selectedPath=new s.X(null),this.previousUrl=null,this.close=()=>{this.router.navigate([this.previousUrl??"/"])},this.getPatch=(m,y,v,V)=>{if("head"===v){const q=("staged"===V?m.stagedChanges?.patches:"unstaged"===V?m.unstagedChanges?.patches:void 0)?.find(Lt=>Lt.newFilePath===y);return(0,r.of)(q?{repositoryPath:m.path,patch:q,isUnstaged:"unstaged"===V}:null)}return"commit"!==V?(0,r.of)(null):this.commitsApi.getPatch(m.path,v,void 0,y).pipe((0,T.U)(F=>({repositoryPath:m.path,patch:F,isUnstaged:!1})),(0,k.s)(F=>{D.vE.matches(F)?this.store.dispatch(new E.NN("error",F.message)):this.store.dispatch(new E.NN("unhandled",`${F}`))}))}}ngOnInit(){this.previousUrl=this.routerHistoryService.history.length>=2?this.routerHistoryService.history.slice(-2)[0]:null,this.remotes=this.selectedRepository.pipe((0,T.U)(e=>e?.remotes??[])),this.headBlame.pipe((0,T.U)(e=>{if(!e)return[];const n={};for(const i of e.hunks)n[i.commitId]||(n[i.commitId]={id:i.commitId,date:i.commitDate,email:i.authorEmail,name:i.authorName,message:i.commitMessage,path:i.path});return Object.values(n).sort((i,g)=>g.date.getTime()-i.date.getTime())}),(0,_.R)(this.destroyed$)).subscribe(e=>{this.commits.next(e);const n=this.selectedCommitControl.value;this.selectedCommit.next(e.find(i=>i.id===n)??null)}),this.selectedCommitControl.valueChanges.pipe((0,R.x)(),(0,_.R)(this.destroyed$)).subscribe(e=>{const n=this.commits.value.find(i=>i.id===e)??null;n&&(this.selectedCommit.next(n),this.router.navigate([],{relativeTo:this.route,queryParams:{area:"commit","commit-id":e??"head",path:n.path}}))}),this.store.select(A.E.selectedRepository).pipe((0,_.R)(this.destroyed$)).subscribe(e=>{e||this.router.navigate(["/standard/open-repository"])}),(0,C.aj)([this.store.select(A.E.selectedRepository),this.route.queryParamMap]).pipe((0,tt.p)(100,void 0,{leading:!0,trailing:!0}),(0,T.U)(([e,n])=>({repository:e,area:n.get("area"),commitId:n.get("commit-id"),path:n.get("path")})),(0,Q.b)(({commitId:e,path:n})=>{this.selectedCommitControl.setValue("head"===e?null:e,{emitEvent:!0}),this.selectedPath.next(n)}),(0,I.w)(({repository:e,path:n,commitId:i,area:g})=>e&&n&&i?(0,B.D)([this.getPatch(e,n,i,g),this.repositoriesApi.blameFile(e.path,n,"head"===i?void 0:i).pipe((0,k.s)(l=>this.store.dispatch(new E.NN("unhandled",`${l}`))))]):(0,r.of)(null)),(0,R.x)((e,n)=>{if(!e||!n)return!e&&!n;const[i,g]=e,[l,U]=n;return i&&l?!(i.repositoryPath!==l.repositoryPath||i.isUnstaged!==l.isUnstaged||i.patch.newFileId!==l.patch.newFileId||i.patch.newFileIsDir!==l.patch.newFileIsDir||i.patch.newFileIsSubmodule!==l.patch.newFileIsSubmodule||i.patch.newFilePath!==l.patch.newFilePath||i.patch.oldFileId!==l.patch.oldFileId||i.patch.oldFileIsDir!==l.patch.oldFileIsDir||i.patch.oldFileIsSubmodule!==l.patch.oldFileIsSubmodule||i.patch.oldFilePath!==l.patch.oldFilePath||i.patch.status!==l.patch.status||i.patch.hunks.length!==l.patch.hunks.length||(0,a.Z)(i.patch.hunks,l.patch.hunks).some(([p,m])=>p?.lines.length!==m?.lines.length||p?.newStart!==m?.newStart||p?.oldStart!==m?.oldStart||p?.header!==m?.header||p&&m&&(0,a.Z)(p.lines,m.lines).some(([y,v])=>y?.content.length!==v?.content.length||y?.contentOffset!==v?.contentOffset||y?.newLineNo!==v?.newLineNo||y?.oldLineNo!==v?.oldLineNo||y?.origin!==v?.origin||y?.content!==v?.content))||(0,a.Z)(g.hunks,U.hunks).some(([p,m])=>p?.startLineNo!==m?.startLineNo||p?.endLineNo!==m?.endLineNo||p?.authorName!==m?.authorName||p?.authorEmail!==m?.authorEmail||p?.commitId!==m?.commitId||p?.commitMessage!==m?.commitMessage||p?.commitDate!==m?.commitDate||p?.path!==m?.path)):!i&&!l}),(0,I.w)(e=>e&&e[0]?(0,B.D)(this.getLines(e[0].repositoryPath,e[0].patch,e[0].isUnstaged,!1)).pipe((0,S.K)(n=>D.OZ.matches(n)||D.hK.matches(n)?(0,r.of)(null):this.store.dispatch(new E.NN("unhandled",`${n}`)).pipe((0,I.w)(()=>(0,$._)(n)))),(0,T.U)(n=>n?[e[0],e[1],n]:null)):(0,r.of)(null)),(0,Q.b)(e=>{if(e&&e[0]){const[n,i,g]=e;this.blame.next(i),this.diffLines.next({hunks:n.patch.hunks,oldLines:g[0],newLines:g[1],oldFilePath:n.patch.oldFilePath,newFilePath:n.patch.newFilePath,highlighted:!1})}else this.blame.next(null),this.diffLines.next(null)}),(0,I.w)(e=>e&&e[0]?(0,B.D)(this.getLines(e[0].repositoryPath,e[0].patch,e[0].isUnstaged,!0)).pipe((0,S.K)(n=>D.OZ.matches(n)||D.hK.matches(n)?(0,r.of)(null):this.store.dispatch(new E.NN("unhandled",`${n}`)).pipe((0,I.w)(()=>(0,$._)(n)))),(0,T.U)(n=>n?[e[0],n]:null)):(0,r.of)(null)),(0,_.R)(this.destroyed$)).subscribe(e=>{if(e&&e[0]){const[n,i]=e;this.diffLines.next({hunks:n.patch.hunks,oldLines:i[0],newLines:i[1],oldFilePath:n.patch.oldFilePath,newFilePath:n.patch.newFilePath,highlighted:!1})}else this.blame.next(null),this.diffLines.next(null)}),(0,C.aj)([this.store.select(A.E.selectedRepository),this.route.queryParamMap.pipe((0,T.U)(e=>e.get("path")),(0,R.x)())]).pipe((0,I.w)(([e,n])=>e&&n?this.repositoriesApi.blameFile(e.path,n):(0,r.of)(null)),(0,S.K)(()=>(0,r.of)(null)),(0,_.R)(this.destroyed$)).subscribe(e=>{e&&this.headBlame.next(e)})}getLines(e,n,i,g){if(n.oldFileIsSubmodule||n.newFileIsSubmodule){const l=n.hunks[0].lines.find(p=>p.oldLineNo>0),U=n.hunks[0].lines.find(p=>p.newLineNo>0);return[(0,r.of)([{lineNumber:1,text:l?.content??"",tokens:[{startIndex:0,endIndex:l?.content.length??0,scopes:["normal"]}]}]),(0,r.of)([{lineNumber:1,text:U?.content??"",tokens:[{startIndex:0,endIndex:U?.content.length??0,scopes:["normal"]}]}])]}return[n.oldFileId?this.highlightApi.getHighlightedFile(e,n.oldFileId,n.oldFilePath,g):(0,r.of)([]),i?this.highlightApi.getHighlightedFile(e,null,n.newFilePath,g):n.newFileId?this.highlightApi.getHighlightedFile(e,n.newFileId,n.newFilePath,g):(0,r.of)([])]}}return c.\u0275fac=function(e){return new(e||c)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(h.yh),t.Y36(et.T),t.Y36(nt.m),t.Y36(ot.a),t.Y36(it.X))},c.\u0275cmp=t.Xpm({type:c,selectors:[["ng-component"]],features:[t.qOj],decls:18,vars:14,consts:[[3,"searched"],[3,"path"],["appearance","standard",1,"commit-selector"],["panelClass","commit-select-list",3,"formControl"],[4,"ngIf"],["class","commit-select-option",3,"value",4,"ngFor","ngForOf"],["type","button","mat-icon-button","",1,"close-button",3,"click"],[3,"repository","blame","diffLines","search","commitChanged"],[3,"matTooltip","remotes","email"],[1,"message"],[1,"commit-select-option",3,"value"],[1,"message",3,"matTooltip"],[1,"date"]],template:function(e,n){1&e&&(t.TgZ(0,"header")(1,"app-find-control",0),t.NdJ("searched",function(g){return n.search$.next(g)}),t.qZA(),t._UZ(2,"app-condensed-path",1),t.ALo(3,"async"),t.TgZ(4,"mat-form-field",2)(5,"mat-label"),t._uU(6,"Select Commit"),t.qZA(),t.TgZ(7,"mat-select",3)(8,"mat-select-trigger"),t.YNc(9,yt,5,6,"span",4),t.ALo(10,"async"),t.qZA(),t.YNc(11,vt,8,12,"mat-option",5),t.ALo(12,"async"),t.qZA()(),t.TgZ(13,"button",6),t.NdJ("click",function(){return n.close()}),t.TgZ(14,"mat-icon"),t._uU(15,"close"),t.qZA()()(),t.TgZ(16,"main")(17,"app-blame-view",7),t.NdJ("commitChanged",function(g){return n.selectedCommitControl.setValue(g)}),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("path",t.lcZ(3,8,n.selectedPath)),t.xp6(5),t.Q6J("formControl",n.selectedCommitControl),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,10,n.selectedCommit)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(12,12,n.commits)),t.xp6(6),t.Q6J("repository",n.selectedRepository)("blame",n.blame)("diffLines",n.diffLines)("search",n.search$))},dependencies:[X.KE,X.hX,P.gD,P.$L,ct.ey,x.sg,x.O5,O.JJ,O.oH,at.lW,W.Hw,z.gM,H.A,st.j,rt.T,xt,x.Ov,x.uU],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}header[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:5px;outline:none;padding:0 10px}header[_ngcontent-%COMP%]   app-condensed-path[_ngcontent-%COMP%]{flex:1 1 auto;min-width:200px}header[_ngcontent-%COMP%]   .commit-selector[_ngcontent-%COMP%]{width:500px;margin-right:12px}header[_ngcontent-%COMP%]   .commit-selector[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{height:15px;vertical-align:middle;margin-right:5px}main[_ngcontent-%COMP%]{flex:1 0 auto;outline:none;overflow-x:auto;overflow-y:auto}"],data:{animation:[(0,M.X$)("slideLeft",[(0,M.eR)(":enter",[(0,M.oB)({position:"absolute",top:0,left:0,transform:"translateX(100%)"}),(0,M.jt)("200ms",(0,M.oB)({transform:"translateX(0)"}))]),(0,M.eR)(":leave",[(0,M.oB)({position:"absolute",top:0,left:0,transform:"translateX(0)"}),(0,M.jt)("200ms",(0,M.oB)({transform:"translateX(100%)"}))])])]},changeDetection:0}),(0,N.gn)([(0,h.Ph)(A.E.selectedRepository)],c.prototype,"selectedRepository",void 0),c})()}];let wt=(()=>{class c{}return c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[u.Bz.forChild(bt),u.Bz]}),c})(),Tt=(()=>{class c{}return c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[P.LD,w.I,L,wt]}),c})()},3164:(j,b,o)=>{o.d(b,{p:()=>u});var P=o(3489),w=o(353);const f={leading:!0,trailing:!1};function u(h,a=w.P,s=f){return r=>r.lift(new N(h,a,s.leading,s.trailing))}class N{constructor(a,s,r,C){this.duration=a,this.scheduler=s,this.leading=r,this.trailing=C}call(a,s){return s.subscribe(new M(a,this.duration,this.scheduler,this.leading,this.trailing))}}class M extends P.L{constructor(a,s,r,C,B){super(a),this.duration=s,this.scheduler=r,this.leading=C,this.trailing=B,this._hasTrailingValue=!1,this._trailingValue=null}_next(a){this.throttled?this.trailing&&(this._trailingValue=a,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(O,this.duration,{subscriber:this})),this.leading?this.destination.next(a):this.trailing&&(this._trailingValue=a,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const a=this.throttled;a&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),a.unsubscribe(),this.remove(a),this.throttled=null)}}function O(h){const{subscriber:a}=h;a.clearThrottle()}}}]);