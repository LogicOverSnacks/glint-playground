"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[736],{8831:(V,L,n)=>{n.d(L,{S:()=>e});var l=n(4650);const e=D=>{class P extends D{constructor(){super(...arguments),this.disableTransitions=!0}ngOnInit(){super.ngOnInit&&super.ngOnInit(),setTimeout(()=>{this.disableTransitions=!1},0)}static{this.\u0275fac=function(){let g;return function(T){return(g||(g=l.n5z(P)))(T||P)}}()}static{this.\u0275prov=l.Yz7({token:P,factory:P.\u0275fac})}}return P}},8070:(V,L,n)=>{n.d(L,{r:()=>e});var l=n(4650);class e{transform(P,E,g=P+"s"){return 1===E?P:g}static{this.\u0275fac=function(E){return new(E||e)}}static{this.\u0275pipe=l.Yjl({name:"plural",type:e,pure:!0})}}},3448:(V,L,n)=>{n.d(L,{I:()=>e});var l=n(4650);class e{constructor(P){this.template=P}static{this.\u0275fac=function(E){return new(E||e)(l.Y36(l.Rgc))}}static{this.\u0275dir=l.lG2({type:e,selectors:[["","appVirtualTreeLeafNode",""]]})}}},1123:(V,L,n)=>{n.d(L,{J:()=>e});var l=n(4650);class e{constructor(P){this.template=P}static{this.\u0275fac=function(E){return new(E||e)(l.Y36(l.Rgc))}}static{this.\u0275dir=l.lG2({type:e,selectors:[["","appVirtualTreeNode",""]]})}}},6725:(V,L,n)=>{n.d(L,{L:()=>R});var l=n(7340),e=n(4883),D=n(4004),P=n(8926),E=n(9967),g=n(8831),y=n(2771),T=n(3448),W=n(1123),M=n(4650),B=n(6895);function c(v,I){1&v&&M.GkF(0)}const $=function(v){return{$implicit:v}};function F(v,I){if(1&v&&(M.TgZ(0,"li"),M.YNc(1,c,1,0,"ng-container",2),M.qZA()),2&v){const u=I.$implicit,f=M.oxw();M.Udp("padding-left",10*u.depth,"px"),M.xp6(1),M.Q6J("ngTemplateOutlet",f.isLeaf(u)?f.leafNodeDirective.template:f.nodeDirective.template)("ngTemplateOutletContext",M.VKq(4,$,u))}}class R extends((0,P.j)(E.A,g.S,y.P)){constructor(){super(...arguments),this.isLeaf=I=>!I.children,this.expandVisibleNodes=I=>this.isLeaf(I)||!I.expanded?[I]:[I,...I.children.flatMap(this.expandVisibleNodes)]}ngOnInit(){super.ngOnInit(),this.visibleNodes=this.tree.pipe((0,D.U)(I=>I.reduce((u,f)=>[...u,...this.expandVisibleNodes(f)],[])))}trackById(I,u){return u.id}static{this.\u0275fac=function(){let I;return function(f){return(I||(I=M.n5z(R)))(f||R)}}()}static{this.\u0275cmp=M.Xpm({type:R,selectors:[["app-virtual-tree"]],contentQueries:function(u,f,b){if(1&u&&(M.Suo(b,W.J,5),M.Suo(b,T.I,5)),2&u){let A;M.iGM(A=M.CRH())&&(f.nodeDirective=A.first),M.iGM(A=M.CRH())&&(f.leafNodeDirective=A.first)}},viewQuery:function(u,f){if(1&u&&M.Gf(e.N7,5),2&u){let b;M.iGM(b=M.CRH())&&(f.viewports=b)}},inputs:{tree:"tree",itemSize:"itemSize"},features:[M.qOj],decls:5,vars:9,consts:[[3,"itemSize"],[3,"padding-left",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(u,f){1&u&&(M.TgZ(0,"cdk-virtual-scroll-viewport",0)(1,"ul"),M.ALo(2,"async"),M.YNc(3,F,2,6,"li",1),M.ALo(4,"async"),M.qZA()()),2&u&&(M.Q6J("itemSize",f.itemSize)("@null",void 0),M.xp6(1),M.Q6J("@slide",M.lcZ(2,5,f.visibleNodes)),M.xp6(2),M.Q6J("cdkVirtualForOf",M.lcZ(4,7,f.visibleNodes))("cdkVirtualForTrackBy",f.trackById))},dependencies:[e.xd,e.x0,e.N7,B.tP,B.Ov],styles:["cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{transition:height 225ms ease-in-out}li[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}"],data:{animation:[(0,l.X$)("null",[(0,l.eR)(":enter",[]),(0,l.eR)(":leave",[])]),(0,l.X$)("slide",[(0,l.eR)("* => *",[(0,l.ru)([(0,l.IO)("li:enter",[(0,l.oB)({height:0}),(0,l.jt)("225ms ease-in-out",(0,l.oB)({height:"*"}))],{optional:!0}),(0,l.IO)("li:leave",[(0,l.oB)({height:"*"}),(0,l.jt)("225ms ease-in-out",(0,l.oB)({height:0}))],{optional:!0})])])])]},changeDetection:0})}}},9418:(V,L,n)=>{n.d(L,{c:()=>D});var l=n(3179),e=n(4650);class D{static{this.\u0275fac=function(g){return new(g||D)}}static{this.\u0275mod=e.oAB({type:D})}static{this.\u0275inj=e.cJS({imports:[l.I]})}}},7615:(V,L,n)=>{n.d(L,{d:()=>P});var l=n(6421),e=n(9418),D=n(4650);class P{getPatchPath(g){switch(g.status){case l.v.Added:case l.v.Untracked:return g.newFilePath;case l.v.Conflicted:case l.v.Modified:case l.v.Renamed:return g.oldFilePath===g.newFilePath?g.newFilePath:`${g.oldFilePath} --\x3e ${g.newFilePath}`;case l.v.Deleted:return g.oldFilePath;default:throw new Error(`Don't know how to deal with patch status: ${l.v[g.status]}`)}}getPatchIcon(g){switch(g.status){case l.v.Added:case l.v.Untracked:return"add";case l.v.Conflicted:return"warning";case l.v.Modified:return"create";case l.v.Deleted:return"remove";case l.v.Renamed:return"swap_horiz";default:throw new Error(`Don't know how to deal with patch status: ${l.v[g.status]}`)}}getPatchIconColorClass(g){switch(g.status){case l.v.Added:case l.v.Untracked:return"green";case l.v.Conflicted:case l.v.Modified:return"orange";case l.v.Deleted:return"red";case l.v.Renamed:return"blue";default:throw new Error(`Don't know how to deal with patch status: ${l.v[g.status]}`)}}static{this.\u0275fac=function(y){return new(y||P)}}static{this.\u0275prov=D.Yz7({token:P,factory:P.\u0275fac,providedIn:e.c})}}},1815:(V,L,n)=>{n.d(L,{E:()=>Z});var l=n(4080),e=n(1135),D=n(5698),P=n(2722),E=n(4004),g=n(8926),y=n(9967),T=n(4462),W=n(8310),M=n(2120),B=n(6966),c=n(4650),$=n(8184),F=n(9867),R=n(6271),v=n(3394),I=n(6895),u=n(4859),f=n(7392),b=n(266),A=n(5773);function S(a,C){if(1&a){const _=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(_);const x=c.oxw(2);return c.KtG(x.openWithTerminal())}),c.TgZ(1,"mat-icon"),c._uU(2,"terminal"),c.qZA(),c._uU(3," Terminal "),c.qZA()}}function X(a,C){if(1&a){const _=c.EpF();c.TgZ(0,"button",6),c.NdJ("click",function(){c.CHM(_);const x=c.oxw(2);return c.KtG(x.openWithVsCode())}),c._UZ(1,"mat-icon",9),c._uU(2," Visual Studio Code "),c.qZA()}}function ee(a,C){if(1&a){const _=c.EpF();c.TgZ(0,"button",10),c.NdJ("click",function(){const h=c.CHM(_).$implicit,m=c.oxw(2);return c.KtG(m.openRemote(h.url))}),c._UZ(1,"mat-icon",11),c._uU(2),c.qZA()}if(2&a){const _=C.$implicit;c.Q6J("matTooltip",_.url),c.xp6(1),c.s9C("svgIcon",_.type),c.xp6(1),c.AsE(" ","bitbucket"===_.type?"Bitbucket":"github"===_.type?"GitHub":"gitlab"===_.type?"GitLab":"",": ",_.name," ")}}function j(a,C){if(1&a){const _=c.EpF();c.TgZ(0,"div",4)(1,"div",5),c._uU(2,"Open with..."),c.qZA(),c.TgZ(3,"button",6),c.NdJ("click",function(){c.CHM(_);const x=c.oxw();return c.KtG(x.openWithFileExplorer())}),c.TgZ(4,"mat-icon"),c._uU(5,"folder"),c.qZA(),c._uU(6),c.qZA(),c.YNc(7,S,4,0,"button",7),c.ALo(8,"async"),c.YNc(9,X,3,0,"button",7),c.ALo(10,"async"),c.YNc(11,ee,3,4,"button",8),c.ALo(12,"async"),c.qZA()}if(2&a){const _=c.oxw();c.xp6(6),c.hij(" ",_.folderText," "),c.xp6(1),c.Q6J("ngIf",c.lcZ(8,4,_.hasTerminal)),c.xp6(2),c.Q6J("ngIf",c.lcZ(10,6,_.hasVsCode)),c.xp6(2),c.Q6J("ngForOf",c.lcZ(12,8,_.remotes))}}class Z extends((0,g.j)(y.A)){constructor(C,_,p,x,h){super(),this.overlay=C,this.viewContainerRef=_,this.store=p,this.filesApi=x,this.providerUrlMatcherService=h,this.menuOverlayRef=new e.X(null),this.folderText=T.V?"Finder":T.E?"File Explorer":"File Manager",this.openMenu=(m,O,w)=>{m.preventDefault(),m.stopPropagation(),this.closeMenu();const U=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(O).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(U),U.attach(new l.UE(w,this.viewContainerRef)),(0,W.t)(U,!1).pipe((0,D.q)(1),(0,P.R)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))},this.openWithFileExplorer=()=>{const m=this.store.selectSnapshot(B.E.selectedRepositoryPath);if(!m)throw new Error("Cannot open repository in file explorer if repository has no path.");this.filesApi.openFileWithShell(m).subscribe(),this.closeMenu()},this.openWithTerminal=()=>{const m=this.store.selectSnapshot(B.E.selectedRepositoryPath);if(!m)throw new Error("Cannot open repository in terminal if repository has no path.");this.filesApi.openTerminal(m).subscribe(),this.closeMenu()},this.openWithVsCode=()=>{const m=this.store.selectSnapshot(B.E.selectedRepositoryPath);if(!m)throw new Error("Cannot open repository in vscode if repository has no path.");this.filesApi.openVsCode(m).subscribe(),this.closeMenu()},this.openRemote=m=>{window.open(m),this.closeMenu()}}ngOnInit(){this.remotes=this.store.select(B.E.selectedRemotes).pipe((0,E.U)(C=>(C??[]).map(_=>{const p=this.providerUrlMatcherService.matchProvider(_.url);return p?[_,p]:null}).filter(M.$K).map(([_,p])=>({type:p.type,url:this.providerUrlMatcherService.getUrl(p),name:_.name})))),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}static{this.\u0275fac=function(_){return new(_||Z)(c.Y36($.aV),c.Y36(c.s_b),c.Y36(F.yh),c.Y36(R.k),c.Y36(v.d))}}static{this.\u0275cmp=c.Xpm({type:Z,selectors:[["app-repository-actions-open-with"]],features:[c.qOj],decls:6,vars:0,consts:[["type","button","mat-stroked-button","","matTooltip","Open repository with...","appElementRef","",1,"item",3,"click"],["openWithMenuBtn","appElementRef"],[1,"launch-icon"],["openWithMenu",""],[1,"menu-panel"],[1,"menu-header"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"matTooltip","click"],[3,"svgIcon"]],template:function(_,p){if(1&_){const x=c.EpF();c.TgZ(0,"button",0,1),c.NdJ("click",function(m){c.CHM(x);const O=c.MAs(1),w=c.MAs(5);return c.KtG(p.openMenu(m,O,w))}),c.TgZ(2,"mat-icon",2),c._uU(3,"launch"),c.qZA()(),c.YNc(4,j,13,10,"ng-template",null,3,c.W1O)}},dependencies:[I.sg,I.O5,u.lW,f.Hw,b.gM,A.F,I.Ov],styles:[".item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0})}}},98:(V,L,n)=>{n.d(L,{z:()=>F});var l=n(2843),e=n(262),D=n(4004),P=n(2435),E=n(2120),g=n(8523),y=n(4889),T=n(1129),W=n(8724),M=n(9077),B=n(4650),c=n(9867),$=n(790);class F{constructor(v,I){this.store=v,this.commitsApi=I,this.startEdit=(u,f)=>this.store.dispatch(new T.z0(u,{name:"Edit commits",detail:`from ${f}`,do:()=>this.store.dispatch(new T.LF(u,f))})),this.discardEdit=u=>this.store.dispatch(new T.z0(u,{name:"Discard commit edits",do:()=>this.commitsApi.discardCommitEditing(u)})),this.saveEdits=u=>this.store.dispatch(new T.z0(u,{name:"Save commit edits",do:()=>this.commitsApi.completeCommitEditing(u).pipe((0,g.C)(()=>this.store.dispatch(new y.Vu(u,[y.nh.commits,y.nh.currentBranchCommitId,y.nh.headCommitId,y.nh.mergeHeads,y.nh.merges,y.nh.references,y.nh.stagedChanges,y.nh.submodules,y.nh.unstagedChanges]))))})),this.editCommitDetails=(u,f,b)=>this.store.dispatch(new T.z0(u,{name:"Edit commit",detail:b,do:()=>this.commitsApi.editCommitDetails(u,f,b,this.getCommitter()).pipe((0,e.K)(A=>P.L8.matches(A)?(0,l._)(()=>new E.ZR(A.message,A.isHtml)):(0,l._)(()=>A)))})).pipe((0,D.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(u))?.state)),this.squashCommit=(u,f,b)=>this.store.dispatch(new T.z0(u,{name:"Squash commit",detail:`${f} ${b}`,do:()=>this.commitsApi.squashCommit(u,f,b,this.getCommitter()).pipe((0,e.K)(A=>P.BO.matches(A)?(0,l._)(()=>new E.ZR(A.message)):P.L8.matches(A)?(0,l._)(()=>new E.ZR(A.message,A.isHtml)):(0,l._)(()=>A)))})).pipe((0,D.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(u))?.state)),this.insertCommit=(u,f,b)=>this.store.dispatch(new T.z0(u,{name:"Insert commit",detail:`${f} ${b}`,do:()=>this.commitsApi.insertCommit(u,f,b,this.getCommitter()).pipe((0,e.K)(A=>P.L8.matches(A)?(0,l._)(()=>new E.ZR(A.message,A.isHtml)):(0,l._)(()=>A)))})).pipe((0,D.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(u))?.state)),this.moveCommitChanges=(u,f,b,A)=>this.store.dispatch(new T.z0(u,{name:"Move commit changes",detail:`${f} ${b}`,do:()=>this.commitsApi.moveCommitChanges(u,f,b,A,this.getCommitter()).pipe((0,e.K)(S=>P.L8.matches(S)?(0,l._)(()=>new E.ZR(S.message,S.isHtml)):(0,l._)(()=>S)))})).pipe((0,D.U)(()=>this.store.selectSnapshot(W.h.mostRecentAction(u))?.state))}getCommitter(){const v=this.store.selectSnapshot(M.$.selectedProfile);return v&&v.name&&v.email?{name:v.name,email:v.email}:null}static{this.\u0275fac=function(I){return new(I||F)(B.LFG(c.yh),B.LFG($.T))}}static{this.\u0275prov=B.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"})}}},4874:(V,L,n)=>{n.d(L,{p:()=>D});var l=n(2686),e=n(4650);class D{constructor(){this.parseReference=E=>{const g=D.referenceRegex.exec(E);if(!g)throw new Error(`Reference invalid: ${E}`);if("remotes"===g[1]){const y=D.remoteBranchRegex.exec(E);if(!y)throw new Error(`Remote reference invalid: ${E}`);return{branch:y[2],sourceName:y[1],sourceType:"remote"}}return"stash"===g[1]?{branch:"stash",sourceName:"stash",sourceType:"stash"}:{branch:g[2],sourceName:"heads"===g[1]?"local":"tag",sourceType:"heads"===g[1]?"local":"tag"}},this.getBranchTypeIcon=E=>{switch(E){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"archive";case"tag":return"label";default:throw new Error(`Unknown reference type: ${E}`)}}}static{this.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/}static{this.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/}calculateBranches(E,g){const y=(0,l.Z)(E.map(this.parseReference),({branch:T})=>T);return Object.entries(y).map(([T,W])=>({name:T,sources:W.map(M=>({name:M.sourceName,type:M.sourceType,icon:this.getBranchTypeIcon(M.sourceType)}))})).sort((T,W)=>{const M=T.sources.some(v=>"local"===v.type&&`refs/heads/${T.name}`===g),B=T.sources.some(v=>"local"===v.type&&`refs/heads/${W.name}`===g);if(M&&!B)return-1;if(!M&&B)return 1;const c=T.sources.some(v=>"local"===v.type),$=W.sources.some(v=>"local"===v.type);if(c&&!$)return-1;if(!c&&$)return 1;const F=T.sources.some(v=>"remote"===v.type),R=W.sources.some(v=>"remote"===v.type);return F&&!R?-1:!F&&R?1:T.sources.length>W.sources.length?-1:T.sources.length<W.sources.length?1:T.name>W.name?-1:T.name<W.name?1:0}).slice(0,30)}static{this.\u0275fac=function(g){return new(g||D)}}static{this.\u0275prov=e.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}}},3989:(V,L,n)=>{n.d(L,{$:()=>j});var l=n(1134),e=n(539);const P=function D(Z,a){return Z<a},g=function E(Z,a){return Z&&Z.length?(0,l.Z)(Z,(0,e.Z)(a,2),P):void 0};var y=n(2382);var M=n(1256),B=n(3713),c=n(7711),$=n(9512),F=n(7988),R=n(6932),v=n(3228);var b=n(7965),A=n(7118);const X=(0,b.Z)(function(Z,a){return(0,A.Z)(Z)?function u(Z,a,C,_){var p=-1,x=c.Z,h=!0,m=Z.length,O=[],w=a.length;if(!m)return O;C&&(a=(0,F.Z)(a,(0,R.Z)(C))),_?(x=$.Z,h=!1):a.length>=200&&(x=v.Z,h=!1,a=new B.Z(a));e:for(;++p<m;){var U=Z[p],K=null==C?U:C(U);if(U=_||0!==U?U:0,h&&K==K){for(var H=w;H--;)if(a[H]===K)continue e;O.push(U)}else x(a,K,_)||O.push(U)}return O}(Z,a):[]});var ee=n(4650);class j{constructor(){this.isDashed=a=>"head"===a.id||a.id.startsWith("merge:")}static{this.xUnit=15}static{this.yUnit=28}static{this.xOffset=7.5}static{this.yOffset=13}isIndexInBounds(a,C,_){const p=a*j.yUnit;return p>=C&&p<_-j.yUnit}calculateVisible(a,C,_,p,x){return{commitDetails:a.slice(p,x),commitTrails:C.filter(h=>h.minYIndexWithMerges<=x&&h.maxYIndexWithMerges>=p),mergePaths:_.filter(h=>h.from.yIndex>=p&&h.to.some(m=>m.yIndex<=x))}}calculate(a,C,_,p,x,h,m){const O={};let w=[],U=[],K=[];const H=(a?1:0)+C.length;p.forEach((o,t)=>{O[o.id]={id:o.id,yIndex:t+H,commit:o}});const Y=[];C.forEach((o,t)=>{const s=`merge:${o.fromCommitId}:${o.toCommitId}`,i={id:s,message:o.message??`merge: from '${o.fromCommitId}' into '${o.toCommitId}'`,parentIds:[o.toCommitId,o.fromCommitId],time:0,references:[],authorEmail:"",authorName:""};Y.push(i),O[s]={id:s,yIndex:t+(a?1:0),commit:i}}),_.forEach(o=>{const t=O[o.id];!t||2!==t.commit.parentIds.length||(t.stash={index:o.index,workingDirCommitId:o.id,indexCommitId:t.commit.parentIds[1]})});const G=a?{id:"head",message:"",parentIds:a.parentId?[a.parentId,...a.mergeHeads]:[...a.mergeHeads],time:0,references:[],authorEmail:"",authorName:""}:null;a&&(O.head={id:"head",yIndex:0,commit:G});const d=G?[G,...Y,...p]:[...Y,...p];if(d.forEach(o=>{const t=O[o.id];t.trail||this.calculateTrail(t,O,w,U),!t.stash&&o.parentIds.length>1&&o.parentIds.slice(1).forEach(s=>{const i=O[s];if(i)if(i.mergeFrom)i.mergeFrom.to.push(t);else{const r={from:i,to:[t]};i.mergeFrom=r,K.push(r)}})}),({mergePaths:K,lanes:U}=this.calculateMergePaths(K,U,x,h)),this.calculateColors(w,m),a&&a.parentId&&O[a.parentId]){const o=w.find(t=>0===t.minYIndex);if(o){o.commits=o.commits.filter(s=>"head"!==s.id);const t=g(o.commits,s=>s.yIndex);o.minYIndex=t?.yIndex??0,o.minYIndexWithMerges=t?.yIndex??0,this.createUncommittedTrail(O.head,O[a.parentId],w,o.colorIndex,o.lane)}}return Y.forEach((o,t)=>{const s=w.find(i=>i.minYIndex===t+(a?1:0));if(s&&O[o.parentIds[0]]){if(s.commits=s.commits.filter(i=>i.id!==o.id),s.commits.length<=0)w=w.filter(i=>i!==s);else{const i=g(s.commits.filter(r=>"head"!==r.id&&!r.id.startsWith("merge:")),r=>r.yIndex);s.minYIndex=i?.yIndex??0,s.minYIndexWithMerges=i?.yIndex??0}this.createUncommittedTrail(O[o.id],O[o.parentIds[0]],w,s.colorIndex,s.lane)}}),_.forEach(o=>{const t=O[o.id];if(!t)return;const i=t.trail,r=O[t.commit.parentIds[0]];if(r){if(i.commits=i.commits.filter(k=>k.id!==o.id),i.commits.length<=0)w=w.filter(k=>k!==i);else{const k=g(i.commits,N=>N.yIndex);i.minYIndex=k?.yIndex??0,i.minYIndexWithMerges=k?.yIndex??0}this.createUncommittedTrail(t,r,w,i.colorIndex,i.lane)}}),{commitDetails:O,commitTrails:w,lanes:U,mergePaths:K,headCommit:G,orderedCommits:d}}createUncommittedTrail(a,C,_,p,x){let h=C.yIndex;C.mergeFrom&&C.mergeFrom.to.length>0&&C.mergeFrom.to.some(O=>!this.isDashed(O))&&(h=Math.min(...C.mergeFrom.to.filter(O=>!this.isDashed(O)).map(({yIndex:O})=>O))+.25,h<a.yIndex&&(h=a.yIndex+.5),_.push({trailIndex:_.length,minYIndex:h,maxYIndex:C.yIndex,minYIndexWithMerges:h,maxYIndexWithMerges:C.yIndex,colorIndex:p,commits:[],isDashed:!1,lane:x}));const m={trailIndex:_.length,minYIndex:a.yIndex,maxYIndex:h,minYIndexWithMerges:a.yIndex,maxYIndexWithMerges:h,colorIndex:p,commits:[a],isDashed:!0,lane:x};return a.trail=m,_.push(m),m}calculateTrail(a,C,_,p){const x={trailIndex:_.length,minYIndex:a.yIndex,maxYIndex:a.yIndex,minYIndexWithMerges:a.yIndex,maxYIndexWithMerges:a.yIndex,colorIndex:null,commits:[],isDashed:!1};if(a.commit.parentIds.length<=0)a.trail=x,x.commits.push(a),x.maxYIndex=a.yIndex,x.maxYIndexWithMerges=a.yIndex;else{let m=a;for(;m&&!m.trail&&m.commit.parentIds.length>0;)m.trail=x,x.maxYIndex=m.yIndex,x.maxYIndexWithMerges=m.yIndex,x.commits.push(m),m=C[m.commit.parentIds[0]];m&&(x.maxYIndex=m.yIndex,x.maxYIndexWithMerges=m.yIndex,m.trail||(m.trail=x,x.commits.push(m)))}let h=p.find(m=>this.getLaneMaxYIndex(m)<x.minYIndex);return h||(h={xIndex:p.length,occupations:[]},p.push(h)),h.occupations.push({type:"commit-trail",minYIndex:x.minYIndex,maxYIndex:x.maxYIndex}),x.lane=h,_.push(x),x}calculateMergePaths(a,C,_,p){C=C.map(h=>({...h,occupations:h.occupations.filter(m=>"merge-path"!==m.type)})).filter(h=>h.occupations.length>0);const x=[...a];return a.forEach(h=>{const m=[],O=[];let w;h.to.forEach(d=>{h.from.trail.minYIndexWithMerges>d.yIndex&&(h.from.trail.minYIndexWithMerges=d.yIndex),h.from.trail.maxYIndexWithMerges<d.yIndex&&(h.from.trail.maxYIndexWithMerges=d.yIndex),d.trail.minYIndexWithMerges>h.from.yIndex&&(d.trail.minYIndexWithMerges=h.from.yIndex),d.trail.maxYIndexWithMerges<h.from.yIndex&&(d.trail.maxYIndexWithMerges=h.from.yIndex)});const U=h.from.trail.lane.xIndex,K=_(U);let H=[],Y=h.to;const G=h.to.every(this.isDashed);if(h.from.trail.minYIndex<h.from.yIndex){const d=h.from.trail.commits.findIndex(t=>t.id===h.from.id),o=h.from.trail.commits[d-1];H=h.to.filter(t=>t.yIndex>o.yIndex),Y=h.to.filter(t=>t.yIndex<=o.yIndex),w=o.yIndex}else{m.push(`M ${K} ${p(h.from.yIndex)}`),m.push(`V ${p(h.from.yIndex-.5)}`),w=h.from.yIndex-1;const d=function T(Z,a){return Z&&Z.length?(0,l.Z)(Z,(0,e.Z)(a,2),y.Z):void 0}(Y,o=>o.yIndex);if(d&&d.yIndex===h.from.yIndex-1){Y=Y.filter(t=>t.id!==d.id);const o=`L ${_(d.trail.lane.xIndex)} ${p(d.yIndex)}`;this.isDashed(d)?O.push(o):m.push(o)}}if(Y.length>0){const d=Math.min(...Y.map(r=>r.yIndex)),o=C.filter(r=>!this.isLaneOccupied(r,d+1,w)),t=g(o,r=>[...Y,h.from].reduce((k,N)=>k+Math.abs(N.trail.lane.xIndex-r.xIndex),0))??{xIndex:C.length,occupations:[]};0===o.length&&C.push(t),t.occupations.push({type:"merge-path",minYIndex:d+1,maxYIndex:w});const s=Y.filter(this.isDashed),i=Y.filter(r=>!this.isDashed(r));if(m.push(...i.flatMap(r=>[`M ${_(t.xIndex)} ${p(r.yIndex+.5)}`,`L ${this.adjustForDashedLine(!1,t.xIndex,r.trail.lane.xIndex,r.yIndex+.5,r.yIndex,_,p)}`])),O.push(...s.flatMap(r=>[`M ${_(t.xIndex)} ${p(r.yIndex+.5)}`,`L ${this.adjustForDashedLine(!0,t.xIndex,r.trail.lane.xIndex,r.yIndex+.5,r.yIndex,_,p)}`])),G)m.push(`M ${K} ${p(w+.5)}`,`L ${_(t.xIndex)} ${p(w+.25)}`,`V ${p(d+.5)}`);else{const r=Math.min(...i.map(k=>k.yIndex));m.push(`M ${K} ${p(w+.5)}`,`L ${_(t.xIndex)} ${p(w+.25)}`,`V ${p(r+.5)}`),O.push(`M ${K} ${p(r+.5)}`,`V ${p(d+.5)}`)}}m.push(...H.filter(d=>!this.isDashed(d)).flatMap(d=>[`M ${K} ${p(d.yIndex+.25)}`,`L ${this.adjustForDashedLine(!1,U,d.trail.lane.xIndex,d.yIndex+.25,d.yIndex,_,p)}`])),O.push(...H.filter(this.isDashed).flatMap(d=>[`M ${K} ${p(d.yIndex+.25)}`,`L ${this.adjustForDashedLine(!0,U,d.trail.lane.xIndex,d.yIndex+.25,d.yIndex,_,p)}`])),G?(h.isDashed=!0,h.path=[...m,...O].join(" ")):(h.isDashed=!1,h.path=m.join(" "),O.length>0&&x.push({from:h.from,isDashed:!0,path:O.join(" "),to:h.to.filter(this.isDashed)}))}),{mergePaths:x,lanes:C}}calculateColors(a,C){const _=(0,M.Z)(0,C),p=[];a.forEach(x=>{const h=p.filter(O=>O.minYIndexWithMerges<=x.maxYIndexWithMerges&&O.maxYIndexWithMerges>=x.minYIndexWithMerges).map(O=>O.colorIndex),m=X(_,...h);x.colorIndex=m.length>0?m[0]:x.trailIndex%C,p.push(x)})}getLaneMaxYIndex(a){return a.occupations[a.occupations.length-1].maxYIndex}isLaneOccupied(a,C,_){return a.occupations.some(p=>p.minYIndex<=_&&p.maxYIndex>=C)}adjustForDashedLine(a,C,_,p,x,h,m){const w=a?p>x?.15:-.15:0;return`${h(_+(a?C>_?.3:-.3:0))} ${m(x+w)}`}static{this.\u0275fac=function(C){return new(C||j)}}static{this.\u0275prov=ee.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"})}}},2960:(V,L,n)=>{n.d(L,{i:()=>G});var l=n(655),e=n(4650),D=n(9867),P=n(1135),E=n(8926),g=n(9967),y=n(9077),T=n(9578),W=n(811),M=n(6895),B=n(7392),c=n(266),$=n(4883),F=n(6377),R=n(6421),v=n(2771),I=n(4462),u=n(7615),f=n(6709),b=n(9131);function A(d,o){if(1&d){const t=e.EpF();e.TgZ(0,"mat-checkbox",7),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().$implicit,k=e.oxw();return e.KtG(k.checkedChanged.next([r,i.checked]))}),e.qZA()}if(2&d){const t=e.oxw().$implicit,s=e.oxw();e.Q6J("checked",s.isChecked(t))}}function S(d,o){if(1&d){const t=e.EpF();e.TgZ(0,"li",3),e.NdJ("contextmenu",function(i){const k=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.contextMenuOpened.next([k,i]))}),e.TgZ(1,"mat-icon",4),e._uU(2),e.qZA(),e.YNc(3,A,1,1,"mat-checkbox",5),e.TgZ(4,"app-condensed-path",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit,k=e.oxw();return e.KtG(k.selectedChanged.next(r))}),e.qZA()()}if(2&d){const t=o.$implicit,s=e.oxw();e.ekj("selected",s.isSelected(t))("checked",s.isChecked(t)),e.xp6(1),e.Q6J("ngClass",s.getPatchIconColorClass(t)),e.xp6(1),e.Oqu(s.getPatchIcon(t)),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("path",s.getPatchPath(t))}}class X extends((0,E.j)(g.A,v.P)){constructor(o){super(),this.commitDetailService=o,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.keyPressDisabled=!1}ngOnChanges(o){o.selected&&(this.keyPressDisabled=!1),o.patches&&(this.orderedPatches=(0,F.Z)(this.patches,[t=>t.status===R.v.Conflicted,t=>(t.oldFilePath??t.newFilePath??"").toLowerCase()],["desc","asc"]))}trackByPatch(o,t){return`${t.oldFilePath}|${t.newFilePath}|${t.status}`}getPatchPath(o){return this.commitDetailService.getPatchPath(o)}getPatchIcon(o){return this.commitDetailService.getPatchIcon(o)}getPatchIconColorClass(o){return this.commitDetailService.getPatchIconColorClass(o)}isChecked(o){return this.checked?.some(({oldFilePath:t,newFilePath:s})=>t===o.oldFilePath&&s===o.newFilePath)}isSelected(o){return o.oldFilePath===this.selected?.oldFilePath&&o.newFilePath===this.selected.newFilePath}keyPressed(o,t){if(this.keyPressDisabled)return;o.preventDefault();const s=this.selected,i=t.findIndex(({oldFilePath:k,newFilePath:N})=>k===s?.oldFilePath&&N===s?.newFilePath);let r=null;switch(o.key){case"ArrowUp":if(!(I.V?o.metaKey:o.ctrlKey)){i>0&&(r=i-1);break}case"Home":r=0;break;case"ArrowDown":if(!(I.V?o.metaKey:o.ctrlKey)){i<t.length-1&&(r=i+1);break}case"End":r=t.length-1;break;case"Escape":i>=0&&(r=i)}if(null!==r){this.keyPressDisabled=!0,this.selectedChanged.next(t[r]);const k=this.viewports.first,N=k.measureScrollOffset("top"),Q=N+k.getViewportSize(),z=22*r;(z<N||z>=Q)&&k.scrollToIndex(r)}}static{this.\u0275fac=function(t){return new(t||X)(e.Y36(u.d))}}static{this.\u0275cmp=e.Xpm({type:X,selectors:[["app-patch-list"]],viewQuery:function(t,s){if(1&t&&e.Gf($.N7,5),2&t){let i;e.iGM(i=e.CRH())&&(s.viewports=i)}},inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj,e.TTD],decls:3,vars:7,consts:[["tabindex","0",1,"item-list-container",3,"itemSize","maxBufferPx","minBufferPx","keydown"],[1,"patch-list"],[3,"selected","checked","contextmenu",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"contextmenu"],["inline","",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"name",3,"path","click"],[3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0),e.NdJ("keydown",function(r){return s.keyPressed(r,s.patches)}),e.TgZ(1,"ul",1),e.YNc(2,S,5,8,"li",2),e.qZA()()),2&t&&(e.Q6J("itemSize",22)("maxBufferPx",400)("minBufferPx",200),e.xp6(1),e.ekj("checkboxes",s.checked),e.xp6(1),e.Q6J("cdkVirtualForOf",s.orderedPatches)("cdkVirtualForTrackBy",s.trackByPatch))},dependencies:[f.oG,$.xd,$.x0,$.N7,M.mk,M.O5,B.Hw,b.j],styles:["[_nghost-%COMP%]{display:contents}.item-list-container[_ngcontent-%COMP%]{margin-left:-16px;margin-right:-16px;height:100%;contain:content;outline:none}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{position:relative}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;height:22px;line-height:22px;padding-left:16px;padding-right:16px;position:relative;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px;--mdc-checkbox-ripple-size: 28px;--mdc-checkbox-touch-target-size: 22px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px;margin-left:-2px;margin-right:2px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:calc(100% - 22px)}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:none}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%]{display:block}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background-color:#616161}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%]{color:#ef5350}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%]{color:#4caf50}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.dark-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background-color:#e0e0e0}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%]{color:#ef5350}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%]{color:#4caf50}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%]{color:#d8a669}.light-theme[_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}"],changeDetection:0})}}var ee=n(2686),j=n(9841),Z=n(9646),a=n(4004),C=n(4782),_=n(6725),p=n(3448),x=n(1123);function h(d,o){if(1&d){const t=e.EpF();e.TgZ(0,"mat-checkbox",8),e.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){e.CHM(t);const r=e.oxw().$implicit,k=e.oxw();return e.KtG(k.clickNodeCheckbox(r,i.checked))}),e.qZA()}if(2&d){const t=e.oxw().$implicit;e.Q6J("checked","all"===t.checked)("indeterminate","some"===t.checked)}}function m(d,o){if(1&d){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(i){const k=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.toggleNodeExpanded(i,k))}),e.TgZ(1,"mat-icon",4),e._uU(2,"folder"),e.qZA(),e.YNc(3,h,1,2,"mat-checkbox",5),e.TgZ(4,"span",6),e._uU(5),e.qZA(),e.TgZ(6,"mat-icon",7),e._uU(7),e.qZA()()}if(2&d){const t=o.$implicit,s=e.oxw();e.ekj("checked","all"===t.checked),e.xp6(3),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("matTooltip",t.id),e.xp6(1),e.Oqu(t.segment),e.xp6(2),e.Oqu(t.expanded?"expand_less":"expand_more")}}function O(d,o){if(1&d){const t=e.EpF();e.TgZ(0,"mat-checkbox",13),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().$implicit,k=e.oxw();return e.KtG(k.checkedChanged.next([r.patch,i.checked]))}),e.qZA()}if(2&d){const t=e.oxw().$implicit;e.Q6J("checked",t.checked)}}function w(d,o){if(1&d){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("contextmenu",function(i){const k=e.CHM(t).$implicit,N=e.oxw();return e.KtG(N.contextMenuOpened.next([k.patch,i]))}),e.TgZ(1,"mat-icon",10),e._uU(2),e.qZA(),e.YNc(3,O,1,1,"mat-checkbox",11),e.TgZ(4,"span",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,k=e.oxw();return e.KtG(k.selectedChanged.next(r.patch))}),e._uU(5),e.qZA()()}if(2&d){const t=o.$implicit,s=e.oxw();let i;e.ekj("checked",t.checked)("selected",s.isSelected(t.patch)),e.xp6(1),e.Q6J("ngClass",s.getPatchIconColorClass(t.patch)),e.xp6(1),e.Oqu(s.getPatchIcon(t.patch)),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("matTooltip",null!==(i=s.getPatchPath(t.patch))&&void 0!==i?i:""),e.xp6(1),e.Oqu(t.segment)}}class U extends((0,E.j)(g.A)){constructor(o){super(),this.commitDetailService=o,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.collapsedNodeIds=new P.X(new Set),this.toggleNodeExpanded=(t,s)=>{t.preventDefault(),t.stopPropagation();const i=new Set(this.collapsedNodeIds.value);i.has(s.id)?(i.delete(s.id),this.collapsedNodeIds.next(i)):(i.add(s.id),this.collapsedNodeIds.next(i))}}ngOnInit(){this.tree=(0,j.a)([this.patches,this.checked??(0,Z.of)(null),this.collapsedNodeIds]).pipe((0,a.U)(([o,t,s])=>{const i=o.map(r=>({patch:r,segments:(r.newFilePath??r.oldFilePath??"").split("/")}));return this.buildTree(i,"",0,t,s)}),(0,C.d)(1))}getPatchPath(o){return this.commitDetailService.getPatchPath(o)}getPatchIcon(o){return this.commitDetailService.getPatchIcon(o)}getPatchIconColorClass(o){return this.commitDetailService.getPatchIconColorClass(o)}isSelected(o){return o.oldFilePath===this.selected?.oldFilePath&&o.newFilePath===this.selected.newFilePath}clickNodeCheckbox(o,t){const s=i=>i.reduce((r,k)=>[...r,..."patch"in k?[k]:s(k.children)],[]);for(const i of s(o.children))this.checkedChanged.next([i.patch,t])}buildTree(o,t,s,i,r){return Object.entries((0,ee.Z)(o,({segments:Q})=>Q[0])).sort(([Q],[z])=>Q.localeCompare(z,void 0,{numeric:!0})).flatMap(([Q,z])=>{const ce=`${t}${Q}/`,ae=`${t}${Q}`,se=z.filter(({segments:J})=>J.length>1),re=i?z.every(({patch:J})=>i.some(({oldFilePath:q,newFilePath:ie})=>q===J.oldFilePath&&ie===J.newFilePath))?"all":z.some(({patch:J})=>i.some(({oldFilePath:q,newFilePath:ie})=>q===J.oldFilePath&&ie===J.newFilePath))?"some":"none":"none",te=se.length>0?{id:ce,depth:s,expanded:!r.has(ce),children:this.buildTree(se.map(({patch:J,segments:q})=>({patch:J,segments:q.slice(1)})),ce,s+1,i,r),segment:Q,checked:re}:null,ne=z.find(({segments:J})=>J.length<=1),oe=ne?{id:ae,depth:s,segment:Q,patch:ne.patch,checked:i?.some(({oldFilePath:J,newFilePath:q})=>J===ne.patch.oldFilePath&&q===ne.patch.newFilePath)??!1}:null;return oe&&te?[oe,te]:te?[te]:oe?[oe]:[]})}static{this.\u0275fac=function(t){return new(t||U)(e.Y36(u.d))}}static{this.\u0275cmp=e.Xpm({type:U,selectors:[["app-patch-tree"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj],decls:3,vars:4,consts:[[3,"tree","itemSize"],["class","node-item",3,"checked","click",4,"appVirtualTreeNode"],["class","leaf-item",3,"checked","selected","contextmenu",4,"appVirtualTreeLeafNode"],[1,"node-item",3,"click"],["inline","",1,"node-icon"],[3,"checked","indeterminate","click","change",4,"ngIf"],[1,"text",3,"matTooltip"],[1,"expand-icon"],[3,"checked","indeterminate","click","change"],[1,"leaf-item",3,"contextmenu"],["inline","",1,"node-icon",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"text",3,"matTooltip","click"],[3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"app-virtual-tree",0),e.YNc(1,m,8,6,"div",1),e.YNc(2,w,6,9,"div",2),e.qZA()),2&t&&(e.ekj("checkboxes",!!s.checked),e.Q6J("tree",s.tree)("itemSize",22))},dependencies:[f.oG,M.mk,M.O5,B.Hw,c.gM,_.L,p.I,x.J],styles:["[_nghost-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport{contain:content;scrollbar-gutter:stable;margin-left:-16px;margin-right:-16px}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper{width:100%}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper>ul{overflow-x:auto;overflow-y:hidden}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-spacer{position:relative}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected){background-color:#616161}.node-item[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]{margin-left:16px;display:flex;justify-content:space-between;cursor:pointer;line-height:22px;height:22px;user-select:none;align-items:center;min-width:200px}.node-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px;margin-left:-2px;margin-right:2px}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px;--mdc-checkbox-ripple-size: 28px;--mdc-checkbox-touch-target-size: 22px}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%]{font-size:16px}.node-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.node-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%]{flex:0 0 auto;color:#ffffffb3;line-height:22px}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .node-icon[_ngcontent-%COMP%]{display:none}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .checkbox-button[_ngcontent-%COMP%]{display:block}.dark-theme[_nghost-%COMP%]   app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected), .dark-theme   [_nghost-%COMP%]   app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected){background-color:#616161}.dark-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%]{color:#ef5350}.dark-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%]{color:#4caf50}.dark-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.dark-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.light-theme[_nghost-%COMP%]   app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected), .light-theme   [_nghost-%COMP%]   app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected){background-color:#e0e0e0}.light-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%]{color:#ef5350}.light-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%]{color:#4caf50}.light-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%]{color:#d8a669}.light-theme[_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}"],changeDetection:0})}}function K(d,o){if(1&d){const t=e.EpF();e.TgZ(0,"app-patch-list",6),e.NdJ("checkedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkedChanged.next(i))})("selectedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedChanged.next(i))})("contextMenuOpened",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.contextMenuOpened.next(i))}),e.ALo(1,"async"),e.qZA()}if(2&d){const t=e.oxw(2);e.Q6J("patches",t.patches)("checked",e.lcZ(1,3,t.checked))("selected",t.selected)}}function H(d,o){if(1&d){const t=e.EpF();e.TgZ(0,"app-patch-tree",6),e.NdJ("checkedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkedChanged.next(i))})("selectedChanged",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedChanged.next(i))})("contextMenuOpened",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.contextMenuOpened.next(i))}),e.qZA()}if(2&d){const t=e.oxw(2);e.Q6J("patches",t.patches$)("checked",t.checked)("selected",t.selected)}}function Y(d,o){if(1&d){const t=e.EpF();e.ynx(0),e.TgZ(1,"header")(2,"mat-button-toggle-group",1),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.changePatchView(i.value))}),e.TgZ(3,"mat-button-toggle",2)(4,"mat-icon"),e._uU(5,"list"),e.qZA()(),e.TgZ(6,"mat-button-toggle",3),e._UZ(7,"mat-icon",4),e.qZA()()(),e.YNc(8,K,2,5,"app-patch-list",5),e.YNc(9,H,1,3,"app-patch-tree",5),e.BQk()}if(2&d){const t=o.ngIf;e.xp6(2),e.Q6J("value",t),e.xp6(6),e.Q6J("ngIf","list"===t),e.xp6(1),e.Q6J("ngIf","tree"===t)}}let G=(()=>{class d extends((0,E.j)(g.A)){constructor(t){super(),this.store=t,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.patches$=new P.X([])}ngOnChanges(t){t.patches&&this.patches$.next(this.patches)}changePatchView(t){this.store.dispatch(new T.eh(t))}static{this.\u0275fac=function(s){return new(s||d)(e.Y36(D.yh))}}static{this.\u0275cmp=e.Xpm({type:d,selectors:[["app-patches-view"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj,e.TTD],decls:2,vars:3,consts:[[4,"ngIf"],[3,"value","change"],["value","list","matTooltip","List View"],["value","tree","matTooltip","Tree View"],["svgIcon","file-tree"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened",4,"ngIf"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened"]],template:function(s,i){1&s&&(e.YNc(0,Y,10,3,"ng-container",0),e.ALo(1,"async")),2&s&&e.Q6J("ngIf",e.lcZ(1,1,i.view))},dependencies:[W.A9,W.Yi,M.O5,B.Hw,c.gM,X,U,M.Ov],styles:["[_nghost-%COMP%]{display:contents}header[_ngcontent-%COMP%]{flex:0 0 auto;text-align:center;margin-bottom:-4px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{height:30px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{font-size:0}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:28px;padding:0 5px}"],changeDetection:0})}}return(0,l.gn)([(0,D.Ph)(y.$.patchView)],d.prototype,"view",void 0),d})()},6248:(V,L,n)=>{n.d(L,{Z:()=>T});var l=n(811),e=n(3546),D=n(6709),P=n(284),E=n(3179),g=n(9418),y=n(4650);class T{static{this.\u0275fac=function(B){return new(B||T)}}static{this.\u0275mod=y.oAB({type:T})}static{this.\u0275inj=y.cJS({imports:[l.vV,e.QW,D.p9,P.c,E.I,g.c]})}}},2686:(V,L,n)=>{n.d(L,{Z:()=>F});var l=n(3496);const D=function e(R,v,I,u){for(var f=-1,b=null==R?0:R.length;++f<b;){var A=R[f];v(u,A,I(A),R)}return u};var P=n(3693);const g=function E(R,v,I,u){return(0,P.Z)(R,function(f,b,A){v(u,f,I(f),A)}),u};var y=n(539),T=n(4177),c=Object.prototype.hasOwnProperty;const F=function W(R,v){return function(I,u){var f=(0,T.Z)(I)?D:g,b=v?v():{};return f(I,R,(0,y.Z)(u,2),b)}}(function(R,v,I){c.call(R,I)?R[I].push(v):(0,l.Z)(R,I,[v])})},6377:(V,L,n)=>{n.d(L,{Z:()=>P});var l=n(5944),e=n(4177);const P=function D(E,g,y,T){return null==E?[]:((0,e.Z)(g)||(g=null==g?[]:[g]),(0,e.Z)(y=T?void 0:y)||(y=null==y?[]:[y]),(0,l.Z)(E,g,y))}}}]);