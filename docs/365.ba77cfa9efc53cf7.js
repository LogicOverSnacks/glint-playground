"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[365],{3025:(L,P,e)=>{e.d(P,{F:()=>O});var s=e(5879);let O=(()=>{class p extends s.SBq{constructor(h){super(h.nativeElement)}static{this.\u0275fac=function(m){return new(m||p)(s.Y36(s.SBq))}}static{this.\u0275dir=s.lG2({type:p,selectors:[["","appElementRef",""]],exportAs:["appElementRef"],features:[s.qOj]})}}return p})()},4613:(L,P,e)=>{e.d(P,{k:()=>r});var s=e(6250),O=e(5879),p=e(1380);let r=(()=>{class h{constructor(i){this.baseApi=i}getRelativePath(i,l){return this.baseApi.single(s.w.files.getRelativePath,i,l)}getResolvedPath(i,l){return this.baseApi.single(s.w.files.getResolvedPath,i,l)}getFileContents(i){return this.baseApi.single(s.w.files.getFileContents,i)}openFileDialog(i){return this.baseApi.single(s.w.files.openFileDialog,i)}openFolderDialog(i,l){return this.baseApi.single(s.w.files.openFolderDialog,i,l)}openFileWithShell(i){return this.baseApi.single(s.w.files.openFileWithShell,i)}hasTerminal(){return this.baseApi.single(s.w.files.hasTerminal)}openTerminal(i){return this.baseApi.single(s.w.files.openTerminal,i)}hasVsCode(){return this.baseApi.single(s.w.files.hasVsCode)}openVsCode(i){return this.baseApi.single(s.w.files.openVsCode,i)}static{this.\u0275fac=function(l){return new(l||h)(O.LFG(p._))}}static{this.\u0275prov=O.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},248:(L,P,e)=>{e.d(P,{E:()=>N});var s=e(8484),O=e(5619),p=e(8180),r=e(9773),h=e(7398),m=e(4573),i=e(7910),l=e(5248),_=e(2020),u=e(751),v=e(2401),c=e(3153),t=e(5879),R=e(3651),W=e(4666),T=e(4613),K=e(7612),M=e(6814),I=e(2296),n=e(617),D=e(2596),f=e(3025),o=e(7484);function g(E,B){if(1&E){const a=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(a);const d=t.oxw(2);return t.KtG(d.openWithTerminal())}),t.TgZ(1,"mat-icon"),t._uU(2,"terminal"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&E&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"Terminal")," "))}function w(E,B){if(1&E){const a=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(a);const d=t.oxw(2);return t.KtG(d.openWithVsCode())}),t._UZ(1,"mat-icon",9),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&E&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Visual Studio Code")," "))}function S(E,B){if(1&E){const a=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){const U=t.CHM(a).$implicit,x=t.oxw(2);return t.KtG(x.openRemote(U.url))}),t._UZ(1,"mat-icon",11),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA()}if(2&E){const a=B.$implicit;t.Q6J("matTooltip",a.url),t.xp6(1),t.s9C("svgIcon",a.type),t.xp6(1),t.AsE(" ","bitbucket"===a.type?t.lcZ(3,4,"Bitbucket"):"github"===a.type?t.lcZ(4,6,"GitHub"):"gitlab"===a.type?t.lcZ(5,8,"GitLab"):"",": ",a.name," ")}}function b(E,B){if(1&E){const a=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",6),t.NdJ("click",function(){t.CHM(a);const d=t.oxw();return t.KtG(d.openWithFileExplorer())}),t.TgZ(5,"mat-icon"),t._uU(6,"folder"),t.qZA(),t._uU(7),t.qZA(),t.YNc(8,g,5,3,"button",7),t.ALo(9,"async"),t.YNc(10,w,4,3,"button",7),t.ALo(11,"async"),t.YNc(12,S,6,10,"button",8),t.ALo(13,"async"),t.qZA()}if(2&E){const a=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"Open with...")),t.xp6(5),t.hij(" ",a.folderText," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,7,a.hasTerminal)),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,9,a.hasVsCode)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(13,11,a.remotes))}}let N=(()=>{class E extends((0,m.j)(i.A)){constructor(a,C,d,U,x){super(),this.overlay=a,this.viewContainerRef=C,this.store=d,this.filesApi=U,this.providerUrlMatcherService=x,this.menuOverlayRef=new O.X(null),this.folderText=l.V?"Finder":l.E?"File Explorer":"File Manager",this.openMenu=(A,y,Z)=>{A.preventDefault(),A.stopPropagation(),this.closeMenu();const F=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(y).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(F),F.attach(new s.UE(Z,this.viewContainerRef)),(0,_.t)(F,!1).pipe((0,p.q)(1),(0,r.R)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))},this.openWithFileExplorer=()=>{const A=this.store.selectSnapshot(v.E.selectedRepositoryPath);if(!A)throw new c.uX;this.filesApi.openFileWithShell(A).subscribe(),this.closeMenu()},this.openWithTerminal=()=>{const A=this.store.selectSnapshot(v.E.selectedRepositoryPath);if(!A)throw new c.uX;this.filesApi.openTerminal(A).subscribe(),this.closeMenu()},this.openWithVsCode=()=>{const A=this.store.selectSnapshot(v.E.selectedRepositoryPath);if(!A)throw new c.uX;this.filesApi.openVsCode(A).subscribe(),this.closeMenu()},this.openRemote=A=>{window.open(A),this.closeMenu()}}ngOnInit(){this.remotes=this.store.select(v.E.selectedRemotes).pipe((0,h.U)(a=>(a??[]).map(C=>{const d=this.providerUrlMatcherService.matchProvider(C.url);return d?[C,d]:null}).filter(u.$K).map(([C,d])=>({type:d.type,url:this.providerUrlMatcherService.getUrl(d),name:C.name})))),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}static{this.\u0275fac=function(C){return new(C||E)(t.Y36(R.aV),t.Y36(t.s_b),t.Y36(W.yh),t.Y36(T.k),t.Y36(K.d))}}static{this.\u0275cmp=t.Xpm({type:E,selectors:[["app-repository-actions-open-with"]],features:[t.qOj],decls:7,vars:3,consts:[["type","button","mat-stroked-button","","appElementRef","",1,"item",3,"matTooltip","click"],["openWithMenuBtn","appElementRef"],[1,"launch-icon"],["openWithMenu",""],[1,"menu-panel"],[1,"menu-header"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"matTooltip","click"],[3,"svgIcon"]],template:function(C,d){if(1&C){const U=t.EpF();t.TgZ(0,"button",0,1),t.NdJ("click",function(A){t.CHM(U);const y=t.MAs(1),Z=t.MAs(6);return t.KtG(d.openMenu(A,y,Z))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon",2),t._uU(4,"launch"),t.qZA()(),t.YNc(5,b,14,13,"ng-template",null,3,t.W1O)}2&C&&t.Q6J("matTooltip",t.lcZ(2,1,"Open repository with..."))},dependencies:[M.sg,M.O5,I.lW,n.Hw,D.gM,f.F,M.Ov,o.X],styles:[".item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0})}}return E})()},9951:(L,P,e)=>{e.d(P,{z:()=>W});var s=e(8504),O=e(6306),p=e(7398),r=e(3153),h=e(9076),m=e(751),i=e(4820),l=e(4214),_=e(3559),u=e(1898),v=e(709),c=e(5879),t=e(4666),R=e(2718);let W=(()=>{class T{constructor(M,I){this.store=M,this.commitsApi=I,this.startEdit=(n,D)=>this.store.dispatch(new _.z0(n,{name:"Edit commits",detail:(0,h.Iu)("from _commit_",{commitId:D}),do:()=>this.store.dispatch(new _.LF(n,D))})),this.discardEdit=n=>this.store.dispatch(new _.z0(n,{name:"Discard commit edits",do:()=>this.commitsApi.discardCommitEditing(n)})),this.saveEdits=n=>this.store.dispatch(new _.z0(n,{name:"Save commit edits",do:()=>this.commitsApi.completeCommitEditing(n).pipe((0,i.C)(()=>this.store.dispatch(new l.Vu(n,[l.nh.commits,l.nh.currentBranchCommitId,l.nh.headCommitId,l.nh.mergeHeads,l.nh.merges,l.nh.references,l.nh.stagedChanges,l.nh.submodules,l.nh.unstagedChanges]))))})),this.editCommitDetails=(n,D,f)=>this.store.dispatch(new _.z0(n,{name:"Edit commit",detail:f,do:()=>this.commitsApi.editCommitDetails(n,D,f,this.getCommitter()).pipe((0,O.K)(o=>r.L8.matches(o)?(0,s._)(()=>new m.ZR(o)):(0,s._)(()=>o)))})).pipe((0,p.U)(()=>this.store.selectSnapshot(u.h.mostRecentActionState(n)))),this.squashCommit=(n,D,f)=>this.store.dispatch(new _.z0(n,{name:"Squash commit",detail:(0,h.Iu)("_commit_ up/down",{commitId:D,isUpwards:"up"===f}),do:()=>this.commitsApi.squashCommit(n,D,f,this.getCommitter()).pipe((0,O.K)(o=>r.bk.matches(o)||r.xb.matches(o)||r.Ak.matches(o)||r.zd.matches(o)||r.zN.matches(o)||r.L8.matches(o)?(0,s._)(()=>new m.ZR(o)):(0,s._)(()=>o)))})).pipe((0,p.U)(()=>this.store.selectSnapshot(u.h.mostRecentActionState(n)))),this.insertCommit=(n,D,f)=>this.store.dispatch(new _.z0(n,{name:"Insert commit",detail:(0,h.Iu)("above/below _commit_",{commitId:D,isAbove:"above"===f}),do:()=>this.commitsApi.insertCommit(n,D,f,this.getCommitter()).pipe((0,O.K)(o=>r.L8.matches(o)?(0,s._)(()=>new m.ZR(o)):(0,s._)(()=>o)))})).pipe((0,p.U)(()=>this.store.selectSnapshot(u.h.mostRecentActionState(n)))),this.moveCommitChanges=(n,D,f,o)=>this.store.dispatch(new _.z0(n,{name:"Move commit changes",detail:(0,h.Iu)("_commit_ up/down",{commitId:D,isUpwards:"up"===f}),do:()=>this.commitsApi.moveCommitChanges(n,D,f,o,this.getCommitter()).pipe((0,O.K)(g=>r.L8.matches(g)||r.ND.matches(g)||r._5.matches(g)||r.x4.matches(g)||r.KS.matches(g)||r.wX.matches(g)?(0,s._)(()=>new m.ZR(g)):(0,s._)(()=>g)))})).pipe((0,p.U)(()=>this.store.selectSnapshot(u.h.mostRecentActionState(n))))}getCommitter(){const M=this.store.selectSnapshot(v.$.selectedProfile);return M&&M.name&&M.email?{name:M.name,email:M.email}:null}static{this.\u0275fac=function(I){return new(I||T)(c.LFG(t.yh),c.LFG(R.T))}}static{this.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})()},3419:(L,P,e)=>{e.d(P,{v:()=>l});var s=e(7700),O=e(4170),p=e(4516),r=e(5940),h=e(8525),m=e(1345),i=e(5879);let l=(()=>{class _{static{this.\u0275fac=function(c){return new(c||_)}}static{this.\u0275mod=i.oAB({type:_})}static{this.\u0275inj=i.cJS({imports:[s.Is,O.lN,p.c,r.Cq,h.LD,m.I]})}}return _})()},2950:(L,P,e)=>{e.d(P,{p:()=>m});var s=e(5601),O=e(3153),p=e(9076),r=e(751),h=e(5879);let m=(()=>{class i{constructor(){this.parseReference=_=>{const u=i.referenceRegex.exec(_);if(!u)return null;if("remotes"===u[1]){const v=i.remoteBranchRegex.exec(_);if(!v)throw new O.xB(_);return{branch:v[2]??"",sourceName:v[1]??"",sourceType:"remote"}}return"stash"===u[1]?{branch:(0,p.Iu)("stash"),sourceName:(0,p.Iu)("stash"),sourceType:"stash"}:{branch:u[2],sourceName:(0,p.Iu)("heads"===u[1]?"local":"tag"),sourceType:"heads"===u[1]?"local":"tag"}},this.getBranchTypeIcon=_=>{switch(_){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"archive";case"tag":return"label"}}}static{this.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/}static{this.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/}calculateBranches(_,u){const v=(0,s.Z)(_.map(this.parseReference).filter(r.$K),({branch:c})=>c);return Object.entries(v).map(([c,t])=>({name:c,sources:t.map(R=>({name:R.sourceName,type:R.sourceType,icon:this.getBranchTypeIcon(R.sourceType)}))})).sort((c,t)=>{const R=c.sources.some(n=>"local"===n.type&&`refs/heads/${c.name}`===u),W=c.sources.some(n=>"local"===n.type&&`refs/heads/${t.name}`===u);if(R&&!W)return-1;if(!R&&W)return 1;const T=c.sources.some(n=>"local"===n.type),K=t.sources.some(n=>"local"===n.type);if(T&&!K)return-1;if(!T&&K)return 1;const M=c.sources.some(n=>"remote"===n.type),I=t.sources.some(n=>"remote"===n.type);return M&&!I?-1:!M&&I?1:c.sources.length>t.sources.length?-1:c.sources.length<t.sources.length?1:c.name>t.name?-1:c.name<t.name?1:0}).slice(0,30)}static{this.\u0275fac=function(u){return new(u||i)}}static{this.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}}]);