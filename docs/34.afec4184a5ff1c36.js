"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[34],{9131:($,Z,i)=>{i.d(Z,{j:()=>D});var s=i(591),n=i(4650),B=i(6895),g=i(266);function e(T,O){if(1&T&&(n.TgZ(0,"div",3),n._uU(1),n.ALo(2,"async"),n.qZA()),2&T){const M=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,1,M.leftPath))}}let D=(()=>{class T{constructor(){this.leftPath=new s.X(""),this.rightPath=new s.X("")}onCopy(M){M.preventDefault();const y=document.getSelection();y&&M.clipboardData?.setData("text/plain",y.toString().replace("\n",""))}ngOnChanges(M){if(M.path){const y=/^(.*)(\/[^\/]+)$/.exec(M.path.currentValue);y?(this.leftPath.next(y[1]),this.rightPath.next(y[2])):(this.leftPath.next(""),this.rightPath.next(M.path.currentValue))}}}return T.\u0275fac=function(M){return new(M||T)},T.\u0275cmp=n.Xpm({type:T,selectors:[["app-condensed-path"]],hostBindings:function(M,y){1&M&&n.NdJ("copy",function(u){return y.onCopy(u)})},inputs:{path:"path"},features:[n.TTD],decls:6,vars:7,consts:[[1,"container",3,"matTooltip"],["class","left",4,"ngIf"],[1,"right"],[1,"left"]],template:function(M,y){1&M&&(n.TgZ(0,"div",0),n.YNc(1,e,3,3,"div",1),n.ALo(2,"async"),n.TgZ(3,"div",2),n._uU(4),n.ALo(5,"async"),n.qZA()()),2&M&&(n.Q6J("matTooltip",y.path||""),n.xp6(1),n.Q6J("ngIf",n.lcZ(2,3,y.leftPath)),n.xp6(3),n.Oqu(n.lcZ(5,5,y.rightPath)))},dependencies:[B.O5,g.gM,B.Ov],styles:[".container[_ngcontent-%COMP%]{display:flex}",".left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",".left[_ngcontent-%COMP%]{min-width:15px}",".right[_ngcontent-%COMP%]{flex:1 0 auto;max-width:100%;margin-left:-4px;padding-left:4px}",".left[_ngcontent-%COMP%] + .right[_ngcontent-%COMP%]{max-width:calc(100% - 15px)}"],changeDetection:0}),T})()},3061:($,Z,i)=>{i.d(Z,{T:()=>t});var s=i(4650),n=i(4006),B=i(1135),g=i(6053),e=i(13),D=i(2198),T=i(1059),O=i(7625),M=i(8926),y=i(9967),R=i(4462),u=i(6895),h=i(4859),v=i(9549),I=i(7392),x=i(284),m=i(266);const C=["findControlInput"];function P(c,r){if(1&c&&(s.TgZ(0,"mat-error"),s._uU(1),s.qZA()),2&c){const l=s.oxw();s.xp6(1),s.Oqu(l.findControl.getError("regex"))}}let t=(()=>{class c extends((0,M.j)(y.A)){constructor(){super(...arguments),this.initial=null,this.searched=new s.vpe,this.findControl=new n.NI("",{nonNullable:!0,validators:l=>{if(this.useRegularExpressionControl?.value)try{new RegExp(l.value,"g")}catch(E){return{regex:E.message}}return null}}),this.matchCaseControl=new n.NI(!1,{nonNullable:!0}),this.useRegularExpressionControl=new n.NI(!1,{nonNullable:!0})}hostKeyDown(l){(R.V?l.metaKey:l.ctrlKey)&&("f"===l.key||"F"===l.key)&&(l.preventDefault(),this.findControlInput.nativeElement.focus({preventScroll:!0}))}ngOnInit(){this.initial&&(this.findControl.setValue(this.initial.text),this.matchCaseControl.setValue(this.initial.matchCase),this.useRegularExpressionControl.setValue(this.initial.useRegularExpression)),(0,g.aj)([this.findControl.valueChanges.pipe((0,e.b)(200),(0,D.h)(()=>this.findControl.valid),(0,T.O)(this.findControl.value)),this.matchCaseControl.valueChanges.pipe((0,T.O)(this.matchCaseControl.value)),this.useRegularExpressionControl.valueChanges.pipe((0,T.O)(this.useRegularExpressionControl.value))]).pipe((0,O.R)(this.destroyed$)).subscribe(([l,E,f])=>{if(this.findControl.updateValueAndValidity({emitEvent:!1}),l)try{const A=new RegExp(f?l:(0,B.Z)(l),E?"g":"ig");this.searched.next(A)}catch{}else this.searched.next(null)})}}return c.\u0275fac=function(){let r;return function(E){return(r||(r=s.n5z(c)))(E||c)}}(),c.\u0275cmp=s.Xpm({type:c,selectors:[["app-find-control"]],viewQuery:function(l,E){if(1&l&&s.Gf(C,5,s.SBq),2&l){let f;s.iGM(f=s.CRH())&&(E.findControlInput=f.first)}},hostBindings:function(l,E){1&l&&s.NdJ("keydown",function(A){return E.hostKeyDown(A)},!1,s.evT)},inputs:{initial:"initial"},outputs:{searched:"searched"},features:[s.qOj],decls:15,vars:6,consts:[["appearance","standard",1,"find-control"],["matPrefix",""],["type","text","matInput","",3,"formControl"],["findControlInput",""],["type","button","matSuffix","","mat-icon-button","","disableRipple","","matTooltip","Match case",3,"click"],["svgIcon","format-letter-case"],["type","button","matSuffix","","mat-icon-button","","disableRipple","","matTooltip","Use regular expression",3,"click"],["svgIcon","regex"],["type","button","matSuffix","","mat-icon-button","","matTooltip","Cancel",3,"click"],[4,"ngIf"]],template:function(l,E){1&l&&(s.TgZ(0,"mat-form-field",0)(1,"mat-label"),s._uU(2,"Find"),s.qZA(),s.TgZ(3,"mat-icon",1),s._uU(4,"search"),s.qZA(),s._UZ(5,"input",2,3),s.TgZ(7,"button",4),s.NdJ("click",function(){return E.matchCaseControl.setValue(!E.matchCaseControl.value)}),s._UZ(8,"mat-icon",5),s.qZA(),s.TgZ(9,"button",6),s.NdJ("click",function(){return E.useRegularExpressionControl.setValue(!E.useRegularExpressionControl.value)}),s._UZ(10,"mat-icon",7),s.qZA(),s.TgZ(11,"button",8),s.NdJ("click",function(){return E.findControl.setValue("")}),s.TgZ(12,"mat-icon"),s._uU(13,"close"),s.qZA()(),s.YNc(14,P,2,1,"mat-error",9),s.qZA()),2&l&&(s.xp6(5),s.Q6J("formControl",E.findControl),s.xp6(2),s.ekj("selected",E.matchCaseControl.value),s.xp6(2),s.ekj("selected",E.useRegularExpressionControl.value),s.xp6(5),s.Q6J("ngIf",E.findControl.hasError("regex")))},dependencies:[u.O5,n.Fj,n.JJ,n.oH,h.lW,v.TO,v.KE,v.hX,v.qo,v.R9,I.Hw,x.Nt,m.gM],styles:[".find-control[_ngcontent-%COMP%]{min-width:200px}.find-control[_ngcontent-%COMP%]  .mat-form-field-wrapper>.mat-form-field-flex{align-items:flex-end}.find-control[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-prefix{margin-right:5px}.find-control[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-prefix, .find-control[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-suffix{font-size:12px}.find-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}.find-control[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]     .mat-button-wrapper{padding:2px;background:#37474f}"],changeDetection:0}),c})()},127:($,Z,i)=>{i.d(Z,{m:()=>g});var s=i(3779),n=i(4650),B=i(468);let g=(()=>{class e{constructor(T){this.baseApi=T}getHighlightedFile(T,O,M,y){return this.baseApi.single(s.w.highlight.getHighlightedFile,T,O,M,y)}}return e.\u0275fac=function(T){return new(T||e)(n.LFG(B._))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5410:($,Z,i)=>{i.d(Z,{s:()=>de});var s=i(655),n=i(4650),B=i(240),g=i(7717),e=i(591),D=i(6053),T=i(567),O=i(1086),M=i(1737),y=i(4850),R=i(5778),u=i(2994),h=i(7545),v=i(7625),I=i(1307),x=i(2198),m=i(7221),C=i(2986),P=i(1712),t=i(8926),c=i(9967),r=i(1336),l=i(4889),E=i(6966),f=i(9578),A=i(9077),U=i(8523),N=i(127),k=i(3058),j=i(315);function X(F,W){if(1&F){const d=n.EpF();n.TgZ(0,"button",13),n.NdJ("click",function(){n.CHM(d);const S=n.oxw(2);return n.KtG(S.modifyLinesStage("stage"))}),n._uU(1," Stage Selection "),n.qZA()}}function z(F,W){if(1&F){const d=n.EpF();n.TgZ(0,"button",14),n.NdJ("click",function(){n.CHM(d);const S=n.oxw(2);return n.KtG(S.modifyLinesStage("discard"))}),n._uU(1," Discard Selection "),n.qZA()}}function q(F,W){if(1&F){const d=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){n.CHM(d);const S=n.oxw(2);return n.KtG(S.modifyLinesStage("unstage"))}),n._uU(1," Unstage Selection "),n.qZA()}}function ee(F,W){if(1&F){const d=n.EpF();n.TgZ(0,"button",16),n.NdJ("click",function(){n.CHM(d);const S=n.oxw(2);return n.KtG(S.edited.next())}),n.TgZ(1,"mat-icon"),n._uU(2,"edit"),n.qZA()()}}function te(F,W){if(1&F){const d=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(d);const S=n.oxw(2);return n.KtG(S.closed.next())}),n.TgZ(1,"mat-icon"),n._uU(2,"close"),n.qZA()()}}function ne(F,W){1&F&&(n.TgZ(0,"main"),n._uU(1,"Loading..."),n.qZA())}function oe(F,W){1&F&&(n.TgZ(0,"main"),n._uU(1,"Cannot load binary file."),n.qZA())}function ce(F,W){1&F&&(n.TgZ(0,"main"),n._uU(1,"Cannot load file."),n.qZA())}function ie(F,W){if(1&F&&n._UZ(0,"app-hunk-view",19),2&F){const d=n.oxw(3);n.Q6J("diffLines",d.diffLines)("search",d.search$)}}function re(F,W){if(1&F&&n._UZ(0,"app-inline-view",19),2&F){const d=n.oxw(3);n.Q6J("diffLines",d.diffLines)("search",d.search$)}}function ae(F,W){if(1&F&&n._UZ(0,"app-split-view",19),2&F){const d=n.oxw(3);n.Q6J("diffLines",d.diffLines)("search",d.search$)}}function se(F,W){if(1&F&&(n.TgZ(0,"main"),n.YNc(1,ie,1,2,"app-hunk-view",18),n.YNc(2,re,1,2,"app-inline-view",18),n.YNc(3,ae,1,2,"app-split-view",18),n.qZA()),2&F){const d=n.oxw().ngIf;n.xp6(1),n.Q6J("ngIf","hunk"===d),n.xp6(1),n.Q6J("ngIf","inline"===d),n.xp6(1),n.Q6J("ngIf","split"===d)}}function le(F,W){if(1&F){const d=n.EpF();n.ynx(0),n.TgZ(1,"header")(2,"app-find-control",1),n.NdJ("searched",function(S){n.CHM(d);const K=n.oxw();return n.KtG(K.search$.next(S))}),n.qZA(),n.TgZ(3,"div",2),n.YNc(4,X,2,0,"button",3),n.ALo(5,"async"),n.YNc(6,z,2,0,"button",4),n.ALo(7,"async"),n.YNc(8,q,2,0,"button",5),n.ALo(9,"async"),n.TgZ(10,"mat-button-toggle-group",6),n.NdJ("change",function(S){n.CHM(d);const K=n.oxw();return n.KtG(K.changeView(S.value))}),n.TgZ(11,"mat-button-toggle",7)(12,"mat-icon"),n._uU(13,"calendar_view_day"),n.qZA()(),n.TgZ(14,"mat-button-toggle",8)(15,"mat-icon"),n._uU(16,"view_headline"),n.qZA()(),n.TgZ(17,"mat-button-toggle",9)(18,"mat-icon"),n._uU(19,"vertical_split"),n.qZA()()(),n.TgZ(20,"div",10),n.YNc(21,ee,3,0,"button",11),n.YNc(22,te,3,0,"button",12),n.qZA()()(),n.YNc(23,ne,2,0,"main",0),n.ALo(24,"async"),n.YNc(25,oe,2,0,"main",0),n.ALo(26,"async"),n.YNc(27,ce,2,0,"main",0),n.ALo(28,"async"),n.YNc(29,se,4,3,"main",0),n.ALo(30,"async"),n.BQk()}if(2&F){const d=W.ngIf,p=n.oxw();n.xp6(2),n.Q6J("initial",p.search),n.xp6(2),n.Q6J("ngIf",n.lcZ(5,11,p.showStage)),n.xp6(2),n.Q6J("ngIf",n.lcZ(7,13,p.showStage)),n.xp6(2),n.Q6J("ngIf",n.lcZ(9,15,p.showUnstage)),n.xp6(2),n.Q6J("value",d),n.xp6(11),n.Q6J("ngIf",p.showEdit),n.xp6(1),n.Q6J("ngIf",!p.hideClose),n.xp6(1),n.Q6J("ngIf","loading"===n.lcZ(24,17,p.currentView)),n.xp6(2),n.Q6J("ngIf","binary-file"===n.lcZ(26,19,p.currentView)),n.xp6(2),n.Q6J("ngIf","error"===n.lcZ(28,21,p.currentView)),n.xp6(2),n.Q6J("ngIf","normal"===n.lcZ(30,23,p.currentView))}}let de=(()=>{class F extends((0,t.j)(c.A)){constructor(d,p,S,K){super(),this.store=d,this.highlightApi=p,this.repositoriesApi=S,this.diffService=K,this.hideClose=!1,this.showEdit=!1,this.search=null,this.closed=new n.vpe,this.edited=new n.vpe,this.currentView=new e.X("loading"),this.diffLines=new e.X(null),this.search$=new e.X(null)}ngOnInit(){this.showStage=(0,D.aj)([this.patch,this.selectedCommitId,this.diffService.selectedLines]).pipe((0,y.U)(([d,p,S])=>"head"===p&&!0===d?.isUnstaged&&S.length>0)),this.showUnstage=(0,D.aj)([this.patch,this.selectedCommitId,this.diffService.selectedLines]).pipe((0,y.U)(([d,p,S])=>"head"===p&&!1===d?.isUnstaged&&S.length>0)),this.patch.pipe((0,R.x)((d,p)=>d&&p?!(d.repositoryPath!==p.repositoryPath||d.isUnstaged!==p.isUnstaged||d.patch.newFileId!==p.patch.newFileId||d.patch.newFileIsDir!==p.patch.newFileIsDir||d.patch.newFileIsSubmodule!==p.patch.newFileIsSubmodule||d.patch.newFilePath!==p.patch.newFilePath||d.patch.oldFileId!==p.patch.oldFileId||d.patch.oldFileIsDir!==p.patch.oldFileIsDir||d.patch.oldFileIsSubmodule!==p.patch.oldFileIsSubmodule||d.patch.oldFilePath!==p.patch.oldFilePath||d.patch.status!==p.patch.status||d.patch.hunks.length!==p.patch.hunks.length||(0,g.Z)(d.patch.hunks,p.patch.hunks).some(([S,K])=>S?.lines.length!==K?.lines.length||S?.newStart!==K?.newStart||S?.oldStart!==K?.oldStart||S?.header!==K?.header||S&&K&&(0,g.Z)(S.lines,K.lines).some(([J,Y])=>J?.content.length!==Y?.content.length||J?.contentOffset!==Y?.contentOffset||J?.newLineNo!==Y?.newLineNo||J?.oldLineNo!==Y?.oldLineNo||J?.origin!==Y?.origin||J?.content!==Y?.content))):!d&&!p),(0,u.b)(()=>{this.currentView.next("loading")}),(0,h.w)(d=>d?(0,T.D)(this.getLines(d,!1)).pipe((0,v.R)(this.currentView.pipe((0,I.T)(1),(0,x.h)(p=>"loading"===p))),(0,v.R)(this.destroyed$),(0,y.U)(([p,S])=>[d,p,S]),(0,m.K)(p=>P.OZ.matches(p)?(this.currentView.next("binary-file"),(0,O.of)(null)):P.hK.matches(p)?(this.currentView.next("error"),(0,O.of)(null)):this.store.dispatch(new r.NN("unhandled",`${p}`)).pipe((0,h.w)(()=>(0,M._)(p))))):(0,O.of)(null)),(0,u.b)(d=>{if(d){const[p,S,K]=d;this.diffLines.next({hunks:p.patch.hunks,oldLines:S,newLines:K,oldFilePath:p.patch.oldFilePath,newFilePath:p.patch.newFilePath,highlighted:!1}),this.currentView.next("normal")}else this.diffLines.next(null)}),(0,h.w)(d=>d?.[0]?(0,T.D)(this.getLines(d?.[0],!0)).pipe((0,v.R)(this.currentView.pipe((0,I.T)(1),(0,x.h)(p=>"loading"===p))),(0,v.R)(this.destroyed$),(0,y.U)(([p,S])=>[d?.[0],p,S]),(0,m.K)(p=>P.OZ.matches(p)?(this.currentView.next("binary-file"),(0,O.of)(null)):P.hK.matches(p)?(this.currentView.next("error"),(0,O.of)(null)):this.store.dispatch(new r.NN("unhandled",`${p}`)).pipe((0,h.w)(()=>(0,M._)(p))))):(0,O.of)(null)),(0,v.R)(this.destroyed$)).subscribe(d=>{if(d){const[p,S,K]=d;this.diffLines.next({hunks:p.patch.hunks,oldLines:S,newLines:K,oldFilePath:p.patch.oldFilePath,newFilePath:p.patch.newFilePath,highlighted:!0}),this.currentView.next("normal")}else this.diffLines.next(null)})}changeView(d){this.store.dispatch(new f.zb(d))}modifyLinesStage(d){const p=this.store.selectSnapshot(E.E.selectedRepositoryPath);if(!p)throw new Error("Cannot stage file line when no repository is selected");this.patch.pipe((0,C.q)(1)).subscribe(S=>{S&&S.patch.newFilePath&&("discard"===d?this.repositoriesApi.discardFileLines:"stage"===d?this.repositoriesApi.stageFileLines:this.repositoriesApi.unstageFileLines).bind(this.repositoriesApi)(p,S.patch.newFilePath,this.diffService.selectedLines.value).pipe((0,U.s)(J=>this.store.dispatch(new r.NN("unhandled",`${J}`))),(0,h.w)(()=>this.store.dispatch(new l.Vu(p,[l.nh.stagedChanges,l.nh.unstagedChanges])))).subscribe()})}getLines(d,p){if(d.patch.oldFileIsSubmodule||d.patch.newFileIsSubmodule){const S=d.patch.hunks[0].lines.find(J=>J.oldLineNo>0),K=d.patch.hunks[0].lines.find(J=>J.newLineNo>0);return[(0,O.of)([{lineNumber:1,text:S?.content??"",tokens:[{startIndex:0,endIndex:S?.content.length??0,scopes:["normal"]}]}]),(0,O.of)([{lineNumber:1,text:K?.content??"",tokens:[{startIndex:0,endIndex:K?.content.length??0,scopes:["normal"]}]}])]}return[d.patch.oldFileId?this.highlightApi.getHighlightedFile(d.repositoryPath,d.patch.oldFileId,d.patch.oldFilePath,p):(0,O.of)([]),d.isUnstaged?this.highlightApi.getHighlightedFile(d.repositoryPath,null,d.patch.newFilePath,p):d.patch.newFileId?this.highlightApi.getHighlightedFile(d.repositoryPath,d.patch.newFileId,d.patch.newFilePath,p):(0,O.of)([])]}}return F.\u0275fac=function(d){return new(d||F)(n.Y36(B.yh),n.Y36(N.m),n.Y36(k.a),n.Y36(j.S))},F.\u0275cmp=n.Xpm({type:F,selectors:[["app-diff-view"]],inputs:{patch:"patch",hideClose:"hideClose",showEdit:"showEdit",search:"search"},outputs:{closed:"closed",edited:"edited"},features:[n.qOj],decls:2,vars:3,consts:[[4,"ngIf"],[3,"initial","searched"],[1,"right"],["type","button","class","stage-button","mat-stroked-button","",3,"click",4,"ngIf"],["type","button","class","discard-button","mat-stroked-button","","color","warn",3,"click",4,"ngIf"],["type","button","class","unstage-button","mat-stroked-button","",3,"click",4,"ngIf"],[3,"value","change"],["value","hunk","matTooltip","Hunk View"],["value","inline","matTooltip","Inline View"],["value","split","matTooltip","Split View"],[1,"close-container"],["type","button","class","edit-button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","class","close-button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-stroked-button","",1,"stage-button",3,"click"],["type","button","mat-stroked-button","","color","warn",1,"discard-button",3,"click"],["type","button","mat-stroked-button","",1,"unstage-button",3,"click"],["type","button","mat-icon-button","",1,"edit-button",3,"click"],["type","button","mat-icon-button","",1,"close-button",3,"click"],[3,"diffLines","search",4,"ngIf"],[3,"diffLines","search"]],template:function(d,p){1&d&&(n.YNc(0,le,31,25,"ng-container",0),n.ALo(1,"async")),2&d&&n.Q6J("ngIf",n.lcZ(1,1,p.view))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background:#1e1e1e;position:absolute}[_nghost-%COMP%]     .mat-button-toggle>.mat-button-toggle-button>.mat-button-toggle-label-content{padding:0 6px}header[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:5px;outline:none}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;gap:5px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{height:40px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{font-size:0}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:38px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .close-container[_ngcontent-%COMP%]{display:flex;align-items:center}main[_ngcontent-%COMP%]{flex:1 0 auto;outline:none;overflow-x:auto;overflow-y:auto}"],changeDetection:0}),(0,s.gn)([(0,B.Ph)(E.E.selectedCommitId)],F.prototype,"selectedCommitId",void 0),(0,s.gn)([(0,B.Ph)(A.$.diffView)],F.prototype,"view",void 0),F})()},1446:($,Z,i)=>{i.d(Z,{m:()=>me});var s=i(811),n=i(284),B=i(3179),g=i(5410),e=i(4650),D=i(1580),T=i(1256),O=i(8344),M=i(5601);const R=function y(_){var L=(0,M.Z)(_),o=L%1;return L==L?o?L-o:L:0},h=function u(_,L,o){var a=null==_?0:_.length;return a?(L=o||void 0===L?1:R(L),(0,O.Z)(_,0,(L=a-L)<0?0:L)):[]},I=function v(_,L,o){var a=null==_?0:_.length;return a?(L=o||void 0===L?1:R(L),(0,O.Z)(_,(L=a-L)<0?0:L,a)):[]};var x=i(591),m=i(3753),C=i(6053),P=i(1059),t=i(519),c=i(7625),r=i(13),l=i(4850),E=i(8926),f=i(9967),A=i(315),U=i(3668),N=i(6895),k=i(4859),j=i(7392),X=i(1899),z=i(1453);const q=["scrollContainer"];function ee(_,L){if(1&_){const o=e.EpF();e.ynx(0),e.TgZ(1,"button",7),e.NdJ("click",function(){e.CHM(o);const w=e.oxw().$implicit,b=e.oxw();return e.KtG(b.expandSeparator(w))}),e.TgZ(2,"mat-icon",8),e._uU(3),e.qZA()(),e.TgZ(4,"span",9),e._uU(5),e.qZA(),e.BQk()}if(2&_){const o=e.oxw(),a=o.first,w=o.last,b=o.$implicit,V=e.oxw();e.xp6(1),e.Udp("width",V.lineNumberMargin+26,"px"),e.xp6(2),e.Oqu(a?"expand_less":w?"expand_more":"unfold_more"),e.xp6(2),e.Oqu(b.separatorHeader)}}function te(_,L){if(1&_&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&_){const o=L.$implicit;e.Q6J("ngClass",o.class),e.xp6(1),e.Oqu(o.text)}}function ne(_,L){if(1&_&&(e.ynx(0),e.YNc(1,te,2,2,"span",13),e.ALo(2,"tokens"),e.ALo(3,"searchToken"),e.ALo(4,"async"),e.BQk()),2&_){const o=L.ngIf,a=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.Dn7(3,4,o.tokens,o.text,e.lcZ(4,8,a.search)),o.text))}}function oe(_,L){if(1&_&&(e.TgZ(0,"span",10),e._uU(1),e.qZA(),e.TgZ(2,"span",11),e._uU(3),e.qZA(),e.YNc(4,ne,5,10,"ng-container",12)),2&_){const o=e.oxw().$implicit,a=e.oxw();e.Udp("right","calc(100% + 26px + "+(a.lineNumberMargin/2).toString()+"px)")("width",a.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==o.diffLine.oldLine?null:o.diffLine.oldLine.lineNumber),e.xp6(1),e.Udp("width",a.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==o.diffLine.newLine?null:o.diffLine.newLine.lineNumber),e.xp6(1),e.Q6J("ngIf",a.getLineView(o.diffLine))}}function ce(_,L){if(1&_&&(e.TgZ(0,"li",4),e.YNc(1,ee,6,4,"ng-container",5),e.YNc(2,oe,5,9,"ng-template",null,6,e.W1O),e.qZA()),2&_){const o=L.$implicit,a=e.MAs(3);e.Q6J("ngClass","line-"+(o.isSeparator?"separator":o.diffLine.status)),e.xp6(1),e.Q6J("ngIf",o.isSeparator)("ngIfElse",a)}}let ie=(()=>{class _ extends((0,E.j)(f.A)){constructor(o){super(),this.diffService=o,this.lineNumberMargin=0,this.lines$=new x.X([]),this.selectedLines=new x.X([]),this.currentPatch=null}ngOnInit(){this.diffLines.pipe((0,P.O)(null),(0,t.G)(),(0,c.R)(this.destroyed$)).subscribe(([o,a])=>{const w=this.currentPatch?{...this.currentPatch}:null;if(a){this.currentPatch={newFilePath:a.newFilePath,oldFilePath:a.oldFilePath};const b=(0,D.Z)([a.oldLines.length,a.newLines.length])??0;this.lineNumberMargin=this.diffService.calculateMargin(b.toString().length),this.diffService.calculateHunkLines(a.oldLines,a.newLines,a.hunks).pipe((0,c.R)(this.destroyed$)).subscribe(V=>{o&&o.newFilePath===a.newFilePath&&o.oldFilePath===a.oldFilePath&&!o.highlighted&&a.highlighted?this.updateLines(V):this.lines$.next(V),(!w||w.oldFilePath!==this.currentPatch?.oldFilePath||w.newFilePath!==this.currentPatch?.newFilePath)&&this.scrollContainer?.nativeElement?.scrollTo(0,0)})}else this.currentPatch=null,this.lineNumberMargin=0,this.lines$.next([]),w&&this.scrollContainer?.nativeElement?.scrollTo(0,0)}),(0,m.R)(document,"selectionchange").pipe((0,r.b)(100),(0,c.R)(this.destroyed$)).subscribe(()=>{const o=document.getSelection();if(!o)return void this.selectedLines.next([]);const a=[];for(let w=0;w<o.rangeCount;w++){const b=o.getRangeAt(w);if(!b.startContainer.parentElement||!b.endContainer.parentElement||!this.scrollContainer.nativeElement.contains(b.startContainer.parentElement)||!this.scrollContainer.nativeElement.contains(b.endContainer.parentElement)||b.startContainer.parentElement===b.endContainer.parentElement&&b.startOffset===b.endOffset)continue;const V=this.scrollContainer.nativeElement.getBoundingClientRect().top,Q=this.scrollContainer.nativeElement.scrollTop;a.push([Math.floor((Q+b.startContainer.parentElement.getBoundingClientRect().top-V)/19),Math.floor((Q+b.endContainer.parentElement.getBoundingClientRect().top-V)/19)])}this.selectedLines.next(a)}),(0,C.aj)([this.lines$,this.selectedLines]).pipe((0,l.U)(([o,a])=>a.flatMap(([w,b])=>(0,T.Z)(w,b+1)).flatMap(w=>{const b=o[w];return!b||b.isSeparator?[]:[{oldLineNo:b.diffLine.oldLine?.lineNumber??-1,newLineNo:b.diffLine.newLine?.lineNumber??-1}]})),(0,c.R)(this.destroyed$)).subscribe(o=>{this.diffService.selectedLines.next(o)})}expandSeparator(o){const w=this.lines$.value;this.lines$.next(w.flatMap((b,V)=>{if(b!==o)return b;if(o.hiddenDiffLines.length<=25)return o.hiddenDiffLines.map(H=>({isSeparator:!1,diffLine:H}));if(0===V)return[{isSeparator:!0,separatorHeader:o.separatorHeader,hiddenDiffLines:h(o.hiddenDiffLines,20)},...I(o.hiddenDiffLines,20).map(H=>({isSeparator:!1,diffLine:H}))];if(V===w.length-1)return[...o.hiddenDiffLines.slice(0,20).map(H=>({isSeparator:!1,diffLine:H})),{isSeparator:!0,separatorHeader:null,hiddenDiffLines:o.hiddenDiffLines.slice(20)}];const Q=o.hiddenDiffLines.slice(0,10),G=h(o.hiddenDiffLines.slice(10),10),Me=I(o.hiddenDiffLines,10);return[...Q.map(H=>({isSeparator:!1,diffLine:H})),{isSeparator:!0,separatorHeader:o.separatorHeader,hiddenDiffLines:G},...Me.map(H=>({isSeparator:!1,diffLine:H}))]}))}getLineView(o){return"added"===o.status?o.newLine:"removed"===o.status?o.oldLine:"unchanged"===o.status?o.newLine??o.oldLine:null}trackByHunkLine(o,a){return o}updateLines(o){const a=this.lines$.value;let w=0,b=0;const V=[];for(;b<o.length;){const Q=a[w],G=o[b];if(G.isSeparator){if(Q.isSeparator){if(Q.hiddenDiffLines.length===G.hiddenDiffLines.length){V.push(G),w++,b++;continue}V.push({isSeparator:!0,separatorHeader:G.separatorHeader,hiddenDiffLines:G.hiddenDiffLines.slice(0,Q.hiddenDiffLines.length)}),G.hiddenDiffLines=G.hiddenDiffLines.slice(Q.hiddenDiffLines.length),w++;continue}if(0===G.hiddenDiffLines.length){b++;continue}V.push({isSeparator:!1,diffLine:G.hiddenDiffLines[0]}),G.hiddenDiffLines=G.hiddenDiffLines.slice(1),w++}else{if(a[w].isSeparator)throw new Error("");V.push(G),w++,b++}}this.lines$.next(V)}}return _.\u0275fac=function(o){return new(o||_)(e.Y36(A.S))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-hunk-view"]],viewQuery:function(o,a){if(1&o&&e.Gf(q,7,e.SBq),2&o){let w;e.iGM(w=e.CRH())&&(a.scrollContainer=w.first)}},inputs:{diffLines:"diffLines",search:"search"},features:[e.qOj],decls:7,vars:9,consts:[[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["scrollContainer",""],["code",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"line",3,"ngClass"],[4,"ngIf","ngIfElse"],["diffLineContent",""],["mat-button","",1,"separator-icon",3,"click"],["inline",""],[1,"separator-header"],[1,"old-line-number"],[1,"new-line-number"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,a){1&o&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0,1)(2,"code",null,2)(4,"ul"),e.YNc(5,ce,4,3,"li",3),e.ALo(6,"async"),e.qZA()()()),2&o&&(e.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),e.xp6(4),e.Udp("margin-left",a.lineNumberMargin+26,"px"),e.xp6(1),e.Q6J("cdkVirtualForOf",e.lcZ(6,7,a.lines$))("cdkVirtualForTrackBy",a.trackByHunkLine))},dependencies:[U.xd,U.x0,U.N7,N.mk,N.sg,N.O5,k.lW,j.Hw,N.Ov,X.y,z.U],styles:['code[_ngcontent-%COMP%]{display:block;white-space:pre;color:#d4d4d4;font-family:Consolas,Courier New,monospace;font-size:14px;font-weight:400;letter-spacing:0px;line-height:19px}code[_ngcontent-%COMP%]     .line{height:19px}code[_ngcontent-%COMP%]     .line.line-added{background:#1f2c19}code[_ngcontent-%COMP%]     .line.line-removed{background:#501515}code[_ngcontent-%COMP%]     .line.line-void{background:#111}code[_ngcontent-%COMP%]     .diff-added{background-color:#1d572c}code[_ngcontent-%COMP%]     .diff-removed{background-color:#803030}code[_ngcontent-%COMP%]     .search-result{background-color:#a14e1b}code[_ngcontent-%COMP%]     .meta-embedded, code[_ngcontent-%COMP%]     .source-groovy-embedded{color:#d4d4d4}code[_ngcontent-%COMP%]     .emphasis{font-style:italic}code[_ngcontent-%COMP%]     .strong{font-weight:700}code[_ngcontent-%COMP%]     .header{color:navy}code[_ngcontent-%COMP%]     .comment{color:#6a9955}code[_ngcontent-%COMP%]     .constant-language{color:#569cd6}code[_ngcontent-%COMP%]     .constant-numeric, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-number, code[_ngcontent-%COMP%]     .variable-other-enummember, code[_ngcontent-%COMP%]     .keyword-operator-plus-exponent, code[_ngcontent-%COMP%]     .keyword-operator-minus-exponent{color:#b5cea8}code[_ngcontent-%COMP%]     .constant-regexp{color:#646695}code[_ngcontent-%COMP%]     .entity-name-tag{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-tag-css{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-other-attribute-name{color:#9cdcfe}code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-mixin-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-id-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-parent-selector-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-element-css, code[_ngcontent-%COMP%]     .source-css-less .entity-other-attribute-name-id, code[_ngcontent-%COMP%]     .entity-other-attribute-name-attribute-scss, code[_ngcontent-%COMP%]     .entity-other-attribute-name-scss{color:#d7ba7d}code[_ngcontent-%COMP%]     .invalid{color:#f44747}code[_ngcontent-%COMP%]     .markup-underline{text-decoration:underline}code[_ngcontent-%COMP%]     .markup-bold{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-heading{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-italic{font-style:italic}code[_ngcontent-%COMP%]     .markup-inserted{color:#b5cea8}code[_ngcontent-%COMP%]     .markup-deleted{color:#ce9178}code[_ngcontent-%COMP%]     .markup-changed{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-quote-begin-markdown{color:#6a9955}code[_ngcontent-%COMP%]     .punctuation-definition-list-begin-markdown{color:#6796e6}code[_ngcontent-%COMP%]     .markup-inline-raw{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-tag{color:gray}code[_ngcontent-%COMP%]     .meta-preprocessor{color:#569cd6}code[_ngcontent-%COMP%]     .meta-preprocessor-string{color:#ce9178}code[_ngcontent-%COMP%]     .meta-preprocessor-numeric{color:#b5cea8}code[_ngcontent-%COMP%]     .meta-structure-dictionary-key-python{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-diff-header{color:#569cd6}code[_ngcontent-%COMP%]     .storage{color:#569cd6}code[_ngcontent-%COMP%]     .storage-type{color:#569cd6}code[_ngcontent-%COMP%]     .storage-modifier, code[_ngcontent-%COMP%]     .keyword-operator-noexcept{color:#569cd6}code[_ngcontent-%COMP%]     .string, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-string{color:#ce9178}code[_ngcontent-%COMP%]     .string-tag{color:#ce9178}code[_ngcontent-%COMP%]     .string-value{color:#ce9178}code[_ngcontent-%COMP%]     .string-regexp{color:#d16969}code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-begin, code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-end, code[_ngcontent-%COMP%]     .punctuation-section-embedded{color:#569cd6}code[_ngcontent-%COMP%]     .meta-template-expression{color:#d4d4d4}code[_ngcontent-%COMP%]     .support-type-vendored-property-name, code[_ngcontent-%COMP%]     .support-type-property-name, code[_ngcontent-%COMP%]     .variable-css, code[_ngcontent-%COMP%]     .variable-scss, code[_ngcontent-%COMP%]     .variable-other-less, code[_ngcontent-%COMP%]     .source-coffee-embedded{color:#9cdcfe}code[_ngcontent-%COMP%]     .keyword{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-control{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-operator{color:#d4d4d4}code[_ngcontent-%COMP%]     .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-expression, code[_ngcontent-%COMP%]     .keyword-operator-cast, code[_ngcontent-%COMP%]     .keyword-operator-sizeof, code[_ngcontent-%COMP%]     .keyword-operator-typeid, code[_ngcontent-%COMP%]     .keyword-operator-alignas, code[_ngcontent-%COMP%]     .keyword-operator-instanceof, code[_ngcontent-%COMP%]     .keyword-operator-logical-python, code[_ngcontent-%COMP%]     .keyword-operator-wordlike{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-other-unit{color:#b5cea8}code[_ngcontent-%COMP%]     .punctuation-section-embedded-begin-php, code[_ngcontent-%COMP%]     .punctuation-section-embedded-end-php{color:#569cd6}code[_ngcontent-%COMP%]     .support-function-git-rebase{color:#9cdcfe}code[_ngcontent-%COMP%]     .constant-sha-git-rebase{color:#b5cea8}code[_ngcontent-%COMP%]     .storage-modifier-import-java, code[_ngcontent-%COMP%]     .variable-language-wildcard-java, code[_ngcontent-%COMP%]     .storage-modifier-package-java{color:#d4d4d4}code[_ngcontent-%COMP%]     .variable-language{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-function, code[_ngcontent-%COMP%]     .support-function, code[_ngcontent-%COMP%]     .support-constant-handlebars, code[_ngcontent-%COMP%]     .source-powershell .variable-other-member{color:#dcdcaa}code[_ngcontent-%COMP%]     .meta-return-type, code[_ngcontent-%COMP%]     .support-class, code[_ngcontent-%COMP%]     .support-type, code[_ngcontent-%COMP%]     .entity-name-type, code[_ngcontent-%COMP%]     .entity-name-namespace, code[_ngcontent-%COMP%]     .entity-other-attribute, code[_ngcontent-%COMP%]     .entity-name-scope-resolution, code[_ngcontent-%COMP%]     .entity-name-class, code[_ngcontent-%COMP%]     .storage-type-numeric-go, code[_ngcontent-%COMP%]     .storage-type-byte-go, code[_ngcontent-%COMP%]     .storage-type-boolean-go, code[_ngcontent-%COMP%]     .storage-type-string-go, code[_ngcontent-%COMP%]     .storage-type-uintptr-go, code[_ngcontent-%COMP%]     .storage-type-error-go, code[_ngcontent-%COMP%]     .storage-type-rune-go, code[_ngcontent-%COMP%]     .storage-type-cs, code[_ngcontent-%COMP%]     .storage-type-generic-cs, code[_ngcontent-%COMP%]     .storage-type-modifier-cs, code[_ngcontent-%COMP%]     .storage-type-variable-cs, code[_ngcontent-%COMP%]     .storage-type-annotation-java, code[_ngcontent-%COMP%]     .storage-type-generic-java, code[_ngcontent-%COMP%]     .storage-type-java, code[_ngcontent-%COMP%]     .storage-type-object-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-java, code[_ngcontent-%COMP%]     .storage-type-token-java, code[_ngcontent-%COMP%]     .storage-type-groovy, code[_ngcontent-%COMP%]     .storage-type-annotation-groovy, code[_ngcontent-%COMP%]     .storage-type-parameters-groovy, code[_ngcontent-%COMP%]     .storage-type-generic-groovy, code[_ngcontent-%COMP%]     .storage-type-object-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-groovy{color:#4ec9b0}code[_ngcontent-%COMP%]     .meta-type-cast-expr, code[_ngcontent-%COMP%]     .meta-type-new-expr, code[_ngcontent-%COMP%]     .support-constant-math, code[_ngcontent-%COMP%]     .support-constant-dom, code[_ngcontent-%COMP%]     .support-constant-json, code[_ngcontent-%COMP%]     .entity-other-inherited-class{color:#4ec9b0}code[_ngcontent-%COMP%]     .keyword-control, code[_ngcontent-%COMP%]     .source-cpp .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-delete, code[_ngcontent-%COMP%]     .keyword-other-using, code[_ngcontent-%COMP%]     .keyword-other-operator, code[_ngcontent-%COMP%]     .entity-name-operator{color:#c586c0}code[_ngcontent-%COMP%]     .variable, code[_ngcontent-%COMP%]     .meta-definition-variable-name, code[_ngcontent-%COMP%]     .support-variable, code[_ngcontent-%COMP%]     .entity-name-variable{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-object-literal-key{color:#9cdcfe}code[_ngcontent-%COMP%]     .support-constant-property-value, code[_ngcontent-%COMP%]     .support-constant-font-name, code[_ngcontent-%COMP%]     .support-constant-media-type, code[_ngcontent-%COMP%]     .support-constant-media, code[_ngcontent-%COMP%]     .constant-other-color-rgb-value, code[_ngcontent-%COMP%]     .constant-other-rgb-value, code[_ngcontent-%COMP%]     .support-constant-color{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-group-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-group-assertion-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-character-class-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-begin-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-end-regexp, code[_ngcontent-%COMP%]     .keyword-operator-negation-regexp, code[_ngcontent-%COMP%]     .support-other-parenthesis-regexp{color:#ce9178}code[_ngcontent-%COMP%]     .constant-character-character-class-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-set-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-regexp, code[_ngcontent-%COMP%]     .constant-character-set-regexp{color:#d16969}code[_ngcontent-%COMP%]     .keyword-operator-or-regexp, code[_ngcontent-%COMP%]     .keyword-control-anchor-regexp{color:#dcdcaa}code[_ngcontent-%COMP%]     .keyword-operator-quantifier-regexp{color:#d7ba7d}code[_ngcontent-%COMP%]     .constant-character{color:#569cd6}code[_ngcontent-%COMP%]     .constant-character-escape{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-name-label{color:#c8c8c8}code[_ngcontent-%COMP%]     .punctuation-definition-string{color:#ce9178}code[_ngcontent-%COMP%]     .variable-language-this{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-comment{color:#6a9955}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-separator[_ngcontent-%COMP%]{background:#252525}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none;color:#858585}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{right:calc(100% + 26px)}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{right:100%}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{cursor:pointer;height:19px;line-height:19px;padding:0;text-align:center;min-width:0}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]:before{background:#252525;content:"";position:absolute;left:0;top:0;height:100%;width:100%;z-index:-1}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:19px}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-header[_ngcontent-%COMP%]{margin-left:5px}.viewport[_ngcontent-%COMP%]{height:100%;width:100%}'],changeDetection:0}),_})();const re=["scrollContainer"];function ae(_,L){if(1&_&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&_){const o=L.$implicit;e.Q6J("ngClass",o.class),e.xp6(1),e.Oqu(o.text)}}function se(_,L){if(1&_&&(e.ynx(0),e.YNc(1,ae,2,2,"span",8),e.ALo(2,"tokens"),e.ALo(3,"searchToken"),e.ALo(4,"async"),e.BQk()),2&_){const o=L.ngIf,a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.Dn7(3,4,o.tokens,o.text,e.lcZ(4,8,a.search)),o.text))}}function le(_,L){if(1&_&&(e.TgZ(0,"li",4)(1,"span",5),e._uU(2),e.qZA(),e.TgZ(3,"span",6),e._uU(4),e.qZA(),e.YNc(5,se,5,10,"ng-container",7),e.qZA()),2&_){const o=L.$implicit,a=e.oxw();e.Q6J("ngClass","line-"+o.status),e.xp6(1),e.Udp("right","calc(100% + 26px + "+(a.lineNumberMargin/2).toString()+"px)")("width",a.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==o.oldLine?null:o.oldLine.lineNumber),e.xp6(1),e.Udp("width",a.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==o.newLine?null:o.newLine.lineNumber),e.xp6(1),e.Q6J("ngIf",a.getLineView(o))}}let de=(()=>{class _ extends((0,E.j)(f.A)){constructor(o){super(),this.diffService=o,this.lineNumberMargin=0,this.lines$=new x.X([]),this.selectedLines=new x.X([]),this.currentPatch=null}ngOnInit(){this.diffLines.pipe((0,c.R)(this.destroyed$)).subscribe(o=>{const a=this.currentPatch?{...this.currentPatch}:null;if(o){this.currentPatch={newFilePath:o.newFilePath,oldFilePath:o.oldFilePath};const w=(0,D.Z)([o.oldLines.length,o.newLines.length])??0;this.lineNumberMargin=this.diffService.calculateMargin(w.toString().length),this.diffService.calculateInlineLines(o.oldLines,o.newLines,o.hunks).pipe((0,c.R)(this.destroyed$)).subscribe(b=>{this.lines$.next(b),(!a||a.oldFilePath!==this.currentPatch?.oldFilePath||a.newFilePath!==this.currentPatch?.newFilePath)&&this.scrollContainer.nativeElement?.scrollTo(0,0)})}else this.currentPatch=null,this.lineNumberMargin=0,this.lines$.next([]),a&&this.scrollContainer.nativeElement?.scrollTo(0,0)}),(0,m.R)(document,"selectionchange").pipe((0,r.b)(100),(0,c.R)(this.destroyed$)).subscribe(()=>{const o=document.getSelection();if(!o)return void this.selectedLines.next([]);const a=[];for(let w=0;w<o.rangeCount;w++){const b=o.getRangeAt(w);if(!b.startContainer.parentElement||!b.endContainer.parentElement||!this.scrollContainer.nativeElement.contains(b.startContainer.parentElement)||!this.scrollContainer.nativeElement.contains(b.endContainer.parentElement)||b.startContainer.parentElement===b.endContainer.parentElement&&b.startOffset===b.endOffset)continue;const V=this.scrollContainer.nativeElement.getBoundingClientRect().top,Q=this.scrollContainer.nativeElement.scrollTop;a.push([Math.floor((Q+b.startContainer.parentElement.getBoundingClientRect().top-V)/19),Math.floor((Q+b.endContainer.parentElement.getBoundingClientRect().top-V)/19)])}this.selectedLines.next(a)}),(0,C.aj)([this.lines$,this.selectedLines]).pipe((0,l.U)(([o,a])=>a.flatMap(([w,b])=>(0,T.Z)(w,b+1)).map(w=>({oldLineNo:o[w]?.oldLine?.lineNumber??-1,newLineNo:o[w]?.newLine?.lineNumber??-1}))),(0,c.R)(this.destroyed$)).subscribe(o=>{this.diffService.selectedLines.next(o)})}getLineView(o){return"added"===o.status?o.newLine:"removed"===o.status?o.oldLine:"unchanged"===o.status?o.newLine??o.oldLine:null}trackByDiffLine(o,a){return o}}return _.\u0275fac=function(o){return new(o||_)(e.Y36(A.S))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-inline-view"]],viewQuery:function(o,a){if(1&o&&e.Gf(re,7,e.SBq),2&o){let w;e.iGM(w=e.CRH())&&(a.scrollContainer=w.first)}},inputs:{diffLines:"diffLines",search:"search"},features:[e.qOj],decls:7,vars:9,consts:[[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["scrollContainer",""],["code",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"line",3,"ngClass"],[1,"old-line-number"],[1,"new-line-number"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,a){1&o&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0,1)(2,"code",null,2)(4,"ul"),e.YNc(5,le,6,10,"li",3),e.ALo(6,"async"),e.qZA()()()),2&o&&(e.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),e.xp6(4),e.Udp("margin-left",a.lineNumberMargin+26,"px"),e.xp6(1),e.Q6J("cdkVirtualForOf",e.lcZ(6,7,a.lines$))("cdkVirtualForTrackBy",a.trackByDiffLine))},dependencies:[U.xd,U.x0,U.N7,N.mk,N.sg,N.O5,N.Ov,X.y,z.U],styles:["code[_ngcontent-%COMP%]{display:block;white-space:pre;color:#d4d4d4;font-family:Consolas,Courier New,monospace;font-size:14px;font-weight:400;letter-spacing:0px;line-height:19px}code[_ngcontent-%COMP%]     .line{height:19px}code[_ngcontent-%COMP%]     .line.line-added{background:#1f2c19}code[_ngcontent-%COMP%]     .line.line-removed{background:#501515}code[_ngcontent-%COMP%]     .line.line-void{background:#111}code[_ngcontent-%COMP%]     .diff-added{background-color:#1d572c}code[_ngcontent-%COMP%]     .diff-removed{background-color:#803030}code[_ngcontent-%COMP%]     .search-result{background-color:#a14e1b}code[_ngcontent-%COMP%]     .meta-embedded, code[_ngcontent-%COMP%]     .source-groovy-embedded{color:#d4d4d4}code[_ngcontent-%COMP%]     .emphasis{font-style:italic}code[_ngcontent-%COMP%]     .strong{font-weight:700}code[_ngcontent-%COMP%]     .header{color:navy}code[_ngcontent-%COMP%]     .comment{color:#6a9955}code[_ngcontent-%COMP%]     .constant-language{color:#569cd6}code[_ngcontent-%COMP%]     .constant-numeric, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-number, code[_ngcontent-%COMP%]     .variable-other-enummember, code[_ngcontent-%COMP%]     .keyword-operator-plus-exponent, code[_ngcontent-%COMP%]     .keyword-operator-minus-exponent{color:#b5cea8}code[_ngcontent-%COMP%]     .constant-regexp{color:#646695}code[_ngcontent-%COMP%]     .entity-name-tag{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-tag-css{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-other-attribute-name{color:#9cdcfe}code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-mixin-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-id-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-parent-selector-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-element-css, code[_ngcontent-%COMP%]     .source-css-less .entity-other-attribute-name-id, code[_ngcontent-%COMP%]     .entity-other-attribute-name-attribute-scss, code[_ngcontent-%COMP%]     .entity-other-attribute-name-scss{color:#d7ba7d}code[_ngcontent-%COMP%]     .invalid{color:#f44747}code[_ngcontent-%COMP%]     .markup-underline{text-decoration:underline}code[_ngcontent-%COMP%]     .markup-bold{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-heading{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-italic{font-style:italic}code[_ngcontent-%COMP%]     .markup-inserted{color:#b5cea8}code[_ngcontent-%COMP%]     .markup-deleted{color:#ce9178}code[_ngcontent-%COMP%]     .markup-changed{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-quote-begin-markdown{color:#6a9955}code[_ngcontent-%COMP%]     .punctuation-definition-list-begin-markdown{color:#6796e6}code[_ngcontent-%COMP%]     .markup-inline-raw{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-tag{color:gray}code[_ngcontent-%COMP%]     .meta-preprocessor{color:#569cd6}code[_ngcontent-%COMP%]     .meta-preprocessor-string{color:#ce9178}code[_ngcontent-%COMP%]     .meta-preprocessor-numeric{color:#b5cea8}code[_ngcontent-%COMP%]     .meta-structure-dictionary-key-python{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-diff-header{color:#569cd6}code[_ngcontent-%COMP%]     .storage{color:#569cd6}code[_ngcontent-%COMP%]     .storage-type{color:#569cd6}code[_ngcontent-%COMP%]     .storage-modifier, code[_ngcontent-%COMP%]     .keyword-operator-noexcept{color:#569cd6}code[_ngcontent-%COMP%]     .string, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-string{color:#ce9178}code[_ngcontent-%COMP%]     .string-tag{color:#ce9178}code[_ngcontent-%COMP%]     .string-value{color:#ce9178}code[_ngcontent-%COMP%]     .string-regexp{color:#d16969}code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-begin, code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-end, code[_ngcontent-%COMP%]     .punctuation-section-embedded{color:#569cd6}code[_ngcontent-%COMP%]     .meta-template-expression{color:#d4d4d4}code[_ngcontent-%COMP%]     .support-type-vendored-property-name, code[_ngcontent-%COMP%]     .support-type-property-name, code[_ngcontent-%COMP%]     .variable-css, code[_ngcontent-%COMP%]     .variable-scss, code[_ngcontent-%COMP%]     .variable-other-less, code[_ngcontent-%COMP%]     .source-coffee-embedded{color:#9cdcfe}code[_ngcontent-%COMP%]     .keyword{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-control{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-operator{color:#d4d4d4}code[_ngcontent-%COMP%]     .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-expression, code[_ngcontent-%COMP%]     .keyword-operator-cast, code[_ngcontent-%COMP%]     .keyword-operator-sizeof, code[_ngcontent-%COMP%]     .keyword-operator-typeid, code[_ngcontent-%COMP%]     .keyword-operator-alignas, code[_ngcontent-%COMP%]     .keyword-operator-instanceof, code[_ngcontent-%COMP%]     .keyword-operator-logical-python, code[_ngcontent-%COMP%]     .keyword-operator-wordlike{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-other-unit{color:#b5cea8}code[_ngcontent-%COMP%]     .punctuation-section-embedded-begin-php, code[_ngcontent-%COMP%]     .punctuation-section-embedded-end-php{color:#569cd6}code[_ngcontent-%COMP%]     .support-function-git-rebase{color:#9cdcfe}code[_ngcontent-%COMP%]     .constant-sha-git-rebase{color:#b5cea8}code[_ngcontent-%COMP%]     .storage-modifier-import-java, code[_ngcontent-%COMP%]     .variable-language-wildcard-java, code[_ngcontent-%COMP%]     .storage-modifier-package-java{color:#d4d4d4}code[_ngcontent-%COMP%]     .variable-language{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-function, code[_ngcontent-%COMP%]     .support-function, code[_ngcontent-%COMP%]     .support-constant-handlebars, code[_ngcontent-%COMP%]     .source-powershell .variable-other-member{color:#dcdcaa}code[_ngcontent-%COMP%]     .meta-return-type, code[_ngcontent-%COMP%]     .support-class, code[_ngcontent-%COMP%]     .support-type, code[_ngcontent-%COMP%]     .entity-name-type, code[_ngcontent-%COMP%]     .entity-name-namespace, code[_ngcontent-%COMP%]     .entity-other-attribute, code[_ngcontent-%COMP%]     .entity-name-scope-resolution, code[_ngcontent-%COMP%]     .entity-name-class, code[_ngcontent-%COMP%]     .storage-type-numeric-go, code[_ngcontent-%COMP%]     .storage-type-byte-go, code[_ngcontent-%COMP%]     .storage-type-boolean-go, code[_ngcontent-%COMP%]     .storage-type-string-go, code[_ngcontent-%COMP%]     .storage-type-uintptr-go, code[_ngcontent-%COMP%]     .storage-type-error-go, code[_ngcontent-%COMP%]     .storage-type-rune-go, code[_ngcontent-%COMP%]     .storage-type-cs, code[_ngcontent-%COMP%]     .storage-type-generic-cs, code[_ngcontent-%COMP%]     .storage-type-modifier-cs, code[_ngcontent-%COMP%]     .storage-type-variable-cs, code[_ngcontent-%COMP%]     .storage-type-annotation-java, code[_ngcontent-%COMP%]     .storage-type-generic-java, code[_ngcontent-%COMP%]     .storage-type-java, code[_ngcontent-%COMP%]     .storage-type-object-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-java, code[_ngcontent-%COMP%]     .storage-type-token-java, code[_ngcontent-%COMP%]     .storage-type-groovy, code[_ngcontent-%COMP%]     .storage-type-annotation-groovy, code[_ngcontent-%COMP%]     .storage-type-parameters-groovy, code[_ngcontent-%COMP%]     .storage-type-generic-groovy, code[_ngcontent-%COMP%]     .storage-type-object-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-groovy{color:#4ec9b0}code[_ngcontent-%COMP%]     .meta-type-cast-expr, code[_ngcontent-%COMP%]     .meta-type-new-expr, code[_ngcontent-%COMP%]     .support-constant-math, code[_ngcontent-%COMP%]     .support-constant-dom, code[_ngcontent-%COMP%]     .support-constant-json, code[_ngcontent-%COMP%]     .entity-other-inherited-class{color:#4ec9b0}code[_ngcontent-%COMP%]     .keyword-control, code[_ngcontent-%COMP%]     .source-cpp .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-delete, code[_ngcontent-%COMP%]     .keyword-other-using, code[_ngcontent-%COMP%]     .keyword-other-operator, code[_ngcontent-%COMP%]     .entity-name-operator{color:#c586c0}code[_ngcontent-%COMP%]     .variable, code[_ngcontent-%COMP%]     .meta-definition-variable-name, code[_ngcontent-%COMP%]     .support-variable, code[_ngcontent-%COMP%]     .entity-name-variable{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-object-literal-key{color:#9cdcfe}code[_ngcontent-%COMP%]     .support-constant-property-value, code[_ngcontent-%COMP%]     .support-constant-font-name, code[_ngcontent-%COMP%]     .support-constant-media-type, code[_ngcontent-%COMP%]     .support-constant-media, code[_ngcontent-%COMP%]     .constant-other-color-rgb-value, code[_ngcontent-%COMP%]     .constant-other-rgb-value, code[_ngcontent-%COMP%]     .support-constant-color{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-group-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-group-assertion-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-character-class-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-begin-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-end-regexp, code[_ngcontent-%COMP%]     .keyword-operator-negation-regexp, code[_ngcontent-%COMP%]     .support-other-parenthesis-regexp{color:#ce9178}code[_ngcontent-%COMP%]     .constant-character-character-class-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-set-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-regexp, code[_ngcontent-%COMP%]     .constant-character-set-regexp{color:#d16969}code[_ngcontent-%COMP%]     .keyword-operator-or-regexp, code[_ngcontent-%COMP%]     .keyword-control-anchor-regexp{color:#dcdcaa}code[_ngcontent-%COMP%]     .keyword-operator-quantifier-regexp{color:#d7ba7d}code[_ngcontent-%COMP%]     .constant-character{color:#569cd6}code[_ngcontent-%COMP%]     .constant-character-escape{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-name-label{color:#c8c8c8}code[_ngcontent-%COMP%]     .punctuation-definition-string{color:#ce9178}code[_ngcontent-%COMP%]     .variable-language-this{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-comment{color:#6a9955}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none;color:#858585}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{right:calc(100% + 26px)}.viewport[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),_})();var F=i(2198),W=i(2994),d=i(5724),p=i(3943);const S=["leftScrollContainer"],K=["rightScrollContainer"];function J(_,L){if(1&_&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&_){const o=L.$implicit;e.Q6J("ngClass",o.class),e.xp6(1),e.Oqu(o.text)}}function Y(_,L){if(1&_&&(e.ynx(0),e.TgZ(1,"span",12),e._uU(2),e.qZA(),e.YNc(3,J,2,2,"span",13),e.ALo(4,"tokens"),e.ALo(5,"searchToken"),e.ALo(6,"async"),e.BQk()),2&_){const o=e.oxw().$implicit,a=e.oxw();e.xp6(2),e.Oqu(null==o.oldLine?null:o.oldLine.lineNumber),e.xp6(1),e.Q6J("ngForOf",e.xi3(4,2,e.Dn7(5,5,null==o.oldLine?null:o.oldLine.tokens,null==o.oldLine?null:o.oldLine.text,e.lcZ(6,9,a.search)),null==o.oldLine?null:o.oldLine.text))}}function ge(_,L){if(1&_&&(e.TgZ(0,"li",10),e.YNc(1,Y,7,11,"ng-container",11),e.qZA()),2&_){const o=L.$implicit;e.Q6J("ngClass","line-"+o.status),e.xp6(1),e.Q6J("ngIf","added"!==o.status)}}function ue(_,L){if(1&_&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&_){const o=L.$implicit;e.Q6J("ngClass",o.class),e.xp6(1),e.Oqu(o.text)}}function pe(_,L){if(1&_&&(e.ynx(0),e.TgZ(1,"span",12),e._uU(2),e.qZA(),e.YNc(3,ue,2,2,"span",13),e.ALo(4,"tokens"),e.ALo(5,"searchToken"),e.ALo(6,"async"),e.BQk()),2&_){const o=e.oxw().$implicit,a=e.oxw();e.xp6(2),e.Oqu(null==o.newLine?null:o.newLine.lineNumber),e.xp6(1),e.Q6J("ngForOf",e.xi3(4,2,e.Dn7(5,5,null==o.newLine?null:o.newLine.tokens,null==o.newLine?null:o.newLine.text,e.lcZ(6,9,a.search)),null==o.newLine?null:o.newLine.text))}}function _e(_,L){if(1&_&&(e.TgZ(0,"li",10),e.YNc(1,pe,7,11,"ng-container",11),e.qZA()),2&_){const o=L.$implicit;e.Q6J("ngClass","line-"+o.status),e.xp6(1),e.Q6J("ngIf","removed"!==o.status)}}let he=(()=>{class _ extends((0,E.j)(f.A)){constructor(o,a){super(),this.zone=o,this.diffService=a,this.leftLineNumberMargin=0,this.rightLineNumberMargin=0,this.lines$=new x.X([]),this.selectedLines=new x.X([]),this.currentPatch=null}ngOnInit(){this.diffLines.pipe((0,c.R)(this.destroyed$)).subscribe(o=>{const a=this.currentPatch?{...this.currentPatch}:null;o?(this.currentPatch={newFilePath:o.newFilePath,oldFilePath:o.oldFilePath},this.leftLineNumberMargin=this.diffService.calculateMargin(o.oldLines.length.toString().length,!0),this.rightLineNumberMargin=this.diffService.calculateMargin(o.newLines.length.toString().length,!0),this.diffService.calculateSplitLines(o.oldLines,o.newLines,o.hunks).pipe((0,c.R)(this.destroyed$)).subscribe(w=>{this.lines$.next(w),(!a||a.oldFilePath!==this.currentPatch?.oldFilePath||a.newFilePath!==this.currentPatch?.newFilePath)&&(this.leftScrollContainer?.nativeElement?.scrollTo(0,0),this.rightScrollContainer?.nativeElement?.scrollTo(0,0))})):(this.currentPatch=null,this.leftLineNumberMargin=0,this.rightLineNumberMargin=0,this.lines$.next([]),a&&(this.leftScrollContainer?.nativeElement?.scrollTo(0,0),this.rightScrollContainer?.nativeElement?.scrollTo(0,0)))}),this.zone.runOutsideAngular(()=>{let o=!1,a=!1;(0,m.R)(this.leftScrollContainer.nativeElement,"scroll",{passive:!0}).pipe((0,F.h)(()=>!a),(0,W.b)(()=>{o=!0,this.rightScrollContainer.nativeElement.scrollTo(this.leftScrollContainer.nativeElement.scrollLeft,this.leftScrollContainer.nativeElement.scrollTop)}),(0,r.b)(100),(0,c.R)(this.destroyed$)).subscribe(()=>{o=!1}),(0,m.R)(this.rightScrollContainer.nativeElement,"scroll",{passive:!0}).pipe((0,F.h)(()=>!o),(0,W.b)(()=>{a=!0,this.leftScrollContainer.nativeElement.scrollTo(this.rightScrollContainer.nativeElement.scrollLeft,this.rightScrollContainer.nativeElement.scrollTop)}),(0,r.b)(100),(0,c.R)(this.destroyed$)).subscribe(()=>{a=!1})}),(0,m.R)(document,"selectionchange").pipe((0,r.b)(100),(0,c.R)(this.destroyed$)).subscribe(()=>{const o=document.getSelection();if(!o)return void this.selectedLines.next([]);const a=[];for(let w=0;w<o.rangeCount;w++){const b=o.getRangeAt(w);if(!b.startContainer.parentElement||!b.endContainer.parentElement||!(this.leftScrollContainer.nativeElement.contains(b.startContainer.parentElement)&&this.leftScrollContainer.nativeElement.contains(b.endContainer.parentElement)||this.rightScrollContainer.nativeElement.contains(b.startContainer.parentElement)&&this.rightScrollContainer.nativeElement.contains(b.endContainer.parentElement))||b.startContainer.parentElement===b.endContainer.parentElement&&b.startOffset===b.endOffset)continue;const V=this.leftScrollContainer.nativeElement.contains(b.startContainer.parentElement)?this.leftScrollContainer:this.rightScrollContainer,Q=V.nativeElement.getBoundingClientRect().top,G=V.nativeElement.scrollTop;a.push([Math.floor((G+b.startContainer.parentElement.getBoundingClientRect().top-Q)/19),Math.floor((G+b.endContainer.parentElement.getBoundingClientRect().top-Q)/19)])}this.selectedLines.next(a)}),(0,C.aj)([this.lines$,this.selectedLines]).pipe((0,l.U)(([o,a])=>a.flatMap(([w,b])=>(0,T.Z)(w,b+1)).map(w=>({oldLineNo:o[w]?.oldLine?.lineNumber??-1,newLineNo:o[w]?.newLine?.lineNumber??-1}))),(0,c.R)(this.destroyed$)).subscribe(o=>{this.diffService.selectedLines.next(o)})}trackByDiffLine(o,a){return o}}return _.\u0275fac=function(o){return new(o||_)(e.Y36(e.R0b),e.Y36(A.S))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-split-view"]],viewQuery:function(o,a){if(1&o&&(e.Gf(S,7,e.SBq),e.Gf(K,7,e.SBq)),2&o){let w;e.iGM(w=e.CRH())&&(a.leftScrollContainer=w.first),e.iGM(w=e.CRH())&&(a.rightScrollContainer=w.first)}},inputs:{diffLines:"diffLines",search:"search"},features:[e.qOj],decls:17,vars:18,consts:[["id","diff-view_split-left"],[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["leftScrollContainer",""],[1,"left-code"],["leftCode",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["id","diff-view_split-right"],["rightScrollContainer",""],[1,"right-code"],["rightCode",""],[1,"line",3,"ngClass"],[4,"ngIf"],[1,"line-number"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,a){1&o&&(e.TgZ(0,"app-grid")(1,"app-grid-cell",0)(2,"cdk-virtual-scroll-viewport",1,2)(4,"code",3,4)(6,"ul"),e.YNc(7,ge,2,2,"li",5),e.ALo(8,"async"),e.qZA()()()(),e.TgZ(9,"app-grid-cell",6)(10,"cdk-virtual-scroll-viewport",1,7)(12,"code",8,9)(14,"ul"),e.YNc(15,_e,2,2,"li",5),e.ALo(16,"async"),e.qZA()()()()()),2&o&&(e.xp6(2),e.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),e.xp6(4),e.Udp("margin-left",a.leftLineNumberMargin+26,"px"),e.xp6(1),e.Q6J("cdkVirtualForOf",e.lcZ(8,14,a.lines$))("cdkVirtualForTrackBy",a.trackByDiffLine),e.xp6(3),e.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),e.xp6(4),e.Udp("margin-left",a.rightLineNumberMargin+26,"px"),e.xp6(1),e.Q6J("cdkVirtualForOf",e.lcZ(16,16,a.lines$))("cdkVirtualForTrackBy",a.trackByDiffLine))},dependencies:[U.xd,U.x0,U.N7,N.mk,N.sg,N.O5,d.Y,p.M,N.Ov,X.y,z.U],styles:["code[_ngcontent-%COMP%]{display:block;white-space:pre;color:#d4d4d4;font-family:Consolas,Courier New,monospace;font-size:14px;font-weight:400;letter-spacing:0px;line-height:19px}code[_ngcontent-%COMP%]     .line{height:19px}code[_ngcontent-%COMP%]     .line.line-added{background:#1f2c19}code[_ngcontent-%COMP%]     .line.line-removed{background:#501515}code[_ngcontent-%COMP%]     .line.line-void{background:#111}code[_ngcontent-%COMP%]     .diff-added{background-color:#1d572c}code[_ngcontent-%COMP%]     .diff-removed{background-color:#803030}code[_ngcontent-%COMP%]     .search-result{background-color:#a14e1b}code[_ngcontent-%COMP%]     .meta-embedded, code[_ngcontent-%COMP%]     .source-groovy-embedded{color:#d4d4d4}code[_ngcontent-%COMP%]     .emphasis{font-style:italic}code[_ngcontent-%COMP%]     .strong{font-weight:700}code[_ngcontent-%COMP%]     .header{color:navy}code[_ngcontent-%COMP%]     .comment{color:#6a9955}code[_ngcontent-%COMP%]     .constant-language{color:#569cd6}code[_ngcontent-%COMP%]     .constant-numeric, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-number, code[_ngcontent-%COMP%]     .variable-other-enummember, code[_ngcontent-%COMP%]     .keyword-operator-plus-exponent, code[_ngcontent-%COMP%]     .keyword-operator-minus-exponent{color:#b5cea8}code[_ngcontent-%COMP%]     .constant-regexp{color:#646695}code[_ngcontent-%COMP%]     .entity-name-tag{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-tag-css{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-other-attribute-name{color:#9cdcfe}code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-mixin-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-id-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-parent-selector-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-element-css, code[_ngcontent-%COMP%]     .source-css-less .entity-other-attribute-name-id, code[_ngcontent-%COMP%]     .entity-other-attribute-name-attribute-scss, code[_ngcontent-%COMP%]     .entity-other-attribute-name-scss{color:#d7ba7d}code[_ngcontent-%COMP%]     .invalid{color:#f44747}code[_ngcontent-%COMP%]     .markup-underline{text-decoration:underline}code[_ngcontent-%COMP%]     .markup-bold{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-heading{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-italic{font-style:italic}code[_ngcontent-%COMP%]     .markup-inserted{color:#b5cea8}code[_ngcontent-%COMP%]     .markup-deleted{color:#ce9178}code[_ngcontent-%COMP%]     .markup-changed{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-quote-begin-markdown{color:#6a9955}code[_ngcontent-%COMP%]     .punctuation-definition-list-begin-markdown{color:#6796e6}code[_ngcontent-%COMP%]     .markup-inline-raw{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-tag{color:gray}code[_ngcontent-%COMP%]     .meta-preprocessor{color:#569cd6}code[_ngcontent-%COMP%]     .meta-preprocessor-string{color:#ce9178}code[_ngcontent-%COMP%]     .meta-preprocessor-numeric{color:#b5cea8}code[_ngcontent-%COMP%]     .meta-structure-dictionary-key-python{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-diff-header{color:#569cd6}code[_ngcontent-%COMP%]     .storage{color:#569cd6}code[_ngcontent-%COMP%]     .storage-type{color:#569cd6}code[_ngcontent-%COMP%]     .storage-modifier, code[_ngcontent-%COMP%]     .keyword-operator-noexcept{color:#569cd6}code[_ngcontent-%COMP%]     .string, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-string{color:#ce9178}code[_ngcontent-%COMP%]     .string-tag{color:#ce9178}code[_ngcontent-%COMP%]     .string-value{color:#ce9178}code[_ngcontent-%COMP%]     .string-regexp{color:#d16969}code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-begin, code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-end, code[_ngcontent-%COMP%]     .punctuation-section-embedded{color:#569cd6}code[_ngcontent-%COMP%]     .meta-template-expression{color:#d4d4d4}code[_ngcontent-%COMP%]     .support-type-vendored-property-name, code[_ngcontent-%COMP%]     .support-type-property-name, code[_ngcontent-%COMP%]     .variable-css, code[_ngcontent-%COMP%]     .variable-scss, code[_ngcontent-%COMP%]     .variable-other-less, code[_ngcontent-%COMP%]     .source-coffee-embedded{color:#9cdcfe}code[_ngcontent-%COMP%]     .keyword{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-control{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-operator{color:#d4d4d4}code[_ngcontent-%COMP%]     .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-expression, code[_ngcontent-%COMP%]     .keyword-operator-cast, code[_ngcontent-%COMP%]     .keyword-operator-sizeof, code[_ngcontent-%COMP%]     .keyword-operator-typeid, code[_ngcontent-%COMP%]     .keyword-operator-alignas, code[_ngcontent-%COMP%]     .keyword-operator-instanceof, code[_ngcontent-%COMP%]     .keyword-operator-logical-python, code[_ngcontent-%COMP%]     .keyword-operator-wordlike{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-other-unit{color:#b5cea8}code[_ngcontent-%COMP%]     .punctuation-section-embedded-begin-php, code[_ngcontent-%COMP%]     .punctuation-section-embedded-end-php{color:#569cd6}code[_ngcontent-%COMP%]     .support-function-git-rebase{color:#9cdcfe}code[_ngcontent-%COMP%]     .constant-sha-git-rebase{color:#b5cea8}code[_ngcontent-%COMP%]     .storage-modifier-import-java, code[_ngcontent-%COMP%]     .variable-language-wildcard-java, code[_ngcontent-%COMP%]     .storage-modifier-package-java{color:#d4d4d4}code[_ngcontent-%COMP%]     .variable-language{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-function, code[_ngcontent-%COMP%]     .support-function, code[_ngcontent-%COMP%]     .support-constant-handlebars, code[_ngcontent-%COMP%]     .source-powershell .variable-other-member{color:#dcdcaa}code[_ngcontent-%COMP%]     .meta-return-type, code[_ngcontent-%COMP%]     .support-class, code[_ngcontent-%COMP%]     .support-type, code[_ngcontent-%COMP%]     .entity-name-type, code[_ngcontent-%COMP%]     .entity-name-namespace, code[_ngcontent-%COMP%]     .entity-other-attribute, code[_ngcontent-%COMP%]     .entity-name-scope-resolution, code[_ngcontent-%COMP%]     .entity-name-class, code[_ngcontent-%COMP%]     .storage-type-numeric-go, code[_ngcontent-%COMP%]     .storage-type-byte-go, code[_ngcontent-%COMP%]     .storage-type-boolean-go, code[_ngcontent-%COMP%]     .storage-type-string-go, code[_ngcontent-%COMP%]     .storage-type-uintptr-go, code[_ngcontent-%COMP%]     .storage-type-error-go, code[_ngcontent-%COMP%]     .storage-type-rune-go, code[_ngcontent-%COMP%]     .storage-type-cs, code[_ngcontent-%COMP%]     .storage-type-generic-cs, code[_ngcontent-%COMP%]     .storage-type-modifier-cs, code[_ngcontent-%COMP%]     .storage-type-variable-cs, code[_ngcontent-%COMP%]     .storage-type-annotation-java, code[_ngcontent-%COMP%]     .storage-type-generic-java, code[_ngcontent-%COMP%]     .storage-type-java, code[_ngcontent-%COMP%]     .storage-type-object-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-java, code[_ngcontent-%COMP%]     .storage-type-token-java, code[_ngcontent-%COMP%]     .storage-type-groovy, code[_ngcontent-%COMP%]     .storage-type-annotation-groovy, code[_ngcontent-%COMP%]     .storage-type-parameters-groovy, code[_ngcontent-%COMP%]     .storage-type-generic-groovy, code[_ngcontent-%COMP%]     .storage-type-object-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-groovy{color:#4ec9b0}code[_ngcontent-%COMP%]     .meta-type-cast-expr, code[_ngcontent-%COMP%]     .meta-type-new-expr, code[_ngcontent-%COMP%]     .support-constant-math, code[_ngcontent-%COMP%]     .support-constant-dom, code[_ngcontent-%COMP%]     .support-constant-json, code[_ngcontent-%COMP%]     .entity-other-inherited-class{color:#4ec9b0}code[_ngcontent-%COMP%]     .keyword-control, code[_ngcontent-%COMP%]     .source-cpp .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-delete, code[_ngcontent-%COMP%]     .keyword-other-using, code[_ngcontent-%COMP%]     .keyword-other-operator, code[_ngcontent-%COMP%]     .entity-name-operator{color:#c586c0}code[_ngcontent-%COMP%]     .variable, code[_ngcontent-%COMP%]     .meta-definition-variable-name, code[_ngcontent-%COMP%]     .support-variable, code[_ngcontent-%COMP%]     .entity-name-variable{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-object-literal-key{color:#9cdcfe}code[_ngcontent-%COMP%]     .support-constant-property-value, code[_ngcontent-%COMP%]     .support-constant-font-name, code[_ngcontent-%COMP%]     .support-constant-media-type, code[_ngcontent-%COMP%]     .support-constant-media, code[_ngcontent-%COMP%]     .constant-other-color-rgb-value, code[_ngcontent-%COMP%]     .constant-other-rgb-value, code[_ngcontent-%COMP%]     .support-constant-color{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-group-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-group-assertion-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-character-class-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-begin-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-end-regexp, code[_ngcontent-%COMP%]     .keyword-operator-negation-regexp, code[_ngcontent-%COMP%]     .support-other-parenthesis-regexp{color:#ce9178}code[_ngcontent-%COMP%]     .constant-character-character-class-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-set-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-regexp, code[_ngcontent-%COMP%]     .constant-character-set-regexp{color:#d16969}code[_ngcontent-%COMP%]     .keyword-operator-or-regexp, code[_ngcontent-%COMP%]     .keyword-control-anchor-regexp{color:#dcdcaa}code[_ngcontent-%COMP%]     .keyword-operator-quantifier-regexp{color:#d7ba7d}code[_ngcontent-%COMP%]     .constant-character{color:#569cd6}code[_ngcontent-%COMP%]     .constant-character-escape{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-name-label{color:#c8c8c8}code[_ngcontent-%COMP%]     .punctuation-definition-string{color:#ce9178}code[_ngcontent-%COMP%]     .variable-language-this{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-comment{color:#6a9955}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .line-number[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none;color:#858585;right:calc(100% + 26px)}code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-added[_ngcontent-%COMP%]{background:#111}code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%]{background:#501515}code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-removed[_ngcontent-%COMP%]{background:#111}code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%]{background:#1f2c19}.viewport[_ngcontent-%COMP%]{height:100%;width:100%;overflow-x:scroll}"],changeDetection:0}),_})();var fe=i(266),Ce=i(3061);let me=(()=>{class _{}return _.\u0275fac=function(o){return new(o||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[s.vV,n.c,B.I]}),_})();e.B6R(g.s,[s.A9,s.Yi,N.O5,k.lW,j.Hw,fe.gM,Ce.T,ie,de,he],[N.Ov])},315:($,Z,i)=>{i.d(Z,{S:()=>M});var s=i(3969),B=i(7717),g=i(591),e=i(1086),D=i(567),T=i(4850),O=i(4650);let M=(()=>{class y{constructor(){this.selectedLines=new g.X([]),this.calculateInlineLines=(u,h,v)=>{const I=[];let x=0,m=0,C=[];const P=(t,c)=>{(t>x||c>m)&&(I.push(...(0,B.Z)(u.slice(x,t),h.slice(m,c)).map(([r,l])=>({oldLine:r??null,newLine:l??null,status:"unchanged"}))),x=t,m=c)};for(const t of v){P(t.oldStart-1,t.newStart-1),[C,x,m]=this.calculateGroups(u,h,x,m,t);for(const c of C)"modified"===c.type?I.push(...c.lines.flatMap(r=>"replaced"===r.status?[{...r,status:"removed",newLine:null},{...r,status:"added",oldLine:null}]:[r]).sort((r,l)=>"removed"===r.status&&"removed"===l.status?0:"removed"===r.status?-1:"removed"===l.status?1:0)):I.push(...c.lines)}return P(u.length,h.length),(0,e.of)(I)},this.calculateHunkLines=(u,h,v)=>{const I=[];let x=0,m=0,C=[];const P=(t,c,r)=>{(t>x||c>m)&&(I.push({isSeparator:!0,separatorHeader:r,hiddenDiffLines:(0,B.Z)(u.slice(x,t),h.slice(m,c)).map(([l,E])=>({oldLine:l??null,newLine:E??null,status:"unchanged"}))}),x=t,m=c)};for(const t of v){P(t.oldStart-1,t.newStart-1,t.header),[C,x,m]=this.calculateGroups(u,h,x,m,t);for(const c of C)"modified"===c.type?I.push(...c.lines.flatMap(r=>"replaced"===r.status?[{isSeparator:!1,diffLine:{...r,status:"removed",newLine:null}},{isSeparator:!1,diffLine:{...r,status:"added",oldLine:null}}]:[{isSeparator:!1,diffLine:r}]).sort((r,l)=>"removed"===r.diffLine.status&&"removed"===l.diffLine.status?0:"removed"===r.diffLine.status?-1:"removed"===l.diffLine.status?1:0)):I.push(...c.lines.map(r=>({isSeparator:!1,diffLine:r})))}return P(u.length,h.length,null),(0,e.of)(I)},this.calculateSplitLines=(u,h,v)=>{const I=[];let x=0,m=0,C=[];const P=(t,c)=>{(t>x||c>m)&&(I.push(...(0,B.Z)(u.slice(x,t),h.slice(m,c)).map(([r,l])=>({oldLine:r??null,newLine:l??null,status:"unchanged"}))),x=t,m=c)};for(const t of v){P(t.oldStart-1,t.newStart-1),[C,x,m]=this.calculateGroups(u,h,x,m,t);for(const c of C)I.push(...c.lines)}return P(u.length,h.length),(0,e.of)(I)},this.calculateMergeLines=(u,h,v,I,x)=>{const m=[],C=this.calculateSplitLines(u,h,I),P=this.calculateSplitLines(u,v,x);return(0,D.D)([C,P]).pipe((0,T.U)(([t,c])=>{let r=1,l=0,E=0;for(;l<t.length&&E<c.length;){const f=t[l],A=c[E];if(f.oldLine||A.oldLine){if(!f.oldLine&&A.oldLine)m.push({baseLine:null,yoursLine:f.newLine,yoursStatus:f.status,theirsLine:null,theirsStatus:null}),l++;else if(f.oldLine&&!A.oldLine)m.push({baseLine:null,yoursLine:null,yoursStatus:null,theirsLine:A.newLine,theirsStatus:A.status}),E++;else if(f.oldLine&&A.oldLine){if(r!==f.oldLine.lineNumber||r!==A.oldLine.lineNumber)throw new Error(`Base line numbers do not match - yours: ${f.oldLine.lineNumber}, theirs: ${A.oldLine.lineNumber}`);m.push({baseLine:A.oldLine,yoursLine:f.newLine,yoursStatus:f.status,theirsLine:A.newLine,theirsStatus:A.status}),r++,l++,E++}}else m.push({baseLine:null,yoursLine:f.newLine,yoursStatus:f.status,theirsLine:A.newLine,theirsStatus:A.status}),l++,E++}for(;l<t.length;){const f=t[l];m.push({baseLine:f.oldLine,yoursLine:f.newLine,yoursStatus:f.status,theirsLine:null,theirsStatus:null}),l++}for(;E<c.length;){const f=c[E];m.push({baseLine:f.oldLine,yoursLine:null,yoursStatus:null,theirsLine:f.newLine,theirsStatus:f.status}),E++}return m}))},this.calculateGroups=(u,h,v,I,x)=>{const m=x.lines.filter(r=>">"!==r.origin&&"<"!==r.origin),C=[];let P=v,t=I,c=0;for(;c<m.length;)if(-1===m[c].newLineNo){const r=[];for(;c<m.length&&-1===m[c].newLineNo;)r.push(u[P]),P++,c++;if(c<m.length&&-1===m[c].oldLineNo){const l=[];for(;c<m.length&&-1===m[c].oldLineNo;)l.push(h[t]),t++,c++;C.push(this.createModifiedGroup(r,l))}else C.push({type:"removed",lines:r.map(l=>({oldLine:l,newLine:null,status:"removed"}))})}else if(-1===m[c].oldLineNo){const r=[];for(;c<m.length&&-1===m[c].oldLineNo;)r.push(h[t]),t++,c++;if(c<m.length&&-1===m[c].newLineNo){const l=[];for(;c<m.length&&-1===m[c].newLineNo;)l.push(u[P]),P++,c++;C.push(this.createModifiedGroup(l,r))}else C.push({type:"added",lines:r.map(l=>({oldLine:null,newLine:l,status:"added"}))})}else{const r=[],l=[];for(;c<m.length&&-1!==m[c].oldLineNo&&-1!==m[c].newLineNo;)r.push(u[P]),l.push(h[t]),P++,t++,c++;C.push({type:"unchanged",lines:(0,B.Z)(r,l).map(([E,f])=>({oldLine:E??null,newLine:f??null,status:"unchanged"}))})}return[C,P,t]},this.createModifiedGroup=(u,h)=>{const v=u.map(U=>U.text.replace("\n","")).join("\n"),I=h.map(U=>U.text.replace("\n","")).join("\n"),x=new s.diff_match_patch,m=x.diff_main(v,I);x.diff_cleanupSemantic(m);const C=[];let P=0,t=0,c=null,r=null,l=[],E=[],f=[];const A=U=>{U===s.DIFF_EQUAL?(C.push({status:null!==c&&null!==r?"replaced":null!==c?"removed":"added",oldLine:null!==c?{...u[P],tokens:[...u[P].tokens,...l]}:null,newLine:null!==r?{...h[t],tokens:[...h[t].tokens,...E]}:null}),P++,t++,c=null,r=null,l=[],E=[]):U===s.DIFF_INSERT?(null===c&&(C.push(...f),f=[]),(null===c?C:f).push({status:"added",oldLine:null,newLine:{...h[t],tokens:[...h[t].tokens,...E]}}),t++,r=null,E=[]):U===s.DIFF_DELETE&&(null===r&&(C.push(...f),f=[]),(null===r?C:f).push({status:"removed",oldLine:{...u[P],tokens:[...u[P].tokens,...l]},newLine:null}),P++,c=null,l=[])};for(const[U,N]of m){const k=N.split("\n");if(U===s.DIFF_EQUAL){if(k.length>1){C.push(...f),f=[],null!==c||null!==r?(c=(c??0)+k[0].length,r=(r??0)+k[0].length,A(U)):(C.push({status:"unchanged",oldLine:u[P],newLine:h[t]}),P++,t++);for(let j=1;j<k.length-1;j++)C.push({status:"unchanged",oldLine:u[P],newLine:h[t]}),P++,t++}c=(c??0)+k[k.length-1].length,r=(r??0)+k[k.length-1].length}else if(U===s.DIFF_INSERT){if(k.length>1)if(null!==r){k[0].length>0&&E.push({startIndex:r??0,endIndex:(r??0)+k[0].length,scopes:["diff-added"]}),r+=k[0].length,A(U);for(let j=1;j<k.length-1;j++)(null===c?C:f).push({status:"added",oldLine:null,newLine:{...h[t],tokens:[...h[t].tokens,{startIndex:0,endIndex:k[j].length,scopes:["diff-added"]}]}}),t++}else for(let j=0;j<k.length-1;j++)(null===c?C:f).push({status:"added",oldLine:null,newLine:{...h[t],tokens:[...h[t].tokens,{startIndex:0,endIndex:k[j].length,scopes:["diff-added"]}]}}),t++;k[k.length-1].length>0&&E.push({startIndex:r??0,endIndex:(r??0)+k[k.length-1].length,scopes:["diff-added"]}),r=(r??0)+k[k.length-1].length}else if(U===s.DIFF_DELETE){if(k.length>1)if(null!==c){k[0].length>0&&l.push({startIndex:c??0,endIndex:(c??0)+k[0].length,scopes:["diff-removed"]}),c+=k[0].length,A(U);for(let j=1;j<k.length-1;j++)(null===r?C:f).push({status:"removed",oldLine:{...u[P],tokens:[...u[P].tokens,{startIndex:0,endIndex:k[j].length,scopes:["diff-removed"]}]},newLine:null}),P++}else for(let j=0;j<k.length-1;j++)(null===r?C:f).push({status:"removed",oldLine:{...u[P],tokens:[...u[P].tokens,{startIndex:0,endIndex:k[j].length,scopes:["diff-removed"]}]},newLine:null}),P++;k[k.length-1].length>0&&l.push({startIndex:c??0,endIndex:(c??0)+k[k.length-1].length,scopes:["diff-removed"]}),c=(c??0)+k[k.length-1].length}}return C.push(...f),(null!==c||null!==r)&&(0===v.length&&(c=c??0),0===I.length&&(r=r??0),A(s.DIFF_EQUAL)),{type:"modified",lines:C}}}calculateMargin(u,h=!1){return y.lineNumberSpacing+u*y.lineNumberCharacterWidth*(h?1:2)}getFileExtension(u){if(!u)return null;const h=u.lastIndexOf(".");return h>0?u.substring(h+1):null}}return y.lineNumberCharacterWidth=8.3,y.lineNumberSpacing=10,y.\u0275fac=function(u){return new(u||y)},y.\u0275prov=O.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},1899:($,Z,i)=>{i.d(Z,{y:()=>n});var s=i(4650);let n=(()=>{class B{transform(e,D,T){if(!T||!D)return e;const O=Array.from(D.matchAll(T),M=>({startIndex:M.index??0,endIndex:(M.index??0)+M[0].length,scopes:["search-result"]}));return[...e,...O]}}return B.\u0275fac=function(e){return new(e||B)},B.\u0275pipe=s.Yjl({name:"searchToken",type:B,pure:!0}),B})()},1453:($,Z,i)=>{i.d(Z,{U:()=>e});var s=i(9466),n=i(1256),B=i(4650);let e=(()=>{class D{constructor(){this.renderScopes=O=>O.map(M=>this.renderScope(M)).join(" "),this.areEqual=(O,M)=>{if(O.length!==M.length)return!1;const y=new Set(O);for(const R of M)if(!y.has(R))return!1;return!0}}transform(O,M=""){if(!M)return[];if(M.length>1e4)return[{class:"normal",text:M.slice(0,1e4)+"... Max line length reached!"}];const y=(0,s.Z)(O,v=>v.startIndex),R=[];let u=0,h=y.filter(v=>v.startIndex<=u&&v.endIndex>u);for(;u<M.length;){let v=y.filter(x=>x.startIndex<=u&&x.endIndex>u);const I=u;for(;this.areEqual(h,v)&&u<M.length;)u++,v=y.filter(x=>x.startIndex<=u&&x.endIndex>u);R.push({class:this.renderScopes(h.map(x=>x.scopes)),text:M.substring(I,u)||"\n"}),h=v}return R}renderScope(O){const y=O[O.length-1].split(".");return(0,n.Z)(1,y.length+1).map(R=>y.slice(0,R).join("-")).join(" ")}}return D.\u0275fac=function(O){return new(O||D)},D.\u0275pipe=B.Yjl({name:"tokens",type:D,pure:!0}),D})()},811:($,Z,i)=>{i.d(Z,{A9:()=>v,Yi:()=>x,vV:()=>m});var s=i(2687),n=i(1281),B=i(5017),g=i(4650),e=i(4006),D=i(3238);const T=["button"],O=["*"],M=new g.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),y=new g.OlP("MatButtonToggleGroup"),R={provide:e.JU,useExisting:(0,g.Gpc)(()=>v),multi:!0};let u=0;class h{constructor(P,t){this.source=P,this.value=t}}let v=(()=>{class C{constructor(t,c){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+u++,this.valueChange=new g.vpe,this.change=new g.vpe,this.appearance=c&&c.appearance?c.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=(0,n.Ig)(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(c=>c.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=(0,n.Ig)(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,n.Ig)(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new B.Ov(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const c=new h(t,this.value);this._controlValueAccessorChangeFn(c.value),this.change.emit(c)}_syncButtonToggle(t,c,r=!1,l=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?c?this._selectionModel.select(t):this._selectionModel.deselect(t):l=!0,l?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(c=>null!=t.value&&c===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(c=>this._selectValue(c))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const c=this._buttonToggles.find(r=>null!=r.value&&r.value===t);c&&(c.checked=!0,this._selectionModel.select(c))}_updateModelValue(t,c){c&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return C.\u0275fac=function(t){return new(t||C)(g.Y36(g.sBO),g.Y36(M,8))},C.\u0275dir=g.lG2({type:C,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,c,r){if(1&t&&g.Suo(r,x,5),2&t){let l;g.iGM(l=g.CRH())&&(c._buttonToggles=l)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,c){2&t&&(g.uIk("aria-disabled",c.disabled),g.ekj("mat-button-toggle-vertical",c.vertical)("mat-button-toggle-group-appearance-standard","standard"===c.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[g._Bn([R,{provide:y,useExisting:C}])]}),C})();const I=(0,D.Kr)(class{});let x=(()=>{class C extends I{constructor(t,c,r,l,E,f){super(),this._changeDetectorRef=c,this._elementRef=r,this._focusMonitor=l,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new g.vpe;const A=Number(E);this.tabIndex=A||0===A?A:null,this.buttonToggleGroup=t,this.appearance=f&&f.appearance?f.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const c=(0,n.Ig)(t);c!==this._checked&&(this._checked=c,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=(0,n.Ig)(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+u++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new h(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return C.\u0275fac=function(t){return new(t||C)(g.Y36(y,8),g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(s.tE),g.$8M("tabindex"),g.Y36(M,8))},C.\u0275cmp=g.Xpm({type:C,selectors:[["mat-button-toggle"]],viewQuery:function(t,c){if(1&t&&g.Gf(T,5),2&t){let r;g.iGM(r=g.CRH())&&(c._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,c){1&t&&g.NdJ("focus",function(){return c.focus()}),2&t&&(g.uIk("aria-label",null)("aria-labelledby",null)("id",c.id)("name",null),g.ekj("mat-button-toggle-standalone",!c.buttonToggleGroup)("mat-button-toggle-checked",c.checked)("mat-button-toggle-disabled",c.disabled)("mat-button-toggle-appearance-standard","standard"===c.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[g.qOj],ngContentSelectors:O,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,c){if(1&t&&(g.F$t(),g.TgZ(0,"button",0,1),g.NdJ("click",function(){return c._onButtonClick()}),g.TgZ(2,"span",2),g.Hsn(3),g.qZA()(),g._UZ(4,"span",3)(5,"span",4)),2&t){const r=g.MAs(1);g.Q6J("id",c.buttonId)("disabled",c.disabled||null),g.uIk("tabindex",c.disabled?-1:c.tabIndex)("aria-pressed",c.checked)("name",c._getButtonName())("aria-label",c.ariaLabel)("aria-labelledby",c.ariaLabelledby),g.xp6(5),g.Q6J("matRippleTrigger",r)("matRippleDisabled",c.disableRipple||c.disabled)}},dependencies:[D.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),C})(),m=(()=>{class C{}return C.\u0275fac=function(t){return new(t||C)},C.\u0275mod=g.oAB({type:C}),C.\u0275inj=g.cJS({imports:[D.BQ,D.si,D.BQ]}),C})()},3693:($,Z,i)=>{i.d(Z,{Z:()=>u});const g=function s(h){return function(v,I,x){for(var m=-1,C=Object(v),P=x(v),t=P.length;t--;){var c=P[h?t:++m];if(!1===I(C[c],c,C))break}return v}}();var e=i(4157);var O=i(8706);const u=function M(h,v){return function(I,x){if(null==I)return I;if(!(0,O.Z)(I))return h(I,x);for(var m=I.length,C=v?m:-1,P=Object(I);(v?C--:++C<m)&&!1!==x(P[C],C,P););return I}}(function D(h,v){return h&&g(h,v,e.Z)})},1134:($,Z,i)=>{i.d(Z,{Z:()=>B});var s=i(6460);const B=function n(g,e,D){for(var T=-1,O=g.length;++T<O;){var M=g[T],y=e(M);if(null!=y&&(void 0===R?y==y&&!(0,s.Z)(y):D(y,R)))var R=y,u=M}return u}},2382:($,Z,i)=>{i.d(Z,{Z:()=>n});const n=function s(B,g){return B>g}},5944:($,Z,i)=>{i.d(Z,{Z:()=>P});var s=i(7988),n=i(7298),B=i(539),g=i(3693),e=i(8706);var y=i(6932),R=i(6460);const h=function u(t,c){if(t!==c){var r=void 0!==t,l=null===t,E=t==t,f=(0,R.Z)(t),A=void 0!==c,U=null===c,N=c==c,k=(0,R.Z)(c);if(!U&&!k&&!f&&t>c||f&&A&&N&&!U&&!k||l&&A&&N||!r&&N||!E)return 1;if(!l&&!f&&!k&&t<c||k&&r&&E&&!l&&!f||U&&r&&E||!A&&E||!N)return-1}return 0};var x=i(9940),m=i(4177);const P=function C(t,c,r){c=c.length?(0,s.Z)(c,function(f){return(0,m.Z)(f)?function(A){return(0,n.Z)(A,1===f.length?f[0]:f)}:f}):[x.Z];var l=-1;c=(0,s.Z)(c,(0,y.Z)(B.Z));var E=function D(t,c){var r=-1,l=(0,e.Z)(t)?Array(t.length):[];return(0,g.Z)(t,function(E,f,A){l[++r]=c(E,f,A)}),l}(t,function(f,A,U){return{criteria:(0,s.Z)(c,function(k){return k(f)}),index:++l,value:f}});return function O(t,c){var r=t.length;for(t.sort(c);r--;)t[r]=t[r].value;return t}(E,function(f,A){return function v(t,c,r){for(var l=-1,E=t.criteria,f=c.criteria,A=E.length,U=r.length;++l<A;){var N=h(E[l],f[l]);if(N)return l>=U?N:N*("desc"==r[l]?-1:1)}return t.index-c.index}(f,A,r)})}},4810:($,Z,i)=>{i.d(Z,{Z:()=>D});var s=i(3093),n=i(8706),B=i(6667),g=i(1999);const D=function e(T,O,M){if(!(0,g.Z)(M))return!1;var y=typeof O;return!!("number"==y?(0,n.Z)(M)&&(0,B.Z)(O,M.length):"string"==y&&O in M)&&(0,s.Z)(M[O],T)}},1580:($,Z,i)=>{i.d(Z,{Z:()=>e});var s=i(1134),n=i(2382),B=i(9940);const e=function g(D){return D&&D.length?(0,s.Z)(D,B.Z,n.Z):void 0}},1256:($,Z,i)=>{i.d(Z,{Z:()=>y});var s=Math.ceil,n=Math.max;var e=i(4810),D=i(5601);const y=function T(R){return function(u,h,v){return v&&"number"!=typeof v&&(0,e.Z)(u,h,v)&&(h=v=void 0),u=(0,D.Z)(u),void 0===h?(h=u,u=0):h=(0,D.Z)(h),function B(R,u,h,v){for(var I=-1,x=n(s((u-R)/(h||1)),0),m=Array(x);x--;)m[v?x:++I]=R,R+=h;return m}(u,h,v=void 0===v?u<h?1:-1:(0,D.Z)(v),R)}}()},9466:($,Z,i)=>{i.d(Z,{Z:()=>D});var s=i(113),n=i(5944),B=i(7965),g=i(4810);const D=(0,B.Z)(function(T,O){if(null==T)return[];var M=O.length;return M>1&&(0,g.Z)(T,O[0],O[1])?O=[]:M>2&&(0,g.Z)(O[0],O[1],O[2])&&(O=[O[0]]),(0,n.Z)(T,(0,s.Z)(O,1),[])})},5601:($,Z,i)=>{i.d(Z,{Z:()=>P});var s=/\s/;var g=/^\s+/;const D=function e(t){return t&&t.slice(0,function n(t){for(var c=t.length;c--&&s.test(t.charAt(c)););return c}(t)+1).replace(g,"")};var T=i(1999),O=i(6460),y=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,u=/^0o[0-7]+$/i,h=parseInt;var x=1/0;const P=function C(t){return t?(t=function v(t){if("number"==typeof t)return t;if((0,O.Z)(t))return NaN;if((0,T.Z)(t)){var c="function"==typeof t.valueOf?t.valueOf():t;t=(0,T.Z)(c)?c+"":c}if("string"!=typeof t)return 0===t?t:+t;t=D(t);var r=R.test(t);return r||u.test(t)?h(t.slice(2),r?2:8):y.test(t)?NaN:+t}(t))===x||t===-x?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}}}]);