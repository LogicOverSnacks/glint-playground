"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[705],{2771:(N,R,n)=>{n.d(R,{P:()=>E});var u=n(8929),e=n(3164),T=n(7625),O=n(4650);const E=y=>(()=>{class a extends y{ngAfterViewInit(){super.ngAfterViewInit&&super.ngAfterViewInit();const L=this.viewports.map(D=>{const _=new u.xQ,v=new ResizeObserver(()=>_.next());return _.pipe((0,e.p)(20,void 0,{leading:!0,trailing:!0}),(0,T.R)(this.destroyed$)).subscribe(()=>{D.checkViewportSize()}),v.observe(D.elementRef.nativeElement),v});this.destroyed$.subscribe(()=>{L.forEach(D=>D.disconnect())})}}return a.\u0275fac=function(){let P;return function(D){return(P||(P=O.n5z(a)))(D||a)}}(),a.\u0275prov=O.Yz7({token:a,factory:a.\u0275fac}),a})()},8070:(N,R,n)=>{n.d(R,{r:()=>e});var u=n(4650);let e=(()=>{class T{transform(E,y,M=E+"s"){return 1===y?E:M}}return T.\u0275fac=function(E){return new(E||T)},T.\u0275pipe=u.Yjl({name:"plural",type:T,pure:!0}),T})()},3448:(N,R,n)=>{n.d(R,{I:()=>e});var u=n(4650);let e=(()=>{class T{constructor(E){this.template=E}}return T.\u0275fac=function(E){return new(E||T)(u.Y36(u.Rgc))},T.\u0275dir=u.lG2({type:T,selectors:[["","appVirtualTreeLeafNode",""]]}),T})()},1123:(N,R,n)=>{n.d(R,{J:()=>e});var u=n(4650);let e=(()=>{class T{constructor(E){this.template=E}}return T.\u0275fac=function(E){return new(E||T)(u.Y36(u.Rgc))},T.\u0275dir=u.lG2({type:T,selectors:[["","appVirtualTreeNode",""]]}),T})()},6725:(N,R,n)=>{n.d(R,{L:()=>B});var u=n(3668),e=n(4850),T=n(8926),O=n(9967),E=n(2771),y=n(3448),M=n(1123),a=n(4650),P=n(6895);function L(m,U){1&m&&a.GkF(0)}const D=function(m){return{$implicit:m}};function _(m,U){if(1&m&&(a.ynx(0),a.YNc(1,L,1,0,"ng-container",3),a.BQk()),2&m){const I=a.oxw().$implicit,A=a.oxw();a.xp6(1),a.Q6J("ngTemplateOutlet",A.leafNodeDirective.template)("ngTemplateOutletContext",a.VKq(2,D,I))}}function v(m,U){1&m&&a.GkF(0)}function o(m,U){if(1&m&&(a.ynx(0),a.YNc(1,v,1,0,"ng-container",3),a.BQk()),2&m){const I=a.oxw().$implicit,A=a.oxw();a.xp6(1),a.Q6J("ngTemplateOutlet",A.nodeDirective.template)("ngTemplateOutletContext",a.VKq(2,D,I))}}function W(m,U){if(1&m&&(a.TgZ(0,"li"),a.YNc(1,_,2,4,"ng-container",2),a.YNc(2,o,2,4,"ng-container",2),a.qZA()),2&m){const I=U.$implicit,A=a.oxw();a.Udp("padding-left",10*I.depth,"px"),a.xp6(1),a.Q6J("ngIf",A.isLeaf(I)),a.xp6(1),a.Q6J("ngIf",!A.isLeaf(I))}}let B=(()=>{class m extends((0,T.j)(O.A,E.P)){constructor(){super(...arguments),this.isLeaf=I=>!I.children,this.expandVisibleNodes=I=>this.isLeaf(I)||!I.expanded?[I]:[I,...I.children.flatMap(this.expandVisibleNodes)]}ngOnInit(){this.visibleNodes=this.tree.pipe((0,e.U)(I=>I.reduce((A,K)=>[...A,...this.expandVisibleNodes(K)],[])))}trackById(I,A){return A.id}}return m.\u0275fac=function(){let U;return function(A){return(U||(U=a.n5z(m)))(A||m)}}(),m.\u0275cmp=a.Xpm({type:m,selectors:[["app-virtual-tree"]],contentQueries:function(I,A,K){if(1&I&&(a.Suo(K,M.J,5),a.Suo(K,y.I,5)),2&I){let S;a.iGM(S=a.CRH())&&(A.nodeDirective=S.first),a.iGM(S=a.CRH())&&(A.leafNodeDirective=S.first)}},viewQuery:function(I,A){if(1&I&&a.Gf(u.N7,5),2&I){let K;a.iGM(K=a.CRH())&&(A.viewports=K)}},inputs:{tree:"tree",itemSize:"itemSize"},features:[a.qOj],decls:4,vars:5,consts:[[3,"itemSize"],[3,"padding-left",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(I,A){1&I&&(a.TgZ(0,"cdk-virtual-scroll-viewport",0)(1,"ul"),a.YNc(2,W,3,4,"li",1),a.ALo(3,"async"),a.qZA()()),2&I&&(a.Q6J("itemSize",A.itemSize),a.xp6(2),a.Q6J("cdkVirtualForOf",a.lcZ(3,3,A.visibleNodes))("cdkVirtualForTrackBy",A.trackById))},dependencies:[u.xd,u.x0,u.N7,P.O5,P.tP,P.Ov],encapsulation:2,changeDetection:0}),m})()},9418:(N,R,n)=>{n.d(R,{c:()=>T});var u=n(3179),e=n(4650);let T=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=e.oAB({type:O}),O.\u0275inj=e.cJS({imports:[u.I]}),O})()},7615:(N,R,n)=>{n.d(R,{d:()=>O});var u=n(6421),e=n(9418),T=n(4650);let O=(()=>{class E{getPatchPath(M){switch(M.status){case u.v.Added:case u.v.Untracked:return M.newFilePath;case u.v.Conflicted:case u.v.Modified:case u.v.Renamed:return M.oldFilePath===M.newFilePath?M.newFilePath:`${M.oldFilePath} --\x3e ${M.newFilePath}`;case u.v.Deleted:return M.oldFilePath;default:throw new Error(`Don't know how to deal with patch status: ${u.v[M.status]}`)}}getPatchIcon(M){switch(M.status){case u.v.Added:case u.v.Untracked:return"add";case u.v.Conflicted:return"warning";case u.v.Modified:return"create";case u.v.Deleted:return"remove";case u.v.Renamed:return"swap_horiz";default:throw new Error(`Don't know how to deal with patch status: ${u.v[M.status]}`)}}getPatchIconColorClass(M){switch(M.status){case u.v.Added:case u.v.Untracked:return"green";case u.v.Conflicted:case u.v.Modified:return"orange";case u.v.Deleted:return"red";case u.v.Renamed:return"blue";default:throw new Error(`Don't know how to deal with patch status: ${u.v[M.status]}`)}}}return E.\u0275fac=function(M){return new(M||E)},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac,providedIn:e.c}),E})()},1815:(N,R,n)=>{n.d(R,{E:()=>w});var u=n(4080),e=n(591),T=n(2986),O=n(7625),E=n(4850),y=n(8926),M=n(9967),a=n(4462),P=n(8310),L=n(2120),D=n(8523),_=n(2187),v=n(6966),o=n(4650),W=n(8184),B=n(240),m=n(6271),U=n(3394),I=n(6895),A=n(4859),K=n(7392),S=n(266),H=n(5773);function z(g,f){if(1&g){const i=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(i);const s=o.oxw(2);return o.KtG(s.openWithTerminal())}),o.TgZ(1,"mat-icon"),o._uU(2,"terminal"),o.qZA(),o._uU(3," Terminal "),o.qZA()}}function Y(g,f){if(1&g){const i=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(i);const s=o.oxw(2);return o.KtG(s.openWithVsCode())}),o._UZ(1,"mat-icon",8),o._uU(2," Visual Studio Code "),o.qZA()}}function Z(g,f){if(1&g){const i=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(){const k=o.CHM(i).$implicit,F=o.oxw(2);return o.KtG(F.openRemote(k.url))}),o._UZ(1,"mat-icon",10),o._uU(2),o.qZA()}if(2&g){const i=f.$implicit;o.Q6J("matTooltip",i.url),o.xp6(1),o.s9C("svgIcon",i.type),o.xp6(1),o.AsE(" ","bitbucket"===i.type?"Bitbucket":"github"===i.type?"GitHub":"gitlab"===i.type?"GitLab":"",": ",i.name," ")}}function d(g,f){if(1&g){const i=o.EpF();o.TgZ(0,"div",4)(1,"button",5),o.NdJ("click",function(){o.CHM(i);const s=o.oxw();return o.KtG(s.openWithFileExplorer())}),o.TgZ(2,"mat-icon"),o._uU(3,"folder"),o.qZA(),o._uU(4),o.qZA(),o.YNc(5,z,4,0,"button",6),o.ALo(6,"async"),o.YNc(7,Y,3,0,"button",6),o.ALo(8,"async"),o.YNc(9,Z,3,4,"button",7),o.ALo(10,"async"),o.qZA()}if(2&g){const i=o.oxw();o.xp6(4),o.hij(" ",i.folderText," "),o.xp6(1),o.Q6J("ngIf",o.lcZ(6,4,i.hasTerminal)),o.xp6(2),o.Q6J("ngIf",o.lcZ(8,6,i.hasVsCode)),o.xp6(2),o.Q6J("ngForOf",o.lcZ(10,8,i.remotes))}}let w=(()=>{class g extends((0,y.j)(M.A)){constructor(i,x,s,k,F){super(),this.overlay=i,this.viewContainerRef=x,this.store=s,this.filesApi=k,this.providerUrlMatcherService=F,this.menuOverlayRef=new e.X(null),this.folderText=a.V?"Finder":a.E?"File Explorer":"File Manager",this.openMenu=(b,l,p)=>{b.preventDefault(),b.stopPropagation(),this.closeMenu();const t=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(l).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(t),t.attach(new u.UE(p,this.viewContainerRef)),(0,P.t)(t,!1).pipe((0,T.q)(1),(0,O.R)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))},this.openWithFileExplorer=()=>{const b=this.store.selectSnapshot(v.E.selectedRepositoryPath);if(!b)throw new Error("Cannot open repository in file explorer if repository has no path.");this.filesApi.openFileWithShell(b).pipe((0,D.s)(l=>this.store.dispatch(new _.NN("unhandled",`${l}`)))).subscribe(),this.closeMenu()},this.openWithTerminal=()=>{const b=this.store.selectSnapshot(v.E.selectedRepositoryPath);if(!b)throw new Error("Cannot open repository in terminal if repository has no path.");this.filesApi.openTerminal(b).pipe((0,D.s)(l=>this.store.dispatch(new _.NN("unhandled",`${l}`)))).subscribe(),this.closeMenu()},this.openWithVsCode=()=>{const b=this.store.selectSnapshot(v.E.selectedRepositoryPath);if(!b)throw new Error("Cannot open repository in vscode if repository has no path.");this.filesApi.openVsCode(b).pipe((0,D.s)(l=>this.store.dispatch(new _.NN("unhandled",`${l}`)))).subscribe(),this.closeMenu()},this.openRemote=b=>{window.open(b),this.closeMenu()}}ngOnInit(){this.remotes=this.store.select(v.E.selectedRemotes).pipe((0,E.U)(i=>(i??[]).map(x=>{const s=this.providerUrlMatcherService.matchProvider(x.url);return s?[x,s]:null}).filter(L.$K).map(([x,s])=>({type:s.type,url:this.providerUrlMatcherService.getUrl(s),name:x.name})))),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}}return g.\u0275fac=function(i){return new(i||g)(o.Y36(W.aV),o.Y36(o.s_b),o.Y36(B.yh),o.Y36(m.k),o.Y36(U.d))},g.\u0275cmp=o.Xpm({type:g,selectors:[["app-repository-actions-open-with"]],features:[o.qOj],decls:6,vars:0,consts:[["type","button","mat-stroked-button","","matTooltip","Open repository with...","appElementRef","",1,"item",3,"click"],["openWithMenuBtn","appElementRef"],[1,"launch-icon"],["openWithMenu",""],[1,"open-with-menu"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"matTooltip","click"],[3,"svgIcon"]],template:function(i,x){if(1&i){const s=o.EpF();o.TgZ(0,"button",0,1),o.NdJ("click",function(F){o.CHM(s);const b=o.MAs(1),l=o.MAs(5);return o.KtG(x.openMenu(F,b,l))}),o.TgZ(2,"mat-icon",2),o._uU(3,"launch"),o.qZA()(),o.YNc(4,d,11,10,"ng-template",null,3,o.W1O)}},dependencies:[I.sg,I.O5,A.lW,K.Hw,S.gM,H.F,I.Ov],styles:[".open-with-menu[_ngcontent-%COMP%]{background:#424242;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;max-height:calc(100vh - 48px);max-width:25vw;min-height:48px;min-width:112px;overflow-x:hidden;overflow-y:auto}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;display:flex;font-family:MontserratVariable;font-size:14px;height:48px;line-height:48px;max-width:100%;outline:none;overflow:hidden;padding:0 16px;user-select:none;text-align:left;text-overflow:ellipsis;width:100%;white-space:nowrap}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#565656}.open-with-menu[_ngcontent-%COMP%]   .menu-item[disabled][_ngcontent-%COMP%]{pointer-events:none;color:#ffffff4d}.open-with-menu[_ngcontent-%COMP%]   .menu-item.bold[_ngcontent-%COMP%]{font-weight:700}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:12px 16px 12px 0;vertical-align:middle;flex:0 0 auto}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon.expand-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:0}.open-with-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.open-with-menu.sub-menu-1[_ngcontent-%COMP%]{background:#4a4a4a}.item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0}),g})()},7093:(N,R,n)=>{n.d(R,{v:()=>M});var u=n(5412),e=n(9549),T=n(284),O=n(4385),E=n(3179),y=n(4650);let M=(()=>{class a{}return a.\u0275fac=function(L){return new(L||a)},a.\u0275mod=y.oAB({type:a}),a.\u0275inj=y.cJS({imports:[u.Is,e.lN,T.c,O.LD,E.I]}),a})()},3888:(N,R,n)=>{n.d(R,{p:()=>T});var u=n(2686),e=n(4650);let T=(()=>{class O{constructor(){this.parseReference=y=>{const M=O.referenceRegex.exec(y);if(!M)throw new Error(`Reference invalid: ${y}`);if("remotes"===M[1]){const a=O.remoteBranchRegex.exec(y);if(!a)throw new Error(`Remote reference invalid: ${y}`);return{branch:a[2],sourceName:a[1],sourceType:"remote"}}return"stash"===M[1]?{branch:"stash",sourceName:"stash",sourceType:"stash"}:{branch:M[2],sourceName:"heads"===M[1]?"local":"tag",sourceType:"heads"===M[1]?"local":"tag"}},this.getBranchTypeIcon=y=>{switch(y){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"edit";case"tag":return"label";default:throw new Error(`Unknown reference type: ${y}`)}}}calculateBranches(y,M){const a=(0,u.Z)(y.map(this.parseReference),({branch:P})=>P);return Object.entries(a).map(([P,L])=>({name:P,sources:L.map(D=>({name:D.sourceName,type:D.sourceType,icon:this.getBranchTypeIcon(D.sourceType)}))})).sort((P,L)=>{const D=P.sources.some(m=>"local"===m.type&&`refs/heads/${P.name}`===M),_=P.sources.some(m=>"local"===m.type&&`refs/heads/${L.name}`===M);if(D&&!_)return-1;if(!D&&_)return 1;const v=P.sources.some(m=>"local"===m.type),o=L.sources.some(m=>"local"===m.type);if(v&&!o)return-1;if(!v&&o)return 1;const W=P.sources.some(m=>"remote"===m.type),B=L.sources.some(m=>"remote"===m.type);return W&&!B?-1:!W&&B?1:P.sources.length>L.sources.length?-1:P.sources.length<L.sources.length?1:P.name>L.name?-1:P.name<L.name?1:0}).slice(0,30)}}return O.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/,O.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/,O.\u0275fac=function(y){return new(y||O)},O.\u0275prov=e.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},3989:(N,R,n)=>{n.d(R,{$:()=>Y});var u=n(1134),e=n(539);const O=function T(Z,d){return Z<d},y=function E(Z,d){return Z&&Z.length?(0,u.Z)(Z,(0,e.Z)(d,2),O):void 0};var M=n(2382);var L=n(1256),D=n(3713),_=n(7711),v=n(9512),o=n(7988),W=n(6932),B=n(3228);var A=n(7965),K=n(7118);const H=(0,A.Z)(function(Z,d){return(0,K.Z)(Z)?function U(Z,d,w,g){var f=-1,i=_.Z,x=!0,s=Z.length,k=[],F=d.length;if(!s)return k;w&&(d=(0,o.Z)(d,(0,W.Z)(w))),g?(i=v.Z,x=!1):d.length>=200&&(i=B.Z,x=!1,d=new D.Z(d));e:for(;++f<s;){var b=Z[f],l=null==w?b:w(b);if(b=g||0!==b?b:0,x&&l==l){for(var p=F;p--;)if(d[p]===l)continue e;k.push(b)}else i(d,l,g)||k.push(b)}return k}(Z,d):[]});var z=n(4650);class Y{isIndexInBounds(d,w,g){const f=d*Y.yUnit;return f>=w&&f<g-Y.yUnit}calculateVisible(d,w,g,f,i){return{commitDetails:d.slice(f,i),commitTrails:w.filter(x=>x.minYIndexWithMerges<=i&&x.maxYIndexWithMerges>=f),mergePaths:g.filter(x=>x.from.yIndex>=f&&x.to.some(s=>s.yIndex<=i))}}calculate(d,w,g,f,i,x){const s={};let k=[],F=[],b=[];const l=(d?1:0)+w.length;g.forEach((c,h)=>{s[c.id]={id:c.id,yIndex:h+l,commit:c}});const p=[];w.forEach((c,h)=>{const C=`merge:${c.fromCommitId}:${c.toCommitId}`,V={id:C,message:c.message??`merge: from '${c.fromCommitId}' into '${c.toCommitId}'`,parentIds:[c.toCommitId,c.fromCommitId],time:0,references:[],authorEmail:"",authorName:""};p.push(V),s[C]={id:C,yIndex:h+(d?1:0),commit:V}});const t=d?{id:"head",message:"",parentIds:d.parentId?[d.parentId,...d.mergeHeads]:[...d.mergeHeads],time:0,references:[],authorEmail:"",authorName:""}:null;d&&(s.head={id:"head",yIndex:0,commit:t});const r=t?[t,...p,...g]:[...p,...g];if(r.forEach(c=>{const h=s[c.id];h.trail||this.calculateTrail(h,s,k,F),c.parentIds.length>1&&c.parentIds.slice(1).forEach(C=>{const V=s[C];if(V)if(V.mergeFrom)V.mergeFrom.to.push(h);else{const J={from:V,to:[h],isDashed:"head"===c.id||c.id.startsWith("merge:")};V.mergeFrom=J,b.push(J)}})}),({mergePaths:b,lanes:F}=this.calculateMergePaths(b,F,f,i)),this.calculateColors(k,x),d&&d.parentId&&s[d.parentId]){const c=k.find(h=>0===h.minYIndex);if(c){c.commits=c.commits.filter(C=>"head"!==C.id);const h=y(c.commits,C=>C.yIndex);c.minYIndex=h?.yIndex??0,c.minYIndexWithMerges=h?.yIndex??0,this.createUncommittedTrail(s.head,s[d.parentId],k,c.colorIndex,c.lane)}}return p.forEach((c,h)=>{const C=k.find(V=>V.minYIndex===h+(d?1:0));if(C&&s[c.parentIds[0]]){if(C.commits=C.commits.filter(V=>V.id!==c.id),C.commits.length<=0)k=k.filter(V=>V!==C);else{const V=y(C.commits.filter(J=>"head"!==J.id&&!J.id.startsWith("merge:")),J=>J.yIndex);C.minYIndex=V?.yIndex??0,C.minYIndexWithMerges=V?.yIndex??0}this.createUncommittedTrail(s[c.id],s[c.parentIds[0]],k,C.colorIndex,C.lane)}}),{commitDetails:s,commitTrails:k,lanes:F,mergePaths:b,headCommit:t,orderedCommits:r}}createUncommittedTrail(d,w,g,f,i){let x=w.yIndex;w.mergeFrom&&w.mergeFrom.to.length>0&&!w.mergeFrom.isDashed&&(x=Math.min(...w.mergeFrom.to.map(k=>k.yIndex))+.25,g.push({trailIndex:g.length,minYIndex:x,maxYIndex:w.yIndex,minYIndexWithMerges:x,maxYIndexWithMerges:w.yIndex,colorIndex:f,commits:[],isDashed:!1,lane:i}));const s={trailIndex:g.length,minYIndex:d.yIndex,maxYIndex:x,minYIndexWithMerges:d.yIndex,maxYIndexWithMerges:x,colorIndex:f,commits:[d],isDashed:!0,lane:i};return d.trail=s,g.push(s),s}calculateTrail(d,w,g,f){const i={trailIndex:g.length,minYIndex:d.yIndex,maxYIndex:d.yIndex,minYIndexWithMerges:d.yIndex,maxYIndexWithMerges:d.yIndex,colorIndex:null,commits:[],isDashed:!1};if(d.commit.parentIds.length<=0)d.trail=i,i.commits.push(d),i.maxYIndex=d.yIndex,i.maxYIndexWithMerges=d.yIndex;else{let s=d;for(;s&&!s.trail&&s.commit.parentIds.length>0;)s.trail=i,i.maxYIndex=s.yIndex,i.maxYIndexWithMerges=s.yIndex,i.commits.push(s),s=w[s.commit.parentIds[0]];s&&(i.maxYIndex=s.yIndex,i.maxYIndexWithMerges=s.yIndex,s.trail||(s.trail=i,i.commits.push(s)))}let x=f.find(s=>this.getLaneMaxYIndex(s)<i.minYIndex);return x||(x={xIndex:f.length,occupations:[]},f.push(x)),x.occupations.push({type:"commit-trail",minYIndex:i.minYIndex,maxYIndex:i.maxYIndex}),i.lane=x,g.push(i),i}calculateMergePaths(d,w,g,f){return w=w.map(i=>({...i,occupations:i.occupations.filter(x=>"merge-path"!==x.type)})).filter(i=>i.occupations.length>0),d.forEach(i=>{const x=[];let s;i.to.forEach(p=>{i.from.trail.minYIndexWithMerges>p.yIndex&&(i.from.trail.minYIndexWithMerges=p.yIndex),i.from.trail.maxYIndexWithMerges<p.yIndex&&(i.from.trail.maxYIndexWithMerges=p.yIndex),p.trail.minYIndexWithMerges>i.from.yIndex&&(p.trail.minYIndexWithMerges=i.from.yIndex),p.trail.maxYIndexWithMerges<i.from.yIndex&&(p.trail.maxYIndexWithMerges=i.from.yIndex)});const k=i.from.trail.lane.xIndex,F=g(k);let b=[],l=i.to;if(i.from.trail.minYIndex<i.from.yIndex){const p=i.from.trail.commits.findIndex(r=>r.id===i.from.id),t=i.from.trail.commits[p-1];b=i.to.filter(r=>r.yIndex>t.yIndex),l=i.to.filter(r=>r.yIndex<=t.yIndex),s=t.yIndex}else{s=i.from.yIndex-1;const p=function a(Z,d){return Z&&Z.length?(0,u.Z)(Z,(0,e.Z)(d,2),M.Z):void 0}(l,t=>t.yIndex);p&&p.yIndex===i.from.yIndex-1&&(l=l.filter(t=>t.id!==p.id),x.push(`M ${F} ${f(i.from.yIndex-.5)}`,`L ${g(p.trail.lane.xIndex)} ${f(p.yIndex)}`)),x.push(`M ${F} ${f(i.from.yIndex)}`),x.push(`V ${f(i.from.yIndex-.5)}`)}if(l.length>0){const p=Math.min(...l.map(c=>c.yIndex)),t=w.filter(c=>!this.isLaneOccupied(c,p+1,s)),r=y(t,c=>[...l,i.from].reduce((h,C)=>h+Math.abs(C.trail.lane.xIndex-c.xIndex),0))??{xIndex:w.length,occupations:[]};0===t.length&&w.push(r),r.occupations.push({type:"merge-path",minYIndex:p+1,maxYIndex:s}),x.push(`M ${F} ${f(s+.5)}`,`L ${g(r.xIndex)} ${f(s+.25)}`,`V ${f(p+.5)}`,...l.flatMap(c=>[`M ${g(r.xIndex)} ${f(c.yIndex+.5)}`,`L ${this.adjustForDashedLine(i.isDashed,r.xIndex,c.trail.lane.xIndex,c.yIndex+.5,c.yIndex,g,f)}`]))}x.push(...b.flatMap(p=>[`M ${F} ${f(p.yIndex+.25)}`,`L ${this.adjustForDashedLine(i.isDashed,k,p.trail.lane.xIndex,p.yIndex+.25,p.yIndex,g,f)}`])),i.path=x.join(" ")}),{mergePaths:d,lanes:w}}calculateColors(d,w){const g=(0,L.Z)(0,w),f=[];d.forEach(i=>{const x=f.filter(k=>k.minYIndexWithMerges<=i.maxYIndexWithMerges&&k.maxYIndexWithMerges>=i.minYIndexWithMerges).map(k=>k.colorIndex),s=H(g,...x);i.colorIndex=s.length>0?s[0]:i.trailIndex%w,f.push(i)})}getLaneMaxYIndex(d){return d.occupations[d.occupations.length-1].maxYIndex}isLaneOccupied(d,w,g){return d.occupations.some(f=>f.minYIndex<=g&&f.maxYIndex>=w)}adjustForDashedLine(d,w,g,f,i,x,s){const F=d?f>i?.15:-.15:0;return`${x(g+(d?w>g?.3:-.3:0))} ${s(i+F)}`}}Y.xUnit=15,Y.yUnit=26,Y.xOffset=Y.xUnit/2,Y.yOffset=Y.yUnit/2,Y.\u0275fac=function(d){return new(d||Y)},Y.\u0275prov=z.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"})},4433:(N,R,n)=>{n.d(R,{M:()=>b});var u=n(655),e=n(4650),T=n(240),O=n(591),E=n(8926),y=n(9967),M=n(9077),a=n(9578),P=n(6895),L=n(7392),D=n(266),_=n(811),v=n(2771),o=n(3668),W=n(7615),B=n(9131),m=n(6709);function U(l,p){if(1&l){const t=e.EpF();e.TgZ(0,"mat-checkbox",7),e.NdJ("change",function(c){e.CHM(t);const h=e.oxw().$implicit,C=e.oxw();return e.KtG(C.checkedChanged.next([h,c.checked]))}),e.qZA()}if(2&l){const t=e.oxw().$implicit,r=e.oxw();e.Q6J("checked",r.isChecked(t))}}function I(l,p){if(1&l){const t=e.EpF();e.TgZ(0,"li",3),e.NdJ("contextmenu",function(c){const C=e.CHM(t).$implicit,V=e.oxw();return e.KtG(V.contextMenuOpened.next([C,c]))}),e.TgZ(1,"mat-icon",4),e._uU(2),e.qZA(),e.YNc(3,U,1,1,"mat-checkbox",5),e.TgZ(4,"app-condensed-path",6),e.NdJ("click",function(){const h=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.selectedChanged.next(h))}),e.qZA()()}if(2&l){const t=p.$implicit,r=e.oxw();e.ekj("selected",r.isSelected(t))("checked",r.isChecked(t)),e.xp6(1),e.Q6J("ngClass",r.getPatchIconColorClass(t)),e.xp6(1),e.Oqu(r.getPatchIcon(t)),e.xp6(1),e.Q6J("ngIf",r.checked),e.xp6(1),e.Q6J("path",r.getPatchPath(t))}}let A=(()=>{class l extends((0,E.j)(y.A,v.P)){constructor(t){super(),this.commitDetailService=t,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe}trackByPatch(t,r){return`${r.oldFilePath}|${r.newFilePath}|${r.status}`}getPatchPath(t){return this.commitDetailService.getPatchPath(t)}getPatchIcon(t){return this.commitDetailService.getPatchIcon(t)}getPatchIconColorClass(t){return this.commitDetailService.getPatchIconColorClass(t)}isChecked(t){return this.checked?.some(({oldFilePath:r,newFilePath:c})=>r===t.oldFilePath&&c===t.newFilePath)}isSelected(t){return t.oldFilePath===this.selected?.oldFilePath&&t.newFilePath===this.selected.newFilePath}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(W.d))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-patch-list"]],viewQuery:function(t,r){if(1&t&&e.Gf(o.N7,5),2&t){let c;e.iGM(c=e.CRH())&&(r.viewports=c)}},inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj],decls:3,vars:7,consts:[[1,"item-list-container",3,"itemSize","maxBufferPx","minBufferPx"],[1,"patch-list"],[3,"selected","checked","contextmenu",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"contextmenu"],["inline","",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"name",3,"path","click"],[3,"checked","change"]],template:function(t,r){1&t&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0)(1,"ul",1),e.YNc(2,I,5,8,"li",2),e.qZA()()),2&t&&(e.Q6J("itemSize",22)("maxBufferPx",400)("minBufferPx",200),e.xp6(1),e.ekj("checkboxes",r.checked),e.xp6(1),e.Q6J("cdkVirtualForOf",r.patches)("cdkVirtualForTrackBy",r.trackByPatch))},dependencies:[o.xd,o.x0,o.N7,P.mk,P.O5,L.Hw,B.j,m.oG],styles:["[_nghost-%COMP%]{display:contents}.item-list-container[_ngcontent-%COMP%]{margin-left:-16px;margin-right:-16px;height:100%;contain:content}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}.item-list-container[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{position:relative}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;height:22px;line-height:22px;padding-left:16px;padding-right:16px;position:relative;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.patch-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background-color:#616161}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.red[_ngcontent-%COMP%]{color:#ef5350}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.green[_ngcontent-%COMP%]{color:#4caf50}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   mat-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.patch-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:calc(100% - 22px)}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:none}.patch-list.checkboxes[_ngcontent-%COMP%] > li.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .patch-list.checkboxes[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),l})();var K=n(2686),S=n(6053),H=n(1086),z=n(4850),Y=n(6725),Z=n(3448),d=n(1123);function w(l,p){if(1&l){const t=e.EpF();e.TgZ(0,"mat-checkbox",8),e.NdJ("click",function(c){return c.stopPropagation()})("change",function(c){e.CHM(t);const h=e.oxw().$implicit,C=e.oxw();return e.KtG(C.clickNodeCheckbox(h,c.checked))}),e.qZA()}if(2&l){const t=e.oxw().$implicit;e.Q6J("checked","all"===t.checked)("indeterminate","some"===t.checked)}}function g(l,p){if(1&l){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(c){const C=e.CHM(t).$implicit,V=e.oxw();return e.KtG(V.toggleNodeExpanded(c,C))}),e.TgZ(1,"mat-icon",4),e._uU(2,"folder"),e.qZA(),e.YNc(3,w,1,2,"mat-checkbox",5),e.TgZ(4,"span",6),e._uU(5),e.qZA(),e.TgZ(6,"mat-icon",7),e._uU(7),e.qZA()()}if(2&l){const t=p.$implicit,r=e.oxw();e.ekj("checked","all"===t.checked),e.xp6(3),e.Q6J("ngIf",r.checked),e.xp6(1),e.Q6J("matTooltip",t.id),e.xp6(1),e.Oqu(t.segment),e.xp6(2),e.Oqu(t.expanded?"expand_less":"expand_more")}}function f(l,p){if(1&l){const t=e.EpF();e.TgZ(0,"mat-checkbox",13),e.NdJ("change",function(c){e.CHM(t);const h=e.oxw().$implicit,C=e.oxw();return e.KtG(C.checkedChanged.next([h.patch,c.checked]))}),e.qZA()}if(2&l){const t=e.oxw().$implicit;e.Q6J("checked",t.checked)}}function i(l,p){if(1&l){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("contextmenu",function(c){const C=e.CHM(t).$implicit,V=e.oxw();return e.KtG(V.contextMenuOpened.next([C.patch,c]))}),e.TgZ(1,"mat-icon",10),e._uU(2),e.qZA(),e.YNc(3,f,1,1,"mat-checkbox",11),e.TgZ(4,"span",12),e.NdJ("click",function(){const h=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.selectedChanged.next(h.patch))}),e._uU(5),e.qZA()()}if(2&l){const t=p.$implicit,r=e.oxw();let c;e.ekj("checked",t.checked)("selected",r.isSelected(t.patch)),e.xp6(1),e.Q6J("ngClass",r.getPatchIconColorClass(t.patch)),e.xp6(1),e.Oqu(r.getPatchIcon(t.patch)),e.xp6(1),e.Q6J("ngIf",r.checked),e.xp6(1),e.Q6J("matTooltip",null!==(c=r.getPatchPath(t.patch))&&void 0!==c?c:""),e.xp6(1),e.Oqu(t.segment)}}let x=(()=>{class l extends((0,E.j)(y.A)){constructor(t){super(),this.commitDetailService=t,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.collapsedNodeIds=new O.X(new Set),this.toggleNodeExpanded=(r,c)=>{r.preventDefault(),r.stopPropagation();const h=new Set(this.collapsedNodeIds.value);h.has(c.id)?(h.delete(c.id),this.collapsedNodeIds.next(h)):(h.add(c.id),this.collapsedNodeIds.next(h))}}ngOnInit(){this.tree=(0,S.aj)([this.patches,this.checked??(0,H.of)(null),this.collapsedNodeIds]).pipe((0,z.U)(([t,r,c])=>{const h=t.map(C=>({patch:C,segments:(C.newFilePath??C.oldFilePath??"").split("/")}));return this.buildTree(h,"",0,r,c)}))}getPatchPath(t){return this.commitDetailService.getPatchPath(t)}getPatchIcon(t){return this.commitDetailService.getPatchIcon(t)}getPatchIconColorClass(t){return this.commitDetailService.getPatchIconColorClass(t)}isSelected(t){return t.oldFilePath===this.selected?.oldFilePath&&t.newFilePath===this.selected.newFilePath}clickNodeCheckbox(t,r){const c=h=>h.reduce((C,V)=>[...C,..."patch"in V?[V]:c(V.children)],[]);for(const h of c(t.children))this.checkedChanged.next([h.patch,r])}buildTree(t,r,c,h,C){return Object.entries((0,K.Z)(t,({segments:j})=>j[0])).sort(([j],[G])=>j.localeCompare(G,void 0,{numeric:!0})).flatMap(([j,G])=>{const te=`${r}${j}/`,ie=`${r}${j}`,oe=G.filter(({segments:$})=>$.length>1),ce=h?G.every(({patch:$})=>h.some(({oldFilePath:Q,newFilePath:ne})=>Q===$.oldFilePath&&ne===$.newFilePath))?"all":G.some(({patch:$})=>h.some(({oldFilePath:Q,newFilePath:ne})=>Q===$.oldFilePath&&ne===$.newFilePath))?"some":"none":"none",X=oe.length>0?{id:te,depth:c,expanded:!C.has(te),children:this.buildTree(oe.map(({patch:$,segments:Q})=>({patch:$,segments:Q.slice(1)})),te,c+1,h,C),segment:j,checked:ce}:null,q=G.find(({segments:$})=>$.length<=1),ee=q?{id:ie,depth:c,segment:j,patch:q.patch,checked:h?.some(({oldFilePath:$,newFilePath:Q})=>$===q.patch.oldFilePath&&Q===q.patch.newFilePath)??!1}:null;return ee&&X?[ee,X]:X?[X]:ee?[ee]:[]})}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(W.d))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-patch-tree"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj],decls:3,vars:4,consts:[[3,"tree","itemSize"],["class","node-item",3,"checked","click",4,"appVirtualTreeNode"],["class","leaf-item",3,"checked","selected","contextmenu",4,"appVirtualTreeLeafNode"],[1,"node-item",3,"click"],["inline","",1,"node-icon"],[3,"checked","indeterminate","click","change",4,"ngIf"],[1,"text",3,"matTooltip"],[1,"expand-icon"],[3,"checked","indeterminate","click","change"],[1,"leaf-item",3,"contextmenu"],["inline","",1,"node-icon",3,"ngClass"],[3,"checked","change",4,"ngIf"],[1,"text",3,"matTooltip","click"],[3,"checked","change"]],template:function(t,r){1&t&&(e.TgZ(0,"app-virtual-tree",0),e.YNc(1,g,8,6,"div",1),e.YNc(2,i,6,9,"div",2),e.qZA()),2&t&&(e.ekj("checkboxes",!!r.checked),e.Q6J("tree",r.tree)("itemSize",22))},dependencies:[P.mk,P.O5,L.Hw,D.gM,Y.L,Z.I,d.J,m.oG],styles:["[_nghost-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]{display:contents}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport{contain:content;scrollbar-gutter:stable;margin-left:-16px;margin-right:-16px}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper{width:100%}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper>ul{overflow-x:auto;overflow-y:hidden}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport .cdk-virtual-scroll-spacer{position:relative}app-virtual-tree[_ngcontent-%COMP%]    >cdk-virtual-scroll-viewport li:has(> .leaf-item.selected){background-color:#616161}.node-item[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]{margin-left:16px;display:flex;justify-content:space-between;cursor:pointer;line-height:22px;height:22px;user-select:none;align-items:center;min-width:200px}.node-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon[_ngcontent-%COMP%]{flex:0 0 22px;user-select:none;width:22px}.node-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.red[_ngcontent-%COMP%]{color:#ef5350}.node-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.green[_ngcontent-%COMP%]{color:#4caf50}.node-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.orange[_ngcontent-%COMP%]{color:#cb8837}.node-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .node-icon.blue[_ngcontent-%COMP%]{color:#7c8bff}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]{display:none;flex:0 0 22px;width:22px}.node-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .node-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%]   .checkbox-icon[_ngcontent-%COMP%]{font-size:16px}.node-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.node-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%], .leaf-item[_ngcontent-%COMP%] > .expand-icon[_ngcontent-%COMP%]{flex:0 0 auto;color:#ffffffb3;line-height:22px}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .node-icon[_ngcontent-%COMP%]{display:none}app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .node-item[_ngcontent-%COMP%]:has(.node-icon:hover, mat-checkbox[_ngcontent-%COMP%]:hover)   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item.checked[_ngcontent-%COMP%]   .checkbox-button[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   mat-checkbox[_ngcontent-%COMP%], app-virtual-tree.checkboxes[_ngcontent-%COMP%]   .leaf-item[_ngcontent-%COMP%]:hover   .checkbox-button[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),l})();function s(l,p){if(1&l){const t=e.EpF();e.TgZ(0,"app-patch-list",6),e.NdJ("checkedChanged",function(c){e.CHM(t);const h=e.oxw(2);return e.KtG(h.checkedChanged.next(c))})("selectedChanged",function(c){e.CHM(t);const h=e.oxw(2);return e.KtG(h.selectedChanged.next(c))})("contextMenuOpened",function(c){e.CHM(t);const h=e.oxw(2);return e.KtG(h.contextMenuOpened.next(c))}),e.ALo(1,"async"),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("patches",t.patches)("checked",e.lcZ(1,3,t.checked))("selected",t.selected)}}function k(l,p){if(1&l){const t=e.EpF();e.TgZ(0,"app-patch-tree",6),e.NdJ("checkedChanged",function(c){e.CHM(t);const h=e.oxw(2);return e.KtG(h.checkedChanged.next(c))})("selectedChanged",function(c){e.CHM(t);const h=e.oxw(2);return e.KtG(h.selectedChanged.next(c))})("contextMenuOpened",function(c){e.CHM(t);const h=e.oxw(2);return e.KtG(h.contextMenuOpened.next(c))}),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("patches",t.patches$)("checked",t.checked)("selected",t.selected)}}function F(l,p){if(1&l){const t=e.EpF();e.ynx(0),e.TgZ(1,"header")(2,"mat-button-toggle-group",1),e.NdJ("change",function(c){e.CHM(t);const h=e.oxw();return e.KtG(h.changePatchView(c.value))}),e.TgZ(3,"mat-button-toggle",2)(4,"mat-icon"),e._uU(5,"list"),e.qZA()(),e.TgZ(6,"mat-button-toggle",3),e._UZ(7,"mat-icon",4),e.qZA()()(),e.YNc(8,s,2,5,"app-patch-list",5),e.YNc(9,k,1,3,"app-patch-tree",5),e.BQk()}if(2&l){const t=p.ngIf;e.xp6(2),e.Q6J("value",t),e.xp6(6),e.Q6J("ngIf","list"===t),e.xp6(1),e.Q6J("ngIf","tree"===t)}}let b=(()=>{class l extends((0,E.j)(y.A)){constructor(t){super(),this.store=t,this.checked=null,this.checkedChanged=new e.vpe,this.selectedChanged=new e.vpe,this.contextMenuOpened=new e.vpe,this.patches$=new O.X([])}ngOnChanges(t){t.patches&&this.patches$.next(this.patches)}changePatchView(t){this.store.dispatch(new a.eh(t))}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(T.yh))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-patch-list-view"]],inputs:{patches:"patches",checked:"checked",selected:"selected"},outputs:{checkedChanged:"checkedChanged",selectedChanged:"selectedChanged",contextMenuOpened:"contextMenuOpened"},features:[e.qOj,e.TTD],decls:2,vars:3,consts:[[4,"ngIf"],[3,"value","change"],["value","list","matTooltip","List View"],["value","tree","matTooltip","Tree View"],["svgIcon","file-tree"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened",4,"ngIf"],[3,"patches","checked","selected","checkedChanged","selectedChanged","contextMenuOpened"]],template:function(t,r){1&t&&(e.YNc(0,F,10,3,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,r.view))},dependencies:[P.O5,L.Hw,D.gM,_.A9,_.Yi,A,x,P.Ov],styles:["[_nghost-%COMP%]{display:contents}header[_ngcontent-%COMP%]{flex:0 0 auto;text-align:center;margin-bottom:-4px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{height:30px}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{font-size:0}header[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:28px;padding:0 5px}"],changeDetection:0}),(0,u.gn)([(0,T.Ph)(M.$.patchView)],l.prototype,"view",void 0),l})()},6057:(N,R,n)=>{n.d(R,{F:()=>a});var u=n(811),e=n(3546),T=n(6709),O=n(284),E=n(3179),y=n(9418),M=n(4650);let a=(()=>{class P{}return P.\u0275fac=function(D){return new(D||P)},P.\u0275mod=M.oAB({type:P}),P.\u0275inj=M.cJS({imports:[E.I,u.vV,e.QW,T.p9,O.c,y.c]}),P})()},3164:(N,R,n)=>{n.d(R,{p:()=>M});var u=n(3489),e=n(353);const T={leading:!0,trailing:!1};function M(D,_=e.P,v=T){return o=>o.lift(new a(D,_,v.leading,v.trailing))}class a{constructor(_,v,o,W){this.duration=_,this.scheduler=v,this.leading=o,this.trailing=W}call(_,v){return v.subscribe(new P(_,this.duration,this.scheduler,this.leading,this.trailing))}}class P extends u.L{constructor(_,v,o,W,B){super(_),this.duration=v,this.scheduler=o,this.leading=W,this.trailing=B,this._hasTrailingValue=!1,this._trailingValue=null}_next(_){this.throttled?this.trailing&&(this._trailingValue=_,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(L,this.duration,{subscriber:this})),this.leading?this.destination.next(_):this.trailing&&(this._trailingValue=_,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const _=this.throttled;_&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),_.unsubscribe(),this.remove(_),this.throttled=null)}}function L(D){const{subscriber:_}=D;_.clearThrottle()}},2686:(N,R,n)=>{n.d(R,{Z:()=>o});var u=n(3496);const T=function e(W,B,m,U){for(var I=-1,A=null==W?0:W.length;++I<A;){var K=W[I];B(U,K,m(K),W)}return U};var O=n(3693);const y=function E(W,B,m,U){return(0,O.Z)(W,function(I,A,K){B(U,I,m(I),K)}),U};var M=n(539),a=n(4177),_=Object.prototype.hasOwnProperty;const o=function P(W,B){return function(m,U){var I=(0,a.Z)(m)?T:y,A=B?B():{};return I(m,W,(0,M.Z)(U,2),A)}}(function(W,B,m){_.call(W,m)?W[m].push(B):(0,u.Z)(W,m,[B])})}}]);