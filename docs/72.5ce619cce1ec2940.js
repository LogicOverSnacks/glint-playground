"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[72],{2771:(W,k,i)=>{i.d(k,{P:()=>t});var _=i(7579),e=i(6406),F=i(9468),f=i(2722),I=i(4650);const t=D=>{class g extends D{ngAfterViewInit(){super.ngAfterViewInit&&super.ngAfterViewInit();const M=this.viewports.map(C=>{const w=new _.x,E=new ResizeObserver(()=>w.next());return w.pipe((0,F.p)(20,e.Z,{leading:!0,trailing:!0}),(0,f.R)(this.destroyed$)).subscribe(()=>{C.checkViewportSize()}),E.observe(C.elementRef.nativeElement),E});this.destroyed$.subscribe(()=>{M.forEach(C=>C.disconnect())})}static{this.\u0275fac=function(){let M;return function(w){return(M||(M=I.n5z(g)))(w||g)}}()}static{this.\u0275prov=I.Yz7({token:g,factory:g.\u0275fac})}}return g}},9131:(W,k,i)=>{i.d(k,{j:()=>t});var _=i(1135),e=i(4650),F=i(6895),f=i(266);function I(D,g){if(1&D&&(e.TgZ(0,"div",3),e._uU(1),e.ALo(2,"async"),e.qZA()),2&D){const a=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,a.leftPath))}}class t{constructor(){this.leftPath=new _.X(""),this.rightPath=new _.X("")}onCopy(g){g.preventDefault();const a=document.getSelection();a&&g.clipboardData?.setData("text/plain",a.toString().replace("\n",""))}ngOnChanges(g){if(g.path){const a=/^(.*)(\/[^\/]+)$/.exec(g.path.currentValue);a?(this.leftPath.next(a[1]),this.rightPath.next(a[2])):(this.leftPath.next(""),this.rightPath.next(g.path.currentValue))}}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=e.Xpm({type:t,selectors:[["app-condensed-path"]],hostBindings:function(a,M){1&a&&e.NdJ("copy",function(w){return M.onCopy(w)})},inputs:{path:"path"},features:[e.TTD],decls:6,vars:7,consts:[[1,"container",3,"matTooltip"],["class","left",4,"ngIf"],[1,"right"],[1,"left"]],template:function(a,M){1&a&&(e.TgZ(0,"div",0),e.YNc(1,I,3,3,"div",1),e.ALo(2,"async"),e.TgZ(3,"div",2),e._uU(4),e.ALo(5,"async"),e.qZA()()),2&a&&(e.Q6J("matTooltip",M.path||""),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,M.leftPath)),e.xp6(3),e.Oqu(e.lcZ(5,5,M.rightPath)))},dependencies:[F.O5,f.gM,F.Ov],styles:[".container[_ngcontent-%COMP%]{display:flex}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.left[_ngcontent-%COMP%]{min-width:15px}.right[_ngcontent-%COMP%]{flex:1 0 auto;max-width:100%}.left[_ngcontent-%COMP%] + .right[_ngcontent-%COMP%]{max-width:calc(100% - 15px)}"],changeDetection:0})}}},3061:(W,k,i)=>{i.d(k,{T:()=>n});var _=i(4650),e=i(4006),F=i(801),f=i(9841),I=i(8372),t=i(9300),D=i(8675),g=i(2722),a=i(8926),M=i(9967),C=i(4462),w=i(6895),E=i(4859),v=i(9549),O=i(7392),T=i(284),S=i(266);const m=["findControlInput"];function h(o,d){if(1&o&&(_.TgZ(0,"mat-error"),_._uU(1),_.qZA()),2&o){const u=_.oxw();_.xp6(1),_.Oqu(u.findControl.getError("regex"))}}class n extends((0,a.j)(M.A)){constructor(){super(...arguments),this.initial=null,this.searched=new _.vpe,this.findControl=new e.NI("",{nonNullable:!0,validators:d=>{if(this.useRegularExpressionControl?.value)try{new RegExp(d.value,"g")}catch(u){return{regex:u.message}}return null}}),this.matchCaseControl=new e.NI(!1,{nonNullable:!0}),this.useRegularExpressionControl=new e.NI(!1,{nonNullable:!0})}hostKeyDown(d){(C.V?d.metaKey:d.ctrlKey)&&("f"===d.key||"F"===d.key)&&(d.preventDefault(),this.findControlInput.nativeElement.focus({preventScroll:!0}))}ngOnInit(){this.initial&&(this.findControl.setValue(this.initial.text),this.matchCaseControl.setValue(this.initial.matchCase),this.useRegularExpressionControl.setValue(this.initial.useRegularExpression)),(0,f.a)([this.findControl.valueChanges.pipe((0,I.b)(200),(0,t.h)(()=>this.findControl.valid),(0,D.O)(this.findControl.value)),this.matchCaseControl.valueChanges.pipe((0,D.O)(this.matchCaseControl.value)),this.useRegularExpressionControl.valueChanges.pipe((0,D.O)(this.useRegularExpressionControl.value))]).pipe((0,g.R)(this.destroyed$)).subscribe(([d,u,x])=>{if(this.findControl.updateValueAndValidity({emitEvent:!1}),d)try{const b=new RegExp(x?d:(0,F.Z)(d),u?"g":"ig");this.searched.next(b)}catch{}else this.searched.next(null)})}static{this.\u0275fac=function(){let d;return function(x){return(d||(d=_.n5z(n)))(x||n)}}()}static{this.\u0275cmp=_.Xpm({type:n,selectors:[["app-find-control"]],viewQuery:function(u,x){if(1&u&&_.Gf(m,5,_.SBq),2&u){let b;_.iGM(b=_.CRH())&&(x.findControlInput=b.first)}},hostBindings:function(u,x){1&u&&_.NdJ("keydown",function(R){return x.hostKeyDown(R)},!1,_.evT)},inputs:{initial:"initial"},outputs:{searched:"searched"},features:[_.qOj],decls:15,vars:6,consts:[[1,"find-control"],["matPrefix",""],["type","text","matInput","",3,"formControl"],["findControlInput",""],["type","button","matSuffix","","mat-button","","disableRipple","","matTooltip","Match case",3,"click"],["svgIcon","format-letter-case"],["type","button","matSuffix","","mat-button","","disableRipple","","matTooltip","Use regular expression",3,"click"],["svgIcon","regex"],["type","button","matSuffix","","mat-button","","matTooltip","Clear",3,"click"],[4,"ngIf"]],template:function(u,x){1&u&&(_.TgZ(0,"mat-form-field",0)(1,"mat-label"),_._uU(2,"Find"),_.qZA(),_.TgZ(3,"mat-icon",1),_._uU(4,"search"),_.qZA(),_._UZ(5,"input",2,3),_.TgZ(7,"button",4),_.NdJ("click",function(){return x.matchCaseControl.setValue(!x.matchCaseControl.value)}),_._UZ(8,"mat-icon",5),_.qZA(),_.TgZ(9,"button",6),_.NdJ("click",function(){return x.useRegularExpressionControl.setValue(!x.useRegularExpressionControl.value)}),_._UZ(10,"mat-icon",7),_.qZA(),_.TgZ(11,"button",8),_.NdJ("click",function(){return x.findControl.setValue("")}),_.TgZ(12,"mat-icon"),_._uU(13,"close"),_.qZA()(),_.YNc(14,h,2,1,"mat-error",9),_.qZA()),2&u&&(_.xp6(5),_.Q6J("formControl",x.findControl),_.xp6(2),_.ekj("selected",x.matchCaseControl.value),_.xp6(2),_.ekj("selected",x.useRegularExpressionControl.value),_.xp6(5),_.Q6J("ngIf",x.findControl.hasError("regex")))},dependencies:[w.O5,e.Fj,e.JJ,e.oH,E.lW,v.KE,v.hX,v.TO,v.qo,v.R9,O.Hw,T.Nt,S.gM],styles:[".find-control[_ngcontent-%COMP%]{min-width:200px;margin-top:5px}.find-control[_ngcontent-%COMP%]  .mat-mdc-form-field-icon-suffix{display:flex;align-items:center;gap:4px;margin-right:4px}.find-control[_ngcontent-%COMP%]  .mdc-notched-outline__leading, .find-control[_ngcontent-%COMP%]  .mdc-notched-outline__notch, .find-control[_ngcontent-%COMP%]  .mdc-notched-outline__trailing{border:none}.find-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:2px solid transparent;min-width:36px}.find-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0;font-size:24px;width:24px;height:24px}.dark-theme[_nghost-%COMP%]   .find-control[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .find-control[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{border-color:#78909c}.light-theme[_nghost-%COMP%]   .find-control[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .find-control[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{border-color:#78909c}"],changeDetection:0})}}},8523:(W,k,i)=>{i.d(k,{C:()=>g});var _=i(9635),e=i(457),F=i(2843),f=i(262),I=i(6590),t=i(3900),D=i(2035);const g=M=>(0,_.z)((0,f.K)(C=>(0,e.D)(M(void 0)).pipe((0,I.d)(void 0),(0,t.w)(()=>(0,F._)(()=>C)))),(0,D.h)(1),(0,I.d)(void 0),(0,t.w)(M))},127:(W,k,i)=>{i.d(k,{m:()=>f});var _=i(3779),e=i(4650),F=i(7016);class f{constructor(t){this.baseApi=t}getHighlightedFile(t,D,g,a){return this.baseApi.single(_.w.highlight.getHighlightedFile,t,D,g,a)}static{this.\u0275fac=function(D){return new(D||f)(e.LFG(F._))}}static{this.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}}},2259:(W,k,i)=>{i.d(k,{A:()=>T});var _=i(9646),e=i(2843),F=i(262),f=i(3900),I=i(4004),t=i(2435),D=i(2120),g=i(8523),a=i(4889),M=i(6966),C=i(1129),w=i(4650),E=i(9867),v=i(3058),O=i(2037);class T{constructor(m,h,n){this.store=m,this.repositoriesApi=h,this.stashApi=n,this.discardAllChanges=o=>this.store.dispatch(new C.z0(o,{name:"Discard",detail:"All changes",do:d=>{const u=this.store.selectSnapshot(M.E.openRepositoryIds);return this.stashApi.saveWorkingCopyState(o).pipe((0,F.K)(()=>(d(),(0,_.of)(""))),(0,f.w)(x=>this.repositoriesApi.discardAllChanges(o).pipe((0,F.K)(b=>t.J9.matches(b)?(0,e._)(()=>new D.ZR(b.message)):(0,e._)(()=>b)),(0,g.C)(b=>{const R=b?.filter(y=>u.includes(y))??[];return this.store.dispatch([...R.map(y=>new a.Vu(y,[a.nh.currentBranch,a.nh.currentBranchCommitId,a.nh.headCommitId])),new a.Vu(o,[a.nh.unstagedChanges,a.nh.submodules])]).pipe((0,I.U)(()=>[R,x]))}))))},undo:([d,u])=>this.stashApi.restoreWorkingCopyState(o,u).pipe((0,g.C)(()=>this.store.dispatch([...d.map(x=>new a.Vu(x,[a.nh.currentBranch,a.nh.currentBranchCommitId,a.nh.headCommitId])),new a.Vu(o,[a.nh.unstagedChanges,a.nh.submodules])])))})),this.discardFiles=(o,d)=>this.store.dispatch(new C.z0(o,{name:"Discard",detail:d.map(u=>u.newFilePath??u.oldFilePath).join(", "),do:u=>{const x=this.store.selectSnapshot(M.E.openRepositoryIds);return this.stashApi.saveWorkingCopyState(o,d.map(b=>b.newFilePath??b.oldFilePath).filter(D.$K)).pipe((0,F.K)(()=>(u(),(0,_.of)(""))),(0,f.w)(b=>this.repositoriesApi.discardFiles(o,d).pipe((0,F.K)(R=>t.J9.matches(R)?(0,e._)(()=>new D.ZR(R.message)):(0,e._)(()=>R)),(0,g.C)(R=>{const y=R?.filter(N=>x.includes(N))??[];return this.store.dispatch([...y.map(N=>new a.Vu(N,[a.nh.currentBranch,a.nh.currentBranchCommitId,a.nh.headCommitId])),new a.Vu(o,[a.nh.unstagedChanges,a.nh.submodules])]).pipe((0,I.U)(()=>[y,b]))}))))},undo:([u,x])=>this.stashApi.restoreWorkingCopyState(o,x).pipe((0,g.C)(()=>this.store.dispatch([...u.map(b=>new a.Vu(b,[a.nh.currentBranch,a.nh.currentBranchCommitId,a.nh.headCommitId])),new a.Vu(o,[a.nh.unstagedChanges,a.nh.submodules])])))})),this.discardFileLines=(o,d,u,x)=>this.store.dispatch(new C.z0(o,{name:"Discard lines",detail:`In ${u??d}`,do:()=>this.repositoriesApi.discardFileLines(o,d,u,x).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.unstagedChanges,a.nh.submodules]))))})),this.stageAllChanges=o=>this.store.dispatch(new C.z0(o,{name:"Stage",detail:"All changes",do:()=>this.repositoriesApi.getUnstagedChanges(o).pipe((0,f.w)(d=>this.repositoriesApi.stageAllChanges(o).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules]))),(0,g.C)(()=>(0,_.of)(d))))),undo:d=>this.repositoriesApi.unstageFiles(o,d).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules]))))})),this.stageFiles=(o,d)=>this.store.dispatch(new C.z0(o,{name:"Stage",detail:d.map(u=>u.newFilePath??u.oldFilePath).join(", "),do:()=>this.repositoriesApi.stageFiles(o,d).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules])))),undo:()=>this.repositoriesApi.unstageFiles(o,d).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules]))))})),this.stageFileLines=(o,d,u,x)=>this.store.dispatch(new C.z0(o,{name:"Stage lines",detail:`In ${u??d}`,do:()=>this.repositoriesApi.stageFileLines(o,d,u,x).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules]))))})),this.unstageAllChanges=o=>this.store.dispatch(new C.z0(o,{name:"Unstage",detail:"All changes",do:()=>this.repositoriesApi.getStagedChanges(o).pipe((0,f.w)(d=>this.repositoriesApi.unstageAllChanges(o).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules]))),(0,g.C)(()=>(0,_.of)(d))))),undo:d=>this.repositoriesApi.stageFiles(o,d).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules]))))})),this.unstageFiles=(o,d)=>this.store.dispatch(new C.z0(o,{name:"Unstage",detail:d.map(u=>u.newFilePath??u.oldFilePath).join(", "),do:()=>this.repositoriesApi.unstageFiles(o,d).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules])))),undo:()=>this.repositoriesApi.stageFiles(o,d).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules]))))})),this.unstageFileLines=(o,d,u,x)=>this.store.dispatch(new C.z0(o,{name:"Unstage",detail:`In ${u??d}`,do:()=>this.repositoriesApi.unstageFileLines(o,d,u,x).pipe((0,g.C)(()=>this.store.dispatch(new a.Vu(o,[a.nh.stagedChanges,a.nh.unstagedChanges,a.nh.submodules]))))}))}static{this.\u0275fac=function(h){return new(h||T)(w.LFG(E.yh),w.LFG(v.a),w.LFG(O._))}}static{this.\u0275prov=w.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}}},5410:(W,k,i)=>{i.d(k,{s:()=>dt});var _=i(655),e=i(4650),F=i(9867),f=i(7717),I=i(1135),t=i(9841),D=i(4128),g=i(9646),a=i(2843),M=i(4004),C=i(1884),w=i(8505),E=i(3900),v=i(2722),O=i(5684),T=i(9300),S=i(262),m=i(5698),h=i(2435),n=i(8926),o=i(9967),d=i(6966),u=i(9578),x=i(9077),b=i(127),R=i(7205),y=i(2259);function N(U,$){if(1&U&&(e._UZ(0,"app-condensed-path",14),e.ALo(1,"async")),2&U){const p=e.oxw(2);e.Q6J("path",e.lcZ(1,1,p.filePath))}}function J(U,$){if(1&U){const p=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(p);const B=e.oxw(2);return e.KtG(B.modifyLinesStage("stage"))}),e._UZ(1,"mat-icon",16),e.qZA()}}function z(U,$){if(1&U){const p=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(p);const B=e.oxw(2);return e.KtG(B.modifyLinesStage("discard"))}),e._UZ(1,"mat-icon",18),e.qZA()}}function X(U,$){if(1&U){const p=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(p);const B=e.oxw(2);return e.KtG(B.modifyLinesStage("unstage"))}),e._UZ(1,"mat-icon",20),e.qZA()}}function V(U,$){if(1&U){const p=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(p);const B=e.oxw(2);return e.KtG(B.edited.next())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA()()}}function q(U,$){if(1&U){const p=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(p);const B=e.oxw(2);return e.KtG(B.closed.next())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function et(U,$){1&U&&(e.TgZ(0,"main"),e._uU(1,"Loading..."),e.qZA())}function tt(U,$){1&U&&(e.TgZ(0,"main"),e._uU(1,"Cannot load binary file."),e.qZA())}function nt(U,$){1&U&&(e.TgZ(0,"main"),e._uU(1,"Cannot load file."),e.qZA())}function lt(U,$){if(1&U&&e._UZ(0,"app-hunk-view",24),2&U){const p=e.oxw(3);e.Q6J("diffLines",p.diffLines)("search",p.search$)}}function at(U,$){if(1&U&&e._UZ(0,"app-inline-view",24),2&U){const p=e.oxw(3);e.Q6J("diffLines",p.diffLines)("search",p.search$)}}function rt(U,$){if(1&U&&e._UZ(0,"app-split-view",24),2&U){const p=e.oxw(3);e.Q6J("diffLines",p.diffLines)("search",p.search$)}}function ct(U,$){if(1&U&&(e.TgZ(0,"main"),e.YNc(1,lt,1,2,"app-hunk-view",23),e.YNc(2,at,1,2,"app-inline-view",23),e.YNc(3,rt,1,2,"app-split-view",23),e.qZA()),2&U){const p=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf","hunk"===p),e.xp6(1),e.Q6J("ngIf","inline"===p),e.xp6(1),e.Q6J("ngIf","split"===p)}}function ht(U,$){if(1&U){const p=e.EpF();e.ynx(0),e.TgZ(1,"header")(2,"app-find-control",1),e.NdJ("searched",function(B){e.CHM(p);const K=e.oxw();return e.KtG(K.search$.next(B))}),e.qZA(),e.YNc(3,N,2,3,"app-condensed-path",2),e.ALo(4,"async"),e.ALo(5,"async"),e.TgZ(6,"div",3),e.YNc(7,J,2,0,"button",4),e.ALo(8,"async"),e.YNc(9,z,2,0,"button",5),e.ALo(10,"async"),e.YNc(11,X,2,0,"button",6),e.ALo(12,"async"),e.TgZ(13,"mat-button-toggle-group",7),e.NdJ("change",function(B){e.CHM(p);const K=e.oxw();return e.KtG(K.changeView(B.value))}),e.TgZ(14,"mat-button-toggle",8)(15,"mat-icon"),e._uU(16,"calendar_view_day"),e.qZA()(),e.TgZ(17,"mat-button-toggle",9)(18,"mat-icon"),e._uU(19,"view_headline"),e.qZA()(),e.TgZ(20,"mat-button-toggle",10)(21,"mat-icon"),e._uU(22,"vertical_split"),e.qZA()()(),e.TgZ(23,"div",11),e.YNc(24,V,3,0,"button",12),e.YNc(25,q,3,0,"button",13),e.qZA()()(),e.YNc(26,et,2,0,"main",0),e.ALo(27,"async"),e.YNc(28,tt,2,0,"main",0),e.ALo(29,"async"),e.YNc(30,nt,2,0,"main",0),e.ALo(31,"async"),e.YNc(32,ct,4,3,"main",0),e.ALo(33,"async"),e.BQk()}if(2&U){const p=$.ngIf,P=e.oxw();e.xp6(2),e.Q6J("initial",P.search),e.xp6(1),e.Q6J("ngIf",!(e.lcZ(4,12,P.showStage)||e.lcZ(5,14,P.showUnstage))),e.xp6(4),e.Q6J("ngIf",e.lcZ(8,16,P.showStage)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,18,P.showStage)),e.xp6(2),e.Q6J("ngIf",e.lcZ(12,20,P.showUnstage)),e.xp6(2),e.Q6J("value",p),e.xp6(11),e.Q6J("ngIf",P.showEdit),e.xp6(1),e.Q6J("ngIf",!P.hideClose),e.xp6(1),e.Q6J("ngIf","loading"===e.lcZ(27,22,P.currentView)),e.xp6(2),e.Q6J("ngIf","binary-file"===e.lcZ(29,24,P.currentView)),e.xp6(2),e.Q6J("ngIf","error"===e.lcZ(31,26,P.currentView)),e.xp6(2),e.Q6J("ngIf","normal"===e.lcZ(33,28,P.currentView))}}let dt=(()=>{class U extends((0,n.j)(o.A)){constructor(p,P,B,K){super(),this.store=p,this.highlightApi=P,this.diffSelectionService=B,this.stagingActionsService=K,this.hideClose=!1,this.showEdit=!1,this.search=null,this.closed=new e.vpe,this.edited=new e.vpe,this.currentView=new I.X("loading"),this.diffLines=new I.X(null),this.search$=new I.X(null)}ngOnInit(){this.showStage=(0,t.a)([this.patch,this.selectedCommitId,this.diffSelectionService.selectedFileLines]).pipe((0,M.U)(([p,P,B])=>"head"===P&&!0===p?.isUnstaged&&!p.patch.newFileIsSubmodule&&!p.patch.oldFileIsSubmodule&&B.length>0)),this.showUnstage=(0,t.a)([this.patch,this.selectedCommitId,this.diffSelectionService.selectedFileLines]).pipe((0,M.U)(([p,P,B])=>"head"===P&&!1===p?.isUnstaged&&!p.patch.newFileIsSubmodule&&!p.patch.oldFileIsSubmodule&&B.length>0)),this.filePath=this.patch.pipe((0,M.U)(p=>p?.patch.newFilePath??p?.patch.oldFilePath??"")),this.patch.pipe((0,C.x)((p,P)=>p&&P?!(p.repositoryPath!==P.repositoryPath||p.isUnstaged!==P.isUnstaged||p.patch.newFileId!==P.patch.newFileId||p.patch.newFileIsDir!==P.patch.newFileIsDir||p.patch.newFileIsSubmodule!==P.patch.newFileIsSubmodule||p.patch.newFilePath!==P.patch.newFilePath||p.patch.oldFileId!==P.patch.oldFileId||p.patch.oldFileIsDir!==P.patch.oldFileIsDir||p.patch.oldFileIsSubmodule!==P.patch.oldFileIsSubmodule||p.patch.oldFilePath!==P.patch.oldFilePath||p.patch.status!==P.patch.status||p.patch.hunks.length!==P.patch.hunks.length||(0,f.Z)(p.patch.hunks,P.patch.hunks).some(([B,K])=>B?.lines.length!==K?.lines.length||B?.newStart!==K?.newStart||B?.oldStart!==K?.oldStart||B?.header!==K?.header||B&&K&&(0,f.Z)(B.lines,K.lines).some(([j,H])=>j?.content.length!==H?.content.length||j?.contentOffset!==H?.contentOffset||j?.newLineNo!==H?.newLineNo||j?.oldLineNo!==H?.oldLineNo||j?.origin!==H?.origin||j?.content!==H?.content))):!p&&!P),(0,w.b)(()=>{this.currentView.next("loading")}),(0,E.w)(p=>p?(0,D.D)(this.getLines(p,!1)).pipe((0,v.R)(this.currentView.pipe((0,O.T)(1),(0,T.h)(P=>"loading"===P))),(0,v.R)(this.destroyed$),(0,M.U)(([P,B])=>[p,P,B]),(0,S.K)(P=>h.OZ.matches(P)?(this.currentView.next("binary-file"),(0,g.of)(null)):h.hK.matches(P)?(this.currentView.next("error"),(0,g.of)(null)):(0,a._)(()=>P))):(0,g.of)(null)),(0,w.b)(p=>{if(p){const[P,B,K]=p;this.diffLines.next({hunks:P.patch.hunks,oldLines:B,newLines:K,oldFilePath:P.patch.oldFilePath,newFilePath:P.patch.newFilePath,highlighted:!1}),this.currentView.next("normal")}else this.diffLines.next(null)}),(0,E.w)(p=>p?.[0]?(0,D.D)(this.getLines(p?.[0],!0)).pipe((0,v.R)(this.currentView.pipe((0,O.T)(1),(0,T.h)(P=>"loading"===P))),(0,v.R)(this.destroyed$),(0,M.U)(([P,B])=>[p?.[0],P,B]),(0,S.K)(P=>h.OZ.matches(P)?(this.currentView.next("binary-file"),(0,g.of)(null)):h.hK.matches(P)?(this.currentView.next("error"),(0,g.of)(null)):(0,a._)(()=>P))):(0,g.of)(null)),(0,v.R)(this.destroyed$)).subscribe(p=>{if(p){const[P,B,K]=p;this.diffLines.next({hunks:P.patch.hunks,oldLines:B,newLines:K,oldFilePath:P.patch.oldFilePath,newFilePath:P.patch.newFilePath,highlighted:!0}),this.currentView.next("normal")}else this.diffLines.next(null)})}changeView(p){this.store.dispatch(new u.zb(p))}modifyLinesStage(p){const P=this.store.selectSnapshot(d.E.selectedRepositoryPath);if(!P)throw new Error(`Cannot ${p} file lines when no repository is selected`);this.patch.pipe((0,m.q)(1)).subscribe(B=>{if(!B||!B.patch.oldFilePath)return;const K=[P,B.patch.oldFileId?B.patch.oldFilePath:null,B.patch.newFileId?B.patch.newFilePath:null,this.diffSelectionService.selectedFileLines.value];switch(p){case"discard":this.stagingActionsService.discardFileLines(...K).subscribe();break;case"stage":this.stagingActionsService.stageFileLines(...K).subscribe();break;default:this.stagingActionsService.unstageFileLines(...K).subscribe()}})}getLines(p,P){if(p.patch.oldFileIsSubmodule||p.patch.newFileIsSubmodule){if(p.patch.hunks.length<=0)return[(0,g.of)([]),(0,g.of)([])];const B=p.patch.hunks[0].lines.find(j=>j.oldLineNo>0),K=p.patch.hunks[0].lines.find(j=>j.newLineNo>0);return[(0,g.of)([{lineNumber:1,text:B?.content??"",tokens:[{startIndex:0,endIndex:B?.content.length??0,scopes:["normal"]}]}]),(0,g.of)([{lineNumber:1,text:K?.content??"",tokens:[{startIndex:0,endIndex:K?.content.length??0,scopes:["normal"]}]}])]}return[p.patch.oldFileId?this.highlightApi.getHighlightedFile(p.repositoryPath,p.patch.oldFileId,p.patch.oldFilePath,P):(0,g.of)([]),p.isUnstaged?this.highlightApi.getHighlightedFile(p.repositoryPath,null,p.patch.newFilePath,P):p.patch.newFileId?this.highlightApi.getHighlightedFile(p.repositoryPath,p.patch.newFileId,p.patch.newFilePath,P):(0,g.of)([])]}static{this.\u0275fac=function(P){return new(P||U)(e.Y36(F.yh),e.Y36(b.m),e.Y36(R.Q),e.Y36(y.A))}}static{this.\u0275cmp=e.Xpm({type:U,selectors:[["app-diff-view"]],inputs:{patch:"patch",hideClose:"hideClose",showEdit:"showEdit",search:"search"},outputs:{closed:"closed",edited:"edited"},features:[e.qOj],decls:2,vars:3,consts:[[4,"ngIf"],[3,"initial","searched"],[3,"path",4,"ngIf"],[1,"right"],["type","button","class","stage-button","mat-stroked-button","","matTooltip","Stage selected lines",3,"click",4,"ngIf"],["type","button","class","discard-button","mat-stroked-button","","color","warn","matTooltip","Discard selected lines",3,"click",4,"ngIf"],["type","button","class","unstage-button","mat-stroked-button","","matTooltip","Unstage selected lines",3,"click",4,"ngIf"],[3,"value","change"],["value","hunk","matTooltip","Hunk View"],["value","inline","matTooltip","Inline View"],["value","split","matTooltip","Split View"],[1,"close-container"],["type","button","mat-icon-button","","class","edit-button app-icon-button-md",3,"click",4,"ngIf"],["type","button","mat-icon-button","","class","close-button app-icon-button-md",3,"click",4,"ngIf"],[3,"path"],["type","button","mat-stroked-button","","matTooltip","Stage selected lines",1,"stage-button",3,"click"],["svgIcon","tray-plus"],["type","button","mat-stroked-button","","color","warn","matTooltip","Discard selected lines",1,"discard-button",3,"click"],["svgIcon","tray-remove"],["type","button","mat-stroked-button","","matTooltip","Unstage selected lines",1,"unstage-button",3,"click"],["svgIcon","tray-minus"],["type","button","mat-icon-button","",1,"edit-button","app-icon-button-md",3,"click"],["type","button","mat-icon-button","",1,"close-button","app-icon-button-md",3,"click"],[3,"diffLines","search",4,"ngIf"],[3,"diffLines","search"]],template:function(P,B){1&P&&(e.YNc(0,ht,34,30,"ng-container",0),e.ALo(1,"async")),2&P&&e.Q6J("ngIf",e.lcZ(1,1,B.view))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;position:absolute}header[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:baseline;justify-content:space-between;margin-bottom:5px;outline:none;overflow-x:auto;overflow-y:hidden}header[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}header[_ngcontent-%COMP%]   app-condensed-path[_ngcontent-%COMP%]{min-width:150px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;gap:5px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .stage-button[_ngcontent-%COMP%], header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .discard-button[_ngcontent-%COMP%], header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .unstage-button[_ngcontent-%COMP%]{height:40px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .stage-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .discard-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .unstage-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0;font-size:24px;width:24px;height:24px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{height:40px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{font-size:0}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:38px;padding:0 6px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .close-container[_ngcontent-%COMP%]{display:flex;align-items:center;align-self:baseline;overflow:hidden;height:40px}main[_ngcontent-%COMP%]{flex:1 0 auto;outline:none;overflow-x:auto;overflow-y:auto}.dark-theme   [_nghost-%COMP%]{background:#1e1e1e}.light-theme   [_nghost-%COMP%]{background:#fafafa}"],changeDetection:0})}}return(0,_.gn)([(0,F.Ph)(d.E.selectedCommitId)],U.prototype,"selectedCommitId",void 0),(0,_.gn)([(0,F.Ph)(x.$.diffView)],U.prototype,"view",void 0),U})()},7072:(W,k,i)=>{i.d(k,{m:()=>st});var _=i(811),e=i(284),F=i(3179),f=i(5410),I=i(4883),t=i(4650),D=i(1134),g=i(2382),a=i(9940);var w=i(1256),E=i(8344),v=i(5601);const T=function O(L){var r=(0,v.Z)(L),s=r%1;return r==r?s?r-s:r:0},m=function S(L,r,s){var l=null==L?0:L.length;return l?(r=s||void 0===r?1:T(r),(0,E.Z)(L,0,(r=l-r)<0?0:r)):[]},n=function h(L,r,s){var l=null==L?0:L.length;return l?(r=s||void 0===r?1:T(r),(0,E.Z)(L,(r=l-r)<0?0:r,l)):[]};var o=i(1135),d=i(4004),u=i(8675),x=i(1520),b=i(4326),R=i(2722),y=i(8926),N=i(9967),J=i(2771),z=i(315),X=i(7205),V=i(6895),q=i(4859),et=i(7392),tt=i(1899),nt=i(1453);const lt=["scrollContainer"],at=["code"];function rt(L,r){if(1&L&&t._UZ(0,"span",9),2&L){const s=r.ngIf;t.Udp("left",s.left)("width",s.width)}}function ct(L,r){if(1&L){const s=t.EpF();t.ynx(0),t.TgZ(1,"button",10),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,A=t.oxw();return t.KtG(A.expandSeparator(c))}),t.TgZ(2,"mat-icon",11),t._uU(3),t.qZA()(),t.TgZ(4,"span",12),t._uU(5),t.qZA(),t.BQk()}if(2&L){const s=t.oxw(),l=s.first,c=s.last,A=s.$implicit,Z=t.oxw();t.xp6(1),t.Udp("width",Z.lineNumberMargin+26,"px"),t.xp6(2),t.Oqu(l?"expand_less":c?"expand_more":"unfold_more"),t.xp6(2),t.Oqu(A.separatorHeader)}}function ht(L,r){if(1&L&&(t.TgZ(0,"span",17),t._uU(1),t.qZA()),2&L){const s=r.$implicit;t.Q6J("ngClass",s.class),t.xp6(1),t.Oqu(s.text)}}function dt(L,r){if(1&L&&(t.ynx(0),t.YNc(1,ht,2,2,"span",16),t.ALo(2,"tokens"),t.ALo(3,"searchToken"),t.ALo(4,"async"),t.BQk()),2&L){const s=r.ngIf,l=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.Dn7(3,4,s.tokens,s.text,t.lcZ(4,8,l.search)),s.text))}}function U(L,r){if(1&L&&(t.TgZ(0,"span",13),t._uU(1),t.qZA(),t.TgZ(2,"span",14),t._uU(3),t.qZA(),t.YNc(4,dt,5,10,"ng-container",15)),2&L){const s=t.oxw().$implicit,l=t.oxw();t.Udp("right","calc(100% + 26px + "+(l.lineNumberMargin/2).toString()+"px)")("width",l.lineNumberMargin/2-5,"px"),t.xp6(1),t.Oqu(null==s.diffLine.oldLine?null:s.diffLine.oldLine.lineNumber),t.xp6(1),t.Udp("width",l.lineNumberMargin/2-5,"px"),t.xp6(1),t.Oqu(null==s.diffLine.newLine?null:s.diffLine.newLine.lineNumber),t.xp6(1),t.Q6J("ngIf",l.getLineView(s.diffLine))}}function $(L,r){if(1&L&&(t.TgZ(0,"li",5),t.YNc(1,rt,1,4,"span",6),t.ALo(2,"async"),t.YNc(3,ct,6,4,"ng-container",7),t.YNc(4,U,5,9,"ng-template",null,8,t.W1O),t.qZA()),2&L){const s=r.$implicit,l=r.index,c=t.MAs(5),A=t.oxw();t.Q6J("ngClass","line-"+(s.isSeparator?"separator":s.diffLine.status)),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,4,A.getSelection(l))),t.xp6(2),t.Q6J("ngIf",s.isSeparator)("ngIfElse",c)}}class p extends((0,y.j)(N.A,J.P)){constructor(r,s){super(),this.diffService=r,this.diffSelectionService=s,this.lineNumberMargin=0,this.lines$=new o.X([]),this.currentPatch=null,this.getSelection=l=>this.diffSelectionService.selectedRange.pipe((0,d.U)(c=>{if(!c)return null;const[A,Z]=c[0].line>c[1].line||c[0].line===c[1].line&&c[0].char>c[1].char?[c[1],c[0]]:c;return l<A.line||l>Z.line?null:l===A.line?{left:A.char*this.diffSelectionService.charWidth+"px",width:A.line===Z.line?(Z.char-A.char)*this.diffSelectionService.charWidth+"px":"100%"}:l===Z.line?{left:"0px",width:Z.char*this.diffSelectionService.charWidth+"px"}:{left:"0px",width:"100%"}}))}ngOnInit(){this.diffLines.pipe((0,u.O)(null),(0,x.G)(),(0,b.g)(0),(0,R.R)(this.destroyed$)).subscribe(([s,l])=>{const c=this.currentPatch?{...this.currentPatch}:null;if(l){this.currentPatch={newFilePath:l.newFilePath,oldFilePath:l.oldFilePath};const A=function M(L){return L&&L.length?(0,D.Z)(L,a.Z,g.Z):void 0}([l.oldLines.length,l.newLines.length])??0;this.lineNumberMargin=this.diffService.calculateMargin(A.toString().length),this.diffService.calculateHunkLines(l.oldLines,l.newLines,l.hunks).pipe((0,R.R)(this.destroyed$)).subscribe(Z=>{s&&s.newFilePath===l.newFilePath&&s.oldFilePath===l.oldFilePath&&!s.highlighted&&l.highlighted?this.updateLines(Z):this.lines$.next(Z),(!c||c.oldFilePath!==this.currentPatch?.oldFilePath||c.newFilePath!==this.currentPatch?.newFilePath)&&this.scrollContainer.elementRef?.nativeElement?.scrollTo(0,0)})}else this.currentPatch=null,this.lineNumberMargin=0,this.lines$.next([]),c&&this.scrollContainer.elementRef?.nativeElement?.scrollTo(0,0)});const r=this.scrollContainer.elementRef.nativeElement;this.diffSelectionService.captureSelections(this.codeElement.nativeElement,(s,l)=>({line:Math.floor((r.scrollTop+l-r.getBoundingClientRect().top)/19),char:Math.max(0,Math.round((r.scrollLeft+s-r.getBoundingClientRect().left-(this.lineNumberMargin+26))/this.diffSelectionService.charWidth))}),(s,l)=>this.lines$.value.filter((c,A)=>A>=s&&A<=l).map(c=>c.isSeparator?c.separatorHeader??void 0:this.getLineView(c.diffLine)?.text),()=>{const s=this.lines$.value,l=s[s.length-1];return{line:s.length-1,char:(l.isSeparator?l.separatorHeader:this.getLineView(l.diffLine)?.text)?.length??0}},([s,l])=>(0,w.Z)(s.line,l.line+1).flatMap(c=>{const A=this.lines$.value[c];return!A||A.isSeparator?[]:[{oldLineNo:A.diffLine.oldLine?.lineNumber??-1,newLineNo:A.diffLine.newLine?.lineNumber??-1}]})).pipe((0,R.R)(this.destroyed$)).subscribe()}expandSeparator(r){const l=this.lines$.value;this.lines$.next(l.flatMap((c,A)=>{if(c!==r)return c;if(r.hiddenDiffLines.length<=25)return r.hiddenDiffLines.map(Q=>({isSeparator:!1,diffLine:Q}));if(0===A)return[{isSeparator:!0,separatorHeader:r.separatorHeader,hiddenDiffLines:m(r.hiddenDiffLines,20)},...n(r.hiddenDiffLines,20).map(Q=>({isSeparator:!1,diffLine:Q}))];if(A===l.length-1)return[...r.hiddenDiffLines.slice(0,20).map(Q=>({isSeparator:!1,diffLine:Q})),{isSeparator:!0,separatorHeader:null,hiddenDiffLines:r.hiddenDiffLines.slice(20)}];const Z=r.hiddenDiffLines.slice(0,10),G=m(r.hiddenDiffLines.slice(10),10),Y=n(r.hiddenDiffLines,10);return[...Z.map(Q=>({isSeparator:!1,diffLine:Q})),{isSeparator:!0,separatorHeader:r.separatorHeader,hiddenDiffLines:G},...Y.map(Q=>({isSeparator:!1,diffLine:Q}))]}))}getLineView(r){return"added"===r.status?r.newLine:"removed"===r.status?r.oldLine:"unchanged"===r.status?r.newLine??r.oldLine:null}trackByHunkLine(r,s){return s.isSeparator?s.separatorHeader:`${s.diffLine.oldLine?.text}:::${s.diffLine.newLine?.text}`}updateLines(r){const s=this.lines$.value;let l=0,c=0;const A=[];for(;c<r.length;){const Z=s[l],G=r[c];if(G.isSeparator){if(Z.isSeparator){if(Z.hiddenDiffLines.length===G.hiddenDiffLines.length){A.push(G),l++,c++;continue}A.push({isSeparator:!0,separatorHeader:G.separatorHeader,hiddenDiffLines:G.hiddenDiffLines.slice(0,Z.hiddenDiffLines.length)}),G.hiddenDiffLines=G.hiddenDiffLines.slice(Z.hiddenDiffLines.length),l++;continue}if(0===G.hiddenDiffLines.length){c++;continue}A.push({isSeparator:!1,diffLine:G.hiddenDiffLines[0]}),G.hiddenDiffLines=G.hiddenDiffLines.slice(1),l++}else{if(s[l].isSeparator)throw new Error("Problem when updating hunk diff lines");A.push(G),l++,c++}}this.lines$.next(A)}static{this.\u0275fac=function(s){return new(s||p)(t.Y36(z.S),t.Y36(X.Q))}}static{this.\u0275cmp=t.Xpm({type:p,selectors:[["app-hunk-view"]],viewQuery:function(s,l){if(1&s&&(t.Gf(lt,7),t.Gf(at,7,t.SBq),t.Gf(I.N7,5)),2&s){let c;t.iGM(c=t.CRH())&&(l.scrollContainer=c.first),t.iGM(c=t.CRH())&&(l.codeElement=c.first),t.iGM(c=t.CRH())&&(l.viewports=c)}},inputs:{diffLines:"diffLines",search:"search"},features:[t.qOj],decls:7,vars:9,consts:[[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["scrollContainer",""],["tabindex","0",1,"vs-code-theme"],["code",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"line",3,"ngClass"],["class","selection",3,"left","width",4,"ngIf"],[4,"ngIf","ngIfElse"],["diffLineContent",""],[1,"selection"],["mat-button","",1,"separator-icon",3,"click"],["inline",""],[1,"separator-header"],[1,"old-line-number"],[1,"new-line-number"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(s,l){1&s&&(t.TgZ(0,"cdk-virtual-scroll-viewport",0,1)(2,"code",2,3)(4,"ul"),t.YNc(5,$,6,6,"li",4),t.ALo(6,"async"),t.qZA()()()),2&s&&(t.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),t.xp6(4),t.Udp("margin-left",l.lineNumberMargin+26,"px"),t.xp6(1),t.Q6J("cdkVirtualForOf",t.lcZ(6,7,l.lines$))("cdkVirtualForTrackBy",l.trackByHunkLine))},dependencies:[I.xd,I.x0,I.N7,V.mk,V.sg,V.O5,q.lW,et.Hw,V.Ov,tt.y,nt.U],styles:['code[_ngcontent-%COMP%]{display:block;white-space:pre;user-select:none;cursor:text;outline:none}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{right:calc(100% + 26px)}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%]{position:absolute;display:block;height:19px;opacity:.5}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{right:100%}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{cursor:pointer;height:19px;line-height:19px;padding:0;text-align:center;min-width:0}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;height:100%;width:100%;z-index:-1}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:19px}.viewport[_ngcontent-%COMP%]{height:100%;width:100%}.dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-separator[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-separator[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]:before, .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]:before{background:#252525}.dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{color:#858585}.dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%]{background-color:#53789b!important}.light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-separator[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-separator[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]:before, .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]:before{background:#eeeeee}.light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{color:#5e5e5e}.light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%]{background-color:#add6ff!important}'],changeDetection:0})}}const P=["scrollContainer"],B=["code"];function K(L,r){if(1&L&&t._UZ(0,"span",10),2&L){const s=r.ngIf;t.Udp("left",s.left)("width",s.width)}}function j(L,r){if(1&L&&(t.TgZ(0,"span",12),t._uU(1),t.qZA()),2&L){const s=r.$implicit;t.Q6J("ngClass",s.class),t.xp6(1),t.Oqu(s.text)}}function H(L,r){if(1&L&&(t.ynx(0),t.YNc(1,j,2,2,"span",11),t.ALo(2,"tokens"),t.ALo(3,"searchToken"),t.ALo(4,"async"),t.BQk()),2&L){const s=r.ngIf,l=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.Dn7(3,4,s.tokens,s.text,t.lcZ(4,8,l.search)),s.text))}}function ft(L,r){if(1&L&&(t.TgZ(0,"li",5),t.YNc(1,K,1,4,"span",6),t.ALo(2,"async"),t.TgZ(3,"span",7),t._uU(4),t.qZA(),t.TgZ(5,"span",8),t._uU(6),t.qZA(),t.YNc(7,H,5,10,"ng-container",9),t.qZA()),2&L){const s=r.$implicit,l=r.index,c=t.oxw();t.Q6J("ngClass","line-"+s.status),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,11,c.getSelection(l))),t.xp6(2),t.Udp("right","calc(100% + 26px + "+(c.lineNumberMargin/2).toString()+"px)")("width",c.lineNumberMargin/2-5,"px"),t.xp6(1),t.Oqu(null==s.oldLine?null:s.oldLine.lineNumber),t.xp6(1),t.Udp("width",c.lineNumberMargin/2-5,"px"),t.xp6(1),t.Oqu(null==s.newLine?null:s.newLine.lineNumber),t.xp6(1),t.Q6J("ngIf",c.getLineView(s))}}class it extends((0,y.j)(N.A,J.P)){constructor(r,s){super(),this.diffService=r,this.diffSelectionService=s,this.lineNumberMargin=0,this.lines$=new o.X([]),this.currentPatch=null,this.getSelection=l=>this.diffSelectionService.selectedRange.pipe((0,d.U)(c=>{if(!c)return null;const[A,Z]=c[0].line>c[1].line||c[0].line===c[1].line&&c[0].char>c[1].char?[c[1],c[0]]:c;return l<A.line||l>Z.line?null:l===A.line?{left:A.char*this.diffSelectionService.charWidth+"px",width:A.line===Z.line?(Z.char-A.char)*this.diffSelectionService.charWidth+"px":"100%"}:l===Z.line?{left:"0px",width:Z.char*this.diffSelectionService.charWidth+"px"}:{left:"0px",width:"100%"}}))}ngOnInit(){this.diffLines.pipe((0,b.g)(0),(0,R.R)(this.destroyed$)).subscribe(s=>{const l=this.currentPatch?{...this.currentPatch}:null;if(s){this.currentPatch={newFilePath:s.newFilePath,oldFilePath:s.oldFilePath};const c=Math.max(s.oldLines.length,s.newLines.length)??0;this.lineNumberMargin=this.diffService.calculateMargin(c.toString().length),this.diffService.calculateInlineLines(s.oldLines,s.newLines,s.hunks).pipe((0,R.R)(this.destroyed$)).subscribe(A=>{this.lines$.next(A),(!l||l.oldFilePath!==this.currentPatch?.oldFilePath||l.newFilePath!==this.currentPatch?.newFilePath)&&this.scrollContainer.nativeElement?.scrollTo(0,0)})}else this.currentPatch=null,this.lineNumberMargin=0,this.lines$.next([]),l&&this.scrollContainer.nativeElement?.scrollTo(0,0)});const r=this.scrollContainer.nativeElement;this.diffSelectionService.captureSelections(this.codeElement.nativeElement,(s,l)=>({line:Math.floor((r.scrollTop+l-r.getBoundingClientRect().top)/19),char:Math.max(0,Math.round((r.scrollLeft+s-r.getBoundingClientRect().left-(this.lineNumberMargin+26))/this.diffSelectionService.charWidth))}),(s,l)=>this.lines$.value.filter((c,A)=>A>=s&&A<=l).map(c=>this.getLineView(c)?.text),()=>({line:this.lines$.value.length-1,char:this.getLineView(this.lines$.value[this.lines$.value.length-1])?.text.length??0}),([s,l])=>(0,w.Z)(s.line,l.line+1).map(c=>({oldLineNo:this.lines$.value[c]?.oldLine?.lineNumber??-1,newLineNo:this.lines$.value[c]?.newLine?.lineNumber??-1}))).pipe((0,R.R)(this.destroyed$)).subscribe()}getLineView(r){return"added"===r.status?r.newLine:"removed"===r.status?r.oldLine:"unchanged"===r.status?r.newLine??r.oldLine:null}trackByDiffLine(r,s){return r}static{this.\u0275fac=function(s){return new(s||it)(t.Y36(z.S),t.Y36(X.Q))}}static{this.\u0275cmp=t.Xpm({type:it,selectors:[["app-inline-view"]],viewQuery:function(s,l){if(1&s&&(t.Gf(P,7,t.SBq),t.Gf(B,7,t.SBq),t.Gf(I.N7,5)),2&s){let c;t.iGM(c=t.CRH())&&(l.scrollContainer=c.first),t.iGM(c=t.CRH())&&(l.codeElement=c.first),t.iGM(c=t.CRH())&&(l.viewports=c)}},inputs:{diffLines:"diffLines",search:"search"},features:[t.qOj],decls:7,vars:9,consts:[[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["scrollContainer",""],["tabindex","0",1,"vs-code-theme"],["code",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"line",3,"ngClass"],["class","selection",3,"left","width",4,"ngIf"],[1,"old-line-number"],[1,"new-line-number"],[4,"ngIf"],[1,"selection"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(s,l){1&s&&(t.TgZ(0,"cdk-virtual-scroll-viewport",0,1)(2,"code",2,3)(4,"ul"),t.YNc(5,ft,8,13,"li",4),t.ALo(6,"async"),t.qZA()()()),2&s&&(t.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),t.xp6(4),t.Udp("margin-left",l.lineNumberMargin+26,"px"),t.xp6(1),t.Q6J("cdkVirtualForOf",t.lcZ(6,7,l.lines$))("cdkVirtualForTrackBy",l.trackByDiffLine))},dependencies:[I.xd,I.x0,I.N7,V.mk,V.sg,V.O5,V.Ov,tt.y,nt.U],styles:["code[_ngcontent-%COMP%]{display:block;white-space:pre;user-select:none;cursor:text;outline:none}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{right:calc(100% + 26px)}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%]{position:absolute;display:block;height:19px;opacity:.5}.viewport[_ngcontent-%COMP%]{height:100%;width:100%}.dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{color:#858585}.dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%]{background-color:#53789b!important}.light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{color:#5e5e5e}.light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%]{background-color:#add6ff!important}"],changeDetection:0})}}var gt=i(4968),mt=i(1365),ut=i(9300),_t=i(8505),pt=i(8372),Ct=i(7396),Mt=i(3943);const Ot=["leftScrollContainer"],Pt=["rightScrollContainer"],vt=["leftCode"],Et=["rightCode"];function xt(L,r){if(1&L&&t._UZ(0,"span",13),2&L){const s=r.ngIf;t.Udp("left",s.left)("width",s.width)}}function bt(L,r){if(1&L&&(t.TgZ(0,"span",16),t._uU(1),t.qZA()),2&L){const s=r.$implicit;t.Q6J("ngClass",s.class),t.xp6(1),t.Oqu(s.text)}}function Lt(L,r){if(1&L&&(t.ynx(0),t.TgZ(1,"span",14),t._uU(2),t.qZA(),t.YNc(3,bt,2,2,"span",15),t.ALo(4,"tokens"),t.ALo(5,"searchToken"),t.ALo(6,"async"),t.BQk()),2&L){const s=t.oxw().$implicit,l=t.oxw();t.xp6(2),t.Oqu(null==s.oldLine?null:s.oldLine.lineNumber),t.xp6(1),t.Q6J("ngForOf",t.xi3(4,2,t.Dn7(5,5,null==s.oldLine?null:s.oldLine.tokens,null==s.oldLine?null:s.oldLine.text,t.lcZ(6,9,l.search)),null==s.oldLine?null:s.oldLine.text))}}function Tt(L,r){if(1&L&&(t.TgZ(0,"li",10),t.YNc(1,xt,1,4,"span",11),t.ALo(2,"async"),t.YNc(3,Lt,7,11,"ng-container",12),t.qZA()),2&L){const s=r.$implicit,l=r.index,c=t.oxw();t.Q6J("ngClass","line-"+s.status),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,c.getSelection(l,"left"))),t.xp6(2),t.Q6J("ngIf","added"!==s.status)}}function wt(L,r){if(1&L&&t._UZ(0,"span",13),2&L){const s=r.ngIf;t.Udp("left",s.left)("width",s.width)}}function Dt(L,r){if(1&L&&(t.TgZ(0,"span",16),t._uU(1),t.qZA()),2&L){const s=r.$implicit;t.Q6J("ngClass",s.class),t.xp6(1),t.Oqu(s.text)}}function It(L,r){if(1&L&&(t.ynx(0),t.TgZ(1,"span",14),t._uU(2),t.qZA(),t.YNc(3,Dt,2,2,"span",15),t.ALo(4,"tokens"),t.ALo(5,"searchToken"),t.ALo(6,"async"),t.BQk()),2&L){const s=t.oxw().$implicit,l=t.oxw();t.xp6(2),t.Oqu(null==s.newLine?null:s.newLine.lineNumber),t.xp6(1),t.Q6J("ngForOf",t.xi3(4,2,t.Dn7(5,5,null==s.newLine?null:s.newLine.tokens,null==s.newLine?null:s.newLine.text,t.lcZ(6,9,l.search)),null==s.newLine?null:s.newLine.text))}}function At(L,r){if(1&L&&(t.TgZ(0,"li",10),t.YNc(1,wt,1,4,"span",11),t.ALo(2,"async"),t.YNc(3,It,7,11,"ng-container",12),t.qZA()),2&L){const s=r.$implicit,l=r.index,c=t.oxw();t.Q6J("ngClass","line-"+s.status),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,c.getSelection(l,"right"))),t.xp6(2),t.Q6J("ngIf","removed"!==s.status)}}class ot extends((0,y.j)(N.A,J.P)){constructor(r,s,l){super(),this.zone=r,this.diffService=s,this.diffSelectionService=l,this.leftLineNumberMargin=0,this.rightLineNumberMargin=0,this.lines$=new o.X([]),this.currentPatch=null,this.selectionSide=new o.X("right"),this.getSelection=(c,A)=>this.diffSelectionService.selectedRange.pipe((0,mt.M)(this.selectionSide),(0,d.U)(([Z,G])=>{if(!Z||G!==A)return null;const[Y,Q]=Z[0].line>Z[1].line||Z[0].line===Z[1].line&&Z[0].char>Z[1].char?[Z[1],Z[0]]:Z;return c<Y.line||c>Q.line?null:c===Y.line?{left:Y.char*this.diffSelectionService.charWidth+"px",width:Y.line===Q.line?(Q.char-Y.char)*this.diffSelectionService.charWidth+"px":"100%"}:c===Q.line?{left:"0px",width:Q.char*this.diffSelectionService.charWidth+"px"}:{left:"0px",width:"100%"}}))}ngOnInit(){this.diffLines.pipe((0,b.g)(0),(0,R.R)(this.destroyed$)).subscribe(l=>{const c=this.currentPatch?{...this.currentPatch}:null;l?(this.currentPatch={newFilePath:l.newFilePath,oldFilePath:l.oldFilePath},this.leftLineNumberMargin=this.diffService.calculateMargin(l.oldLines.length.toString().length,!0),this.rightLineNumberMargin=this.diffService.calculateMargin(l.newLines.length.toString().length,!0),this.diffService.calculateSplitLines(l.oldLines,l.newLines,l.hunks).pipe((0,R.R)(this.destroyed$)).subscribe(A=>{this.lines$.next(A),(!c||c.oldFilePath!==this.currentPatch?.oldFilePath||c.newFilePath!==this.currentPatch?.newFilePath)&&(this.leftScrollContainer?.nativeElement?.scrollTo(0,0),this.rightScrollContainer?.nativeElement?.scrollTo(0,0))})):(this.currentPatch=null,this.leftLineNumberMargin=0,this.rightLineNumberMargin=0,this.lines$.next([]),c&&(this.leftScrollContainer?.nativeElement?.scrollTo(0,0),this.rightScrollContainer?.nativeElement?.scrollTo(0,0)))}),this.zone.runOutsideAngular(()=>{let l=!1,c=!1;(0,gt.R)(this.leftScrollContainer.nativeElement,"scroll",{passive:!0}).pipe((0,ut.h)(()=>!c),(0,_t.b)(()=>{l=!0,this.rightScrollContainer.nativeElement.scrollTo(this.leftScrollContainer.nativeElement.scrollLeft,this.leftScrollContainer.nativeElement.scrollTop)}),(0,pt.b)(100),(0,R.R)(this.destroyed$)).subscribe(()=>{l=!1}),(0,gt.R)(this.rightScrollContainer.nativeElement,"scroll",{passive:!0}).pipe((0,ut.h)(()=>!l),(0,_t.b)(()=>{c=!0,this.leftScrollContainer.nativeElement.scrollTo(this.rightScrollContainer.nativeElement.scrollLeft,this.rightScrollContainer.nativeElement.scrollTop)}),(0,pt.b)(100),(0,R.R)(this.destroyed$)).subscribe(()=>{c=!1})});const r=this.leftScrollContainer.nativeElement;this.diffSelectionService.captureSelections(this.leftCodeElement.nativeElement,(l,c)=>({line:Math.floor((r.scrollTop+c-r.getBoundingClientRect().top)/19),char:Math.max(0,Math.round((r.scrollLeft+l-r.getBoundingClientRect().left-(this.leftLineNumberMargin+26))/this.diffSelectionService.charWidth))}),(l,c)=>this.lines$.value.filter((A,Z)=>Z>=l&&Z<=c).map(A=>A.oldLine?.text),()=>({line:this.lines$.value.length-1,char:this.lines$.value[this.lines$.value.length-1].oldLine?.text.length??0}),([l,c])=>(0,w.Z)(l.line,c.line+1).map(A=>({oldLineNo:this.lines$.value[A]?.oldLine?.lineNumber??-1,newLineNo:this.lines$.value[A]?.newLine?.lineNumber??-1}))).pipe((0,R.R)(this.destroyed$)).subscribe(()=>{this.selectionSide.next("left")});const s=this.rightScrollContainer.nativeElement;this.diffSelectionService.captureSelections(this.rightCodeElement.nativeElement,(l,c)=>({line:Math.floor((s.scrollTop+c-s.getBoundingClientRect().top)/19),char:Math.max(0,Math.round((s.scrollLeft+l-s.getBoundingClientRect().left-(this.rightLineNumberMargin+26))/this.diffSelectionService.charWidth))}),(l,c)=>this.lines$.value.filter((A,Z)=>Z>=l&&Z<=c).map(A=>A.newLine?.text),()=>({line:this.lines$.value.length-1,char:this.lines$.value[this.lines$.value.length-1].newLine?.text.length??0}),([l,c])=>(0,w.Z)(l.line,c.line+1).map(A=>({oldLineNo:this.lines$.value[A]?.oldLine?.lineNumber??-1,newLineNo:this.lines$.value[A]?.newLine?.lineNumber??-1}))).pipe((0,R.R)(this.destroyed$)).subscribe(()=>{this.selectionSide.next("right")})}trackByDiffLine(r,s){return r}static{this.\u0275fac=function(s){return new(s||ot)(t.Y36(t.R0b),t.Y36(z.S),t.Y36(X.Q))}}static{this.\u0275cmp=t.Xpm({type:ot,selectors:[["app-split-view"]],viewQuery:function(s,l){if(1&s&&(t.Gf(Ot,7,t.SBq),t.Gf(Pt,7,t.SBq),t.Gf(vt,7,t.SBq),t.Gf(Et,7,t.SBq),t.Gf(I.N7,5)),2&s){let c;t.iGM(c=t.CRH())&&(l.leftScrollContainer=c.first),t.iGM(c=t.CRH())&&(l.rightScrollContainer=c.first),t.iGM(c=t.CRH())&&(l.leftCodeElement=c.first),t.iGM(c=t.CRH())&&(l.rightCodeElement=c.first),t.iGM(c=t.CRH())&&(l.viewports=c)}},inputs:{diffLines:"diffLines",search:"search"},features:[t.qOj],decls:17,vars:18,consts:[["id","diff-view_split-left"],[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["leftScrollContainer",""],["tabindex","0",1,"vs-code-theme","left-code"],["leftCode",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["id","diff-view_split-right"],["rightScrollContainer",""],["tabindex","1",1,"vs-code-theme","right-code"],["rightCode",""],[1,"line",3,"ngClass"],["class","selection",3,"left","width",4,"ngIf"],[4,"ngIf"],[1,"selection"],[1,"line-number"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(s,l){1&s&&(t.TgZ(0,"app-grid")(1,"app-grid-cell",0)(2,"cdk-virtual-scroll-viewport",1,2)(4,"code",3,4)(6,"ul"),t.YNc(7,Tt,4,5,"li",5),t.ALo(8,"async"),t.qZA()()()(),t.TgZ(9,"app-grid-cell",6)(10,"cdk-virtual-scroll-viewport",1,7)(12,"code",8,9)(14,"ul"),t.YNc(15,At,4,5,"li",5),t.ALo(16,"async"),t.qZA()()()()()),2&s&&(t.xp6(2),t.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),t.xp6(4),t.Udp("margin-left",l.leftLineNumberMargin+26,"px"),t.xp6(1),t.Q6J("cdkVirtualForOf",t.lcZ(8,14,l.lines$))("cdkVirtualForTrackBy",l.trackByDiffLine),t.xp6(3),t.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),t.xp6(4),t.Udp("margin-left",l.rightLineNumberMargin+26,"px"),t.xp6(1),t.Q6J("cdkVirtualForOf",t.lcZ(16,16,l.lines$))("cdkVirtualForTrackBy",l.trackByDiffLine))},dependencies:[I.xd,I.x0,I.N7,V.mk,V.sg,V.O5,Ct.Y,Mt.M,V.Ov,tt.y,nt.U],styles:["code[_ngcontent-%COMP%]{display:block;white-space:pre;user-select:none;cursor:text;outline:none}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .line-number[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none;right:calc(100% + 26px)}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%]{position:absolute;display:block;height:19px;opacity:.5}.viewport[_ngcontent-%COMP%]{height:100%;width:100%;overflow-x:scroll}.dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .line-number[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .line-number[_ngcontent-%COMP%]{color:#858585}.dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%]{background-color:#53789b!important}.dark-theme[_nghost-%COMP%]   code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-added[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-added[_ngcontent-%COMP%]{background:#111}.dark-theme[_nghost-%COMP%]   code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%]{background:#501515}.dark-theme[_nghost-%COMP%]   code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-removed[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-removed[_ngcontent-%COMP%]{background:#111}.dark-theme[_nghost-%COMP%]   code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%]{background:#1f2c19}.light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .line-number[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .line-number[_ngcontent-%COMP%]{color:#5e5e5e}.light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .selection[_ngcontent-%COMP%]{background-color:#add6ff!important}.light-theme[_nghost-%COMP%]   code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-added[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-added[_ngcontent-%COMP%]{background:#f0f0f0}.light-theme[_nghost-%COMP%]   code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%]{background:#ee7e7e}.light-theme[_nghost-%COMP%]   code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-removed[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-removed[_ngcontent-%COMP%]{background:#f0f0f0}.light-theme[_nghost-%COMP%]   code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%]{background:#0cd086}"],changeDetection:0})}}var St=i(266),yt=i(9131),Bt=i(3061);class st{static{this.\u0275fac=function(s){return new(s||st)}}static{this.\u0275mod=t.oAB({type:st})}static{this.\u0275inj=t.cJS({imports:[_.vV,e.c,F.I]})}}t.B6R(f.s,[_.A9,_.Yi,V.O5,q.lW,q.RK,et.Hw,St.gM,yt.j,Bt.T,p,it,ot],[V.Ov])},315:(W,k,i)=>{i.d(k,{S:()=>g});var _=i(3969),F=i(7717),f=i(9646),I=i(4128),t=i(4004),D=i(4650);class g{constructor(){this.calculateInlineLines=(M,C,w)=>{const E=[];let v=0,O=0,T=[];const S=(m,h)=>{(m>v||h>O)&&(E.push(...(0,F.Z)(M.slice(v,m),C.slice(O,h)).map(([n,o])=>({oldLine:n??null,newLine:o??null,status:"unchanged"}))),v=m,O=h)};for(const m of w){S(m.oldStart-1,m.newStart-1),[T,v,O]=this.calculateGroups(M,C,v,O,m);for(const h of T)"modified"===h.type?E.push(...h.lines.flatMap(n=>"replaced"===n.status?[{...n,status:"removed",newLine:null},{...n,status:"added",oldLine:null}]:[n]).sort((n,o)=>"removed"===n.status&&"removed"===o.status?0:"removed"===n.status?-1:"removed"===o.status?1:0)):E.push(...h.lines)}return S(M.length,C.length),(0,f.of)(E)},this.calculateHunkLines=(M,C,w)=>{const E=[];let v=0,O=0,T=[];const S=(m,h,n)=>{(m>v||h>O)&&(E.push({isSeparator:!0,separatorHeader:n,hiddenDiffLines:(0,F.Z)(M.slice(v,m),C.slice(O,h)).map(([o,d])=>({oldLine:o??null,newLine:d??null,status:"unchanged"}))}),v=m,O=h)};for(const m of w){S(m.oldStart-1,m.newStart-1,m.header),[T,v,O]=this.calculateGroups(M,C,v,O,m);for(const h of T)"modified"===h.type?E.push(...h.lines.flatMap(n=>"replaced"===n.status?[{isSeparator:!1,diffLine:{...n,status:"removed",newLine:null}},{isSeparator:!1,diffLine:{...n,status:"added",oldLine:null}}]:[{isSeparator:!1,diffLine:n}]).sort((n,o)=>"removed"===n.diffLine.status&&"removed"===o.diffLine.status?0:"removed"===n.diffLine.status?-1:"removed"===o.diffLine.status?1:0)):E.push(...h.lines.map(n=>({isSeparator:!1,diffLine:n})))}return S(M.length,C.length,null),(0,f.of)(E)},this.calculateSplitLines=(M,C,w)=>{const E=[];let v=0,O=0,T=[];const S=(m,h)=>{(m>v||h>O)&&(E.push(...(0,F.Z)(M.slice(v,m),C.slice(O,h)).map(([n,o])=>({oldLine:n??null,newLine:o??null,status:"unchanged"}))),v=m,O=h)};for(const m of w){S(m.oldStart-1,m.newStart-1),[T,v,O]=this.calculateGroups(M,C,v,O,m);for(const h of T)E.push(...h.lines)}return S(M.length,C.length),(0,f.of)(E)},this.calculateMergeLines=(M,C,w,E,v)=>{const O=[],T=this.calculateSplitLines(M,C,E),S=this.calculateSplitLines(M,w,v);return(0,I.D)([T,S]).pipe((0,t.U)(([m,h])=>{let n=1,o=0,d=0;for(;o<m.length&&d<h.length;){const u=m[o],x=h[d];if(u.oldLine||x.oldLine){if(!u.oldLine&&x.oldLine)O.push({baseLine:null,yoursLine:u.newLine,yoursStatus:u.status,theirsLine:null,theirsStatus:null}),o++;else if(u.oldLine&&!x.oldLine)O.push({baseLine:null,yoursLine:null,yoursStatus:null,theirsLine:x.newLine,theirsStatus:x.status}),d++;else if(u.oldLine&&x.oldLine){if(n!==u.oldLine.lineNumber||n!==x.oldLine.lineNumber)throw new Error(`Base line numbers do not match - yours: ${u.oldLine.lineNumber}, theirs: ${x.oldLine.lineNumber}`);O.push({baseLine:x.oldLine,yoursLine:u.newLine,yoursStatus:u.status,theirsLine:x.newLine,theirsStatus:x.status}),n++,o++,d++}}else O.push({baseLine:null,yoursLine:u.newLine,yoursStatus:u.status,theirsLine:x.newLine,theirsStatus:x.status}),o++,d++}for(;o<m.length;){const u=m[o];O.push({baseLine:u.oldLine,yoursLine:u.newLine,yoursStatus:u.status,theirsLine:null,theirsStatus:null}),o++}for(;d<h.length;){const u=h[d];O.push({baseLine:u.oldLine,yoursLine:null,yoursStatus:null,theirsLine:u.newLine,theirsStatus:u.status}),d++}return O}))},this.calculateGroups=(M,C,w,E,v)=>{const O=v.lines.filter(n=>">"!==n.origin&&"<"!==n.origin),T=[];let S=w,m=E,h=0;for(;h<O.length;)if(-1===O[h].newLineNo){const n=[];for(;h<O.length&&-1===O[h].newLineNo;)n.push(M[S]),S++,h++;if(h<O.length&&-1===O[h].oldLineNo){const o=[];for(;h<O.length&&-1===O[h].oldLineNo;)o.push(C[m]),m++,h++;T.push(this.createModifiedGroup(n,o))}else T.push({type:"removed",lines:n.map(o=>({oldLine:o,newLine:null,status:"removed"}))})}else if(-1===O[h].oldLineNo){const n=[];for(;h<O.length&&-1===O[h].oldLineNo;)n.push(C[m]),m++,h++;if(h<O.length&&-1===O[h].newLineNo){const o=[];for(;h<O.length&&-1===O[h].newLineNo;)o.push(M[S]),S++,h++;T.push(this.createModifiedGroup(o,n))}else T.push({type:"added",lines:n.map(o=>({oldLine:null,newLine:o,status:"added"}))})}else{const n=[],o=[];for(;h<O.length&&-1!==O[h].oldLineNo&&-1!==O[h].newLineNo;)n.push(M[S]),o.push(C[m]),S++,m++,h++;T.push({type:"unchanged",lines:(0,F.Z)(n,o).map(([d,u])=>({oldLine:d??null,newLine:u??null,status:"unchanged"}))})}return[T,S,m]},this.createModifiedGroup=(M,C)=>{const w=M.map(b=>b.text.replace("\n","")).join("\n"),E=C.map(b=>b.text.replace("\n","")).join("\n"),v=new _.diff_match_patch,O=v.diff_main(w,E);v.diff_cleanupSemantic(O);const T=[];let S=0,m=0,h=null,n=null,o=[],d=[],u=[];const x=b=>{b===_.DIFF_EQUAL?(T.push({status:null!==h&&null!==n?"replaced":null!==h?"removed":"added",oldLine:null!==h?{...M[S],tokens:[...M[S].tokens,...o]}:null,newLine:null!==n?{...C[m],tokens:[...C[m].tokens,...d]}:null}),S++,m++,h=null,n=null,o=[],d=[]):b===_.DIFF_INSERT?(null===h&&(T.push(...u),u=[]),(null===h?T:u).push({status:"added",oldLine:null,newLine:{...C[m],tokens:[...C[m].tokens,...d]}}),m++,n=null,d=[]):b===_.DIFF_DELETE&&(null===n&&(T.push(...u),u=[]),(null===n?T:u).push({status:"removed",oldLine:{...M[S],tokens:[...M[S].tokens,...o]},newLine:null}),S++,h=null,o=[])};for(const[b,R]of O){const y=R.split("\n");if(b===_.DIFF_EQUAL){if(y.length>1){T.push(...u),u=[],null!==h||null!==n?(h=(h??0)+y[0].length,n=(n??0)+y[0].length,x(b)):(T.push({status:"unchanged",oldLine:M[S],newLine:C[m]}),S++,m++);for(let N=1;N<y.length-1;N++)T.push({status:"unchanged",oldLine:M[S],newLine:C[m]}),S++,m++}h=(h??0)+y[y.length-1].length,n=(n??0)+y[y.length-1].length}else if(b===_.DIFF_INSERT){if(y.length>1)if(null!==n){y[0].length>0&&d.push({startIndex:n??0,endIndex:(n??0)+y[0].length,scopes:["diff-added"]}),n+=y[0].length,x(b);for(let N=1;N<y.length-1;N++)(null===h?T:u).push({status:"added",oldLine:null,newLine:{...C[m],tokens:[...C[m].tokens,{startIndex:0,endIndex:y[N].length,scopes:["diff-added"]}]}}),m++}else for(let N=0;N<y.length-1;N++)(null===h?T:u).push({status:"added",oldLine:null,newLine:{...C[m],tokens:[...C[m].tokens,{startIndex:0,endIndex:y[N].length,scopes:["diff-added"]}]}}),m++;y[y.length-1].length>0&&d.push({startIndex:n??0,endIndex:(n??0)+y[y.length-1].length,scopes:["diff-added"]}),n=(n??0)+y[y.length-1].length}else if(b===_.DIFF_DELETE){if(y.length>1)if(null!==h){y[0].length>0&&o.push({startIndex:h??0,endIndex:(h??0)+y[0].length,scopes:["diff-removed"]}),h+=y[0].length,x(b);for(let N=1;N<y.length-1;N++)(null===n?T:u).push({status:"removed",oldLine:{...M[S],tokens:[...M[S].tokens,{startIndex:0,endIndex:y[N].length,scopes:["diff-removed"]}]},newLine:null}),S++}else for(let N=0;N<y.length-1;N++)(null===n?T:u).push({status:"removed",oldLine:{...M[S],tokens:[...M[S].tokens,{startIndex:0,endIndex:y[N].length,scopes:["diff-removed"]}]},newLine:null}),S++;y[y.length-1].length>0&&o.push({startIndex:h??0,endIndex:(h??0)+y[y.length-1].length,scopes:["diff-removed"]}),h=(h??0)+y[y.length-1].length}}return T.push(...u),(null!==h||null!==n)&&(0===w.length&&(h=h??0),0===E.length&&(n=n??0),x(_.DIFF_EQUAL)),{type:"modified",lines:T}}}static{this.lineNumberCharacterWidth=8.3}static{this.lineNumberSpacing=10}calculateMargin(M,C=!1){return g.lineNumberSpacing+M*g.lineNumberCharacterWidth*(C?1:2)}getFileExtension(M){if(!M)return null;const C=M.lastIndexOf(".");return C>0?M.substring(C+1):null}static{this.\u0275fac=function(C){return new(C||g)}}static{this.\u0275prov=D.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}}},1899:(W,k,i)=>{i.d(k,{y:()=>e});var _=i(4650);class e{transform(f,I,t){if(!t||!I)return f;const D=Array.from(I.matchAll(t),g=>({startIndex:g.index??0,endIndex:(g.index??0)+g[0].length,scopes:["search-result"]}));return[...f,...D]}static{this.\u0275fac=function(I){return new(I||e)}}static{this.\u0275pipe=_.Yjl({name:"searchToken",type:e,pure:!0})}}},1453:(W,k,i)=>{i.d(k,{U:()=>I});var _=i(9466),e=i(1256),F=i(4650);class I{constructor(){this.renderScopes=D=>D.map(g=>this.renderScope(g)).join(" "),this.areEqual=(D,g)=>{if(D.length!==g.length)return!1;const a=new Set(D);for(const M of g)if(!a.has(M))return!1;return!0}}transform(D,g=""){if(!g)return[];if(g.length>1e4)return[{class:"normal",text:g.slice(0,1e4)+"... Max line length reached!"}];const a=(0,_.Z)(D,E=>E.startIndex),M=[];let C=0,w=a.filter(E=>E.startIndex<=C&&E.endIndex>C);for(;C<g.length;){let E=a.filter(O=>O.startIndex<=C&&O.endIndex>C);const v=C;for(;this.areEqual(w,E)&&C<g.length;)C++,E=a.filter(O=>O.startIndex<=C&&O.endIndex>C);M.push({class:this.renderScopes(w.map(O=>O.scopes)),text:g.substring(v,C)||"\n"}),w=E}return M}renderScope(D){const a=D[D.length-1].split(".");return(0,e.Z)(1,a.length+1).map(M=>a.slice(0,M).join("-")).join(" ")}static{this.\u0275fac=function(g){return new(g||I)}}static{this.\u0275pipe=F.Yjl({name:"tokens",type:I,pure:!0})}}},811:(W,k,i)=>{i.d(k,{A9:()=>v,Yi:()=>T,vV:()=>S});var _=i(2693),e=i(1281),F=i(5017),f=i(4650),I=i(4006),t=i(3238);const D=["button"],g=["*"],a=new f.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),M=new f.OlP("MatButtonToggleGroup"),C={provide:I.JU,useExisting:(0,f.Gpc)(()=>v),multi:!0};let w=0;class E{constructor(h,n){this.source=h,this.value=n}}let v=(()=>{class m{get name(){return this._name}set name(n){this._name=n,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(n){this._vertical=(0,e.Ig)(n)}get value(){const n=this._selectionModel?this._selectionModel.selected:[];return this.multiple?n.map(o=>o.value):n[0]?n[0].value:void 0}set value(n){this._setSelectionByValue(n),this.valueChange.emit(this.value)}get selected(){const n=this._selectionModel?this._selectionModel.selected:[];return this.multiple?n:n[0]||null}get multiple(){return this._multiple}set multiple(n){this._multiple=(0,e.Ig)(n),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(n){this._disabled=(0,e.Ig)(n),this._markButtonsForCheck()}constructor(n,o){this._changeDetector=n,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+w++,this.valueChange=new f.vpe,this.change=new f.vpe,this.appearance=o&&o.appearance?o.appearance:"standard"}ngOnInit(){this._selectionModel=new F.Ov(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(n=>n.checked))}writeValue(n){this.value=n,this._changeDetector.markForCheck()}registerOnChange(n){this._controlValueAccessorChangeFn=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this.disabled=n}_emitChangeEvent(n){const o=new E(n,this.value);this._controlValueAccessorChangeFn(o.value),this.change.emit(o)}_syncButtonToggle(n,o,d=!1,u=!1){!this.multiple&&this.selected&&!n.checked&&(this.selected.checked=!1),this._selectionModel?o?this._selectionModel.select(n):this._selectionModel.deselect(n):u=!0,u?Promise.resolve().then(()=>this._updateModelValue(n,d)):this._updateModelValue(n,d)}_isSelected(n){return this._selectionModel&&this._selectionModel.isSelected(n)}_isPrechecked(n){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(o=>null!=n.value&&o===n.value):n.value===this._rawValue)}_setSelectionByValue(n){this._rawValue=n,this._buttonToggles&&(this.multiple&&n?(Array.isArray(n),this._clearSelection(),n.forEach(o=>this._selectValue(o))):(this._clearSelection(),this._selectValue(n)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(n=>n.checked=!1)}_selectValue(n){const o=this._buttonToggles.find(d=>null!=d.value&&d.value===n);o&&(o.checked=!0,this._selectionModel.select(o))}_updateModelValue(n,o){o&&this._emitChangeEvent(n),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(n=>n._markForCheck())}}return m.\u0275fac=function(n){return new(n||m)(f.Y36(f.sBO),f.Y36(a,8))},m.\u0275dir=f.lG2({type:m,selectors:[["mat-button-toggle-group"]],contentQueries:function(n,o,d){if(1&n&&f.Suo(d,T,5),2&n){let u;f.iGM(u=f.CRH())&&(o._buttonToggles=u)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(n,o){2&n&&(f.uIk("aria-disabled",o.disabled),f.ekj("mat-button-toggle-vertical",o.vertical)("mat-button-toggle-group-appearance-standard","standard"===o.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[f._Bn([C,{provide:M,useExisting:m}])]}),m})();const O=(0,t.Kr)(class{});let T=(()=>{class m extends O{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(n){this._appearance=n}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(n){const o=(0,e.Ig)(n);o!==this._checked&&(this._checked=o,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(n){this._disabled=(0,e.Ig)(n)}constructor(n,o,d,u,x,b){super(),this._changeDetectorRef=o,this._elementRef=d,this._focusMonitor=u,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new f.vpe;const R=Number(x);this.tabIndex=R||0===R?R:null,this.buttonToggleGroup=n,this.appearance=b&&b.appearance?b.appearance:"standard"}ngOnInit(){const n=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+w++,n&&(n._isPrechecked(this)?this.checked=!0:n._isSelected(this)!==this._checked&&n._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const n=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),n&&n._isSelected(this)&&n._syncButtonToggle(this,!1,!1,!0)}focus(n){this._buttonElement.nativeElement.focus(n)}_onButtonClick(){const n=!!this._isSingleSelector()||!this._checked;n!==this._checked&&(this._checked=n,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new E(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return m.\u0275fac=function(n){return new(n||m)(f.Y36(M,8),f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(_.tE),f.$8M("tabindex"),f.Y36(a,8))},m.\u0275cmp=f.Xpm({type:m,selectors:[["mat-button-toggle"]],viewQuery:function(n,o){if(1&n&&f.Gf(D,5),2&n){let d;f.iGM(d=f.CRH())&&(o._buttonElement=d.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(n,o){1&n&&f.NdJ("focus",function(){return o.focus()}),2&n&&(f.uIk("aria-label",null)("aria-labelledby",null)("id",o.id)("name",null),f.ekj("mat-button-toggle-standalone",!o.buttonToggleGroup)("mat-button-toggle-checked",o.checked)("mat-button-toggle-disabled",o.disabled)("mat-button-toggle-appearance-standard","standard"===o.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[f.qOj],ngContentSelectors:g,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,o){if(1&n&&(f.F$t(),f.TgZ(0,"button",0,1),f.NdJ("click",function(){return o._onButtonClick()}),f.TgZ(2,"span",2),f.Hsn(3),f.qZA()(),f._UZ(4,"span",3)(5,"span",4)),2&n){const d=f.MAs(1);f.Q6J("id",o.buttonId)("disabled",o.disabled||null),f.uIk("tabindex",o.disabled?-1:o.tabIndex)("aria-pressed",o.checked)("name",o._getButtonName())("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby),f.xp6(5),f.Q6J("matRippleTrigger",d)("matRippleDisabled",o.disableRipple||o.disabled)}},dependencies:[t.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),m})(),S=(()=>{class m{}return m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=f.oAB({type:m}),m.\u0275inj=f.cJS({imports:[t.BQ,t.si,t.BQ]}),m})()},3693:(W,k,i)=>{i.d(k,{Z:()=>w});const f=function _(E){return function(v,O,T){for(var S=-1,m=Object(v),h=T(v),n=h.length;n--;){var o=h[E?n:++S];if(!1===O(m[o],o,m))break}return v}}();var I=i(4157);var g=i(8706);const w=function a(E,v){return function(O,T){if(null==O)return O;if(!(0,g.Z)(O))return E(O,T);for(var S=O.length,m=v?S:-1,h=Object(O);(v?m--:++m<S)&&!1!==T(h[m],m,h););return O}}(function t(E,v){return E&&f(E,v,I.Z)})},1134:(W,k,i)=>{i.d(k,{Z:()=>F});var _=i(6460);const F=function e(f,I,t){for(var D=-1,g=f.length;++D<g;){var a=f[D],M=I(a);if(null!=M&&(void 0===C?M==M&&!(0,_.Z)(M):t(M,C)))var C=M,w=a}return w}},2382:(W,k,i)=>{i.d(k,{Z:()=>e});const e=function _(F,f){return F>f}},5944:(W,k,i)=>{i.d(k,{Z:()=>h});var _=i(7988),e=i(7298),F=i(539),f=i(3693),I=i(8706);var M=i(6932),C=i(6460);const E=function w(n,o){if(n!==o){var d=void 0!==n,u=null===n,x=n==n,b=(0,C.Z)(n),R=void 0!==o,y=null===o,N=o==o,J=(0,C.Z)(o);if(!y&&!J&&!b&&n>o||b&&R&&N&&!y&&!J||u&&R&&N||!d&&N||!x)return 1;if(!u&&!b&&!J&&n<o||J&&d&&x&&!u&&!b||y&&d&&x||!R&&x||!N)return-1}return 0};var T=i(9940),S=i(4177);const h=function m(n,o,d){o=o.length?(0,_.Z)(o,function(b){return(0,S.Z)(b)?function(R){return(0,e.Z)(R,1===b.length?b[0]:b)}:b}):[T.Z];var u=-1;o=(0,_.Z)(o,(0,M.Z)(F.Z));var x=function t(n,o){var d=-1,u=(0,I.Z)(n)?Array(n.length):[];return(0,f.Z)(n,function(x,b,R){u[++d]=o(x,b,R)}),u}(n,function(b,R,y){return{criteria:(0,_.Z)(o,function(J){return J(b)}),index:++u,value:b}});return function g(n,o){var d=n.length;for(n.sort(o);d--;)n[d]=n[d].value;return n}(x,function(b,R){return function v(n,o,d){for(var u=-1,x=n.criteria,b=o.criteria,R=x.length,y=d.length;++u<R;){var N=E(x[u],b[u]);if(N)return u>=y?N:N*("desc"==d[u]?-1:1)}return n.index-o.index}(b,R,d)})}},4810:(W,k,i)=>{i.d(k,{Z:()=>t});var _=i(3093),e=i(8706),F=i(6667),f=i(1999);const t=function I(D,g,a){if(!(0,f.Z)(a))return!1;var M=typeof g;return!!("number"==M?(0,e.Z)(a)&&(0,F.Z)(g,a.length):"string"==M&&g in a)&&(0,_.Z)(a[g],D)}},1256:(W,k,i)=>{i.d(k,{Z:()=>M});var _=Math.ceil,e=Math.max;var I=i(4810),t=i(5601);const M=function D(C){return function(w,E,v){return v&&"number"!=typeof v&&(0,I.Z)(w,E,v)&&(E=v=void 0),w=(0,t.Z)(w),void 0===E?(E=w,w=0):E=(0,t.Z)(E),function F(C,w,E,v){for(var O=-1,T=e(_((w-C)/(E||1)),0),S=Array(T);T--;)S[v?T:++O]=C,C+=E;return S}(w,E,v=void 0===v?w<E?1:-1:(0,t.Z)(v),C)}}()},9466:(W,k,i)=>{i.d(k,{Z:()=>t});var _=i(113),e=i(5944),F=i(7965),f=i(4810);const t=(0,F.Z)(function(D,g){if(null==D)return[];var a=g.length;return a>1&&(0,f.Z)(D,g[0],g[1])?g=[]:a>2&&(0,f.Z)(g[0],g[1],g[2])&&(g=[g[0]]),(0,e.Z)(D,(0,_.Z)(g,1),[])})},5601:(W,k,i)=>{i.d(k,{Z:()=>h});var _=/\s/;var f=/^\s+/;const t=function I(n){return n&&n.slice(0,function e(n){for(var o=n.length;o--&&_.test(n.charAt(o)););return o}(n)+1).replace(f,"")};var D=i(1999),g=i(6460),M=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,w=/^0o[0-7]+$/i,E=parseInt;var T=1/0;const h=function m(n){return n?(n=function v(n){if("number"==typeof n)return n;if((0,g.Z)(n))return NaN;if((0,D.Z)(n)){var o="function"==typeof n.valueOf?n.valueOf():n;n=(0,D.Z)(o)?o+"":o}if("string"!=typeof n)return 0===n?n:+n;n=t(n);var d=C.test(n);return d||w.test(n)?E(n.slice(2),d?2:8):M.test(n)?NaN:+n}(n))===T||n===-T?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}}}]);