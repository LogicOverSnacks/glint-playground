"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[795],{66271:(G,E,l)=>{l.d(E,{k:()=>T});var m=l(15671),h=l(43144),v=l(63779),c=l(94650),k=l(7016),T=function(){function M(C){(0,m.Z)(this,M),this.baseApi=C}return(0,h.Z)(M,[{key:"getRelativePath",value:function(u,b){return this.baseApi.single(v.w.files.getRelativePath,u,b)}},{key:"getResolvedPath",value:function(u,b){return this.baseApi.single(v.w.files.getResolvedPath,u,b)}},{key:"getFileContents",value:function(u){return this.baseApi.single(v.w.files.getFileContents,u)}},{key:"openFileDialog",value:function(u){return this.baseApi.single(v.w.files.openFileDialog,u)}},{key:"openFolderDialog",value:function(u,b){return this.baseApi.single(v.w.files.openFolderDialog,u,b)}},{key:"openFileWithShell",value:function(u){return this.baseApi.single(v.w.files.openFileWithShell,u)}},{key:"hasTerminal",value:function(){return this.baseApi.single(v.w.files.hasTerminal)}},{key:"openTerminal",value:function(u){return this.baseApi.single(v.w.files.openTerminal,u)}},{key:"hasVsCode",value:function(){return this.baseApi.single(v.w.files.hasVsCode)}},{key:"openVsCode",value:function(u){return this.baseApi.single(v.w.files.openVsCode,u)}}]),M}();T.\u0275fac=function(C){return new(C||T)(c.LFG(k._))},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})},29251:(G,E,l)=>{l.d(E,{j:()=>we,b:()=>q});var m=l(74902),h=l(1413),v=l(97685),c=l(15671),k=l(43144),T=l(73237),M=l(61120),C=l(60136),u=l(18486),b=l(70655),e=l(94650),x=l(24006),Y=l(89867),X=l(4128),z=l(54004),y=l(95698),w=l(82722),f=l(82270),Z=l(3825),S=l(78926),U=l(9967),P=l(64889),B=l(36966),D=l(65412),V=l(59549),ne=l(284),A=l(36895),ee=l(4859),oe=l(97392),re=l(10266),ae=l(53178),ie=l(37762),K=(0,k.Z)(function i(s){(0,c.Z)(this,i),this.template=s});K.\u0275fac=function(s){return new(s||K)(e.Y36(e.Rgc))},K.\u0275dir=e.lG2({type:K,selectors:[["","appTreeLeafNode",""]]});var J=(0,k.Z)(function i(s){(0,c.Z)(this,i),this.template=s});J.\u0275fac=function(s){return new(s||J)(e.Y36(e.Rgc))},J.\u0275dir=e.lG2({type:J,selectors:[["","appTreeNode",""]]});var L=l(37340);function de(i,s){1&i&&e.GkF(0)}var se=function(s){return{$implicit:s}},H=function(){function i(s){var n=this;(0,c.Z)(this,i),this.element=s,this.dragListeners=[],this.attrDraggable=!0,this.dragstartListener=function(t){t.dataTransfer&&(t.dataTransfer.setData("app/tree",n.node.id),t.dataTransfer.effectAllowed="move")},this.dragenterListener=function(t){n.dragoverPosition=n.getDragoverPosition(t.offsetY)},this.dragleaveListener=function(t){n.dragoverPosition="none"},this.dragoverListener=function(t){if(t.dataTransfer){var r=t.dataTransfer;["app/tree"].concat((0,m.Z)(n.dragListeners.map(function(o){return(0,v.Z)(o,1)[0]}))).some(function(o){return r.types.includes(o)&&r.getData(o)!==n.node.id})&&(t.preventDefault(),t.dataTransfer.dropEffect="move",n.dragoverPosition=n.getDragoverPosition(t.offsetY))}},this.dropListener=function(t){if(t.dataTransfer){var r=t.dataTransfer,a=n.getDragoverPosition(t.offsetY);if(r.types.includes("app/tree")){var o=r.getData("app/tree");n.isDescendant(o,n.node.id)||(t.preventDefault(),n.update(o,n.node.id,a))}n.dragListeners.forEach(function(d){var p=(0,v.Z)(d,2),g=p[0],_=p[1];r.types.includes(g)&&(t.preventDefault(),_(r.getData(g),n.node.id,a,!0))})}n.dragoverPosition="none"},this.dragoverPosition="none",this.getDragoverPosition=function(t){return t/n.element.nativeElement.clientHeight<.5?"above":"below"}}return(0,k.Z)(i,[{key:"classDragAbove",get:function(){return"above"===this.dragoverPosition}},{key:"classDragBelow",get:function(){return"below"===this.dragoverPosition}}]),i}();function le(i,s){1&i&&e.GkF(0)}function pe(i,s){if(1&i&&e._UZ(0,"app-tree-node",7),2&i){var n=e.oxw().$implicit,t=e.oxw(2);e.Q6J("node",n)("update",t.update)("updateExpanded",t.updateExpanded)("isDescendant",t.isDescendant)("templates",t.templates)("dragListeners",t.dragListeners)}}function ce(i,s){if(1&i&&e._UZ(0,"app-tree-leaf-node",8),2&i){var n=e.oxw().$implicit,t=e.oxw(2);e.Q6J("node",n)("update",t.update)("isDescendant",t.isDescendant)("template",t.templates.leafNode)("dragListeners",t.dragListeners)}}function ge(i,s){if(1&i&&(e.ynx(0),e.YNc(1,pe,1,6,"app-tree-node",5),e.YNc(2,ce,1,5,"app-tree-leaf-node",6),e.BQk()),2&i){var n=s.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isNode(n)),e.xp6(1),e.Q6J("ngIf",t.isLeaf(n))}}function ue(i,s){if(1&i&&(e.TgZ(0,"div",3),e.YNc(1,ge,3,2,"ng-container",4),e.qZA()),2&i){var n=e.oxw();e.Q6J("@.disabled",n.animationsDisabled)("@slide",void 0),e.xp6(1),e.Q6J("ngForOf",n.node.children)("ngForTrackBy",n.trackById)}}H.\u0275fac=function(s){return new(s||H)(e.Y36(e.SBq))},H.\u0275cmp=e.Xpm({type:H,selectors:[["app-tree-leaf-node"]],hostVars:5,hostBindings:function(s,n){1&s&&e.NdJ("dragstart",function(r){return n.dragstartListener(r)})("dragenter",function(r){return n.dragenterListener(r)})("dragleave",function(r){return n.dragleaveListener(r)})("dragover",function(r){return n.dragoverListener(r)})("drop",function(r){return n.dropListener(r)}),2&s&&(e.uIk("draggable",n.attrDraggable),e.ekj("drag-above",n.classDragAbove)("drag-below",n.classDragBelow))},inputs:{node:"node",update:"update",isDescendant:"isDescendant",template:"template",dragListeners:"dragListeners"},decls:1,vars:4,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,n){1&s&&e.YNc(0,de,1,0,"ng-container",0),2&s&&e.Q6J("ngTemplateOutlet",n.template)("ngTemplateOutletContext",e.VKq(2,se,n.node))},dependencies:[A.tP],styles:["[_nghost-%COMP%]{display:block;border-top:5px solid transparent;border-bottom:5px solid transparent}.dark-theme   .drag-above[_nghost-%COMP%]{border-top-color:#2d2d2d}.dark-theme   .drag-below[_nghost-%COMP%]{border-bottom-color:#2d2d2d}.light-theme   .drag-above[_nghost-%COMP%]{border-top-color:#bdbdbd}.light-theme   .drag-below[_nghost-%COMP%]{border-bottom-color:#bdbdbd}"],changeDetection:0});var _e=function(s){return{$implicit:s}},I=function(){function i(s){var n=this;(0,c.Z)(this,i),this.element=s,this.dragListeners=[],this.animationsDisabled=!0,this.dragoverPosition="none",this.dragoverStarted=null,this.dragstartListener=function(t){t.dataTransfer&&(t.dataTransfer.setData("app/tree",n.node.id),t.dataTransfer.effectAllowed="move")},this.dragenterListener=function(t){n.dragoverPosition=n.getDragoverPosition(t.offsetY),n.dragoverStarted=(new Date).getTime()},this.dragleaveListener=function(t){n.dragoverPosition="none",n.dragoverStarted=null},this.dragoverListener=function(t){if(t.dataTransfer){var r=t.dataTransfer;if(["app/tree"].concat((0,m.Z)(n.dragListeners.map(function(d){return(0,v.Z)(d,1)[0]}))).some(function(d){return r.types.includes(d)&&r.getData(d)!==n.node.id})&&(t.preventDefault(),t.dataTransfer.dropEffect="move",n.dragoverPosition=n.getDragoverPosition(t.offsetY),!n.node.expanded))if("center"===n.dragoverPosition){var o=(new Date).getTime();null===n.dragoverStarted?n.dragoverStarted=o:o-n.dragoverStarted>i.expandWaitPeriod&&(n.node.expanded=!0)}else n.dragoverStarted=null}},this.dropListener=function(t){if(t.dataTransfer){var r=t.dataTransfer,a=n.getDragoverPosition(t.offsetY);if(r.types.includes("app/tree")){var o=r.getData("app/tree");n.isDescendant(o,n.node.id)||(t.preventDefault(),n.update(o,n.node.id,a))}n.dragListeners.forEach(function(d){var p=(0,v.Z)(d,2),g=p[0],_=p[1];r.types.includes(g)&&(t.preventDefault(),_(r.getData(g),n.node.id,a,!1))})}n.dragoverPosition="none",n.dragoverStarted=null},this.clickListener=function(t){t.preventDefault(),n.node.expanded=!n.node.expanded,n.updateExpanded(n.node.id,n.node.expanded)},this.isLeaf=function(t){return!t.children},this.isNode=function(t){return!!t.children},this.getDragoverPosition=function(t){return t<0?"above":t<n.element.nativeElement.clientHeight-2*i.padding?"center":"below"}}return(0,k.Z)(i,[{key:"ngAfterViewInit",value:function(){this.animationsDisabled=!1}},{key:"trackById",value:function(n,t){return t.id}}]),i}();function me(i,s){if(1&i&&e._UZ(0,"app-tree-node",3),2&i){var n=e.oxw().$implicit,t=e.oxw();e.Q6J("node",n)("update",t.update)("updateExpanded",t.updateExpanded)("isDescendant",t.isDescendant)("templates",t.templates)("dragListeners",t.dragListeners)}}function fe(i,s){if(1&i&&e._UZ(0,"app-tree-leaf-node",4),2&i){var n=e.oxw().$implicit,t=e.oxw();e.Q6J("node",n)("update",t.update)("isDescendant",t.isDescendant)("template",t.templates.leafNode)("dragListeners",t.dragListeners)}}function ve(i,s){if(1&i&&(e.ynx(0),e.YNc(1,me,1,6,"app-tree-node",1),e.YNc(2,fe,1,5,"app-tree-leaf-node",2),e.BQk()),2&i){var n=s.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isNode(n)),e.xp6(1),e.Q6J("ngIf",t.isLeaf(n))}}I.padding=5,I.expandWaitPeriod=750,I.\u0275fac=function(s){return new(s||I)(e.Y36(e.SBq))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-tree-node"]],inputs:{node:"node",update:"update",updateExpanded:"updateExpanded",isDescendant:"isDescendant",templates:"templates",dragListeners:"dragListeners"},decls:3,vars:11,consts:[["draggable","true",1,"tree-node-heading",3,"dragstart","dragenter","dragleave","dragover","drop","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","tree-node-children",4,"ngIf"],[1,"tree-node-children"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","update","updateExpanded","isDescendant","templates","dragListeners",4,"ngIf"],[3,"node","update","isDescendant","template","dragListeners",4,"ngIf"],[3,"node","update","updateExpanded","isDescendant","templates","dragListeners"],[3,"node","update","isDescendant","template","dragListeners"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0),e.NdJ("dragstart",function(r){return n.dragstartListener(r)})("dragenter",function(r){return n.dragenterListener(r)})("dragleave",function(r){return n.dragleaveListener(r)})("dragover",function(r){return n.dragoverListener(r)})("drop",function(r){return n.dropListener(r)})("click",function(r){return n.clickListener(r)}),e.YNc(1,le,1,0,"ng-container",1),e.qZA(),e.YNc(2,ue,2,4,"div",2)),2&s&&(e.ekj("drag-above","above"===n.dragoverPosition)("drag-below","below"===n.dragoverPosition)("drag-center","center"===n.dragoverPosition),e.xp6(1),e.Q6J("ngTemplateOutlet",n.templates.node)("ngTemplateOutletContext",e.VKq(9,_e,n.node)),e.xp6(1),e.Q6J("ngIf",n.node.expanded))},dependencies:[A.sg,A.O5,A.tP,I,H],styles:["[_nghost-%COMP%]{display:block}.tree-node-heading[_ngcontent-%COMP%]{cursor:pointer;border-top:5px solid transparent;border-bottom:5px solid transparent}.tree-node-children[_ngcontent-%COMP%]{margin-left:20px;overflow:hidden}.dark-theme[_nghost-%COMP%]   .tree-node-heading.drag-above[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .tree-node-heading.drag-above[_ngcontent-%COMP%]{border-top-color:#2d2d2d}.dark-theme[_nghost-%COMP%]   .tree-node-heading.drag-below[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .tree-node-heading.drag-below[_ngcontent-%COMP%]{border-bottom-color:#2d2d2d}.dark-theme[_nghost-%COMP%]   .tree-node-heading.drag-center[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .tree-node-heading.drag-center[_ngcontent-%COMP%]{background-color:#2d2d2d}.light-theme[_nghost-%COMP%]   .tree-node-heading.drag-above[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .tree-node-heading.drag-above[_ngcontent-%COMP%]{border-top-color:#bdbdbd}.light-theme[_nghost-%COMP%]   .tree-node-heading.drag-below[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .tree-node-heading.drag-below[_ngcontent-%COMP%]{border-bottom-color:#bdbdbd}.light-theme[_nghost-%COMP%]   .tree-node-heading.drag-center[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .tree-node-heading.drag-center[_ngcontent-%COMP%]{background-color:#bdbdbd}"],data:{animation:[(0,L.X$)("slide",[(0,L.eR)(":enter",[(0,L.oB)({height:0}),(0,L.jt)("225ms ease-in-out",(0,L.oB)({height:"*"}))]),(0,L.eR)(":leave",[(0,L.oB)({height:"*"}),(0,L.jt)("225ms ease-in-out",(0,L.oB)({height:0}))])])]},changeDetection:0});var W=function(i){(0,C.Z)(n,i);var s=(0,u.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=s.apply(this,arguments)).indent=20,t.indentUnits="px",t.dragListeners=[],t.outputTree=new e.vpe,t.isDescendant=function(r,a){if(r===a)return!0;var o=t.getNodeById(r,t.tree);if(!o)throw new f.bv(r);return null!==t.getNodeById(a,o.children)},t.update=function(r,a,o){var d=t.removeNode(r,t.tree);if(!d)throw new f.bv(r);var p=(0,v.Z)(d,2),g=p[0],_=p[1],O=t.findSiblingNodesWithIndex(a,_);if(!O)throw new f.bv(a);var N=(0,v.Z)(O,2),R=N[0],F=N[1];switch(o){case"above":R.splice(F,0,g);break;case"below":R.splice(F+1,0,g);break;case"center":var Q=R[F].children;if(!Q)throw new f.kI;Q.push(g),R[F].expanded=!0;break;default:throw new Error("Check not exhaustive '".concat(o,"'."))}t.tree=_,t.outputTree.next(_)},t.updateExpanded=function(r,a){var o=t.updateNodeExpanded(r,a,t.tree);if(!o)throw new f.bv(r);t.tree=o,t.outputTree.next(o)},t.isLeaf=function(r){return!r.children},t.isNode=function(r){return!!r.children},t}return(0,k.Z)(n,[{key:"templates",get:function(){return{node:this.nodeDirective.template,leafNode:this.leafNodeDirective.template}}},{key:"trackById",value:function(r,a){return a.id}},{key:"getNodeById",value:function(r,a){if(a){var d,o=(0,ie.Z)(a);try{for(o.s();!(d=o.n()).done;){var p=d.value;if(p.id===r)return p;var g=this.getNodeById(r,p.children);if(g)return g}}catch(_){o.e(_)}finally{o.f()}}return null}},{key:"findSiblingNodesWithIndex",value:function(r,a){if(a)for(var o=0;o<a.length;o++){var d=a[o];if(d){if(d.id===r)return[a,o];var p=this.findSiblingNodesWithIndex(r,d.children);if(p)return p}}return null}},{key:"removeNode",value:function(r,a){if(a)for(var o=0;o<a.length;o++){var d=a[o];if(d){if(d.id===r)return[d,[].concat((0,m.Z)(a.slice(0,o)),(0,m.Z)(a.slice(o+1)))];var p=this.removeNode(r,d.children);if(p)return[p[0],[].concat((0,m.Z)(a.slice(0,o)),[(0,h.Z)((0,h.Z)({},d),{},{children:p[1]})],(0,m.Z)(a.slice(o+1)))]}}return null}},{key:"updateNodeExpanded",value:function(r,a,o){if(o)for(var d=0;d<o.length;d++){var p=o[d];if(p){if(p.id===r)return[].concat((0,m.Z)(o.slice(0,d)),[(0,h.Z)((0,h.Z)({},p),{},{expanded:a})],(0,m.Z)(o.slice(d+1)));var g=this.updateNodeExpanded(r,a,p.children);if(g)return[].concat((0,m.Z)(o.slice(0,d)),[(0,h.Z)((0,h.Z)({},p),{},{children:g})],(0,m.Z)(o.slice(d+1)))}}return null}}]),n}((0,S.j)(U.A));W.\u0275fac=function(){var i;return function(n){return(i||(i=e.n5z(W)))(n||W)}}(),W.\u0275cmp=e.Xpm({type:W,selectors:[["app-tree"]],contentQueries:function(s,n,t){var r;1&s&&(e.Suo(t,J,5),e.Suo(t,K,5)),2&s&&(e.iGM(r=e.CRH())&&(n.nodeDirective=r.first),e.iGM(r=e.CRH())&&(n.leafNodeDirective=r.first))},inputs:{tree:"tree",indent:"indent",indentUnits:"indentUnits",dragListeners:"dragListeners"},outputs:{outputTree:"treeChange"},features:[e.qOj],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","update","updateExpanded","isDescendant","templates","dragListeners",4,"ngIf"],[3,"node","update","isDescendant","template","dragListeners",4,"ngIf"],[3,"node","update","updateExpanded","isDescendant","templates","dragListeners"],[3,"node","update","isDescendant","template","dragListeners"]],template:function(s,n){1&s&&e.YNc(0,ve,3,2,"ng-container",0),2&s&&e.Q6J("ngForOf",n.tree)("ngForTrackBy",n.trackById)},dependencies:[A.sg,A.O5,I,H],encapsulation:2,changeDetection:0});var he=l(74442),Ce=["dialogTemplate"];function ke(i,s){if(1&i&&(e.TgZ(0,"mat-icon"),e._uU(1),e.qZA()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.expanded?"expand_more":"chevron_right")}}function ye(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"div",12)(1,"button",13),e.NdJ("click",function(){e.CHM(n);var r=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.addFolder(r.id))}),e.TgZ(2,"mat-icon"),e._uU(3,"create_new_folder"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"button",13),e.NdJ("click",function(){e.CHM(n);var r=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.renameFolder(r))}),e.TgZ(8,"mat-icon"),e._uU(9,"edit"),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"button",13),e.NdJ("click",function(){e.CHM(n);var r=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.deleteNode(r))}),e.TgZ(14,"mat-icon"),e._uU(15,"delete"),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.ALo(18,"translate"),e.qZA()()()}2&i&&(e.xp6(5),e.Oqu(e.lcZ(6,3,"New !bookmark! folder")),e.xp6(6),e.Oqu(e.lcZ(12,5,"Rename")),e.xp6(6),e.Oqu(e.lcZ(18,7,"Delete")))}function Te(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"div",7,8),e.NdJ("click",function(){var p=e.CHM(n).$implicit,g=e.oxw(2);return e.KtG(g.nodeClick.next(p))}),e.TgZ(2,"span")(3,"mat-icon",9),e._uU(4,"folder"),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"button",10),e.YNc(7,ke,2,1,"mat-icon",0),e.qZA(),e.YNc(8,ye,19,9,"ng-template",null,11,e.W1O),e.qZA()}if(2&i){var t=s.$implicit,r=e.MAs(9),a=e.oxw(2);e.ekj("selected",a.selectedNodeId===t.id),e.Q6J("appContextMenu",r),e.xp6(5),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngIf",t.children.length>0)}}function Pe(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"div",12)(1,"button",13),e.NdJ("click",function(){e.CHM(n);var r=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.deleteNode(r))}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()()()}2&i&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"Delete")))}function Oe(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"div",14,8),e.NdJ("click",function(){var p=e.CHM(n).$implicit,g=e.oxw(2);return e.KtG(g.nodeClick.next(p))}),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.YNc(4,Pe,7,3,"ng-template",null,11,e.W1O),e.qZA()}if(2&i){var t=s.$implicit,r=e.MAs(5),a=e.oxw(2);e.ekj("selected",a.selectedNodeId===t.id),e.Q6J("appContextMenu",r)("matTooltip",t.id),e.xp6(3),e.Oqu(t.name)}}function Me(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"div",15),e.NdJ("dragover",function(r){e.CHM(n);var a=e.oxw(2);return e.KtG(a.dragoverListener(r))})("drop",function(r){e.CHM(n);var a=e.oxw(2);return e.KtG(a.dropListener(r))}),e.qZA()}}var be=function(s){return["app/repository",s]},De=function(s){return[s]};function Ze(i,s){if(1&i){var n=e.EpF();e.ynx(0),e.TgZ(1,"app-tree",3),e.NdJ("treeChange",function(o){e.CHM(n);var d=e.oxw();return e.KtG(d.treeChanged(o))}),e.YNc(2,Te,10,5,"div",4),e.YNc(3,Oe,6,5,"div",5),e.qZA(),e.YNc(4,Me,1,0,"div",6),e.BQk()}if(2&i){var t=s.ngIf,r=e.oxw();e.xp6(1),e.Q6J("tree",t)("dragListeners",e.VKq(5,De,e.VKq(3,be,r.addNode))),e.xp6(3),e.Q6J("ngIf",0===t.length)}}function xe(i,s){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e.qZA(),e.TgZ(2,"form",17)(3,"mat-dialog-content")(4,"mat-form-field",18)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"input",19),e.qZA()(),e.TgZ(9,"mat-dialog-actions")(10,"button",20),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",21),e._uU(14),e.ALo(15,"translate"),e.qZA()()()),2&i){var n=e.oxw();e.xp6(1),e.Oqu(n.dialogTitle),e.xp6(1),e.Q6J("formGroup",n.dialogForm),e.xp6(4),e.Oqu(e.lcZ(7,8,"Name")),e.xp6(4),e.Q6J("mat-dialog-close",null),e.xp6(1),e.Oqu(e.lcZ(12,10,"Cancel")),e.xp6(2),e.Q6J("mat-dialog-close",n.dialogForm.controls.name.value)("disabled",n.dialogForm.invalid),e.xp6(1),e.Oqu(e.lcZ(15,12,"Save"))}}var q=function(s){return!!s.children},we=function(){var i=function(s){(0,C.Z)(t,s);var n=(0,u.Z)(t);function t(r,a){var o;return(0,c.Z)(this,t),(o=n.call(this)).dialog=r,o.store=a,o.selectedNodeId=null,o.nodeClick=new e.vpe,o.tree=o.repositoryBookmarks.pipe((0,z.U)(function(d){return d.map(function(p){return o.convertBookmarkToNode(p,"")})})),o.dialogTitle="New Folder",o.dialogForm=new x.cw({name:new x.NI(null)}),o.dialogRef=null,o.addNode=function(d,p,g,_){(0,X.D)([o.repositoryNames.pipe((0,y.q)(1)),o.repositoryBookmarks.pipe((0,y.q)(1))]).subscribe(function(O){var N,R=(0,v.Z)(O,2),$={name:null!==(N=R[0][d])&&void 0!==N?N:"",repositoryId:d},te=o.replaceBookmark(R[1],p,"",function(j){if("above"===g)return[$,j];if("below"===g)return[j,$];if(_||!o.isBookmarkFolder(j))throw new f.kI;return[(0,h.Z)((0,h.Z)({},j),{},{expanded:!0,children:[].concat((0,m.Z)(j.children),[$])})]});if(!te)throw new f.bv(p);o.store.dispatch(new P.c9(te))})},o.dragoverListener=function(d){var p;null!==(p=d.dataTransfer)&&void 0!==p&&p.types.includes("app/repository")&&(d.preventDefault(),d.dataTransfer.dropEffect="move")},o.dropListener=function(d){var p;if(null!==(p=d.dataTransfer)&&void 0!==p&&p.types.includes("app/repository")){d.preventDefault();var g=d.dataTransfer.getData("app/repository");(0,X.D)([o.repositoryNames.pipe((0,y.q)(1)),o.repositoryBookmarks.pipe((0,y.q)(1))]).subscribe(function(_){var O,Q={name:null!==(O=(0,v.Z)(_,2)[0][g])&&void 0!==O?O:"",repositoryId:g};o.store.dispatch(new P.c9([Q]))})}},o.convertBookmarkToNode=function(d,p){return o.isBookmarkFolder(d)?{id:"folder:".concat(o.getPath(d,p)),name:d.name,children:d.children.map(function(g){return o.convertBookmarkToNode(g,o.getPath(d,p))}),expanded:d.expanded}:{id:d.repositoryId,name:d.name}},o.convertNodeToBookmark=function(d){var p;return q(d)?{name:d.name,expanded:null!==(p=d.expanded)&&void 0!==p&&p,children:d.children.map(o.convertNodeToBookmark)}:{name:d.name,repositoryId:d.id}},o}return(0,k.Z)(t,[{key:"ngOnDestroy",value:function(){(0,T.Z)((0,M.Z)(t.prototype),"ngOnDestroy",this).call(this),this.dialogRef&&this.dialogRef.close()}},{key:"treeChanged",value:function(a){this.store.dispatch(new P.c9(a.map(this.convertNodeToBookmark)))}},{key:"toggleMenu",value:function(a,o){a.stopPropagation();var d=a.currentTarget.getBoundingClientRect();o.toggleMenu(d.x,d.y+d.height)}},{key:"addFolder",value:function(a){var o=this;this.dialogRef&&this.dialogRef.close(),this.dialogTitle=(0,Z.Iu)("New !bookmark! Folder"),this.dialogForm.reset(),this.dialogRef=this.dialog.open(this.dialogTemplate),this.dialogRef.afterClosed().pipe((0,w.R)(this.destroyed$)).subscribe(function(d){d&&o.repositoryBookmarks.pipe((0,y.q)(1)).subscribe(function(p){var g={name:d,children:[],expanded:!1},_=a?o.replaceBookmark(p,a,"",function(O){if(!o.isBookmarkFolder(O))throw new f.kI;return[(0,h.Z)((0,h.Z)({},O),{},{children:[].concat((0,m.Z)(O.children),[g])})]}):[].concat((0,m.Z)(p),[g]);if(!_)throw new f.bv(a??"");o.store.dispatch(new P.c9(_))})})}},{key:"deleteNode",value:function(a){var o=this;this.repositoryBookmarks.pipe((0,y.q)(1)).subscribe(function(d){var p=o.replaceBookmark(d,a.id,"",function(){return[]});if(!p)throw new f.bv(a.id);o.store.dispatch(new P.c9(p))})}},{key:"renameFolder",value:function(a){var o=this;if(!q(a))throw new f.pv(a.id);this.dialogTitle=(0,Z.Iu)("Rename !bookmark! Folder"),this.dialogForm.reset({name:a.name}),this.dialog.open(this.dialogTemplate).afterClosed().pipe((0,w.R)(this.destroyed$)).subscribe(function(d){d&&o.repositoryBookmarks.pipe((0,y.q)(1)).subscribe(function(p){var g=o.replaceBookmark(p,a.id,"",function(_){return[(0,h.Z)((0,h.Z)({},_),{},{name:d})]});if(!g)throw new f.bv(a.id);o.store.dispatch(new P.c9(g))})})}},{key:"isBookmarkFolder",value:function(a){return!!a.children}},{key:"replaceBookmark",value:function(a,o,d,p){for(var g=0;g<a.length;g++){var _=a[g];if(o===(this.isBookmarkFolder(_)?"folder:".concat(this.getPath(_,d)):_.repositoryId))return[].concat((0,m.Z)(a.slice(0,g)),(0,m.Z)(p(_)),(0,m.Z)(a.slice(g+1)));if(this.isBookmarkFolder(_)){var O=this.replaceBookmark(_.children,o,this.getPath(_,d),p);if(O)return[].concat((0,m.Z)(a.slice(0,g)),[(0,h.Z)((0,h.Z)({},_),{},{children:O})],(0,m.Z)(a.slice(g+1)))}}return null}},{key:"getPath",value:function(a,o){return o?"".concat(o,"///").concat(a.name.replace("/","//")):a.name.replace("/","//")}}]),t}((0,S.j)(U.A));return i.\u0275fac=function(n){return new(n||i)(e.Y36(D.uw),e.Y36(Y.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-repository-bookmarks-view"]],viewQuery:function(n,t){var r;1&n&&e.Gf(Ce,5),2&n&&e.iGM(r=e.CRH())&&(t.dialogTemplate=r.first)},inputs:{selectedNodeId:"selectedNodeId"},outputs:{nodeClick:"nodeClick"},features:[e.qOj],decls:8,vars:6,consts:[[4,"ngIf"],["type","button","mat-stroked-button","",1,"add-folder-button",3,"matTooltip","click"],["dialogTemplate",""],[3,"tree","dragListeners","treeChange"],["class","bookmark-node",3,"appContextMenu","selected","click",4,"appTreeNode"],["class","bookmark-node",3,"appContextMenu","selected","matTooltip","click",4,"appTreeLeafNode"],["class","first-drag-zone","draggable","true",3,"dragover","drop",4,"ngIf"],[1,"bookmark-node",3,"appContextMenu","click"],["contextMenu","appContextMenu"],[1,"folder-icon"],["type","button","mat-icon-button","",1,"expand-button","app-icon-button-md"],["menu",""],[1,"menu-panel"],[1,"menu-item",3,"click"],[1,"bookmark-node",3,"appContextMenu","matTooltip","click"],["draggable","true",1,"first-drag-zone",3,"dragover","drop"],["mat-dialog-title",""],[3,"formGroup"],["subscriptSizing","dynamic",1,"full-width"],["type","text","matInput","","required","","formControlName","name"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close","disabled"]],template:function(n,t){1&n&&(e.YNc(0,Ze,5,7,"ng-container",0),e.ALo(1,"async"),e.TgZ(2,"button",1),e.NdJ("click",function(){return t.addFolder()}),e.ALo(3,"translate"),e.TgZ(4,"mat-icon"),e._uU(5,"create_new_folder"),e.qZA()(),e.YNc(6,xe,16,14,"ng-template",null,2,e.W1O)),2&n&&(e.Q6J("ngIf",e.lcZ(1,2,t.tree)),e.xp6(2),e.Q6J("matTooltip",e.lcZ(3,4,"Add !bookmark! folder")))},dependencies:[D.ZT,D.uh,D.xY,D.H8,V.KE,V.hX,ne.Nt,A.O5,x._Y,x.Fj,x.JJ,x.JL,x.Q7,x.sg,x.u,ee.lW,ee.RK,oe.Hw,re.gM,ae.l,W,J,K,A.Ov,he.X],styles:["app-tree[_ngcontent-%COMP%]{display:block;margin-left:-8px}app-tree[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{vertical-align:middle}app-tree[_ngcontent-%COMP%]   .bookmark-node[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:space-between;padding-left:10px}app-tree[_ngcontent-%COMP%]   .bookmark-node[_ngcontent-%COMP%]   .folder-icon[_ngcontent-%COMP%]{margin-right:5px}app-tree[_ngcontent-%COMP%]     app-tree-leaf-node .bookmark-node{padding-top:5px;padding-bottom:5px}.first-drag-zone[_ngcontent-%COMP%]{height:50px}.full-width[_ngcontent-%COMP%]{width:100%}.add-folder-button[_ngcontent-%COMP%]{margin-top:10px}.dark-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(> .bookmark-node.selected):not(.drag-above), .dark-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(> .bookmark-node.selected):not(.drag-above){border-top-color:#78909c}.dark-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(> .bookmark-node.selected):not(.drag-below), .dark-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(> .bookmark-node.selected):not(.drag-below){border-bottom-color:#78909c}.dark-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]   .bookmark-node.selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]   .bookmark-node.selected[_ngcontent-%COMP%]{background:#78909c}.light-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(> .bookmark-node.selected):not(.drag-above), .light-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(> .bookmark-node.selected):not(.drag-above){border-top-color:#cfd8dc}.light-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(> .bookmark-node.selected):not(.drag-below), .light-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(> .bookmark-node.selected):not(.drag-below){border-bottom-color:#cfd8dc}.light-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]   .bookmark-node.selected[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]   .bookmark-node.selected[_ngcontent-%COMP%]{background:#cfd8dc}"],changeDetection:0}),(0,b.gn)([(0,Y.Ph)(B.E.repositoryBookmarks)],i.prototype,"repositoryBookmarks",void 0),(0,b.gn)([(0,Y.Ph)(B.E.repositoryNames)],i.prototype,"repositoryNames",void 0),i}()},36093:(G,E,l)=>{l.d(E,{i:()=>u});var m=l(43144),h=l(15671),v=l(65412),c=l(59549),k=l(284),T=l(28255),M=l(33179),C=l(94650),u=(0,m.Z)(function b(){(0,h.Z)(this,b)});u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[v.Is,c.lN,k.c,T.Tx,M.I]})},85174:(G,E,l)=>{l.d(E,{J:()=>z});var m=l(15671),h=l(43144),v=l(70655),c=l(94650),k=l(89867),T=l(39646),M=l(64889),C=l(36966),u=l(36895),b=l(4859),e=l(97392),x=l(10266),Y=l(74442);function X(y,w){if(1&y){var f=c.EpF();c.TgZ(0,"li",1),c.NdJ("click",function(){var B=c.CHM(f).$implicit,D=c.oxw();return c.KtG(D.clicked.next(B.repositoryId))})("dblclick",function(){var B=c.CHM(f).$implicit,D=c.oxw();return c.KtG(D.openRepository(B.repositoryId))})("dragstart",function(P){var D=c.CHM(f).$implicit,V=c.oxw();return c.KtG(V.dragStarted.next([P,D.repositoryId]))}),c.ALo(1,"async"),c.TgZ(2,"span",2),c._uU(3),c.qZA(),c.TgZ(4,"button",3),c.NdJ("click",function(P){var D=c.CHM(f).$implicit;return c.oxw().deleteRepository(D.repositoryId),P.preventDefault(),c.KtG(P.stopPropagation())}),c.ALo(5,"translate"),c.TgZ(6,"mat-icon",4),c._uU(7,"close"),c.qZA()()()}if(2&y){var Z=w.$implicit,S=c.oxw();c.ekj("selected",Z.repositoryId===c.lcZ(1,6,S.selectedId)),c.uIk("draggable",S.draggable?"true":"false"),c.xp6(2),c.Q6J("matTooltip",Z.repositoryId),c.xp6(1),c.Oqu(Z.name),c.xp6(1),c.Q6J("matTooltip",c.lcZ(5,8,"Remove repository (all settings saved in Glint will be removed)"))}}var z=function(){var y=function(){function w(f){(0,m.Z)(this,w),this.store=f,this.draggable=!0,this.selectedId=(0,T.of)(null),this.clicked=new c.vpe,this.dragStarted=new c.vpe}return(0,h.Z)(w,[{key:"openRepository",value:function(Z){this.store.dispatch(new M.he(Z))}},{key:"deleteRepository",value:function(Z){this.store.dispatch(new M.eo(Z))}}]),w}();return y.\u0275fac=function(f){return new(f||y)(c.Y36(k.yh))},y.\u0275cmp=c.Xpm({type:y,selectors:[["app-repository-history-view"]],inputs:{draggable:"draggable",selectedId:"selectedId"},outputs:{clicked:"clicked",dragStarted:"dragStarted"},decls:3,vars:3,consts:[[3,"selected","click","dblclick","dragstart",4,"ngFor","ngForOf"],[3,"click","dblclick","dragstart"],[1,"name",3,"matTooltip"],["mat-icon-button","","color","warn",1,"close-icon",3,"matTooltip","click"],["inline",""]],template:function(f,Z){1&f&&(c.TgZ(0,"ul"),c.YNc(1,X,8,10,"li",0),c.ALo(2,"async"),c.qZA()),2&f&&(c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,1,Z.recentRepositories)))},dependencies:[u.sg,b.RK,e.Hw,x.gM,u.Ov,Y.X],styles:["ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;display:flex;justify-content:space-between}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding-right:5px}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{flex:0 0 20px;width:20px;height:20px;padding:0;font-size:18px;opacity:0;transition:opacity .1s ease-in-out}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:20px}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .close-icon[_ngcontent-%COMP%]{opacity:1}.dark-theme[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background:#78909c}.light-theme[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background:#cfd8dc}"],changeDetection:0}),(0,v.gn)([(0,k.Ph)(C.E.recentRepositories)],y.prototype,"recentRepositories",void 0),y}()},13612:(G,E,l)=>{l.d(E,{e:()=>k});var m=l(43144),h=l(15671),v=l(33179),c=l(94650),k=(0,m.Z)(function T(){(0,h.Z)(this,T)});k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=c.oAB({type:k}),k.\u0275inj=c.cJS({imports:[v.I]})}}]);