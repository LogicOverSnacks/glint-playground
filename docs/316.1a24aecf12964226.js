"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[316],{5773:(pt,H,s)=>{s.d(H,{F:()=>t});var O=s(4650);let t=(()=>{class y extends O.SBq{constructor(m){super(m.nativeElement)}}return y.\u0275fac=function(m){return new(m||y)(O.Y36(O.SBq))},y.\u0275dir=O.lG2({type:y,selectors:[["","appElementRef",""]],exportAs:["appElementRef"],features:[O.qOj]}),y})()},2316:(pt,H,s)=>{s.r(H),s.d(H,{SettingsLayoutModule:()=>Zn});var O=s(6338),t=s(4650),y=s(3238),j=s(3353),m=s(6895);const mt=["*",[["mat-toolbar-row"]]],gt=["*","mat-toolbar-row"],dt=(0,y.pj)(class{constructor(n){this._elementRef=n}});let ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),_t=(()=>{class n extends dt{constructor(e,o,i){super(e),this._platform=o,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(j.t4),t.Y36(m.K0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,o,i){if(1&e&&t.Suo(i,ut,5),2&e){let l;t.iGM(l=t.CRH())&&(o._toolbarRows=l)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,o){2&e&&t.ekj("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",0===o._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[t.qOj],ngContentSelectors:gt,decls:2,vars:0,template:function(e,o){1&e&&(t.F$t(mt),t.Hsn(0),t.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[y.BQ,y.BQ]}),n})();var V=s(3179),ht=s(7646),g=s(5412),d=s(9549),A=s(284),k=s(4385);let Ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Is,d.lN,A.c,k.LD,V.I]}),n})();var D=s(6709),z=s(1572);let xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[D.p9,g.Is,d.lN,A.c,z.Cq,V.I]}),n})(),wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[D.p9,g.Is,d.lN,A.c,k.LD,V.I]}),n})();var Q=s(7084),bt=s(6093),yt=s(3612);let vt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Is,Q.To,d.lN,A.c,k.LD,V.I,bt.i,yt.e]}),n})(),Zt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.lN,A.c,k.LD,V.I]}),n})();var I=s(1800),C=s(655),a=s(4006),_=s(240),L=s(4850),f=s(7625),S=s(537),q=s(8926),R=s(9967),N=s(1336),M=s(9578),x=s(9077),Tt=s(2333),Mt=s(6271),F=s(4859),v=s(3546),G=s(7392),E=s(266),B=s(3051);const Pt=["dialog"];function Ot(n,r){if(1&n&&t._UZ(0,"app-avatar",12),2&n){const e=t.oxw().$implicit;t.Q6J("email",e.value.credentialName)}}function At(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.copyPublicKey(i.value.publicKeyPath))}),t.TgZ(1,"mat-icon"),t._uU(2,"content_copy"),t.qZA()()}}function It(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",6)(1,"mat-card-header"),t.YNc(2,Ot,1,1,"app-avatar",7),t.TgZ(3,"mat-card-title",8),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle",8),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-actions"),t.YNc(8,At,3,0,"button",9),t.TgZ(9,"button",10),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.editCredential(l.key,l.value))}),t.TgZ(10,"mat-icon"),t._uU(11,"edit"),t.qZA()(),t.TgZ(12,"button",11),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteCredential(l.key))}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA()()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngIf",e.value.credentialName),t.xp6(1),t.Q6J("matTooltip",e.value.credentialName),t.xp6(1),t.Oqu(e.value.credentialName),t.xp6(1),t.Q6J("matTooltip",e.value.description||""),t.xp6(1),t.Oqu(e.value.description),t.xp6(2),t.Q6J("ngIf","ssh"===e.value.type)}}function St(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Credential name is required "),t.qZA())}function kt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid key or password "),t.qZA())}function Nt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Private key is required "),t.qZA())}function Ut(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid key or password "),t.qZA())}function qt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Public key is required "),t.qZA())}function Rt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid key or password "),t.qZA())}function Jt(n,r){if(1&n){const e=t.EpF();t.ynx(0,27),t.TgZ(1,"mat-form-field",16)(2,"mat-label"),t._uU(3,"Password"),t.qZA(),t._UZ(4,"input",28),t.TgZ(5,"mat-icon",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showPassword=!i.showPassword)}),t._uU(6),t.qZA(),t.YNc(7,kt,2,0,"mat-error",21),t.qZA(),t.TgZ(8,"mat-form-field",16)(9,"mat-label"),t._uU(10,"Private key"),t.qZA(),t.TgZ(11,"input",30),t.NdJ("focus",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDialogIfEmpty("privateKeyPath"))}),t.qZA(),t.TgZ(12,"mat-icon",31),t.NdJ("click",function(i){return t.CHM(e),t.oxw(2).openDialog("privateKeyPath"),t.KtG(i.stopPropagation())}),t._uU(13,"folder"),t.qZA(),t.YNc(14,Nt,2,0,"mat-error",21),t.YNc(15,Ut,2,0,"mat-error",21),t.qZA(),t.TgZ(16,"mat-form-field",16)(17,"mat-label"),t._uU(18,"Public key"),t.qZA(),t.TgZ(19,"input",32),t.NdJ("focus",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDialogIfEmpty("publicKeyPath"))}),t.qZA(),t.TgZ(20,"mat-icon",31),t.NdJ("click",function(i){return t.CHM(e),t.oxw(2).openDialog("publicKeyPath"),t.KtG(i.stopPropagation())}),t._uU(21,"folder"),t.qZA(),t.YNc(22,qt,2,0,"mat-error",21),t.YNc(23,Rt,2,0,"mat-error",21),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("type",e.showPassword?"text":"password"),t.xp6(2),t.hij(" ",e.showPassword?"visibility_off":"visibility"," "),t.xp6(1),t.Q6J("ngIf",e.form.controls.ssh.controls.password.hasError("invalid")),t.xp6(7),t.Q6J("ngIf",e.form.controls.ssh.controls.privateKeyPath.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.form.controls.ssh.controls.privateKeyPath.hasError("invalid")),t.xp6(7),t.Q6J("ngIf",e.form.controls.ssh.controls.publicKeyPath.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.form.controls.ssh.controls.publicKeyPath.hasError("invalid"))}}function Vt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Username is required "),t.qZA())}function Lt(n,r){if(1&n){const e=t.EpF();t.ynx(0,33),t.TgZ(1,"mat-form-field",16)(2,"mat-label"),t._uU(3,"Username"),t.qZA(),t._UZ(4,"input",34),t.YNc(5,Vt,2,0,"mat-error",21),t.qZA(),t.TgZ(6,"mat-form-field",16)(7,"mat-label"),t._uU(8,"Password"),t.qZA(),t._UZ(9,"input",35),t.TgZ(10,"mat-icon",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showPassword=!i.showPassword)}),t._uU(11),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.form.controls.password.controls.username.hasError("required")),t.xp6(4),t.Q6J("type",e.showPassword?"text":"password"),t.xp6(2),t.hij(" ",e.showPassword?"visibility_off":"visibility"," ")}}function Ft(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"h2",14),t._uU(1),t.qZA(),t.TgZ(2,"form",15)(3,"mat-dialog-content")(4,"mat-form-field",16)(5,"mat-label"),t._uU(6,"Credential Type"),t.qZA(),t.TgZ(7,"mat-select",17)(8,"mat-option",18),t._uU(9,"SSH Key"),t.qZA(),t.TgZ(10,"mat-option",19),t._uU(11,"Password"),t.qZA()()(),t.TgZ(12,"mat-form-field",16)(13,"mat-label"),t._uU(14,"Credential Name"),t.qZA(),t._UZ(15,"input",20),t.YNc(16,St,2,0,"mat-error",21),t.qZA(),t.TgZ(17,"mat-form-field",16)(18,"mat-label"),t._uU(19,"Description"),t.qZA(),t._UZ(20,"input",22),t.qZA(),t.YNc(21,Jt,24,7,"ng-container",23),t.YNc(22,Lt,12,3,"ng-container",24),t.qZA(),t.TgZ(23,"mat-dialog-actions")(24,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeCredentialDialog(!1))}),t._uU(25,"Cancel"),t.qZA(),t.TgZ(26,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeCredentialDialog(!0))}),t._uU(27,"Save"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.dialogTitle),t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(14),t.Q6J("ngIf",e.form.controls.credentialName.hasError("required")),t.xp6(5),t.Q6J("ngIf","ssh"===e.form.controls.type.value),t.xp6(1),t.Q6J("ngIf","password"===e.form.controls.type.value),t.xp6(4),t.Q6J("disabled",e.form.invalid)}}let Gt=(()=>{class n extends((0,q.j)(R.A)){constructor(e,o,i,l){super(),this.dialog=e,this.store=o,this.encryptionApi=i,this.filesApi=l,this.form=new a.cw({type:new a.NI("ssh",{nonNullable:!0}),credentialName:new a.NI(null,a.kI.required),description:new a.NI(null),password:new a.cw({username:new a.NI(null,a.kI.required),password:new a.NI(null)}),ssh:new a.cw({password:new a.NI(null),privateKeyPath:new a.NI(null,a.kI.required),publicKeyPath:new a.NI(null,a.kI.required)})}),this.dialogTitle="Add new credential",this.showPassword=!1,this.editingCredentialId=null,this.dialogRef=null,this.findFolderDialogDisabled=!1}ngOnInit(){this.validCredentials=this.credentials.pipe((0,L.U)(e=>new Map([...e].filter(o=>"password"===o[1].type||"ssh"===o[1].type)))),this.form.controls.type.valueChanges.pipe((0,f.R)(this.destroyed$)).subscribe(e=>{"ssh"===e?(this.form.controls.ssh.enable(),this.form.controls.password.disable()):(this.form.controls.ssh.disable(),this.form.controls.password.enable())})}addNewCredential(){this.dialogRef?.close(),this.dialogTitle="Add new credential",this.showPassword=!1,this.editingCredentialId=null,this.form.reset({type:"ssh"}),this.dialogRef=this.dialog.open(this.dialogTemplateRef)}editCredential(e,o){this.dialogRef?.close(),this.dialogTitle="Edit credential",this.showPassword=!1,this.editingCredentialId=e,this.encryptionApi.decrypt(o.password).subscribe(i=>{this.form.setValue({type:o.type,credentialName:o.credentialName,description:o.description,ssh:{password:"ssh"===o.type?i:null,privateKeyPath:"ssh"===o.type?o.privateKeyPath:null,publicKeyPath:"ssh"===o.type?o.publicKeyPath:null},password:{username:"password"===o.type?o.username:null,password:"password"===o.type?i:null}}),this.dialogRef=this.dialog.open(this.dialogTemplateRef)})}closeCredentialDialog(e){if(!e)return void this.dialogRef?.close();const o=this.form.value,i="ssh"===o.type?{type:"ssh",credentialName:o.credentialName??null,description:o.description??null,password:o.ssh?.password??null,privateKeyPath:o.ssh?.privateKeyPath??null,publicKeyPath:o.ssh?.publicKeyPath??null}:{type:"password",credentialName:o.credentialName??null,description:o.description??null,username:o.password?.username??null,password:o.password?.password??null};x.$.validateCredential(i)?"ssh"===i.type?this.encryptionApi.isSshCredentialValid(i).subscribe(l=>{l?(this.store.dispatch(new M.Vh(this.editingCredentialId??this.store.selectSnapshot(x.$.maxCredentialId)+1,i)),this.dialogRef?.close()):(this.store.dispatch(new N.NN("warn","SSH key is not valid. Check that the password is correct, and that the keys are valid and accessible")),this.form.controls.ssh.controls.password.setErrors({invalid:!0}),this.form.controls.ssh.controls.privateKeyPath.setErrors({invalid:!0}),this.form.controls.ssh.controls.publicKeyPath.setErrors({invalid:!0}))}):(this.store.dispatch(new M.Vh(this.editingCredentialId??this.store.selectSnapshot(x.$.maxCredentialId)+1,i)),this.dialogRef?.close()):(this.store.dispatch(new N.NN("warn",`Credential form failed validation: ${JSON.stringify(o)}`)),this.dialogRef?.close())}deleteCredential(e){this.store.dispatch(new M.Tz(e))}copyPublicKey(e){this.filesApi.getFileContents([e]).subscribe(o=>{o&&navigator.clipboard.writeText(o).then(()=>{})})}openDialog(e){this.findFolderDialogDisabled||(this.findFolderDialogDisabled=!0,this.filesApi.openFileDialog(["openFile","showHiddenFiles"]).pipe((0,f.R)(this.destroyed$),(0,S.x)(()=>{this.findFolderDialogDisabled=!1})).subscribe(o=>{this.form.controls.ssh.controls[e].setValue(o)}))}openDialogIfEmpty(e){this.form.controls.ssh.controls[e].value||this.openDialog(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.uw),t.Y36(_.yh),t.Y36(Tt.B),t.Y36(Mt.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&t.Gf(Pt,5),2&e){let i;t.iGM(i=t.CRH())&&(o.dialogTemplateRef=i.first)}},features:[t.qOj],decls:10,vars:5,consts:[[1,"cards"],["class","credential",4,"ngFor","ngForOf"],["matTooltip","Add new credential",1,"add-new-credential",3,"click"],["mat-icon-button",""],["inline",""],["dialog",""],[1,"credential"],["mat-card-avatar","",3,"email",4,"ngIf"],[3,"matTooltip"],["mat-mini-fab","","color","accent","matTooltip","Copy public key to clipboard",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary","matTooltip","Edit",3,"click"],["mat-mini-fab","","color","warn","matTooltip","Delete",3,"click"],["mat-card-avatar","",3,"email"],["mat-mini-fab","","color","accent","matTooltip","Copy public key to clipboard",3,"click"],["mat-dialog-title",""],[3,"formGroup"],[1,"full-width"],["required","","formControlName","type"],["value","ssh"],["value","password"],["type","text","matInput","","required","","placeholder","Enter credential name..","name","credentialName","formControlName","credentialName","cdkFocusInitial",""],[4,"ngIf"],["type","text","matInput","","placeholder","Enter description...","name","description","formControlName","description"],["formGroupName","ssh",4,"ngIf"],["formGroupName","password",4,"ngIf"],["type","button","mat-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"disabled","click"],["formGroupName","ssh"],["matInput","","placeholder","Leave blank for no password","name","password","formControlName","password",3,"type"],["matSuffix","",1,"password-icon",3,"click"],["type","text","matInput","","required","","placeholder","Private key path...","name","privateKeyPath","formControlName","privateKeyPath",3,"focus"],["matSuffix","",1,"file-input-icon",3,"click"],["type","text","matInput","","required","","placeholder","Public key path...","name","publicKeyPath","formControlName","publicKeyPath",3,"focus"],["formGroupName","password"],["type","text","matInput","","required","","placeholder","Enter username...","name","username","formControlName","username"],["matInput","","placeholder","Enter password...","name","password","formControlName","password",3,"type"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,It,15,6,"mat-card",1),t.ALo(2,"keyvalue"),t.ALo(3,"async"),t.TgZ(4,"mat-card",2),t.NdJ("click",function(){return o.addNewCredential()}),t.TgZ(5,"button",3)(6,"mat-icon",4),t._uU(7,"add"),t.qZA()()()(),t.YNc(8,Ft,28,6,"ng-template",null,5,t.W1O)),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,t.lcZ(3,3,o.validCredentials))))},dependencies:[g.uh,g.xY,g.H8,d.TO,d.KE,d.hX,d.R9,A.Nt,k.gD,y.ey,m.sg,m.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,a.x0,F.lW,v.a8,v.dk,v.n5,v.$j,v.hq,v.kc,G.Hw,E.gM,B.A,m.Ov,m.Nd],styles:["[_nghost-%COMP%]{padding:20px}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.credential[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{height:64px}.credential[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]     .mat-card-header-text{overflow:hidden}.credential[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.credential[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:0;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.credential[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:10px}.add-new-credential[_ngcontent-%COMP%]{border:2px solid transparent;height:140px;text-align:center;line-height:100px;cursor:pointer}.add-new-credential[_ngcontent-%COMP%]:hover{background:#515151}.add-new-credential[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:104px;height:104px}.add-new-credential[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px}.file-input-icon[_ngcontent-%COMP%], .password-icon[_ngcontent-%COMP%]{cursor:pointer}.full-width[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),(0,C.gn)([(0,_.Ph)(x.$.credentials)],n.prototype,"credentials",void 0),(0,C.gn)([(0,_.Ph)(x.$.maxCredentialId)],n.prototype,"maxCredentialId",void 0),n})();var U=s(7340),Qt=s(4080),T=s(591),Et=s(1737),W=s(2986),Yt=s(7221),Ht=s(8310),X=s(1526),K=s(7573),Dt=s(1129),b=s(4889),Kt=s(4454),$t=s(8184),jt=s(5435),Bt=s(5773);const Xt=["factoryResetDialog"];function zt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.upgrade())}),t.ALo(1,"async"),t.TgZ(2,"span",23),t.ALo(3,"async"),t._uU(4,"Upgrade"),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("disabled",null===t.lcZ(1,2,e.user)),t.xp6(2),t.Q6J("matTooltip",t.lcZ(3,4,e.user)?"Click to purchase a subscription":"You must be logged in to upgrade")}}function Wt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.manage())}),t._uU(1,"Manage"),t.qZA()}}function te(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.logout())}),t._uU(1,"Logout"),t.qZA()}}function ee(n,r){if(1&n&&(t.TgZ(0,"h3"),t._uU(1),t.qZA()),2&n){const e=r.ngIf;t.xp6(1),t.hij("Logged in as: ",e.email,"")}}function ne(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.loginManually())}),t._uU(1,"start"),t.qZA()}}function oe(n,r){1&n&&t._UZ(0,"mat-spinner",40)}function ie(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Authorization code is required"),t.qZA())}function re(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",35)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"Authorization Code"),t.qZA(),t.TgZ(4,"input",36),t.NdJ("keydown.enter",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.loginManually())}),t.qZA(),t.YNc(5,ne,2,0,"mat-icon",37),t.ALo(6,"async"),t.YNc(7,oe,1,0,"mat-spinner",38),t.ALo(8,"async"),t.YNc(9,ie,2,0,"mat-error",4),t.qZA()()}if(2&n){const e=t.oxw(2);t.Q6J("@fadeIn",void 0),t.xp6(4),t.Q6J("formControl",e.manualLoginControl),t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(6,5,e.manualLoginLoading)),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,7,e.manualLoginLoading)),t.xp6(2),t.Q6J("ngIf",e.manualLoginControl.hasError("required"))}}function ae(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p"),t._uU(1,"Don't have an account? Click "),t.TgZ(2,"a",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.register())}),t._uU(3,"here"),t.qZA(),t._uU(4," to register."),t.qZA()}}function se(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid email address "),t.qZA())}function le(n,r){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.loginForm.controls.email.getError("server").join(", ")," ")}}function ce(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Password must have at least 10 characters "),t.qZA())}function pe(n,r){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.loginForm.controls.password.getError("server").join(", ")," ")}}function me(n,r){1&n&&t._UZ(0,"mat-spinner",50)}function ge(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"form",42),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.login())}),t.TgZ(1,"mat-form-field",43)(2,"mat-label"),t._uU(3,"Email"),t.qZA(),t._UZ(4,"input",44),t.YNc(5,se,2,0,"mat-error",4),t.YNc(6,le,2,1,"mat-error",4),t.qZA(),t.TgZ(7,"mat-form-field",43)(8,"mat-label"),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",45),t.ALo(11,"async"),t.TgZ(12,"button",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.passwordHidden.next(!i.passwordHidden.value))}),t.ALo(13,"async"),t.TgZ(14,"mat-icon"),t._uU(15),t.qZA()(),t.YNc(16,ce,2,0,"mat-error",4),t.YNc(17,pe,2,1,"mat-error",4),t.qZA(),t.TgZ(18,"button",47),t.YNc(19,me,1,0,"mat-spinner",48),t._uU(20," Login "),t.qZA(),t.TgZ(21,"p"),t._uU(22,"Forgot your password? Click "),t.TgZ(23,"a",49),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.lostPassword())}),t._uU(24,"here"),t.qZA(),t._uU(25," to reset it."),t.qZA(),t.TgZ(26,"p"),t._uU(27,"Don't have an account? Click "),t.TgZ(28,"a",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.register())}),t._uU(29,"here"),t.qZA(),t._uU(30," to register."),t.qZA()()}if(2&n){const e=t.oxw(2);t.Q6J("formGroup",e.loginForm),t.xp6(5),t.Q6J("ngIf",e.loginForm.controls.email.hasError("invalid")),t.xp6(1),t.Q6J("ngIf",e.loginForm.controls.email.hasError("server")),t.xp6(4),t.uIk("type",t.lcZ(11,10,e.passwordHidden)?"password":"text"),t.xp6(2),t.Q6J("matTooltip",t.lcZ(13,12,e.passwordHidden)?"Show":"Hide"),t.xp6(3),t.Oqu(e.passwordHidden.value?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",e.loginForm.controls.password.hasError("invalid")),t.xp6(1),t.Q6J("ngIf",e.loginForm.controls.password.hasError("server")),t.xp6(1),t.Q6J("disabled",e.processingLogin),t.xp6(1),t.Q6J("ngIf",e.processingLogin)}}function de(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",26)(1,"div",27)(2,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showLoginForm.next(!i.showLoginForm.value))}),t.ALo(3,"async"),t.TgZ(4,"mat-icon"),t._uU(5,"mail"),t.qZA(),t.TgZ(6,"span"),t._uU(7,"Login with Email"),t.qZA()(),t.TgZ(8,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.googleLogin())}),t._UZ(9,"mat-icon",29),t.TgZ(10,"span"),t._uU(11,"Login with Google"),t.qZA()(),t.TgZ(12,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.gitHubLogin())}),t._UZ(13,"mat-icon",30),t.TgZ(14,"span"),t._uU(15,"Login with GitHub"),t.qZA()(),t.TgZ(16,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.gitLabLogin())}),t._UZ(17,"mat-icon",31),t.TgZ(18,"span"),t._uU(19,"Login with GitLab"),t.qZA()(),t.TgZ(20,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.bitbucketLogin())}),t._UZ(21,"mat-icon",32),t.TgZ(22,"span"),t._uU(23,"Login with Bitbucket"),t.qZA()()(),t.YNc(24,re,10,9,"div",33),t.ALo(25,"async"),t.YNc(26,ae,5,0,"p",4),t.ALo(27,"async"),t.YNc(28,ge,31,14,"form",34),t.ALo(29,"async"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.ekj("selected",t.lcZ(3,10,e.showLoginForm)),t.Q6J("disabled",e.processingLogin),t.xp6(6),t.Q6J("disabled",e.processingLogin),t.xp6(4),t.Q6J("disabled",e.processingLogin),t.xp6(4),t.Q6J("disabled",e.processingLogin),t.xp6(4),t.Q6J("disabled",e.processingLogin),t.xp6(4),t.Q6J("ngIf",t.lcZ(25,12,e.manualLogin)),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(27,14,e.showLoginForm)),t.xp6(2),t.Q6J("ngIf",t.lcZ(29,16,e.showLoginForm))}}function ue(n,r){if(1&n&&t._UZ(0,"app-avatar",57),2&n){const e=t.oxw().$implicit;t.Q6J("email",e.email)("type",e.type)}}function _e(n,r){if(1&n&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function fe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"span",51)(2,"span",52),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.clickIntegration(l))}),t._UZ(3,"mat-icon",53),t.YNc(4,ue,1,2,"app-avatar",54),t.qZA(),t.YNc(5,_e,2,2,"span",55),t.qZA(),t.TgZ(6,"button",56),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.removeIntegration(l))}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(3),t.Q6J("svgIcon",e.type),t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email)}}function he(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.integrateManually())}),t._uU(1,"start"),t.qZA()}}function Ce(n,r){1&n&&t._UZ(0,"mat-spinner",40)}function xe(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Authorization code is required"),t.qZA())}function we(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",58)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"Authorization Code"),t.qZA(),t.TgZ(4,"input",36),t.NdJ("keydown.enter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.integrateManually())}),t.qZA(),t.YNc(5,he,2,0,"mat-icon",37),t.ALo(6,"async"),t.YNc(7,Ce,1,0,"mat-spinner",38),t.ALo(8,"async"),t.YNc(9,xe,2,0,"mat-error",4),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("@fadeIn",void 0),t.xp6(4),t.Q6J("formControl",e.manualIntegrationControl),t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(6,5,e.manualIntegrationLoading)),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,7,e.manualIntegrationLoading)),t.xp6(2),t.Q6J("ngIf",e.manualIntegrationControl.hasError("required"))}}function be(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",59)(1,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addIntegration("github"))}),t._UZ(2,"mat-icon",61),t.TgZ(3,"span"),t._uU(4,"Connect to GitHub"),t.qZA()(),t.TgZ(5,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addIntegration("gitlab"))}),t._UZ(6,"mat-icon",62),t.TgZ(7,"span"),t._uU(8,"Connect to GitLab"),t.qZA()(),t.TgZ(9,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addIntegration("bitbucket"))}),t._UZ(10,"mat-icon",63),t.TgZ(11,"span"),t._uU(12,"Connect to Bitbucket"),t.qZA()()()}}function ye(n,r){1&n&&(t.TgZ(0,"h2",64),t._uU(1,"Factory Reset"),t.qZA(),t.TgZ(2,"mat-dialog-content"),t._uU(3," All application settings will be erased, are you sure you want to continue? "),t.qZA(),t.TgZ(4,"mat-dialog-actions")(5,"button",65),t._uU(6,"Cancel"),t.qZA(),t.TgZ(7,"button",66),t._uU(8,"Confirm"),t.qZA()()),2&n&&(t.xp6(5),t.Q6J("mat-dialog-close",!1),t.xp6(2),t.Q6J("mat-dialog-close",!0))}function ve(n,r){1&n&&(t.TgZ(0,"span",67),t._uU(1,"s"),t.qZA())}function Ze(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Cannot be less than 10 seconds"),t.qZA())}let Te=(()=>{class n extends((0,q.j)(R.A)){constructor(e,o,i,l,c,u,h){super(),this.cdr=e,this.router=o,this.dialog=i,this.overlay=l,this.viewContainerRef=c,this.store=u,this.authService=h,this.loginForm=new a.cw({email:new a.NI(null,[a.kI.email,a.kI.required]),password:new a.NI(null,[a.kI.minLength(10),a.kI.required])}),this.passwordHidden=new T.X(!0),this.processingLogin=!1,this.autoFetchControl=new a.NI(null,a.kI.min(10)),this.factoryResetDialogRef=null,this.telemetryControl=new a.NI(!0,{nonNullable:!0}),this.showLoginForm=new T.X(!1),this.menuOverlayRef=new T.X(null),this.manualLogin=new T.X(null),this.manualLoginLoading=new T.X(!1),this.manualLoginControl=new a.NI(null,a.kI.required),this.manualIntegration=new T.X(null),this.manualIntegrationLoading=new T.X(!1),this.manualIntegrationControl=new a.NI(null,a.kI.required),this.openMenu=(p,Z,P)=>{p.preventDefault(),p.stopPropagation(),this.closeMenu();const w=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo(Z).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.menuOverlayRef.next(w),w.attach(new Qt.UE(P,this.viewContainerRef)),(0,Ht.t)(w,!1).pipe((0,W.q)(1),(0,f.R)(this.destroyed$)).subscribe(()=>this.closeMenu())},this.closeMenu=()=>{this.menuOverlayRef.value&&(this.menuOverlayRef.value.dispose(),this.menuOverlayRef.next(null))}}ngOnInit(){this.accessLevel=this.authService.accessLevel,this.user.pipe((0,f.R)(this.destroyed$)).subscribe(()=>{this.manualLogin.next(null),this.manualLoginLoading.next(!1),this.manualLoginControl.setValue(null)}),this.integrations.pipe((0,f.R)(this.destroyed$)).subscribe(()=>{this.manualIntegration.next(null),this.manualIntegrationLoading.next(!1),this.manualIntegrationControl.setValue(null)}),this.autoFetchInterval.pipe((0,f.R)(this.destroyed$)).subscribe(e=>{this.autoFetchControl.setValue(e?e/1e3:null,{emitEvent:!1})}),this.autoFetchControl.valueChanges.pipe((0,f.R)(this.destroyed$)).subscribe(e=>{e&&e<10||this.store.dispatch(new M.aZ(e?1e3*e:null))}),this.telemetryEnabled.pipe((0,f.R)(this.destroyed$)).subscribe(e=>{this.telemetryControl.setValue(e,{emitEvent:!1})}),this.telemetryControl.valueChanges.pipe((0,f.R)(this.destroyed$)).subscribe(e=>{this.store.dispatch(new X.Wb(e))})}login(){this.processingLogin||!this.loginForm.controls.email.value||!this.loginForm.controls.password.value||(this.processingLogin=!0,this.authService.emailLogin(this.loginForm.controls.email.value,this.loginForm.controls.password.value).pipe((0,Yt.K)(e=>{if(400===e.status){const o=[],i=[];for(const l of e.error.errors)"email"===l.param?o.push(l.msg):"password"===l.param&&i.push(l.msg);this.loginForm.controls.email.setErrors(o.length>0?{server:o}:null),this.loginForm.controls.password.setErrors(i.length>0?{server:i}:null)}else this.loginForm.controls.email.setErrors({server:["Server error. Please try again."]}),this.loginForm.controls.password.setErrors({server:["Server error. Please try again."]});return(0,Et._)(e)}),(0,S.x)(()=>{this.processingLogin=!1,this.cdr.markForCheck()})).subscribe(()=>{this.loginForm.reset()}))}googleLogin(){this.authService.googleLogin(),this.manualLogin.next("google")}bitbucketLogin(){this.authService.bitbucketLogin(),this.manualLogin.next("bitbucket")}gitHubLogin(){this.authService.gitHubLogin(),this.manualLogin.next("github")}gitLabLogin(){this.authService.gitLabLogin(),this.manualLogin.next("gitlab")}logout(){this.store.dispatch(new K.RD)}lostPassword(){this.authService.emailLostPassword()}register(){this.authService.emailRegister()}upgrade(){if(!this.store.selectSnapshot(K.jq.user))throw new Error("Can only upgrade once logged in.");this.authService.purchase().subscribe()}manage(){this.authService.manageAccount()}addIntegration(e){this.authService.startIntegration(e),this.manualIntegration.next(e),this.closeMenu()}clickIntegration(e){switch(e.type){case"github":case"gitlab":case"bitbucket":window.open(e.profileUrl)}}removeIntegration(e){this.store.dispatch(new M.sM(e.type,e.id))}loginManually(){const e=this.manualLoginControl.value;if(e){switch(this.manualLogin.value){case"bitbucket":this.authService.bitbucketLoggedIn(e).pipe((0,S.x)(()=>this.manualLoginLoading.next(!1))).subscribe();break;case"github":this.authService.gitHubLoggedIn(e).pipe((0,S.x)(()=>this.manualLoginLoading.next(!1))).subscribe();break;case"gitlab":case"google":this.authService.gitLabLoggedIn(e).pipe((0,S.x)(()=>this.manualLoginLoading.next(!1))).subscribe()}this.manualLoginLoading.next(!0)}else this.manualLoginControl.markAsTouched()}integrateManually(){const e=this.manualIntegrationControl.value;if(e){switch(this.manualIntegration.value){case"bitbucket":this.authService.bitbucketIntegrated(e).pipe((0,S.x)(()=>this.manualIntegrationLoading.next(!1))).subscribe();break;case"github":this.authService.gitHubIntegrated(e).pipe((0,S.x)(()=>this.manualIntegrationLoading.next(!1))).subscribe();break;case"gitlab":this.authService.gitLabIntegrated(e).pipe((0,S.x)(()=>this.manualIntegrationLoading.next(!1))).subscribe()}this.manualIntegrationLoading.next(!0)}else this.manualIntegrationControl.markAsTouched()}factoryReset(){this.factoryResetDialogRef&&this.factoryResetDialogRef.close(),this.factoryResetDialogRef=this.dialog.open(this.factoryResetDialog),this.factoryResetDialogRef.afterClosed().pipe((0,f.R)(this.destroyed$)).subscribe(e=>{e&&this.store.dispatch([X.AN,K.AN,N.AN,Dt.AN,b.AN,Kt.AN,M.AN]).subscribe(()=>{this.router.navigate(["/"])})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(I.F0),t.Y36(g.uw),t.Y36($t.aV),t.Y36(t.s_b),t.Y36(_.yh),t.Y36(jt.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&t.Gf(Xt,5),2&e){let i;t.iGM(i=t.CRH())&&(o.factoryResetDialog=i.first)}},features:[t.qOj],decls:55,vars:32,consts:[[1,"your-plan"],["class","upgrade-button","mat-stroked-button","","color","accent",3,"disabled","click",4,"ngIf"],["type","button","mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["type","button","mat-stroked-button","","color","warn",3,"click",4,"ngIf"],[4,"ngIf"],["class","login",4,"ngIf"],[1,"integrations"],["matTooltip","Integrate with git providers to enable features such as browsing repositories to clone"],[1,"integration-list"],[4,"ngFor","ngForOf"],["type","button","mat-stroked-button","","matTooltip","Add Integration","appElementRef","",3,"click"],["addIntegrationMenuBtn","appElementRef"],["class","manual-integration",4,"ngIf"],["addIntegrationMenu",""],[1,"settings"],["type","button","mat-stroked-button","","color","warn","matTooltip","Erase all settings and reset the app to the default state",1,"factory-reset-button",3,"click"],["factoryResetDialog",""],["appearance","outline","floatLabel","always","matTooltip","Auto fetch polling interval (in seconds)",1,"form-field"],["matInput","","type","number","placeholder","Enter seconds...",1,"text-align-right",3,"formControl"],["matSuffix","",4,"ngIf"],[1,"form-field"],["matTooltip","Telemetry helps us better understand how to improve Glint. Read more in our data collection & privacy statement",3,"formControl"],["mat-stroked-button","","color","accent",1,"upgrade-button",3,"disabled","click"],[3,"matTooltip"],["type","button","mat-stroked-button","","color","primary",3,"click"],["type","button","mat-stroked-button","","color","warn",3,"click"],[1,"login"],[1,"choose-login-buttons"],["type","button","mat-stroked-button","",3,"disabled","click"],["svgIcon","google"],["svgIcon","github"],["svgIcon","gitlab"],["svgIcon","bitbucket"],["class","manual-login",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"manual-login"],["matInput","","placeholder","Enter the code displayed in your web browser...",3,"formControl","keydown.enter"],["matSuffix","",3,"click",4,"ngIf"],["matSuffix","","diameter","24",4,"ngIf"],["matSuffix","",3,"click"],["matSuffix","","diameter","24"],[3,"click"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"form-field"],["type","email","matInput","","required","","formControlName","email","placeholder","Enter your email address..."],["matInput","","required","","formControlName","password","placeholder","Enter your password..."],["type","button","matSuffix","","mat-icon-button","",3,"matTooltip","click"],["type","submit","mat-stroked-button","",1,"submit-btn",3,"disabled"],["diameter","18",4,"ngIf"],[1,"link",3,"click"],["diameter","18"],[1,"info"],["matTooltip","Click to open profile in web browser",1,"clickable",3,"click"],[3,"svgIcon"],[3,"email","type",4,"ngIf"],[3,"matTooltip",4,"ngIf"],["type","button","mat-icon-button","","color","warn","matTooltip","Remove Integration",3,"click"],[3,"email","type"],[1,"manual-integration"],[1,"add-integration-menu"],["type","button",1,"menu-item",3,"click"],["svgIcon","github",1,"branch-icon"],["svgIcon","gitlab",1,"branch-icon"],["svgIcon","bitbucket",1,"branch-icon"],["mat-dialog-title",""],["type","button","mat-button","",3,"mat-dialog-close"],["type","button","mat-button","","color","warn",1,"confirm-factory-reset-button",3,"mat-dialog-close"],["matSuffix",""]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"h2"),t._uU(2," Your plan: "),t.TgZ(3,"span"),t.ALo(4,"async"),t._uU(5),t.ALo(6,"async"),t.qZA(),t.YNc(7,zt,5,6,"button",1),t.ALo(8,"async"),t.YNc(9,Wt,2,0,"button",2),t.ALo(10,"async"),t.YNc(11,te,2,0,"button",3),t.ALo(12,"async"),t.qZA(),t.YNc(13,ee,2,1,"h3",4),t.ALo(14,"async"),t.qZA(),t.YNc(15,de,30,18,"div",5),t.ALo(16,"async"),t.TgZ(17,"div",6)(18,"h2",7)(19,"mat-icon"),t._uU(20,"account_tree"),t.qZA(),t._uU(21,"Integrations "),t.qZA(),t.TgZ(22,"ul",8),t.YNc(23,fe,9,3,"li",9),t.ALo(24,"async"),t.qZA(),t.TgZ(25,"button",10,11),t.NdJ("click",function(c){t.CHM(i);const u=t.MAs(26),h=t.MAs(32);return t.KtG(o.openMenu(c,u,h))}),t.TgZ(27,"mat-icon"),t._uU(28,"add"),t.qZA()(),t.YNc(29,we,10,9,"div",12),t.ALo(30,"async"),t.YNc(31,be,13,0,"ng-template",null,13,t.W1O),t.qZA(),t.TgZ(33,"div",14)(34,"h2")(35,"mat-icon"),t._uU(36,"settings"),t.qZA(),t._uU(37,"Settings"),t.qZA(),t.TgZ(38,"button",15),t.NdJ("click",function(){return o.factoryReset()}),t.TgZ(39,"mat-icon"),t._uU(40,"error_outline"),t.qZA(),t._uU(41,"Factory Reset"),t.qZA(),t.YNc(42,ye,9,2,"ng-template",null,16,t.W1O),t.TgZ(44,"mat-form-field",17)(45,"mat-label"),t._uU(46,"Auto fetch every"),t.qZA(),t._UZ(47,"input",18),t.YNc(48,ve,2,0,"span",19),t.TgZ(49,"mat-hint"),t._uU(50,"Leave blank to disable"),t.qZA(),t.YNc(51,Ze,2,0,"mat-error",4),t.qZA(),t.TgZ(52,"div",20)(53,"mat-checkbox",21),t._uU(54,"Enable telemetry"),t.qZA()()()}2&e&&(t.xp6(3),t.ekj("highlight","pro"===t.lcZ(4,14,o.accessLevel)),t.xp6(2),t.Oqu("pro"===t.lcZ(6,16,o.accessLevel)?"Premium":"Free"),t.xp6(2),t.Q6J("ngIf","free"===t.lcZ(8,18,o.accessLevel)),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,20,o.user)),t.xp6(2),t.Q6J("ngIf",t.lcZ(12,22,o.user)),t.xp6(2),t.Q6J("ngIf",t.lcZ(14,24,o.user)),t.xp6(2),t.Q6J("ngIf",null===t.lcZ(16,26,o.user)),t.xp6(8),t.Q6J("ngForOf",t.lcZ(24,28,o.integrations)),t.xp6(6),t.Q6J("ngIf",t.lcZ(30,30,o.manualIntegration)),t.xp6(18),t.Q6J("formControl",o.autoFetchControl),t.xp6(1),t.Q6J("ngIf",o.autoFetchControl.value),t.xp6(3),t.Q6J("ngIf",o.autoFetchControl.hasError("min")),t.xp6(2),t.Q6J("formControl",o.telemetryControl))},dependencies:[D.oG,g.ZT,g.uh,g.xY,g.H8,d.TO,d.KE,d.bx,d.hX,d.R9,A.Nt,z.Ou,m.sg,m.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.oH,a.sg,a.u,F.lW,G.Hw,E.gM,B.A,Bt.F,m.Ov],styles:["[_nghost-%COMP%]{padding:10px}.your-plan[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}.your-plan[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.your-plan[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#ffd180}.your-plan[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:20px;vertical-align:middle}.login[_ngcontent-%COMP%]{max-width:450px}.login[_ngcontent-%COMP%]   .choose-login-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:10px}.login[_ngcontent-%COMP%]   .choose-login-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:220px;text-align:left}.login[_ngcontent-%COMP%]   .choose-login-buttons[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#37474f}.login[_ngcontent-%COMP%]   .choose-login-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   .choose-login-buttons[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:10px;margin-top:-1px}.login[_ngcontent-%COMP%]   .choose-login-buttons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.login[_ngcontent-%COMP%]   .manual-login[_ngcontent-%COMP%]{overflow:hidden}.login[_ngcontent-%COMP%]   .manual-login[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-top:20px;width:100%}.login[_ngcontent-%COMP%]   .manual-login[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;margin-left:10px}.login[_ngcontent-%COMP%]   .manual-login[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-left:10px;margin-right:5px}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{min-width:250px;max-width:400px;width:100%}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{margin-bottom:22px}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:5px;margin-top:-2px}a[_ngcontent-%COMP%]{color:#90a4ae;cursor:pointer}.integrations[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{display:flex;align-items:center}.integrations[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin-right:10px}.integrations[_ngcontent-%COMP%]{margin-top:40px;max-width:450px}.integrations[_ngcontent-%COMP%]   .integration-list[_ngcontent-%COMP%]{margin-bottom:20px}.integrations[_ngcontent-%COMP%]   .integration-list[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.integrations[_ngcontent-%COMP%]   .integration-list[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]{cursor:pointer}.integrations[_ngcontent-%COMP%]   .integration-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.integrations[_ngcontent-%COMP%]   .integration-list[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{width:24px;height:24px;vertical-align:middle;margin:0 5px}.integrations[_ngcontent-%COMP%]   .manual-integration[_ngcontent-%COMP%]{overflow:hidden}.integrations[_ngcontent-%COMP%]   .manual-integration[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-top:20px;width:100%}.integrations[_ngcontent-%COMP%]   .manual-integration[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;margin-left:10px}.integrations[_ngcontent-%COMP%]   .manual-integration[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-left:10px;margin-right:5px}.settings[_ngcontent-%COMP%]{margin-top:40px}.settings[_ngcontent-%COMP%]   .text-align-right[_ngcontent-%COMP%]{text-align:right}.settings[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .settings[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}.settings[_ngcontent-%COMP%]     .mat-form-field-suffix{top:0}.settings[_ngcontent-%COMP%]   .factory-reset-button[_ngcontent-%COMP%]{display:block;margin-bottom:20px}.settings[_ngcontent-%COMP%]   .factory-reset-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:10px}.settings[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:20px}.add-integration-menu[_ngcontent-%COMP%]{background:#424242;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;max-height:calc(100vh - 48px);max-width:25vw;min-height:48px;min-width:112px;overflow-x:hidden;overflow-y:auto}.add-integration-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;display:flex;font-family:MontserratVariable;font-size:14px;height:48px;line-height:48px;max-width:100%;outline:none;overflow:hidden;padding:0 16px;user-select:none;text-align:left;text-overflow:ellipsis;width:100%;white-space:nowrap}.add-integration-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.add-integration-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}.add-integration-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#565656}.add-integration-menu[_ngcontent-%COMP%]   .menu-item[disabled][_ngcontent-%COMP%]{pointer-events:none;color:#ffffff4d}.add-integration-menu[_ngcontent-%COMP%]   .menu-item.bold[_ngcontent-%COMP%]{font-weight:700}.add-integration-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:12px 16px 12px 0;vertical-align:middle;flex:0 0 auto}.add-integration-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon.expand-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:0}.add-integration-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.add-integration-menu.sub-menu-1[_ngcontent-%COMP%]{background:#4a4a4a}"],data:{animation:[(0,U.X$)("fadeIn",[(0,U.eR)(":enter",[(0,U.oB)({height:"0px",opacity:0}),(0,U.vP)([(0,U.jt)("0.3s 3s",(0,U.oB)({height:"*"})),(0,U.jt)("1s ease-in-out",(0,U.oB)({opacity:1}))])])])]},changeDetection:0}),(0,C.gn)([(0,_.Ph)(K.jq.user)],n.prototype,"user",void 0),(0,C.gn)([(0,_.Ph)(x.$.autoFetchInterval)],n.prototype,"autoFetchInterval",void 0),(0,C.gn)([(0,_.Ph)(x.$.integrations)],n.prototype,"integrations",void 0),(0,C.gn)([(0,_.Ph)(X.ie.enabled)],n.prototype,"telemetryEnabled",void 0),n})();var Me=s(567),tt=s(7545),$=s(6966),Pe=s(3058);const Oe=["dialog"];function Ae(n,r){if(1&n&&t._UZ(0,"app-avatar",13),2&n){const e=t.oxw().$implicit;t.Q6J("email",e.value.email)}}function Ie(n,r){if(1&n&&(t.TgZ(0,"mat-card-subtitle")(1,"div",14),t._uU(2),t.qZA(),t.TgZ(3,"div",15),t._uU(4),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("matTooltip",e.value.name||""),t.xp6(1),t.Oqu(e.value.name),t.xp6(1),t.Q6J("matTooltip",e.value.email||""),t.xp6(1),t.Oqu(e.value.email)}}function Se(n,r){1&n&&(t.TgZ(0,"mat-card-subtitle")(1,"div",16),t._uU(2," Uses the default username and email from your git config. "),t.qZA(),t._UZ(3,"div",17),t.qZA())}function ke(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.setSelectedProfile(i.key))}),t.TgZ(1,"mat-icon"),t._uU(2,"app_registration"),t.qZA()()}}function Ne(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.editProfile(i.key,i.value))}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function Ue(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.deleteProfile(i.key))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function qe(n,r){if(1&n&&(t.TgZ(0,"mat-card",6),t.ALo(1,"async"),t.TgZ(2,"mat-card-header"),t.YNc(3,Ae,1,1,"app-avatar",7),t.TgZ(4,"mat-card-title",8),t._uU(5),t.qZA(),t.YNc(6,Ie,5,4,"mat-card-subtitle",9),t.YNc(7,Se,4,0,"mat-card-subtitle",9),t.qZA(),t.TgZ(8,"mat-card-actions"),t.YNc(9,ke,3,0,"button",10),t.ALo(10,"async"),t.YNc(11,Ne,3,0,"button",11),t.YNc(12,Ue,3,0,"button",12),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw();t.ekj("git-config",0===e.key)("is-default",e.key===t.lcZ(1,12,o.selectedProfileId)),t.xp6(3),t.Q6J("ngIf",e.value.email),t.xp6(1),t.Q6J("matTooltip",e.value.profileName),t.xp6(1),t.Oqu(e.value.profileName),t.xp6(1),t.Q6J("ngIf",0!==e.key),t.xp6(1),t.Q6J("ngIf",0===e.key),t.xp6(2),t.Q6J("ngIf",e.key!==t.lcZ(10,14,o.selectedProfileId)),t.xp6(2),t.Q6J("ngIf",0!==e.key),t.xp6(1),t.Q6J("ngIf",0!==e.key)}}function Re(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Profile name is required "),t.qZA())}function Je(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function Ve(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Email is required "),t.qZA())}function Le(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid email "),t.qZA())}function Fe(n,r){if(1&n&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value.credentialName," ")}}function Ge(n,r){if(1&n&&(t.TgZ(0,"mat-form-field",23)(1,"mat-label"),t._uU(2,"Credentials"),t.qZA(),t.TgZ(3,"mat-select",32),t.YNc(4,Fe,2,2,"mat-option",33),t.ALo(5,"keyvalue"),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"mat-hint"),t._uU(8,"Choose which credentials this profile can use"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",t.lcZ(5,1,t.lcZ(6,3,e.credentials)))}}function Qe(n,r){if(1&n&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.key)("matTooltip",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function Ee(n,r){if(1&n&&(t.TgZ(0,"mat-form-field",23)(1,"mat-label"),t._uU(2,"Repositories"),t.qZA(),t.TgZ(3,"mat-select",35),t.YNc(4,Qe,2,3,"mat-option",36),t.ALo(5,"keyvalue"),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"mat-hint"),t._uU(8,"Choose which repositories this profile can use"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",t.lcZ(5,1,t.lcZ(6,3,e.repositories)))}}function Ye(n,r){if(1&n&&(t.TgZ(0,"h2",21),t._uU(1),t.qZA(),t.TgZ(2,"form",22)(3,"mat-dialog-content")(4,"mat-form-field",23)(5,"mat-label"),t._uU(6,"Profile Name"),t.qZA(),t._UZ(7,"input",24),t.YNc(8,Re,2,0,"mat-error",9),t.qZA(),t.TgZ(9,"mat-form-field",23)(10,"mat-label"),t._uU(11,"Name"),t.qZA(),t._UZ(12,"input",25),t.YNc(13,Je,2,0,"mat-error",9),t.qZA(),t.TgZ(14,"mat-form-field",23)(15,"mat-label"),t._uU(16,"Email"),t.qZA(),t._UZ(17,"input",26),t.YNc(18,Ve,2,0,"mat-error",9),t.YNc(19,Le,2,0,"mat-error",9),t.qZA(),t.TgZ(20,"mat-checkbox",27),t._uU(21,"Allow access to all credentials"),t.qZA(),t.YNc(22,Ge,9,5,"mat-form-field",28),t.TgZ(23,"mat-checkbox",29),t._uU(24,"Allow access to all repositories"),t.qZA(),t.YNc(25,Ee,9,5,"mat-form-field",28),t.qZA(),t.TgZ(26,"mat-dialog-actions")(27,"button",30),t._uU(28,"Cancel"),t.qZA(),t.TgZ(29,"button",31),t._uU(30,"Save"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.dialogTitle),t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(6),t.Q6J("ngIf",e.form.controls.profileName.hasError("required")),t.xp6(5),t.Q6J("ngIf",e.form.controls.name.hasError("required")),t.xp6(5),t.Q6J("ngIf",e.form.controls.email.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.form.controls.email.hasError("email")),t.xp6(3),t.Q6J("ngIf",!0!==e.form.controls.allCredentials.value),t.xp6(3),t.Q6J("ngIf",!0!==e.form.controls.allRepositories.value),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(2),t.Q6J("mat-dialog-close",!0)("disabled",e.form.invalid)}}let He=(()=>{class n extends((0,q.j)(R.A)){constructor(e,o,i){super(),this.dialog=e,this.store=o,this.repositoriesApi=i,this.form=new a.cw({profileName:new a.NI(null,[a.kI.required]),name:new a.NI(null,[a.kI.required]),email:new a.NI(null,[a.kI.required,a.kI.email]),allCredentials:new a.NI(!0,{nonNullable:!0}),credentials:new a.NI([],{nonNullable:!0}),allRepositories:new a.NI(!0,{nonNullable:!0}),repositories:new a.NI([],{nonNullable:!0})}),this.dialogTitle="Add new profile",this.addNewProfile=()=>{this.dialogTitle="Add new profile",this.form.reset({allCredentials:!0,credentials:[],allRepositories:!0,repositories:[]}),this.dialog.open(this.dialogTemplateRef).afterClosed().pipe((0,f.R)(this.destroyed$)).subscribe(c=>{c&&this.maxProfileId.pipe((0,W.q)(1)).subscribe(u=>{const h=this.form.value,p={profileName:h.profileName??null,name:h.name??null,email:h.email??null,credentialIds:h.allCredentials?"all":h.credentials??[],allowedRepositories:h.allRepositories?"all":h.repositories??[]};if(!x.$.validateProfile(p))throw new Error(`Profile form failed validation: ${JSON.stringify(h)}`);this.store.dispatch(new M.Bu(u+1,p))})})},this.editProfile=(l,c)=>{this.dialogTitle="Edit profile",this.form.setValue({profileName:c.profileName,name:c.name,email:c.email,allCredentials:"all"===c.credentialIds,credentials:"all"===c.credentialIds?[]:c.credentialIds,allRepositories:"all"===c.allowedRepositories,repositories:"all"===c.allowedRepositories?[]:c.allowedRepositories}),this.dialog.open(this.dialogTemplateRef).afterClosed().pipe((0,f.R)(this.destroyed$)).subscribe(h=>{if(h){const p=this.form.value,Z={...c,profileName:p.profileName??null,name:p.name??null,email:p.email??null,credentialIds:p.allCredentials?"all":p.credentials??[],allowedRepositories:p.allRepositories?"all":p.repositories??[]};if(!x.$.validateProfile(Z))throw new Error(`Profile form failed validation: ${JSON.stringify(p)}`);this.store.dispatch(new M.Bu(l,Z))}})},this.deleteProfile=l=>{this.store.dispatch(new M.p3(l))},this.setSelectedProfile=l=>{this.store.dispatch(new M.Pt(l))}}ngOnInit(){this.repositories=this.repositorySettings.pipe((0,tt.w)(e=>(0,Me.D)(Object.keys(e).map(o=>this.repositoriesApi.getRepositoryName(o).pipe((0,L.U)(i=>[o,i]))))),(0,L.U)(Object.fromEntries))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.uw),t.Y36(_.yh),t.Y36(Pe.a))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&t.Gf(Oe,5),2&e){let i;t.iGM(i=t.CRH())&&(o.dialogTemplateRef=i.first)}},features:[t.qOj],decls:10,vars:5,consts:[[1,"cards"],["class","profile",3,"git-config","is-default",4,"ngFor","ngForOf"],["matTooltip","Add new profile",1,"add-new-profile",3,"click"],["mat-icon-button",""],["inline",""],["dialog",""],[1,"profile"],["mat-card-avatar","",3,"email",4,"ngIf"],[3,"matTooltip"],[4,"ngIf"],["type","button","mat-mini-fab","","color","primary","matTooltip","Select profile",3,"click",4,"ngIf"],["type","button","mat-mini-fab","","color","primary","matTooltip","Edit",3,"click",4,"ngIf"],["type","button","mat-mini-fab","","color","warn","matTooltip","Delete",3,"click",4,"ngIf"],["mat-card-avatar","",3,"email"],[1,"subtitle-name",3,"matTooltip"],[1,"subtitle-email",3,"matTooltip"],["matTooltip","Uses the default username and email from your git config",1,"subtitle-name"],[1,"subtitle-email"],["type","button","mat-mini-fab","","color","primary","matTooltip","Select profile",3,"click"],["type","button","mat-mini-fab","","color","primary","matTooltip","Edit",3,"click"],["type","button","mat-mini-fab","","color","warn","matTooltip","Delete",3,"click"],["mat-dialog-title",""],[1,"dialog-form",3,"formGroup"],[1,"full-width"],["type","text","matInput","","required","","placeholder","Enter profile name..","name","profileName","formControlName","profileName","cdkFocusInitial",""],["type","text","matInput","","required","","placeholder","Enter name...","name","name","formControlName","name"],["type","email","email","","matInput","","required","","placeholder","Enter email...","name","email","formControlName","email"],["formControlName","allCredentials"],["class","full-width",4,"ngIf"],["formControlName","allRepositories"],["type","button","mat-button","",3,"mat-dialog-close"],["type","submit","mat-flat-button","","color","primary",3,"mat-dialog-close","disabled"],["formControlName","credentials","multiple",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","repositories","multiple",""],[3,"value","matTooltip",4,"ngFor","ngForOf"],[3,"value","matTooltip"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,qe,13,16,"mat-card",1),t.ALo(2,"keyvalue"),t.ALo(3,"async"),t.TgZ(4,"mat-card",2),t.NdJ("click",function(){return o.addNewProfile()}),t.TgZ(5,"button",3)(6,"mat-icon",4),t._uU(7,"add"),t.qZA()()()(),t.YNc(8,Ye,31,11,"ng-template",null,5,t.W1O)),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,t.lcZ(3,3,o.profiles))))},dependencies:[D.oG,g.ZT,g.uh,g.xY,g.H8,d.TO,d.KE,d.bx,d.hX,A.Nt,k.gD,y.ey,m.sg,m.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.on,a.sg,a.u,F.lW,v.a8,v.dk,v.n5,v.$j,v.hq,v.kc,G.Hw,E.gM,B.A,m.Ov,m.Nd],styles:["[_nghost-%COMP%]{padding:20px}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.profile[_ngcontent-%COMP%]{border:2px solid transparent}.profile.is-default[_ngcontent-%COMP%]{border-color:#607d8b}.profile.git-config[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   .subtitle-name[_ngcontent-%COMP%]{overflow:auto;white-space:normal}.profile[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{height:66px;margin-bottom:10px}.profile[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]     .mat-card-header-text{overflow:hidden}.profile[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.1}.profile[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:0}.profile[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   .subtitle-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.profile[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   .subtitle-email[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.profile[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:10px}.add-new-profile[_ngcontent-%COMP%]{border:2px solid transparent;height:142px;text-align:center;cursor:pointer}.add-new-profile[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:106px;height:106px}.add-new-profile[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px}.full-width[_ngcontent-%COMP%]{width:100%}.dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:50vw}.dialog-form[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:block;margin:8px 0}"],changeDetection:0}),(0,C.gn)([(0,_.Ph)(x.$.profiles)],n.prototype,"profiles",void 0),(0,C.gn)([(0,_.Ph)(x.$.credentials)],n.prototype,"credentials",void 0),(0,C.gn)([(0,_.Ph)(x.$.selectedProfileId)],n.prototype,"selectedProfileId",void 0),(0,C.gn)([(0,_.Ph)(x.$.maxProfileId)],n.prototype,"maxProfileId",void 0),(0,C.gn)([(0,_.Ph)($.E.repositorySettings)],n.prototype,"repositorySettings",void 0),n})();var Y=s(8523),et=s(9251),nt=s(9160),ot=s(5724),it=s(3943),De=s(5174),Ke=s(8929),rt=s(6053),$e=s(2198),at=s(1059),st=s(6792),lt=s(1307),je=s(2120),ct=s(744);const Be=["addRemoteDialog"];function Xe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.setSelectedRemote(i.name))}),t.TgZ(1,"mat-icon"),t._uU(2,"app_registration"),t.qZA()()}}function ze(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",6)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"mat-form-field",7)(5,"mat-label"),t._uU(6,"URL"),t.qZA(),t._UZ(7,"input",8),t.qZA()(),t.TgZ(8,"td"),t.YNc(9,Xe,3,0,"button",9),t.TgZ(10,"button",10),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.deleteRemote(l.name))}),t.TgZ(11,"mat-icon"),t._uU(12,"delete"),t.qZA()()()()}if(2&n){const e=r.$implicit,o=t.oxw().ngIf;t.ekj("selected",o.selectedRemote===e.name),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("matTooltip","The URL for "+e.name),t.xp6(3),t.Q6J("formControl",e.control),t.xp6(2),t.Q6J("ngIf",o.selectedRemote!==e.name)}}function We(n,r){if(1&n&&(t.TgZ(0,"h2",12),t._uU(1,"Add Remote"),t.qZA(),t.TgZ(2,"form",13)(3,"mat-dialog-content")(4,"mat-form-field",14)(5,"mat-label"),t._uU(6,"Name"),t.qZA(),t._UZ(7,"input",15),t.qZA(),t.TgZ(8,"mat-form-field",14)(9,"mat-label"),t._uU(10,"Url"),t.qZA(),t._UZ(11,"input",16),t.qZA()(),t.TgZ(12,"mat-dialog-actions")(13,"button",17),t._uU(14,"Cancel"),t.qZA(),t.TgZ(15,"button",18),t._uU(16,"Save"),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("formGroup",e.addRemoteForm),t.xp6(11),t.Q6J("mat-dialog-close",null),t.xp6(2),t.Q6J("mat-dialog-close",e.addRemoteForm.value)("disabled",e.addRemoteForm.invalid)}}function tn(n,r){if(1&n&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function en(n,r){if(1&n&&(t.TgZ(0,"mat-form-field",25)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",26)(4,"mat-option",27),t._uU(5,"None"),t.qZA(),t.YNc(6,tn,2,2,"mat-option",28),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw().$implicit,i=t.oxw(3);t.Q6J("matTooltip","Credential to use for "+e.key+" when using the "+o.name+" profile"),t.xp6(2),t.Oqu(e.key),t.xp6(1),t.Q6J("formControl",e.value.control),t.xp6(3),t.Q6J("ngForOf",i.getValidCredentials(o.credentials,e.value.url))}}function nn(n,r){if(1&n&&(t.TgZ(0,"tr",23)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,en,7,4,"mat-form-field",24),t.ALo(5,"keyvalue"),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngForOf",t.lcZ(5,2,e.remotes))}}function on(n,r){if(1&n&&(t.TgZ(0,"section",19)(1,"h2")(2,"mat-icon"),t._uU(3,"key"),t.qZA(),t._uU(4,"Credentials"),t.qZA(),t.TgZ(5,"table")(6,"thead")(7,"tr",20)(8,"td",21),t._uU(9,"Profile"),t.qZA(),t.TgZ(10,"td"),t._uU(11,"Credential to use"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,nn,6,4,"tr",22),t.ALo(14,"async"),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(13),t.Q6J("ngForOf",t.lcZ(14,1,e.profiles))}}function rn(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"section",1)(2,"h2")(3,"mat-icon"),t._uU(4,"cloud_queue"),t.qZA(),t._uU(5,"Remotes"),t.qZA(),t.TgZ(6,"table")(7,"tbody"),t.YNc(8,ze,13,6,"tr",2),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"button",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addRemote())}),t.TgZ(11,"mat-icon"),t._uU(12,"add"),t.qZA()(),t.YNc(13,We,17,4,"ng-template",null,4,t.W1O),t.qZA(),t.YNc(15,on,15,3,"section",5),t.ALo(16,"nullEmpty"),t.ALo(17,"async"),t.BQk()}if(2&n){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",t.lcZ(9,3,e.remotes))("ngForTrackBy",e.trackRemote),t.xp6(7),t.Q6J("ngIf",t.lcZ(16,5,t.lcZ(17,7,e.remotes)))}}let an=(()=>{class n extends((0,q.j)(R.A)){constructor(e,o,i){super(),this.dialog=e,this.store=o,this.remotesApi=i,this.remotes=new T.X([]),this.repositorySettings=new T.X(null),this.profiles=new T.X([]),this.addRemoteForm=new a.cw({name:new a.NI("origin",{nonNullable:!0}),url:new a.NI(null)}),this.addRemoteDialogRef=null,this.remoteUpdates$=new Ke.xQ,this.getValidCredentials=(l,c)=>/^https?:\/\//.test(c)?l.filter(u=>"password"===u.type||"oauth-github"===u.type):/^(git|file)?:\/\//.test(c)||/^\//.test(c)||!/:/.test(c)?[]:l.filter(u=>"ssh"===u.type),this.deleteRemote=l=>{this.remotesApi.deleteRemote(this.lastRepositoryId,l).pipe((0,Y.s)(c=>this.store.dispatch(new N.NN("unhandled",`${c}`)))).subscribe(()=>{this.store.dispatch(new b.Vu(this.lastRepositoryId,[b.nh.commits,b.nh.currentBranchUpstreamBranch,b.nh.merges,b.nh.references,b.nh.remotes])),this.remoteUpdates$.next()})},this.setSelectedRemote=l=>{this.store.dispatch(new b.J2(this.lastRepositoryId,l))},this.addRemote=()=>{this.addRemoteDialogRef&&this.addRemoteDialogRef.close(),this.addRemoteForm.reset({name:"origin"}),this.addRemoteDialogRef=this.dialog.open(this.addRemoteDialog),this.addRemoteDialogRef.afterClosed().pipe((0,f.R)(this.destroyed$)).subscribe(l=>{if(l){if(!l.name)throw new Error("Cannot add a remote with no name");if(!l.url)throw new Error("Cannot add a remote with no url");this.remotesApi.addRemote(this.lastRepositoryId,l.name,l.url).pipe((0,Y.s)(c=>this.store.dispatch(new N.NN("unhandled",`${c}`)))).subscribe(()=>{this.store.dispatch(new b.Vu(this.lastRepositoryId,[b.nh.commits,b.nh.currentBranchUpstreamBranch,b.nh.references,b.nh.remotes])),this.remoteUpdates$.next()})}})}}ngOnInit(){const e=(0,rt.aj)([this.repositoryId.pipe((0,$e.h)(je.Nf)),this.allRepositorySettings,this.allProfiles,this.allCredentials,this.remoteUpdates$.pipe((0,at.O)(void 0))]);e.pipe((0,tt.w)(([o,i,l,c])=>this.remotesApi.getRemotes(o).pipe((0,Y.s)(u=>this.store.dispatch(new N.NN("unhandled",`${u}`))),(0,L.U)(u=>[o,u,i[o],l,c]))),(0,f.R)(this.destroyed$),(0,st.g)(0)).subscribe(([o,i,l,c,u])=>{this.lastRepositoryId=o,this.repositorySettings.next(l),this.remotes.next(i.map(p=>({name:p.name,control:new a.NI(p.url,{nonNullable:!0,validators:a.kI.required})}))),this.remotes.value.forEach(p=>{p.control.valueChanges.subscribe(Z=>{this.remotesApi.updateRemoteUrl(o,p.name,Z).pipe((0,Y.s)(P=>this.store.dispatch(new N.NN("unhandled",`${P}`)))).subscribe(),this.remoteUpdates$.next()})});const h=[...c].map(([p,Z])=>{const P="all"===Z.credentialIds?[...u]:[...u].filter(([w])=>Z.credentialIds.includes(w));return{id:p,name:Z.profileName,credentials:P.map(([w,J])=>({id:w,name:J.credentialName,type:J.type})),remotes:Object.fromEntries(i.map(w=>[w.name,{url:w.url,control:new a.NI(l.profiles.get(p)?.remotes[w.name]?.credentialId??"none",{nonNullable:!0})}]))}});this.profiles.next(h),h.forEach(p=>{const Z=Object.entries(p.remotes).map(([P,{control:w}])=>w.valueChanges.pipe((0,at.O)(p.remotes[P].control.value),(0,L.U)(J=>[P,J])));(0,rt.aj)(Z).pipe((0,st.g)(0),(0,lt.T)(1),(0,f.R)(e.pipe((0,lt.T)(1))),(0,f.R)(this.destroyed$)).subscribe(P=>{this.store.dispatch(new b.xs(l.path,p.id,{remotes:Object.fromEntries(P.map(([w,J])=>[w,{credentialId:"none"===J?null:J}]))}))})})})}trackRemote(e,o){return o.name}trackProfile(e,o){return o.id}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.uw),t.Y36(_.yh),t.Y36(nt.G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-repository-settings-view"]],viewQuery:function(e,o){if(1&e&&t.Gf(Be,5),2&e){let i;t.iGM(i=t.CRH())&&(o.addRemoteDialog=i.first)}},inputs:{repositoryId:"repositoryId"},features:[t.qOj],decls:2,vars:3,consts:[[4,"ngIf"],[1,"remotes"],["class","remote",3,"selected",4,"ngFor","ngForOf","ngForTrackBy"],["type","button","mat-stroked-button","","matTooltip","Add remote",1,"add-remote-button",3,"click"],["addRemoteDialog",""],["class","credentials",4,"ngIf"],[1,"remote"],[1,"full-width",3,"matTooltip"],["type","url","matInput","","required","",3,"formControl"],["mat-mini-fab","","color","primary","matTooltip","Set as default remote",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary","matTooltip","Delete remote",3,"click"],["mat-mini-fab","","color","primary","matTooltip","Set as default remote",3,"click"],["mat-dialog-title",""],[3,"formGroup"],[1,"full-width"],["type","text","matInput","","required","","formControlName","name"],["type","url","matInput","","required","","formControlName","url"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close","disabled"],[1,"credentials"],[1,"heading"],[1,"credentials-profile-name"],["class","profile",4,"ngFor","ngForOf"],[1,"profile"],["class","credential-selector full-width",3,"matTooltip",4,"ngFor","ngForOf"],[1,"credential-selector","full-width",3,"matTooltip"],["placeholder","Select credential",3,"formControl"],["value","none"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,o){1&e&&(t.YNc(0,rn,18,9,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.repositorySettings))},dependencies:[g.ZT,g.uh,g.xY,g.H8,d.KE,d.hX,A.Nt,k.gD,y.ey,m.sg,m.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.oH,a.sg,a.u,F.lW,G.Hw,E.gM,m.Ov,m.Nd,ct.x],styles:["[_nghost-%COMP%]{display:block;padding:0 5px}.full-width[_ngcontent-%COMP%]{width:100%}.remotes[_ngcontent-%COMP%]{margin-bottom:20px}.remotes[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.remotes[_ngcontent-%COMP%]   .add-remote-button[_ngcontent-%COMP%]{margin-top:10px}.remotes[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%], .credentials[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{display:flex;align-items:center}.remotes[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%], .credentials[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin-right:10px}.remotes[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .credentials[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0;width:100%}.remotes[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .credentials[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{font-weight:700}.remotes[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .credentials[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:0}.remotes[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .credentials[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:2px solid transparent;border-bottom:2px solid transparent;padding:15px 7.5px}.remotes[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .credentials[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:2px solid transparent;border-top-left-radius:4px;border-bottom-left-radius:4px;padding-left:15px}.remotes[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, .credentials[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:2px solid transparent;border-top-right-radius:4px;border-bottom-right-radius:4px;padding-right:15px}.remotes[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .credentials[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-color:#607d8b}.remotes[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:115px;text-align:right}.remotes[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   button[_ngcontent-%COMP%]{margin-left:10px}.remotes[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   button[_ngcontent-%COMP%]:first-child{margin-left:0}"],changeDetection:0}),(0,C.gn)([(0,_.Ph)($.E.repositorySettings)],n.prototype,"allRepositorySettings",void 0),(0,C.gn)([(0,_.Ph)(x.$.profiles)],n.prototype,"allProfiles",void 0),(0,C.gn)([(0,_.Ph)(x.$.credentials)],n.prototype,"allCredentials",void 0),n})();function sn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",8),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.selectRepository(l.path))})("dragstart",function(i){const c=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.dragstartListener(i,c.path))}),t.ALo(1,"async"),t._uU(2),t.qZA()}if(2&n){const e=r.$implicit,o=t.oxw(2);t.ekj("selected",e.path===t.lcZ(1,4,o.repositoryId)),t.Q6J("matTooltip",e.path),t.xp6(2),t.hij(" ",e.name," ")}}function ln(n,r){if(1&n&&(t.TgZ(0,"mat-expansion-panel",4)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon",5),t._uU(4,"view_list"),t.qZA(),t._uU(5,"Currently open"),t.qZA()(),t.TgZ(6,"ul",6),t.YNc(7,sn,3,6,"li",7),t.qZA()()),2&n){const e=r.ngIf;t.xp6(7),t.Q6J("ngForOf",e)}}function cn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-expansion-panel",4)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon",5),t._uU(4,"bookmarks"),t.qZA(),t._uU(5,"Bookmarks"),t.qZA()(),t.TgZ(6,"app-repository-bookmarks-view",9),t.NdJ("nodeClick",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.selectBookmark(i))}),t.ALo(7,"async"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("selectedNodeId",t.lcZ(7,1,e.repositoryId))}}function pn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-expansion-panel",4)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon",5),t._uU(4,"history"),t.qZA(),t._uU(5,"Recently opened"),t.qZA()(),t.TgZ(6,"app-repository-history-view",10),t.NdJ("clicked",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.selectRepository(i))})("dragStarted",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.dragstartListener(i[0],i[1]))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("selectedId",e.repositoryId)}}function mn(n,r){if(1&n&&t._UZ(0,"app-repository-settings-view",11),2&n){const e=t.oxw();t.Q6J("repositoryId",e.repositoryId)}}let gn=(()=>{class n extends((0,q.j)(R.A)){constructor(e,o,i,l){super(),this.route=e,this.router=o,this.store=i,this.remotesApi=l,this.repositoryId=this.route.queryParamMap.pipe((0,L.U)(c=>c.get("id"))),this.dragstartListener=(c,u)=>{c.dataTransfer&&(c.dataTransfer.setData("app/repository",u),c.dataTransfer.effectAllowed="move")}}selectRepository(e){this.remotesApi.getRemotes(e).pipe((0,Y.s)(o=>this.store.dispatch(new N.NN("unhandled",`${o}`)))).subscribe(()=>{this.router.navigate([],{relativeTo:this.route,queryParams:{id:e}})})}selectBookmark(e){(0,et.b)(e)||this.selectRepository(e.id)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I.gz),t.Y36(I.F0),t.Y36(_.yh),t.Y36(nt.G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],features:[t.qOj],decls:13,vars:14,consts:[["id","repositories-settings-view"],["multi","",1,"repositories"],["expanded","",4,"ngIf"],["class","settings",3,"repositoryId",4,"ngIf"],["expanded",""],[1,"title-icon"],[1,"open-repositories"],["draggable","true",3,"selected","matTooltip","click","dragstart",4,"ngFor","ngForOf"],["draggable","true",3,"matTooltip","click","dragstart"],[3,"selectedNodeId","nodeClick"],[3,"selectedId","clicked","dragStarted"],[1,"settings",3,"repositoryId"]],template:function(e,o){1&e&&(t.TgZ(0,"app-grid",0)(1,"app-grid-cell")(2,"mat-accordion",1),t.YNc(3,ln,8,1,"mat-expansion-panel",2),t.ALo(4,"nullEmpty"),t.ALo(5,"async"),t.YNc(6,cn,8,3,"mat-expansion-panel",2),t.YNc(7,pn,7,1,"mat-expansion-panel",2),t.ALo(8,"nullEmpty"),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"app-grid-cell"),t.YNc(11,mn,1,1,"app-repository-settings-view",3),t.ALo(12,"async"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,4,t.lcZ(5,6,o.openRepositories))),t.xp6(3),t.Q6J("ngIf",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(8,8,t.lcZ(9,10,o.recentRepositories))),t.xp6(4),t.Q6J("ngIf",t.lcZ(12,12,o.repositoryId)))},dependencies:[Q.pp,Q.ib,Q.yz,Q.yK,m.sg,m.O5,G.Hw,E.gM,ot.Y,it.M,et.j,De.J,an,m.Ov,ct.x],styles:[".repositories[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%]{display:block;padding:5px}.open-repositories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:10px;cursor:pointer}.open-repositories[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background:#78909c}mat-panel-title[_ngcontent-%COMP%]{line-height:24px}mat-panel-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{margin-right:10px}"],changeDetection:0}),(0,C.gn)([(0,_.Ph)($.E.openRepositories)],n.prototype,"openRepositories",void 0),(0,C.gn)([(0,_.Ph)($.E.recentRepositories)],n.prototype,"recentRepositories",void 0),n})();var dn=s(6901);let un=(()=>{class n extends((0,q.j)(R.A)){constructor(e){super(),this.updatesApiService=e,this.channelControl=new a.NI("latest",{nonNullable:!0}),this.version=new T.X("")}ngOnInit(){this.updatesApiService.getVersion().subscribe(e=>{this.version.next(e)}),this.updatesApiService.getUpdateChannel().subscribe(e=>{this.channelControl.setValue(e,{emitEvent:!1})}),this.channelControl.valueChanges.pipe((0,f.R)(this.destroyed$)).subscribe(e=>{this.channelControl.disable({emitEvent:!1}),this.updatesApiService.setUpdateChannel(e).subscribe(()=>{this.channelControl.enable({emitEvent:!1})})})}reportBug(){window.open("https://github.com/LogicOverSnacks/glint-release/issues/new?assignees=&labels=bug&template=bug_report.md&title=")}requestFeature(){window.open("https://github.com/LogicOverSnacks/glint-release/issues/new?assignees=&labels=enhancement&template=feature_request.md&title=")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(dn.j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],features:[t.qOj],decls:17,vars:4,consts:[[3,"formControl"],["value","alpha"],["value","beta"],["value","latest"],["type","button","mat-stroked-button","","color","primary",1,"issues-btn",3,"click"],["type","button","mat-stroked-button","","color","warn",1,"issues-btn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Update Channel"),t.qZA(),t.TgZ(6,"mat-select",0)(7,"mat-option",1),t._uU(8,"alpha"),t.qZA(),t.TgZ(9,"mat-option",2),t._uU(10,"beta"),t.qZA(),t.TgZ(11,"mat-option",3),t._uU(12,"latest"),t.qZA()()(),t.TgZ(13,"button",4),t.NdJ("click",function(){return o.requestFeature()}),t._uU(14,"Request a feature"),t.qZA(),t.TgZ(15,"button",5),t.NdJ("click",function(){return o.reportBug()}),t._uU(16,"Report an issue"),t.qZA()),2&e&&(t.xp6(1),t.hij("Version: ",t.lcZ(2,2,o.version),""),t.xp6(5),t.Q6J("formControl",o.channelControl))},dependencies:[d.KE,d.hX,k.gD,y.ey,a.JJ,a.oH,F.lW,m.Ov],styles:["[_nghost-%COMP%]{padding:10px}.issues-btn[_ngcontent-%COMP%]{display:block;margin-bottom:10px}"],changeDetection:0}),n})();var _n=s(7784),fn=s(2049);const hn=function(){return["./general"]},Cn=function(){return["./profiles"]},xn=function(){return["./credentials"]},wn=function(){return["./repositories"]},bn=function(){return["./about"]},yn=[{path:"",component:(()=>{class n extends((0,q.j)(R.A)){constructor(e,o){super(),this.router=e,this.routerHistoryService=o,this.previousUrl=null,this.close=()=>{this.router.navigate([this.previousUrl??"/"])}}ngOnInit(){this.previousUrl=this.routerHistoryService.history.length>=2?this.routerHistoryService.history.slice(-2)[0]:null}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I.F0),t.Y36(_n.X))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],features:[t.qOj],decls:34,vars:10,consts:[[1,"spacer"],["mat-icon-button","",3,"click"],[1,"mat-app-background"],["id","settings-layout"],["min","200px"],[1,"links"],["routerLinkActive","active",3,"routerLink"],["svgIcon","source-repository"],["min","500px"]],template:function(e,o){1&e&&(t.TgZ(0,"header")(1,"mat-toolbar")(2,"span"),t._uU(3,"Settings"),t.qZA(),t._UZ(4,"span",0),t.TgZ(5,"button",1),t.NdJ("click",function(){return o.close()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()()(),t.TgZ(8,"main",2)(9,"app-grid",3)(10,"app-grid-cell",4)(11,"mat-list",5)(12,"mat-list-item",6)(13,"mat-icon"),t._uU(14,"build"),t.qZA(),t._uU(15,"General"),t.qZA(),t.TgZ(16,"mat-list-item",6)(17,"mat-icon"),t._uU(18,"person"),t.qZA(),t._uU(19,"Profiles"),t.qZA(),t.TgZ(20,"mat-list-item",6)(21,"mat-icon"),t._uU(22,"key"),t.qZA(),t._uU(23,"Credentials"),t.qZA(),t.TgZ(24,"mat-list-item",6),t._UZ(25,"mat-icon",7),t._uU(26,"Repositories "),t.qZA(),t.TgZ(27,"mat-list-item",6)(28,"mat-icon"),t._uU(29,"info"),t.qZA(),t._uU(30,"About"),t.qZA()()(),t.TgZ(31,"app-grid-cell",8),t._UZ(32,"router-outlet"),t.qZA()()(),t._UZ(33,"app-errors-tray-view")),2&e&&(t.xp6(12),t.Q6J("routerLink",t.DdM(5,hn)),t.xp6(4),t.Q6J("routerLink",t.DdM(6,Cn)),t.xp6(4),t.Q6J("routerLink",t.DdM(7,xn)),t.xp6(4),t.Q6J("routerLink",t.DdM(8,wn)),t.xp6(3),t.Q6J("routerLink",t.DdM(9,bn)))},dependencies:[O.i$,O.Tg,_t,F.lW,G.Hw,ot.Y,it.M,fn.c,I.lC,I.rH,I.Od],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}header[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}main[_ngcontent-%COMP%]{height:100%;overflow:hidden}main[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{padding-top:0}main[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{outline:none;cursor:pointer}main[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   mat-list-item.active[_ngcontent-%COMP%]{background:#78909c}main[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:10px}main[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   .exit-icon[_ngcontent-%COMP%]{line-height:48px;margin-right:10px}app-errors-tray-view[_ngcontent-%COMP%]{position:fixed;bottom:10px;left:10px;margin-right:10px;margin-top:10px;z-index:6000}"],changeDetection:0}),n})(),children:[{path:"general",component:Te},{path:"repositories",component:gn},{path:"profiles",component:He},{path:"credentials",component:Gt},{path:"about",component:un},{path:"",redirectTo:"general",pathMatch:"full"}]}];let vn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[I.Bz.forChild(yn),I.Bz]}),n})(),Zn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[O.ie,ft,V.I,ht.P,vn,Ct,xt,wt,vt,Zt]}),n})()}}]);