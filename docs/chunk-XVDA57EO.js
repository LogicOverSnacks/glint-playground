import{a as _t}from"./chunk-HMYPMAM3.js";import{c as gt,d as ft,e as Ct}from"./chunk-DYDJMYQO.js";import{e as ht}from"./chunk-DZWNELDV.js";import"./chunk-W4AEKMBR.js";import{e as st,i as mt,j as ct,k as pt}from"./chunk-LASU6GW6.js";import{a as dt,b as ut}from"./chunk-5T66DEWK.js";import{G as V,m as pe,t as de}from"./chunk-ZK5OAROB.js";import{$a as Te,$f as We,$i as se,B,Ba as A,Ca as N,Cb as d,Db as h,Di as tt,E as Se,Eb as U,Fa as W,Fb as ke,Ff as Qe,G as Ie,Ga as w,Gb as De,H as j,Ia as Le,Ic as $e,If as Z,Jf as Ae,Kc as K,Mb as je,Nb as H,Oa as ge,Ob as q,Oc as Pe,Oi as re,Q as $,Qa as fe,R as P,S as he,Sb as G,Sg as ie,Ti as le,Ua as c,Ui as it,Va as r,Wa as p,Xa as T,Yf as ee,Yi as nt,_ as E,_i as ot,ab as Be,ag as ve,aj as at,bj as rt,cb as Ee,ch as ne,da as J,dg as X,ea as Q,eb as F,eh as qe,fb as O,fg as we,ge as xe,he as Oe,hf as Xe,hh as Ge,ii as Ze,j as v,jb as Ce,kb as _e,lb as Me,lf as ze,lh as Ke,m as ye,mb as Ne,mj as lt,nb as R,ne as Re,o as f,oe as be,of as Je,oj as me,p as I,pa as Fe,pj as ce,q as b,qb as u,r as D,rb as _,sb as Ve,t as z,te as Y,th as oe,ue as Ue,ug as te,uh as ae,va as a,wh as Ye,wi as et,yg as He,za as M}from"./chunk-R5KNYV3F.js";var Tt=["scrollContainer"];function Bt(n,C){n&1&&(r(0,"div",7),T(1,"mat-spinner"),u(2),d(3,"translate"),p()),n&2&&(a(2),Ve(" ",h(3,1,"Loading..."),`
`))}function Et(n,C){if(n&1&&(r(0,"span",13)(1,"span",14),u(2),p(),T(3,"app-avatar",15),d(4,"async"),r(5,"span",16),u(6),p(),r(7,"span",17),u(8),d(9,"translateDate"),p()()),n&2){let e=C,t=O(3),i=Ne(11);R("left",-t.lineNumberMargin-26-400,"px"),c("appContextMenu",i)("appContextMenuData",e),a(),c("matTooltip",e.commitId),a(),_(e.commitId),a(),c("matTooltip",e.name+" ("+e.email+")")("remotes",h(4,12,t.remotes))("email",e.email),a(2),c("matTooltip",e.message),a(),_(e.message),a(2),_(U(9,14,e.date,"mediumDate"))}}function Nt(n,C){if(n&1&&(ge(0,Et,10,17,"span",12),d(1,"async")),n&2){let e,t=O().$implicit,i=O();fe((e=(e=h(1,1,i.blameLines$))==null?null:e[t.newLine.lineNumber])?0:-1,e)}}function Vt(n,C){if(n&1&&(r(0,"span",19),u(1),p()),n&2){let e=C.$implicit;c("ngClass",e.class),a(),_(e.text)}}function kt(n,C){if(n&1&&(Te(0),w(1,Vt,2,2,"span",18),d(2,"findToken"),d(3,"tokens"),Be()),n&2){let e=C.ngIf,t=O().index;a(),c("ngForOf",U(3,5,ke(2,1,e.tokens,e.text,t),e.text))}}function Dt(n,C){if(n&1&&(r(0,"li",8),ge(1,Nt,2,3),r(2,"span",9),u(3),p(),r(4,"span",10),u(5),p(),w(6,kt,4,8,"ng-container",11),p()),n&2){let e=C.$implicit,t=O();c("ngClass","line-"+e.status),a(),fe(e.newLine?1:-1),a(),R("right","calc(100% + 26px + "+(t.lineNumberMargin/2).toString()+"px)")("width",t.lineNumberMargin/2-5,"px"),a(),_(e.oldLine==null?null:e.oldLine.lineNumber),a(),R("width",t.lineNumberMargin/2-5,"px"),a(),_(e.newLine==null?null:e.newLine.lineNumber),a(),c("ngIf",t.getLineView(e))}}function jt(n,C){if(n&1){let e=Ee();r(0,"div",20)(1,"button",21),F("click",function(){let i=J(e).data,o=O();return Q(o.copyToClipboard(i.commitId))}),r(2,"mat-icon"),u(3,"content_copy"),p(),r(4,"span"),u(5),d(6,"translate"),p()(),r(7,"button",21),F("click",function(){let i=J(e).data,o=O();return Q(o.selectCommit(i.commitId))}),r(8,"mat-icon"),u(9,"document_scanner"),p(),r(10,"span"),u(11),d(12,"translate"),p()(),r(13,"button",21),F("click",function(){let i=J(e).data,o=O();return Q(o.jumpToCommit(i.commitId))}),r(14,"mat-icon"),u(15,"launch"),p(),r(16,"span"),u(17),d(18,"translate"),p()()()}if(n&2){let e=C.data;a(),c("matTooltip",e.commitId),a(4),_(h(6,6,"Copy Commit ID")),a(2),c("matTooltip",e.commitId),a(4),_(h(12,8,"Blame from this Commit")),a(2),c("matTooltip",e.commitId),a(4),_(h(18,10,"Jump to Commit"))}}var Mt=(()=>{class n extends oe(ae,Ye){constructor(e,t,i,o,l){super(),this.router=e,this.store=t,this.diffService=i,this.diffSelectionService=o,this.findSelectionService=l,this.commitChanged=new Le,this.lineNumberMargin=0,this.lines$=new v([]),this.blameLines$=new v({})}ngOnInit(){let e=this.scrollContainer.nativeElement;this.remotes=this.repository.pipe(b(t=>t?.remotes??[])),this.blame.pipe(P(this.destroyed$)).subscribe(t=>{if(t){let i=t.hunks.map(o=>[o.startLineNo,{name:o.authorName,email:o.authorEmail,commitId:o.commitId,message:o.commitMessage,date:o.commitDate}]);this.blameLines$.next(Object.fromEntries(i))}else this.blameLines$.next({})}),this.diffLines.pipe(Ie(0),P(this.destroyed$)).subscribe(t=>{if(t){let i=Math.max(t.oldLines.length,t.newLines.length)??0;this.lineNumberMargin=this.diffService.calculateMargin(i.toString().length),this.diffService.calculateInlineLines(t.oldLines,t.newLines,t.hunks).pipe(P(this.destroyed$)).subscribe(o=>{this.lines$.next(o)})}else this.lineNumberMargin=0,this.lines$.next([])}),D([this.lines$,this.findSelectionService.searchRegex]).pipe(P(this.destroyed$)).subscribe(([t,i])=>{if(!i){this.findSelectionService.setMatches([]);return}let o=t.map((l,x)=>[this.getLineView(l),x]).flatMap(([l,x])=>l?Array.from(l.text.matchAll(i),m=>({lineId:x,startIndex:m.index??0,endIndex:(m.index??0)+(m[0]?.length??0)})):[]);this.findSelectionService.setMatches(o)}),this.findSelectionService.selectedMatch.pipe(P(this.destroyed$)).subscribe(t=>{if(!t||typeof t.lineId!="number")return;let i=this.lineNumberMargin+26+400+10+t.startIndex*this.diffSelectionService.charWidth,o=this.lineNumberMargin+26+400+10+t.endIndex*this.diffSelectionService.charWidth,l=e.scrollLeft,x=e.scrollLeft+e.clientWidth,m=i<l?i:i>x?o-e.clientWidth:e.scrollLeft;e.scrollTo(m,t.lineId*19)})}getLineView(e){return e.status==="added"?e.newLine:e.status==="removed"?e.oldLine:e.status==="unchanged"?e.newLine??e.oldLine:null}trackByDiffLine(e,t){return e}copyToClipboard(e){navigator.clipboard.writeText(e??"")}selectCommit(e){this.commitChanged.next(e)}jumpToCommit(e){this.repository.pipe(Se(1),P(this.destroyed$)).subscribe(t=>{if(!t)throw new Y;this.store.dispatch([new pe(t.path,e),new de(t.path,e)]).subscribe(()=>{this.router.navigate(["/standard/default"])})})}static{this.\u0275fac=function(t){return new(t||n)(M(K),M(te),M(gt),M(ht),M(ot))}}static{this.\u0275cmp=A({type:n,selectors:[["app-blame-view"]],viewQuery:function(t,i){if(t&1&&(Ce(Tt,7,Fe),Ce(Z,5)),t&2){let o;_e(o=Me())&&(i.scrollContainer=o.first),_e(o=Me())&&(i.viewports=o)}},inputs:{repository:"repository",blame:"blame",diffLines:"diffLines"},outputs:{commitChanged:"commitChanged"},standalone:!1,features:[W],decls:12,vars:14,consts:[["scrollContainer",""],["code",""],["contextMenu",""],["class","loading",4,"ngIf"],[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["tabindex","0",1,"vs-code-theme"],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"loading"],[1,"line",3,"ngClass"],[1,"old-line-number"],[1,"new-line-number"],[4,"ngIf"],[1,"blame",3,"left","appContextMenu","appContextMenuData"],[1,"blame",3,"appContextMenu","appContextMenuData"],[1,"commit-id",3,"matTooltip"],[3,"matTooltip","remotes","email"],[1,"message",3,"matTooltip"],[1,"date"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"menu-panel"],[1,"menu-item",3,"click","matTooltip"]],template:function(t,i){t&1&&(w(0,Bt,4,3,"div",3),d(1,"async"),d(2,"nullEmpty"),r(3,"cdk-virtual-scroll-viewport",4,0)(5,"code",5,1)(7,"ul"),w(8,Dt,7,11,"li",6),d(9,"async"),p()()(),w(10,jt,19,12,"ng-template",null,2,De)),t&2&&(c("ngIf",!h(2,10,h(1,8,i.lines$))),a(3),c("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),a(4),R("margin-left",i.lineNumberMargin+26+400+10,"px"),a(),c("cdkVirtualForOf",h(9,12,i.lines$))("cdkVirtualForTrackBy",i.trackByDiffLine))},dependencies:[dt,Qe,Ae,Z,je,H,q,re,ee,le,nt,G,rt,lt,me,se,ft],styles:[".loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;margin:20px;width:100px}code[_ngcontent-%COMP%]{display:block;white-space:pre}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]{position:absolute;width:400px;overflow:hidden;user-select:none;font-size:0;display:flex;justify-content:space-between;align-items:center;gap:5px}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{width:16px;height:16px;flex:0 0 auto}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .commit-id[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .commit-id[_ngcontent-%COMP%]{flex:0 0 50px}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{flex:1 1 auto}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{flex:0 0 auto}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{right:calc(100% + 26px)}.viewport[_ngcontent-%COMP%]{height:100%;width:100%}.dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#90a4ae}.dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{color:#858585}.light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#90a4ae}.light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{color:#5e5e5e}"],changeDetection:0})}}return n})();var Pt=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=E({imports:[ut,ce,Ct]})}}return n})();function Rt(n,C){if(n&1&&(r(0,"span"),T(1,"app-avatar",8),d(2,"async"),r(3,"span",9),u(4),p()()),n&2){let e=C.ngIf,t=O();a(),c("matTooltip",e.name+" ("+e.email+")")("remotes",h(2,4,t.remotes))("email",e.email),a(3),_(e.message)}}function Ut(n,C){if(n&1&&(r(0,"mat-option",10)(1,"div",11),T(2,"app-avatar",8),d(3,"async"),r(4,"span",12),u(5),p(),r(6,"span",13),u(7),d(8,"translateDate"),p()()()),n&2){let e=C.$implicit,t=O();c("value",e.id),a(2),c("matTooltip",e.name+" ("+e.email+")")("remotes",h(3,7,t.remotes))("email",e.email),a(2),c("matTooltip",e.message),a(),_(e.message),a(2),_(U(8,9,e.date,"mediumDate"))}}var xt=(()=>{class n extends oe(ae){constructor(e,t,i,o,l,x,m){super(),this.route=e,this.router=t,this.store=i,this.commitsApi=o,this.highlightApi=l,this.repositoriesApi=x,this.routerHistoryService=m,this.blame=new v(null),this.headBlame=new v(null),this.commits=new v([]),this.diffLines=new v(null),this.selectedCommitControl=new ze(null),this.selectedCommit=new v(null),this.selectedPath=new v(null),this.jumpToSelectedCommit=()=>{let s=this.store.selectSnapshot(V.selectedRepositoryPath),g=this.selectedCommitControl.value;if(!s)throw new Y;if(!g)throw new Ue;this.store.dispatch([new pe(s,g),new de(s,g)]).subscribe(()=>{this.router.navigate(["/standard/default"])})},this.close=()=>{let s=this.routerHistoryService.history.findLast(g=>!g.startsWith("/standard/blame"))??"/standard/default";this.router.navigate([s])},this.getPatch=(s,g,y,k)=>y==="head"?(k==="staged"?s.stagedChanges:k==="unstaged"?s.unstagedChanges:void 0)?.find(L=>L.newFilePath===g)?(k==="staged"?this.repositoriesApi.getStagedPatch(s.path,void 0,g):this.repositoriesApi.getUnstagedPatch(s.path,void 0,g)).pipe(b(L=>({repositoryPath:s.path,patch:L,isUnstaged:k==="unstaged"})),B(L=>be.matches(L)?I(()=>new ne(L)):I(()=>L))):f(null):k!=="commit"?f(null):this.commitsApi.getPatch(s.path,y,void 0,g).pipe(b(S=>({repositoryPath:s.path,patch:S,isUnstaged:!1})),B(S=>Re.matches(S)?I(()=>new ne(S)):be.matches(S)?I(()=>new ne(S)):I(()=>S)))}ngOnInit(){this.remotes=this.selectedRepository.pipe(b(e=>e?.remotes??[])),this.headBlame.pipe(b(e=>{if(!e)return[];let t={};for(let i of e.hunks)t[i.commitId]||(t[i.commitId]={id:i.commitId,date:i.commitDate,email:i.authorEmail,name:i.authorName,message:i.commitMessage,path:i.path});return Object.values(t).sort((i,o)=>o.date.getTime()-i.date.getTime())}),P(this.destroyed$)).subscribe(e=>{this.commits.next(e);let t=this.selectedCommitControl.value;this.selectedCommit.next(e.find(i=>i.id===t)??null)}),this.selectedCommitControl.valueChanges.pipe(j(),P(this.destroyed$)).subscribe(e=>{let t=this.commits.value.find(i=>i.id===e)??null;t&&(this.selectedCommit.next(t),this.router.navigate([],{relativeTo:this.route,queryParams:{area:"commit","commit-id":e??"head",path:t.path}}))}),this.store.select(V.selectedRepository).pipe(P(this.destroyed$)).subscribe(e=>{e||this.router.navigate(["/standard/open-repository"])}),D([this.store.select(V.selectedRepository).pipe(j((e,t)=>e?.path===t?.path)),this.route.queryParamMap]).pipe(b(([e,t])=>({repository:e,area:t.get("area"),commitId:t.get("commit-id"),path:t.get("path")})),he(({commitId:e,path:t})=>{this.selectedCommitControl.setValue(e==="head"?null:e,{emitEvent:!0}),this.selectedPath.next(t)}),$(({repository:e,path:t,commitId:i,area:o})=>e&&t&&i?z([this.getPatch(e,t,i,o),this.repositoriesApi.blameFile(e.path,t,i==="head"?void 0:i)]):f(null)),j((e,t)=>{if(!e||!t)return!e&&!t;let[i,o]=e,[l,x]=t;return!i||!l?!i&&!l:!(i.repositoryPath!==l.repositoryPath||i.isUnstaged!==l.isUnstaged||i.patch.newFileId!==l.patch.newFileId||i.patch.newFileIsDir!==l.patch.newFileIsDir||i.patch.newFileIsSubmodule!==l.patch.newFileIsSubmodule||i.patch.newFilePath!==l.patch.newFilePath||i.patch.oldFileId!==l.patch.oldFileId||i.patch.oldFileIsDir!==l.patch.oldFileIsDir||i.patch.oldFileIsSubmodule!==l.patch.oldFileIsSubmodule||i.patch.oldFilePath!==l.patch.oldFilePath||i.patch.status!==l.patch.status||i.patch.hunks.length!==l.patch.hunks.length||ie(i.patch.hunks,l.patch.hunks).some(([m,s])=>m?.lines.length!==s?.lines.length||m?.newStart!==s?.newStart||m?.oldStart!==s?.oldStart||m?.header!==s?.header||m&&s&&ie(m.lines,s.lines).some(([g,y])=>g?.content.length!==y?.content.length||g?.newLineNo!==y?.newLineNo||g?.oldLineNo!==y?.oldLineNo||g?.origin!==y?.origin||g?.content!==y?.content))||ie(o.hunks,x.hunks).some(([m,s])=>m?.startLineNo!==s?.startLineNo||m?.endLineNo!==s?.endLineNo||m?.authorName!==s?.authorName||m?.authorEmail!==s?.authorEmail||m?.commitId!==s?.commitId||m?.commitMessage!==s?.commitMessage||m?.commitDate!==s?.commitDate||m?.path!==s?.path))}),$(e=>e&&e[0]?z(this.getLines(e[0].repositoryPath,e[0].patch,e[0].isUnstaged,!1)).pipe(B(t=>xe.matches(t)?f(null):Oe.matches(t)?f(null):I(()=>t)),b(t=>t?[e[0],e[1],t]:null)):f(null)),he(e=>{if(e&&e[0]){let[t,i,o]=e;this.blame.next(i),this.diffLines.next({hunks:t.patch.hunks,oldLines:o[0],newLines:o[1],oldFilePath:t.patch.oldFilePath,newFilePath:t.patch.newFilePath,highlighted:!1})}else this.blame.next(null),this.diffLines.next(null)}),$(e=>e&&e[0]?z(this.getLines(e[0].repositoryPath,e[0].patch,e[0].isUnstaged,!0)).pipe(B(t=>xe.matches(t)?f(null):Oe.matches(t)?f(null):I(()=>t)),b(t=>t?[e[0],t]:null)):f(null)),P(this.destroyed$)).subscribe(e=>{if(e&&e[0]){let[t,i]=e;this.diffLines.next({hunks:t.patch.hunks,oldLines:i[0],newLines:i[1],oldFilePath:t.patch.oldFilePath,newFilePath:t.patch.newFilePath,highlighted:!1})}else this.blame.next(null),this.diffLines.next(null)}),D([this.store.select(V.selectedRepository),this.route.queryParamMap.pipe(b(e=>e.get("path")),j())]).pipe($(([e,t])=>e&&t?this.repositoriesApi.blameFile(e.path,t):f(null)),B(()=>f(null)),P(this.destroyed$)).subscribe(e=>{e&&this.headBlame.next(e)})}getLines(e,t,i,o){if(t.oldFileIsSubmodule||t.newFileIsSubmodule){let l=t.hunks[0]?.lines.find(m=>m.oldLineNo>0),x=t.hunks[0]?.lines.find(m=>m.newLineNo>0);return[f([{lineNumber:1,text:l?.content??"",tokens:[{startIndex:0,endIndex:l?.content.length??0,scopes:["normal"]}]}]),f([{lineNumber:1,text:x?.content??"",tokens:[{startIndex:0,endIndex:x?.content.length??0,scopes:["normal"]}]}])]}return[t.oldFileId?this.highlightApi.getHighlightedFile(e,t.oldFileId,t.oldFilePath,o):f([]),i?this.highlightApi.getHighlightedFile(e,null,t.newFilePath,o):t.newFileId?this.highlightApi.getHighlightedFile(e,t.newFileId,t.newFilePath,o):f([])]}static{this.\u0275fac=function(t){return new(t||n)(M($e),M(K),M(te),M(qe),M(Ge),M(Ke),M(_t))}}static{this.\u0275cmp=A({type:n,selectors:[["ng-component"]],standalone:!1,features:[W],decls:23,vars:19,consts:[[3,"path"],["type","button","mat-icon-button","",1,"jump-to-commit-button","app-icon-button-md",3,"click","matTooltip"],[1,"commit-selector"],["panelClass","commit-select-list",3,"formControl"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["type","button","mat-icon-button","",1,"close-button","app-icon-button-md",3,"click"],[3,"commitChanged","repository","blame","diffLines"],[3,"matTooltip","remotes","email"],[1,"message"],[3,"value"],[1,"commit-select-option"],[1,"message",3,"matTooltip"],[1,"date"]],template:function(t,i){t&1&&(r(0,"header"),T(1,"app-find-control")(2,"app-condensed-path",0),d(3,"async"),r(4,"button",1),d(5,"translate"),F("click",function(){return i.jumpToSelectedCommit()}),r(6,"mat-icon"),u(7,"launch"),p()(),r(8,"mat-form-field",2)(9,"mat-label"),u(10),d(11,"translate"),p(),r(12,"mat-select",3)(13,"mat-select-trigger"),w(14,Rt,5,6,"span",4),d(15,"async"),p(),w(16,Ut,9,12,"mat-option",5),d(17,"async"),p()(),r(18,"button",6),F("click",function(){return i.close()}),r(19,"mat-icon"),u(20,"close"),p()()(),r(21,"main")(22,"app-blame-view",7),F("commitChanged",function(l){return i.selectedCommitControl.setValue(l)}),p()()),t&2&&(a(2),c("path",h(3,9,i.selectedPath)),a(2),c("matTooltip",h(5,11,"Jump to the selected commit")),a(6),_(h(11,13,"Select Commit")),a(2),c("formControl",i.selectedCommitControl),a(2),c("ngIf",h(15,15,i.selectedCommit)),a(2),c("ngForOf",h(17,17,i.commits)),a(6),c("repository",i.selectedRepository)("blame",i.blame)("diffLines",i.diffLines))},dependencies:[tt,et,mt,ct,st,H,q,Xe,Je,Ze,re,ee,le,it,at,Mt,G,me,se],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding-top:10px}header[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:baseline;justify-content:space-between;margin-bottom:5px;outline:none;padding:0 10px}header[_ngcontent-%COMP%]   app-condensed-path[_ngcontent-%COMP%]{flex:1 1 auto;min-width:200px}header[_ngcontent-%COMP%]   .commit-selector[_ngcontent-%COMP%]{width:500px;margin-right:12px}header[_ngcontent-%COMP%]   .commit-selector[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{height:19px;vertical-align:middle;margin-right:5px}header[_ngcontent-%COMP%]   .jump-to-commit-button[_ngcontent-%COMP%], header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{top:-8px}main[_ngcontent-%COMP%]{flex:1 0 auto;outline:none;overflow-x:auto;overflow-y:auto}"],data:{animation:[We("slideLeft",[we(":enter",[X({position:"absolute",top:0,left:0,transform:"translateX(100%)"}),ve("200ms",X({transform:"translateX(0)"}))]),we(":leave",[X({position:"absolute",top:0,left:0,transform:"translateX(0)"}),ve("200ms",X({transform:"translateX(100%)"}))])])]},changeDetection:0})}}return ye([He(V.selectedRepository)],n.prototype,"selectedRepository",void 0),n})();var Xt=[{path:"",component:xt}],Ot=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=E({imports:[Pe.forChild(Xt),Pe]})}}return n})();var Ji=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=E({imports:[pt,ce,Pt,Ot]})}}return n})();export{Ji as BlameLayoutModule};
