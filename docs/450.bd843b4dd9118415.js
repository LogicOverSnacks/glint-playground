"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[450],{15773:(F,T,t)=>{t.d(T,{F:()=>a});var I=t(43144),W=t(15671),_=t(60136),C=t(18486),v=t(94650),a=function(d){(0,_.Z)(s,d);var n=(0,C.Z)(s);function s(i){return(0,W.Z)(this,s),n.call(this,i.nativeElement)}return(0,I.Z)(s)}(v.SBq);a.\u0275fac=function(n){return new(n||a)(v.Y36(v.SBq))},a.\u0275dir=v.lG2({type:a,selectors:[["","appElementRef",""]],exportAs:["appElementRef"],features:[v.qOj]})},66271:(F,T,t)=>{t.d(T,{k:()=>a});var I=t(15671),W=t(43144),_=t(63779),C=t(94650),v=t(7016),a=function(){function d(n){(0,I.Z)(this,d),this.baseApi=n}return(0,W.Z)(d,[{key:"getRelativePath",value:function(s,i){return this.baseApi.single(_.w.files.getRelativePath,s,i)}},{key:"getResolvedPath",value:function(s,i){return this.baseApi.single(_.w.files.getResolvedPath,s,i)}},{key:"getFileContents",value:function(s){return this.baseApi.single(_.w.files.getFileContents,s)}},{key:"openFileDialog",value:function(s){return this.baseApi.single(_.w.files.openFileDialog,s)}},{key:"openFolderDialog",value:function(s,i){return this.baseApi.single(_.w.files.openFolderDialog,s,i)}},{key:"openFileWithShell",value:function(s){return this.baseApi.single(_.w.files.openFileWithShell,s)}},{key:"hasTerminal",value:function(){return this.baseApi.single(_.w.files.hasTerminal)}},{key:"openTerminal",value:function(s){return this.baseApi.single(_.w.files.openTerminal,s)}},{key:"hasVsCode",value:function(){return this.baseApi.single(_.w.files.hasVsCode)}},{key:"openVsCode",value:function(s){return this.baseApi.single(_.w.files.openVsCode,s)}}]),d}();a.\u0275fac=function(n){return new(n||a)(C.LFG(v._))},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})},21815:(F,T,t)=>{t.d(T,{E:()=>S});var I=t(97685),W=t(15671),_=t(43144),C=t(60136),v=t(18486),a=t(84080),d=t(61135),n=t(95698),s=t(82722),i=t(54004),p=t(78926),O=t(9967),L=t(94462),U=t(78310),b=t(32120),h=t(36966),m=t(82270),e=t(94650),B=t(98184),M=t(89867),l=t(66271),r=t(83394),E=t(36895),c=t(4859),f=t(97392),u=t(10266),P=t(15773),V=t(74442);function Y(A,K){if(1&A){var R=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(R);var y=e.oxw(2);return e.KtG(y.openWithTerminal())}),e.TgZ(1,"mat-icon"),e._uU(2,"terminal"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&A&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Terminal")," "))}function z(A,K){if(1&A){var R=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(R);var y=e.oxw(2);return e.KtG(y.openWithVsCode())}),e._UZ(1,"mat-icon",9),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&A&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Visual Studio Code")," "))}function H(A,K){if(1&A){var R=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){var x=e.CHM(R).$implicit,j=e.oxw(2);return e.KtG(j.openRemote(x.url))}),e._UZ(1,"mat-icon",11),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA()}if(2&A){var D=K.$implicit;e.Q6J("matTooltip",D.url),e.xp6(1),e.s9C("svgIcon",D.type),e.xp6(1),e.AsE(" ","bitbucket"===D.type?e.lcZ(3,4,"Bitbucket"):"github"===D.type?e.lcZ(4,6,"GitHub"):"gitlab"===D.type?e.lcZ(5,8,"GitLab"):"",": ",D.name," ")}}function G(A,K){if(1&A){var R=e.EpF();e.TgZ(0,"div",4)(1,"div",5),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",6),e.NdJ("click",function(){e.CHM(R);var Z=e.oxw();return e.KtG(Z.openWithFileExplorer())}),e.TgZ(5,"mat-icon"),e._uU(6,"folder"),e.qZA(),e._uU(7),e.qZA(),e.YNc(8,Y,5,3,"button",7),e.ALo(9,"async"),e.YNc(10,z,4,3,"button",7),e.ALo(11,"async"),e.YNc(12,H,6,10,"button",8),e.ALo(13,"async"),e.qZA()}if(2&A){var D=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"Open with...")),e.xp6(5),e.hij(" ",D.folderText," "),e.xp6(1),e.Q6J("ngIf",e.lcZ(9,7,D.hasTerminal)),e.xp6(2),e.Q6J("ngIf",e.lcZ(11,9,D.hasVsCode)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(13,11,D.remotes))}}var S=function(A){(0,C.Z)(R,A);var K=(0,v.Z)(R);function R(D,y,Z,x,j){var o;return(0,W.Z)(this,R),(o=K.call(this)).overlay=D,o.viewContainerRef=y,o.store=Z,o.filesApi=x,o.providerUrlMatcherService=j,o.menuOverlayRef=new d.X(null),o.folderText=L.V?"Finder":L.E?"File Explorer":"File Manager",o.openMenu=function(g,J,w){g.preventDefault(),g.stopPropagation(),o.closeMenu();var N=o.overlay.create({positionStrategy:o.overlay.position().flexibleConnectedTo(J).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});o.menuOverlayRef.next(N),N.attach(new a.UE(w,o.viewContainerRef)),(0,U.t)(N,!1).pipe((0,n.q)(1),(0,s.R)(o.destroyed$)).subscribe(function(){return o.closeMenu()})},o.closeMenu=function(){o.menuOverlayRef.value&&(o.menuOverlayRef.value.dispose(),o.menuOverlayRef.next(null))},o.openWithFileExplorer=function(){var g=o.store.selectSnapshot(h.E.selectedRepositoryPath);if(!g)throw new m.uX;o.filesApi.openFileWithShell(g).subscribe(),o.closeMenu()},o.openWithTerminal=function(){var g=o.store.selectSnapshot(h.E.selectedRepositoryPath);if(!g)throw new m.uX;o.filesApi.openTerminal(g).subscribe(),o.closeMenu()},o.openWithVsCode=function(){var g=o.store.selectSnapshot(h.E.selectedRepositoryPath);if(!g)throw new m.uX;o.filesApi.openVsCode(g).subscribe(),o.closeMenu()},o.openRemote=function(g){window.open(g),o.closeMenu()},o}return(0,_.Z)(R,[{key:"ngOnInit",value:function(){var y=this;this.remotes=this.store.select(h.E.selectedRemotes).pipe((0,i.U)(function(Z){return(Z??[]).map(function(x){var j=y.providerUrlMatcherService.matchProvider(x.url);return j?[x,j]:null}).filter(b.$K).map(function(x){var j=(0,I.Z)(x,2),o=j[0],g=j[1];return{type:g.type,url:y.providerUrlMatcherService.getUrl(g),name:o.name}})})),this.hasTerminal=this.filesApi.hasTerminal(),this.hasVsCode=this.filesApi.hasVsCode()}}]),R}((0,p.j)(O.A));S.\u0275fac=function(K){return new(K||S)(e.Y36(B.aV),e.Y36(e.s_b),e.Y36(M.yh),e.Y36(l.k),e.Y36(r.d))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-repository-actions-open-with"]],features:[e.qOj],decls:7,vars:3,consts:[["type","button","mat-stroked-button","","appElementRef","",1,"item",3,"matTooltip","click"],["openWithMenuBtn","appElementRef"],[1,"launch-icon"],["openWithMenu",""],[1,"menu-panel"],[1,"menu-header"],["type","button",1,"menu-item",3,"click"],["type","button","class","menu-item",3,"click",4,"ngIf"],["type","button","class","menu-item",3,"matTooltip","click",4,"ngFor","ngForOf"],["svgIcon","microsoft-visual-studio-code"],["type","button",1,"menu-item",3,"matTooltip","click"],[3,"svgIcon"]],template:function(K,R){if(1&K){var D=e.EpF();e.TgZ(0,"button",0,1),e.NdJ("click",function(Z){e.CHM(D);var x=e.MAs(1),j=e.MAs(6);return e.KtG(R.openMenu(Z,x,j))}),e.ALo(2,"translate"),e.TgZ(3,"mat-icon",2),e._uU(4,"launch"),e.qZA()(),e.YNc(5,G,14,13,"ng-template",null,3,e.W1O)}2&K&&e.Q6J("matTooltip",e.lcZ(2,1,"Open repository with..."))},dependencies:[E.sg,E.O5,c.lW,f.Hw,u.gM,P.F,E.Ov,V.X],styles:[".item[_ngcontent-%COMP%]{min-width:45px;padding:0 10px;font-size:0}"],changeDetection:0})},60098:(F,T,t)=>{t.d(T,{z:()=>m});var I=t(15671),W=t(43144),_=t(62843),C=t(70262),v=t(54004),a=t(82270),d=t(3825),n=t(32120),s=t(8523),i=t(64889),p=t(11129),O=t(68724),L=t(84924),U=t(94650),b=t(89867),h=t(20790),m=function(){function e(B,M){var l=this;(0,I.Z)(this,e),this.store=B,this.commitsApi=M,this.startEdit=function(r,E){return l.store.dispatch(new p.z0(r,{name:"Edit commits",detail:(0,d.Iu)("from _commit_",{commitId:E}),do:function(){return l.store.dispatch(new p.LF(r,E))}}))},this.discardEdit=function(r){return l.store.dispatch(new p.z0(r,{name:"Discard commit edits",do:function(){return l.commitsApi.discardCommitEditing(r)}}))},this.saveEdits=function(r){return l.store.dispatch(new p.z0(r,{name:"Save commit edits",do:function(){return l.commitsApi.completeCommitEditing(r).pipe((0,s.C)(function(){return l.store.dispatch(new i.Vu(r,[i.nh.commits,i.nh.currentBranchCommitId,i.nh.headCommitId,i.nh.mergeHeads,i.nh.merges,i.nh.references,i.nh.stagedChanges,i.nh.submodules,i.nh.unstagedChanges]))}))}}))},this.editCommitDetails=function(r,E,c){return l.store.dispatch(new p.z0(r,{name:"Edit commit",detail:c,do:function(){return l.commitsApi.editCommitDetails(r,E,c,l.getCommitter()).pipe((0,C.K)(function(u){return a.L8.matches(u)?(0,_._)(function(){return new n.ZR(u)}):(0,_._)(function(){return u})}))}})).pipe((0,v.U)(function(){var f;return null===(f=l.store.selectSnapshot(O.h.mostRecentAction(r)))||void 0===f?void 0:f.state}))},this.squashCommit=function(r,E,c){return l.store.dispatch(new p.z0(r,{name:"Squash commit",detail:(0,d.Iu)("_commit_ up/down",{commitId:E,isUpwards:"up"===c}),do:function(){return l.commitsApi.squashCommit(r,E,c,l.getCommitter()).pipe((0,C.K)(function(u){return a.bk.matches(u)||a.xb.matches(u)||a.Ak.matches(u)||a.zd.matches(u)||a.zN.matches(u)||a.L8.matches(u)?(0,_._)(function(){return new n.ZR(u)}):(0,_._)(function(){return u})}))}})).pipe((0,v.U)(function(){var f;return null===(f=l.store.selectSnapshot(O.h.mostRecentAction(r)))||void 0===f?void 0:f.state}))},this.insertCommit=function(r,E,c){return l.store.dispatch(new p.z0(r,{name:"Insert commit",detail:(0,d.Iu)("above/below _commit_",{commitId:E,isAbove:"above"===c}),do:function(){return l.commitsApi.insertCommit(r,E,c,l.getCommitter()).pipe((0,C.K)(function(u){return a.L8.matches(u)?(0,_._)(function(){return new n.ZR(u)}):(0,_._)(function(){return u})}))}})).pipe((0,v.U)(function(){var f;return null===(f=l.store.selectSnapshot(O.h.mostRecentAction(r)))||void 0===f?void 0:f.state}))},this.moveCommitChanges=function(r,E,c,f){return l.store.dispatch(new p.z0(r,{name:"Move commit changes",detail:(0,d.Iu)("_commit_ up/down",{commitId:E,isUpwards:"up"===c}),do:function(){return l.commitsApi.moveCommitChanges(r,E,c,f,l.getCommitter()).pipe((0,C.K)(function(P){return a.L8.matches(P)||a.ND.matches(P)||a._5.matches(P)||a.x4.matches(P)||a.KS.matches(P)||a.wX.matches(P)?(0,_._)(function(){return new n.ZR(P)}):(0,_._)(function(){return P})}))}})).pipe((0,v.U)(function(){var u;return null===(u=l.store.selectSnapshot(O.h.mostRecentAction(r)))||void 0===u?void 0:u.state}))}}return(0,W.Z)(e,[{key:"getCommitter",value:function(){var M=this.store.selectSnapshot(L.$.selectedProfile);return M&&M.name&&M.email?{name:M.name,email:M.email}:null}}]),e}();m.\u0275fac=function(B){return new(B||m)(U.LFG(b.yh),U.LFG(h.T))},m.\u0275prov=U.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})},57093:(F,T,t)=>{t.d(T,{v:()=>i});var I=t(43144),W=t(15671),_=t(65412),C=t(59549),v=t(284),a=t(51572),d=t(84385),n=t(33179),s=t(94650),i=(0,I.Z)(function p(){(0,W.Z)(this,p)});i.\u0275fac=function(O){return new(O||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[_.Is,C.lN,v.c,a.Cq,d.LD,n.I]})},43888:(F,T,t)=>{t.d(T,{p:()=>s});var I=t(97685),W=t(15671),_=t(43144),C=t(92686),v=t(82270),a=t(3825),d=t(32120),n=t(94650),s=function(){function i(){(0,W.Z)(this,i),this.parseReference=function(p){var O=i.referenceRegex.exec(p);if(!O)return null;if("remotes"===O[1]){var L,U,b=i.remoteBranchRegex.exec(p);if(!b)throw new v.xB(p);return{branch:null!==(L=b[2])&&void 0!==L?L:"",sourceName:null!==(U=b[1])&&void 0!==U?U:"",sourceType:"remote"}}return"stash"===O[1]?{branch:(0,a.Iu)("stash"),sourceName:(0,a.Iu)("stash"),sourceType:"stash"}:{branch:O[2],sourceName:(0,a.Iu)("heads"===O[1]?"local":"tag"),sourceType:"heads"===O[1]?"local":"tag"}},this.getBranchTypeIcon=function(p){switch(p){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"archive";case"tag":return"label"}}}return(0,_.Z)(i,[{key:"calculateBranches",value:function(O,L){var U=this,b=(0,C.Z)(O.map(this.parseReference).filter(d.$K),function(h){return h.branch});return Object.entries(b).map(function(h){var m=(0,I.Z)(h,2);return{name:m[0],sources:m[1].map(function(M){return{name:M.sourceName,type:M.sourceType,icon:U.getBranchTypeIcon(M.sourceType)}})}}).sort(function(h,m){var e=h.sources.some(function(c){return"local"===c.type&&"refs/heads/".concat(h.name)===L}),B=h.sources.some(function(c){return"local"===c.type&&"refs/heads/".concat(m.name)===L});if(e&&!B)return-1;if(!e&&B)return 1;var M=h.sources.some(function(c){return"local"===c.type}),l=m.sources.some(function(c){return"local"===c.type});if(M&&!l)return-1;if(!M&&l)return 1;var r=h.sources.some(function(c){return"remote"===c.type}),E=m.sources.some(function(c){return"remote"===c.type});return r&&!E?-1:!r&&E?1:h.sources.length>m.sources.length?-1:h.sources.length<m.sources.length?1:h.name>m.name?-1:h.name<m.name?1:0}).slice(0,30)}}]),i}();s.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/,s.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/,s.\u0275fac=function(p){return new(p||s)},s.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}}]);