"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[242],{5724:(B,C,e)=>{e.d(C,{Y:()=>m});var i=e(4650),u=e(591),p=e(6787),E=e(3753),l=e(7625),M=e(1059),R=e(3489),A=e(353);class U{constructor(a,t){this.period=a,this.scheduler=t}call(a,t){return t.subscribe(new j(a,this.period,this.scheduler))}}class j extends R.L{constructor(a,t,r){super(a),this.period=t,this.scheduler=r,this.hasValue=!1,this.add(r.schedule(P,t,{subscriber:this,period:t}))}_next(a){this.lastValue=a,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function P(n){let{subscriber:a,period:t}=n;a.notifyNext(),this.schedule(n,t)}var O=e(1307),z=e(537),b=e(2198),g=e(2994),V=e(7545),H=e(4850),F=e(2474),_=e(8926),W=e(9967),s=e(2120),h=e(6895);const x=["border"],v=["*"];let m=(()=>{class n extends((0,_.j)(W.A)){constructor(t,r,d){super(),this.element=t,this.renderer=r,this.zone=d,this.hide=!1,this.sizeChanging=new i.vpe,this.sizeChanged=new i.vpe,this.isVertical$=new u.X(!1),this.highlightBorder$=new u.X(!1),this.previousCell$=new u.X(null),this.linkedHover$=new u.X(!1),this.linked$=new u.X(void 0)}get parentElement(){const t=this.element.nativeElement.parentElement;if(!t)throw new Error("GridCell has no parent Grid");return t}ngOnChanges(t){t.linked&&this.linked$.next(t.linked.currentValue)}ngOnInit(){this.zone.runOutsideAngular(()=>{const t=this.listenToPointerEvents(this.borderElement.nativeElement,["touchstart"],"mousedown","touches"),r=this.listenToPointerEvents(window,["touchmove"],"mousemove","targetTouches"),d=this.listenToPointerEvents(window,["touchend","touchcancel"],"mouseup","changedTouches");t.pipe((0,l.R)(this.destroyed$)).subscribe(([o,c])=>{let f;this.zone.run(()=>this.highlightBorder$.next(!0));const L=this.element.nativeElement,S=this.previousCell$.value?.element.nativeElement;if(!S)throw new Error("Cannot change the size of a grid cell with no previous cell");if(this.isVertical$.value){const T=S.offsetHeight,G=L.offsetHeight,X=this.getLimit(this.max,this.parentElement.clientHeight,1/0),N=this.getLimit(this.min,this.parentElement.clientHeight,0),Y=this.getLimit(this.previousCell$.value?.max,this.parentElement.clientHeight,1/0),Q=this.getLimit(this.previousCell$.value?.min,this.parentElement.clientHeight,0);f=([,K])=>{const $=G+c-K,y=T+K-c,w=Math.min(Math.max(N,$),X)-$,Z=Math.min(Math.max(Q,y),Y)-y,D=Math.abs(Z)>Math.abs(w)?-Z:w;return this.renderer.setStyle(S,"height",y-D+"px"),this.renderer.setStyle(L,"height",`${$+D}px`),[y-D,$+D]}}else{const T=S.offsetWidth,G=L.offsetWidth,X=this.getLimit(this.max,this.parentElement.clientWidth,1/0),N=this.getLimit(this.min,this.parentElement.clientWidth,0),Y=this.getLimit(this.previousCell$.value?.max,this.parentElement.clientWidth,1/0),Q=this.getLimit(this.previousCell$.value?.min,this.parentElement.clientWidth,0);f=([K])=>{const $=G+o-K,y=T+K-o,w=Math.min(Math.max(N,$),X)-$,Z=Math.min(Math.max(Q,y),Y)-y,D=Math.abs(Z)>Math.abs(w)?-Z:w;return this.renderer.setStyle(S,"width",y-D+"px"),this.renderer.setStyle(L,"width",`${$+D}px`),[y-D,$+D]}}r.pipe((0,M.O)([o,c]),function I(n,a=A.P){return t=>t.lift(new U(n,a))}(50),(0,l.R)(this.previousCell$.pipe((0,O.T)(1))),(0,l.R)(d),(0,l.R)(t),(0,l.R)(this.destroyed$),(0,z.x)(()=>this.zone.run(()=>this.highlightBorder$.next(!1)))).subscribe({next:T=>{this.sizeChanging.next(f(T))},complete:()=>this.sizeChanged.next()})}),this.linked$.pipe((0,b.h)(s.$K),(0,l.R)(this.destroyed$)).subscribe(o=>{let c=!1;o.sizeChanging.pipe((0,b.h)(()=>!c),(0,g.b)(()=>{c=!0,this.zone.run(()=>this.highlightBorder$.next(!0))}),(0,V.w)(f=>o.sizeChanging.pipe((0,M.O)(f),(0,l.R)(o.sizeChanged),(0,l.R)(this.linked$.pipe((0,O.T)(1))),(0,z.x)(()=>{c=!1,this.sizeChanged.next(),this.zone.run(()=>this.highlightBorder$.next(!1))}))),(0,l.R)(this.linked$.pipe((0,O.T)(1))),(0,l.R)(this.destroyed$)).subscribe(([f,L])=>{const S=this.element.nativeElement,T=this.previousCell$.value?.element.nativeElement;this.isVertical$.value?(this.renderer.setStyle(T,"height",`${f}px`),this.renderer.setStyle(S,"height",`${L}px`)):(this.renderer.setStyle(T,"width",`${f}px`),this.renderer.setStyle(S,"width",`${L}px`))})})})}isFixedSize(){let t=null,r=null;if(this.max){const o=n.pixelsRegex.exec(this.max);o&&(t=+o[1])}if(this.min){const o=n.pixelsRegex.exec(this.min);o&&(r=+o[1])}if(null===t&&null===r)return!1;t=t??1/0,r=r??0;const d=this.isVertical$.value?this.element.nativeElement.offsetHeight:this.element.nativeElement.offsetWidth;return d>=t||d<=r}getSizeInPixels(){const t=this.isVertical$.value?this.parentElement.clientHeight:this.parentElement.clientWidth,r=this.getLimit(this.max,t,1/0),d=this.getLimit(this.min,t,0),o=this.isVertical$.value?this.element.nativeElement.offsetHeight:this.element.nativeElement.offsetWidth;return o>=r?r:o>0&&o<=d?d:o}getLimit(t,r,d){if(!t||""===t)return d;const o=n.percentageRegex.exec(t);if(o)return r*+o[1]/100;const c=n.pixelsRegex.exec(t);return c?+c[1]:isNaN(+t)?d:+t}listenToPointerEvents(t,r,d,o){return(0,p.T)(...r.map(c=>(0,E.R)(t,c,{passive:!1}).pipe((0,g.b)(f=>f.preventDefault()),(0,H.U)(f=>[f[o][0].clientX,f[o][0].clientY]))),(0,E.R)(t,d,{passive:!1}).pipe((0,g.b)(c=>c.preventDefault()),(0,H.U)(c=>[c.clientX,c.clientY]))).pipe((0,F.B)())}}return n.percentageRegex=/(\d*\.?\d+)%/,n.pixelsRegex=/(\d*\.?\d+)px/,n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.R0b))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-grid-cell"]],viewQuery:function(t,r){if(1&t&&i.Gf(x,7,i.SBq),2&t){let d;i.iGM(d=i.CRH())&&(r.borderElement=d.first)}},inputs:{hide:"hide",max:"max",min:"min",linked:"linked"},outputs:{sizeChanging:"sizeChanging",sizeChanged:"sizeChanged"},features:[i.qOj,i.TTD],ngContentSelectors:v,decls:9,vars:15,consts:[[1,"grid-cell-wrapper"],[1,"grid-cell-border",3,"ngClass","mouseenter","mouseleave"],["border",""],[1,"grid-cell-content"]],template:function(t,r){1&t&&(i.F$t(),i.TgZ(0,"div",0)(1,"div",1,2),i.NdJ("mouseenter",function(){return r.linkedHover$.next(!0)})("mouseleave",function(){return r.linkedHover$.next(!1)}),i.ALo(3,"async"),i.ALo(4,"async"),i.ALo(5,"async"),i.ALo(6,"async"),i.qZA(),i.TgZ(7,"div",3),i.Hsn(8),i.qZA()()),2&t&&(i.xp6(1),i.Udp("display",i.lcZ(3,7,r.previousCell$)?"block":"none"),i.ekj("highlight",i.lcZ(4,9,r.highlightBorder$))("linked-hover",i.lcZ(5,11,null==r.linked?null:r.linked.linkedHover$)),i.Q6J("ngClass",i.lcZ(6,13,r.isVertical$)?"vertical":"horizontal"))},dependencies:[h.mk,h.Ov],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;position:relative;transition:width 30ms ease-in-out,height 30ms ease-in-out}.grid-cell-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.grid-cell-border[_ngcontent-%COMP%]{position:absolute;z-index:100}.grid-cell-border.vertical[_ngcontent-%COMP%]{cursor:row-resize;top:-2px;height:4px;width:100%}.grid-cell-border.horizontal[_ngcontent-%COMP%]{cursor:col-resize;left:-2px;height:100%;width:4px}.grid-cell-border.highlight[_ngcontent-%COMP%], .grid-cell-border[_ngcontent-%COMP%]:hover, .grid-cell-border.linked-hover[_ngcontent-%COMP%]{background-color:#37474f}.grid-cell-content[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow-x:auto;overflow-y:auto}"],changeDetection:0}),n})()},3943:(B,C,e)=>{e.d(C,{M:()=>F});var i=e(7717),u=e(591),p=e(6787),E=e(3753),l=e(7625),M=e(1307),R=e(5778),A=e(2994),I=e(1059),U=e(7545),j=e(8926),P=e(9967),O=e(9578),z=e(9077),b=e(5724),g=e(4650),V=e(240);const H=["*"];let F=(()=>{class _ extends((0,j.j)(P.A)){constructor(s,h){super(),this.renderer=s,this.store=h,this.hostFlexDirection="row",this.hostOverflow="hidden auto",this.isVertical$=new u.X(!1)}set vertical(s){this.isVertical$.next(void 0!==s)}ngAfterContentInit(){this.id&&this.store.select(z.$.gridSizes(this.id)).pipe((0,l.R)(this.destroyed$)).subscribe(s=>{s.length!==this.gridCells.length&&console.log("mismatch sizes at ",this.id,s.length,this.gridCells.length);const h=(0,i.Z)([...this.gridCells],s),x=h.filter(([,n])=>n.endsWith("%")),v=h.filter(([,n])=>n.endsWith("px")),m=v.map(([,n])=>+n.replace("px","")).reduce((n,a)=>n+a,0);x.forEach(([n,a])=>{const t=+a.replace("%","");this.renderer.setStyle(n.element.nativeElement,this.isVertical$.value?"height":"width",`calc(${t}% - ${m*t/100}px)`)}),v.forEach(([n,a])=>{this.renderer.setStyle(n.element.nativeElement,this.isVertical$.value?"height":"width",a)})}),this.hostFlexDirection=this.isVertical$.value?"column":"row",this.gridCells.forEach(s=>{s.isVertical$.next(this.isVertical$.value)}),(0,p.T)(this.isVertical$.pipe((0,M.T)(1),(0,R.x)(),(0,A.b)(s=>{this.hostFlexDirection=s?"column":"row",this.hostOverflow=s?"auto hidden":"hidden auto";const h=s?"width":"height",x=s?"height":"width";this.gridCells.forEach(v=>{v.isVertical$.next(s);const m=v.element.nativeElement.style[h];this.renderer.removeStyle(v.element.nativeElement,h),this.renderer.setStyle(v.element.nativeElement,x,m)})})),this.gridCells.changes.pipe((0,I.O)(void 0),(0,A.b)(()=>{this.gridCells.forEach((s,h,x)=>s.previousCell$.next(h>0?x[h-1]:null)),this.updateCellSizes()}))).pipe((0,U.w)(()=>(0,p.T)((0,E.R)(window,"resize"),...this.gridCells.map(s=>s.sizeChanged.asObservable()))),(0,l.R)(this.destroyed$)).subscribe(()=>{this.updateCellSizes()})}updateCellSizes(){if(!this.id)return;const s=this.gridCells.filter(m=>m.isFixedSize()),h=s.reduce((m,n)=>m+n.getSizeInPixels(),0),x=this.gridCells.reduce((m,n)=>m+n.getSizeInPixels(),0),v=this.gridCells.map(m=>s.includes(m)?`${m.getSizeInPixels()}px`:100*m.getSizeInPixels()/(x-h)+"%");this.store.dispatch(new O.ct(this.id,v))}}return _.\u0275fac=function(s){return new(s||_)(g.Y36(g.Qsj),g.Y36(V.yh))},_.\u0275cmp=g.Xpm({type:_,selectors:[["app-grid"]],contentQueries:function(s,h,x){if(1&s&&g.Suo(x,b.Y,4),2&s){let v;g.iGM(v=g.CRH())&&(h.gridCells=v)}},hostVars:4,hostBindings:function(s,h){2&s&&g.Udp("flex-direction",h.hostFlexDirection)("overflow",h.hostOverflow)},inputs:{id:"id",vertical:"vertical"},features:[g.qOj],ngContentSelectors:H,decls:1,vars:0,template:function(s,h){1&s&&(g.F$t(),g.Hsn(0))},styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;overflow-x:auto;overflow-y:auto}"],changeDetection:0}),_})()},744:(B,C,e)=>{e.d(C,{x:()=>u});var i=e(4650);let u=(()=>{class p{transform(l){return l&&(Array.isArray(l)?l.length>0?l:null:"object"==typeof l?Object.keys(l).length>0?l:null:l)}}return p.\u0275fac=function(l){return new(l||p)},p.\u0275pipe=i.Yjl({name:"nullEmpty",type:p,pure:!0}),p})()},7965:(B,C,e)=>{e.d(C,{Z:()=>l});var i=e(9940),u=e(5604),p=e(8661);const l=function E(M,R){return(0,p.Z)((0,u.Z)(M,R,i.Z),M+"")}},7118:(B,C,e)=>{e.d(C,{Z:()=>E});var i=e(8706),u=e(214);const E=function p(l){return(0,u.Z)(l)&&(0,i.Z)(l)}},7717:(B,C,e)=>{e.d(C,{Z:()=>j});var i=e(7965),u=e(197),p=e(7988),E=e(666),l=e(4049),M=e(7118),R=Math.max;const j=(0,i.Z)(function A(P){if(!P||!P.length)return[];var O=0;return P=(0,u.Z)(P,function(z){if((0,M.Z)(z))return O=R(z.length,O),!0}),(0,l.Z)(O,function(z){return(0,p.Z)(P,(0,E.Z)(z))})})}}]);