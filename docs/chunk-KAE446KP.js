import{a as rt}from"./chunk-XAEFNQ4I.js";import{Aa as f,Ai as at,Fa as G,Ga as V,Hb as ht,Ia as h,Ib as vt,La as s,Li as M,Mb as Ct,Oe as q,Qa as F,Qe as $,Sa as dt,Se as z,T as P,Ta as gt,Te as U,Ua as r,Ue as H,Va as n,Wa as S,We as J,Wh as x,Xa as ft,Xe as K,Ya as ut,Yi as xt,Zf as Y,_ as ct,_e as Q,a as N,af as W,bb as k,bf as X,da as v,gi as et,hh as Z,ih as tt,j as w,kb as l,lb as c,mb as C,nb as L,ni as it,pi as nt,qi as y,sb as E,si as b,ti as _,ub as m,ui as D,vb as p,vi as I,wb as A,yi as ot,za as e}from"./chunk-LQ6WPIKI.js";var lt=(()=>{class t{constructor(){this.colorsByCommitId=new w({}),this.commitDetailsByCommitId=new w({})}getColors(){return this.colorsByCommitId.asObservable()}setColors(i){this.colorsByCommitId.next(i)}getCommits(){return this.commitDetailsByCommitId.asObservable()}setCommits(i){this.commitDetailsByCommitId.next(i)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function It(t,d){t&1&&S(0,"mat-spinner",5)}function Mt(t,d){t&1&&(r(0,"div",7)(1,"mat-icon",8),l(2,"warning"),n(),l(3),m(4,"translate"),n()),t&2&&(e(3),C(" ",p(4,1,"There are changes to the working copy that will be lost.")," "))}function St(t,d){if(t&1&&(r(0,"li",11),l(1),n()),t&2){let i=d.$implicit;s("matTooltip",i.id),e(),L(" ",i.message," - ",i.id," ")}}function wt(t,d){if(t&1&&(r(0,"div",7)(1,"mat-icon",8),l(2,"warning"),n(),l(3),m(4,"translate"),r(5,"ul",9),h(6,St,2,3,"li",10),m(7,"async"),n()()),t&2){let i=k(2);e(3),C(" ",p(4,2,"The following commits will no longer be reachable by any branch or tag and may be lost:")," "),e(3),s("ngForOf",p(7,4,i.atRiskCommits))}}function Bt(t,d){if(t&1&&(ft(0),h(1,Mt,5,3,"div",6),m(2,"async"),h(3,wt,8,6,"div",6),m(4,"async"),m(5,"nullEmpty"),ut()),t&2){let i=k();e(),s("ngIf",p(2,2,i.workingCopyAtRisk)),e(2),s("ngIf",p(5,6,p(4,4,i.atRiskCommits)))}}function Tt(t,d){t&1&&(r(0,"button",12),l(1),m(2,"translate"),n()),t&2&&(s("mat-dialog-close",!0),e(),C(" ",p(2,2,"Confirm")," "))}var Wt=(()=>{class t extends Z(tt){constructor(i,o,a){super(),this.data=i,this.dialogRef=o,this.graphSharedService=a,this.loading=new w(!0),this.atRiskCommits=new w([]),this.workingCopyAtRisk=new w(!1)}ngOnInit(){this.graphSharedService.getCommits().pipe(P(this.destroyed$)).subscribe(i=>{let o=/^refs\/(heads|remotes)\//.test(this.data.branchName)?this.data.branchName:`refs/heads/${this.data.branchName}`,a=N({},i),B=Object.values(i).filter(u=>u.commit.references.length>0&&u.commit.references.some(j=>j!==o)).map(u=>u.id);a.head&&delete a.head;let T=this.data.toCommitId?[...B,this.data.toCommitId]:B,g=0;for(;g<T.length;){let u=T[g];if(u){let j=a[u];j&&(delete a[u],T.push(...j.commit.parentIds))}g++}let R=Object.values(a).filter(u=>!u.stash).map(u=>u.commit);this.atRiskCommits.next(R),this.loading.value&&R.length===0&&!this.workingCopyAtRisk.value?setTimeout(()=>this.dialogRef.close(!0),0):this.loading.next(!1)})}static{this.\u0275fac=function(o){return new(o||t)(f(y),f(nt),f(lt))}}static{this.\u0275cmp=v({type:t,selectors:[["ng-component"]],features:[V],decls:13,vars:14,consts:[["mat-dialog-title",""],["diameter","48",4,"ngIf"],[4,"ngIf"],["type","button","mat-button","",3,"mat-dialog-close"],["type","button","mat-button","","color","warn",3,"mat-dialog-close",4,"ngIf"],["diameter","48"],["class","text-block",4,"ngIf"],[1,"text-block"],[1,"warning-icon"],[1,"commit-list"],[3,"matTooltip",4,"ngFor","ngForOf"],[3,"matTooltip"],["type","button","mat-button","","color","warn",3,"mat-dialog-close"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),n(),r(2,"mat-dialog-content"),h(3,It,1,0,"mat-spinner",1),m(4,"async"),h(5,Bt,6,8,"ng-container",2),m(6,"async"),n(),r(7,"mat-dialog-actions")(8,"button",3),l(9),m(10,"translate"),n(),h(11,Tt,3,4,"button",4),m(12,"async"),n()),o&2&&(e(),c(a.data.title),e(2),s("ngIf",p(4,6,a.loading)),e(2),s("ngIf",p(6,8,a.loading)===!1),e(3),s("mat-dialog-close",void 0),e(),c(p(10,10,"Cancel")),e(2),s("ngIf",p(12,12,a.loading)===!1))},dependencies:[b,_,I,D,rt,ht,vt,x,ot,Y,Ct,xt,M],styles:["mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.text-block[_ngcontent-%COMP%]{margin-bottom:10px}.warning-icon[_ngcontent-%COMP%]{margin-right:5px}.commit-list[_ngcontent-%COMP%]{list-style:inside;padding-left:20px;margin-top:10px;overflow-x:hidden}.commit-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"],changeDetection:0})}}return t})();var kt=(t,d)=>d.id;function Et(t,d){t&1&&S(0,"mat-spinner",1)}function At(t,d){t&1&&(r(0,"div",4)(1,"mat-icon",5),l(2,"warning"),n(),l(3),m(4,"translate"),n()),t&2&&(e(3),C(" ",p(4,1,"There are changes to the working copy that will be lost.")," "))}function Rt(t,d){if(t&1&&(r(0,"li",7),l(1),n()),t&2){let i=d.$implicit;s("matTooltip",i.id),e(),L("",i.message," - ",i.id,"")}}function Ft(t,d){if(t&1&&(r(0,"div",4)(1,"mat-icon",5),l(2,"warning"),n(),l(3),m(4,"translate"),r(5,"ul",6),dt(6,Rt,2,3,"li",7,kt),n()()),t&2){let i=k(2);e(3),C(" ",p(4,1,"The following commits will no longer be reachable by any branch or tag and may be lost:")," "),e(3),gt(i.atRiskCommits())}}function Ot(t,d){if(t&1&&h(0,At,5,3,"div",4)(1,Ft,8,3,"div",4),t&2){let i=k();F(i.workingCopyAtRisk()?0:-1),e(),F(i.atRiskCommits().length>0?1:-1)}}function jt(t,d){t&1&&(r(0,"button",3),l(1),m(2,"translate"),n()),t&2&&(s("mat-dialog-close",!0),e(),C(" ",p(2,2,"Confirm")," "))}var re=(()=>{class t extends Z(tt){constructor(i,o,a){super(),this.data=i,this.dialogRef=o,this.graphSharedService=a,this.loading=G(!0),this.atRiskCommits=G([]),this.workingCopyAtRisk=G(!1)}ngOnInit(){if(this.data.currentBranch||!this.data.currentHeadCommitId){setTimeout(()=>this.dialogRef.close(!0),0);return}this.graphSharedService.getCommits().pipe(P(this.destroyed$)).subscribe(i=>{let o=N({},i),a=Object.values(i).filter(g=>g.commit.references.length>0).map(g=>g.id);o.head&&delete o.head;let B=0;for(;B<a.length;){let g=a[B];if(g){let R=o[g];R&&(delete o[g],a.push(...R.commit.parentIds))}B++}let T=Object.values(o).filter(g=>!g.stash).map(g=>g.commit);this.atRiskCommits.set(T),this.loading()&&T.length===0&&!this.workingCopyAtRisk()?setTimeout(()=>this.dialogRef.close(!0),0):this.loading.set(!1)})}static{this.\u0275fac=function(o){return new(o||t)(f(y),f(nt),f(lt))}}static{this.\u0275cmp=v({type:t,selectors:[["ng-component"]],features:[V],decls:10,vars:7,consts:[["mat-dialog-title",""],["diameter","48"],["type","button","mat-button","",3,"mat-dialog-close"],["type","button","mat-button","","color","warn",3,"mat-dialog-close"],[1,"text-block"],[1,"warning-icon"],[1,"commit-list"],[3,"matTooltip"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),n(),r(2,"mat-dialog-content"),h(3,Et,1,0,"mat-spinner",1)(4,Ot,2,2),n(),r(5,"mat-dialog-actions")(6,"button",2),l(7),m(8,"translate"),n(),h(9,jt,3,4,"button",3),n()),o&2&&(e(),c(a.data.title),e(2),F(a.loading()?3:4),e(3),s("mat-dialog-close",void 0),e(),c(p(8,5,"Cancel")),e(2),F(a.loading()?-1:9))},dependencies:[b,_,I,D,rt,x,ot,Y,M],styles:["mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.text-block[_ngcontent-%COMP%]{margin-bottom:10px}.warning-icon[_ngcontent-%COMP%]{margin-right:5px}.commit-list[_ngcontent-%COMP%]{list-style:inside;padding-left:20px;margin-top:10px;overflow-x:hidden}.commit-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"],changeDetection:0})}}return t})();var Vt=t=>({item:t}),ce=(()=>{class t{constructor(i){this.data=i,this.form=new H({name:new J(null,$.required)})}static{this.\u0275fac=function(o){return new(o||t)(f(y))}}static{this.\u0275cmp=v({type:t,selectors:[["app-create-branch-dialog"]],decls:17,vars:19,consts:[["mat-dialog-title",""],[3,"formGroup"],["subscriptSizing","dynamic"],["type","text","matInput","","required","","formControlName","name",1,"name-ctrl"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close","disabled"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),m(2,"translate"),n(),r(3,"form",1)(4,"mat-dialog-content")(5,"mat-form-field",2)(6,"mat-label"),l(7),m(8,"translate"),n(),S(9,"input",3),n()(),r(10,"mat-dialog-actions")(11,"button",4),l(12),m(13,"translate"),n(),r(14,"button",5),l(15),m(16,"translate"),n()()()),o&2&&(e(),c(A(2,8,"Create _item_",E(17,Vt,a.data.title))),e(2),s("formGroup",a.form),e(4),c(p(8,11,"Name")),e(4),s("mat-dialog-close",void 0),e(),c(p(13,13,"Cancel")),e(2),s("mat-dialog-close",a.form.value)("disabled",a.form.invalid),e(),c(p(16,15,"Save")))},dependencies:[b,_,I,D,it,et,at,K,q,z,U,X,Q,W,x,M],encapsulation:2,changeDetection:0})}}return t})();var Lt=t=>({name:t}),fe=(()=>{class t{constructor(i){this.data=i}static{this.\u0275fac=function(o){return new(o||t)(f(y))}}static{this.\u0275cmp=v({type:t,selectors:[["app-remove-remote-dialog"]],decls:13,vars:17,consts:[["mat-dialog-title",""],["type","button","mat-button","",3,"mat-dialog-close"],["type","submit","mat-button","","color","warn",3,"mat-dialog-close"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),m(2,"translate"),n(),r(3,"mat-dialog-content"),l(4),m(5,"translate"),n(),r(6,"mat-dialog-actions")(7,"button",1),l(8),m(9,"translate"),n(),r(10,"button",2),l(11),m(12,"translate"),n()()),o&2&&(e(),c(p(2,6,"Remove remote")),e(3),C(" ",A(5,8,"Are you sure you want to remove the remote _name_?",E(15,Lt,a.data.name))," "),e(3),s("mat-dialog-close",null),e(),c(p(9,11,"Cancel")),e(2),s("mat-dialog-close",!0),e(),c(p(12,13,"Confirm")))},dependencies:[b,_,I,D,x,M],encapsulation:2,changeDetection:0})}}return t})();var qt=t=>({title:t}),Ce=(()=>{class t{constructor(i){this.data=i,this.form=new H({name:new J(this.data.name,{nonNullable:!0,validators:$.required})})}static{this.\u0275fac=function(o){return new(o||t)(f(y))}}static{this.\u0275cmp=v({type:t,selectors:[["app-rename-branch-dialog"]],decls:17,vars:19,consts:[["mat-dialog-title",""],[3,"formGroup"],["subscriptSizing","dynamic"],["type","text","matInput","","required","","formControlName","name"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close","disabled"]],template:function(o,a){o&1&&(r(0,"div",0),l(1),m(2,"translate"),n(),r(3,"form",1)(4,"mat-dialog-content")(5,"mat-form-field",2)(6,"mat-label"),l(7),m(8,"translate"),n(),S(9,"input",3),n()(),r(10,"mat-dialog-actions")(11,"button",4),l(12),m(13,"translate"),n(),r(14,"button",5),l(15),m(16,"translate"),n()()()),o&2&&(e(),c(A(2,8,"Rename _title_",E(17,qt,a.data.title))),e(2),s("formGroup",a.form),e(4),c(p(8,11,"Name")),e(4),s("mat-dialog-close",void 0),e(),c(p(13,13,"Cancel")),e(2),s("mat-dialog-close",a.form.value.name)("disabled",a.form.invalid),e(),c(p(16,15,"Save")))},dependencies:[b,_,I,D,it,et,at,K,q,z,U,X,Q,W,x,M],encapsulation:2,changeDetection:0})}}return t})();export{lt as a,Wt as b,re as c,ce as d,fe as e,Ce as f};
