"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[493],{2771:(W,S,r)=>{r.d(S,{P:()=>d});var Z=r(8929),T=r(3164),A=r(7625),k=r(4650);const d=M=>(()=>{class t extends M{ngAfterViewInit(){super.ngAfterViewInit&&super.ngAfterViewInit();const q=this.viewports.map(C=>{const c=new Z.xQ,m=new ResizeObserver(()=>c.next());return c.pipe((0,T.p)(20,void 0,{leading:!0,trailing:!0}),(0,A.R)(this.destroyed$)).subscribe(()=>{C.checkViewportSize()}),m.observe(C.elementRef.nativeElement),m});this.destroyed$.subscribe(()=>{q.forEach(C=>C.disconnect())})}}return t.\u0275fac=function(){let F;return function(C){return(F||(F=k.n5z(t)))(C||t)}}(),t.\u0275prov=k.Yz7({token:t,factory:t.\u0275fac}),t})()},8310:(W,S,r)=>{r.d(S,{t:()=>k});var Z=r(6787),T=r(3753),A=r(2198);const k=(d,M=!0)=>(0,Z.T)(d.backdropClick(),d.outsidePointerEvents().pipe((0,A.h)(f=>"auxclick"!==f.type)),...M?[(0,T.R)(d.overlayElement,"click")]:[])},6552:(W,S,r)=>{r.r(S),r.d(S,{OpenRepositoryLayoutModule:()=>ei});var Z=r(6338),T=r(4385),A=r(3179),k=r(7084),d=r(9549),M=r(284),f=r(1572),t=r(4650);let F=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[k.To,d.lN,M.c,f.Cq,T.LD,A.I]}),i})();var q=r(9643),C=r(3238),c=r(2687),m=r(1281),l=r(4006);const B=["input"],ot=function(i){return{enterDuration:i}},It=["*"],Vt=new t.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let Ut=0;const Nt={provide:l.JU,useExisting:(0,t.Gpc)(()=>_t),multi:!0};class St{constructor(o,e){this.source=o,this.checked=e}}const Jt=(0,C.sb)((0,C.pj)((0,C.Kr)((0,C.Id)(class{constructor(i){this._elementRef=i}}))));let Lt=(()=>{class i extends Jt{constructor(e,n,a,s,y,p,x){super(e),this._focusMonitor=n,this._changeDetectorRef=a,this.defaults=y,this._onChange=b=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new t.vpe,this.toggleChange=new t.vpe,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=y.color||"accent",this._noopAnimations="NoopAnimations"===p,this.id=this._uniqueId=`${x}${++Ut}`}get required(){return this._required}set required(e){this._required=(0,m.Ig)(e)}get checked(){return this._checked}set checked(e){this._checked=(0,m.Ig)(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?this._focused=!0:e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return i.\u0275fac=function(e){t.$Z()},i.\u0275dir=t.lG2({type:i,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[t.qOj]}),i})(),_t=(()=>{class i extends Lt{constructor(e,n,a,s,y,p){super(e,n,a,s,y,p,"mat-slide-toggle-")}_createChangeEvent(e){return new St(this,e)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}focus(e,n){n?this._focusMonitor.focusVia(this._inputElement,n,e):this._inputElement.nativeElement.focus(e)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(c.tE),t.Y36(t.sBO),t.$8M("tabindex"),t.Y36(Vt),t.Y36(t.QbO,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(e,n){if(1&e&&t.Gf(B,5),2&e){let a;t.iGM(a=t.CRH())&&(n._inputElement=a.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(e,n){2&e&&(t.Ikx("id",n.id),t.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),t.ekj("mat-checked",n.checked)("mat-disabled",n.disabled)("mat-slide-toggle-label-before","before"==n.labelPosition)("_mat-animation-noopable",n._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[t._Bn([Nt]),t.qOj],ngContentSelectors:It,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),t.NdJ("change",function(s){return n._onChangeEvent(s)})("click",function(s){return n._onInputClick(s)}),t.qZA(),t.TgZ(5,"span",5),t._UZ(6,"span",6),t.TgZ(7,"span",7),t._UZ(8,"span",8),t.qZA()()(),t.TgZ(9,"span",9,10),t.NdJ("cdkObserveContent",function(){return n._onLabelTextChange()}),t.TgZ(11,"span",11),t._uU(12,"\xa0"),t.qZA(),t.Hsn(13),t.qZA()()),2&e){const a=t.MAs(1),s=t.MAs(10);t.uIk("for",n.inputId),t.xp6(2),t.ekj("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),t.xp6(1),t.Q6J("id",n.inputId)("required",n.required)("tabIndex",n.tabIndex)("checked",n.checked)("disabled",n.disabled),t.uIk("name",n.name)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby),t.xp6(4),t.Q6J("matRippleTrigger",a)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",t.VKq(18,ot,n._noopAnimations?0:150))}},dependencies:[C.wG,q.wD],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),i})(),bt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),i})(),Ft=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[bt,C.si,C.BQ,q.Q8,bt,C.BQ]}),i})();var at=r(3848);let qt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.lN,M.c,f.Cq,T.LD,Ft,at.Nh,A.I]}),i})();var Bt=r(6093),Gt=r(3612);let Dt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.lN,M.c,A.I,Bt.i,Gt.e]}),i})();var E=r(1800),rt=r(655),Ht=r(5017),X=r(3668),G=r(240),L=r(591),Ct=r(6053),st=r(4843),D=r(1086),vt=r(8929),Yt=r(2654),$t=r(8896),tt=r(1059),J=r(4850),O=r(7625),h=r(7545),z=r(537),H=r(7221),et=r(2994),zt=r(3164),Kt=r(2198),lt=r(1712),it=r(8926),nt=r(9967),jt=r(2771),K=r(8523),V=r(2187),w=r(4889),Wt=r(9578),P=r(9077),xt=r(2218),wt=r(802),yt=r(2060),ct=r(6271),Zt=r(3058),U=r(6895),pt=r(4859),mt=r(7392),Tt=r(266),Ot=r(3051);function Xt(i,o){1&i&&(t.TgZ(0,"div",3),t._UZ(1,"mat-spinner"),t._uU(2," Cloning...\n"),t.qZA())}function te(i,o){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",+e.key),t.xp6(1),t.Oqu(e.value.credentialName)}}function ee(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clone())}),t.ALo(1,"async"),t.TgZ(2,"mat-form-field",5)(3,"mat-label"),t._uU(4,"URL"),t.qZA(),t.TgZ(5,"mat-icon",6),t._uU(6,"public"),t.qZA(),t._UZ(7,"input",7),t.qZA(),t.TgZ(8,"mat-form-field",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.browsePathIfEmpty())}),t.TgZ(9,"mat-label"),t._uU(10,"Path to clone to"),t.qZA(),t.TgZ(11,"mat-icon",6),t._uU(12,"folder"),t.qZA(),t._UZ(13,"input",9),t.TgZ(14,"button",10),t.NdJ("click",function(a){return t.CHM(e),t.oxw().browsePath(),t.KtG(a.stopPropagation())}),t._uU(15,"Browse"),t.qZA()(),t.TgZ(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Credential"),t.qZA(),t.TgZ(19,"mat-icon",6),t._uU(20,"key"),t.qZA(),t.TgZ(21,"mat-select",12)(22,"mat-option",13),t._uU(23,"None"),t.qZA(),t.YNc(24,te,2,2,"mat-option",14),t.ALo(25,"keyvalue"),t.ALo(26,"async"),t.qZA()(),t.TgZ(27,"button",15),t._uU(28,"Clone"),t.qZA()()}if(2&i){const e=t.oxw();t.ekj("vertical",t.lcZ(1,6,e.displayVertical)),t.Q6J("formGroup",e.form),t.xp6(22),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",t.lcZ(25,8,t.lcZ(26,10,e.validCredentials))),t.xp6(3),t.Q6J("disabled",e.form.invalid)}}function ie(i,o){if(1&i&&t._UZ(0,"app-avatar",28),2&i){const e=t.oxw().$implicit;t.Q6J("email",e.email)("type",e.type)}}function ne(i,o){if(1&i&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function oe(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"li",30),t.NdJ("click",function(){const s=t.CHM(e).$implicit,y=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.setFromIntegration(y,s))}),t.TgZ(1,"mat-icon",31),t._uU(2,"lock"),t.qZA(),t.TgZ(3,"span",32),t._uU(4),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(1),t.Udp("visibility",e.private?"visible":"hidden"),t.xp6(2),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name)}}function ae(i,o){1&i&&t._UZ(0,"mat-spinner",33),2&i&&t.Q6J("diameter",24)}function re(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-expansion-panel",19),t.NdJ("afterCollapse",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.updateViewportSizes())})("afterExpand",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.updateViewportSizes())}),t.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title",20)(3,"span",21),t._UZ(4,"mat-icon",22),t.YNc(5,ie,1,2,"app-avatar",23),t.qZA(),t.YNc(6,ne,2,2,"span",24),t.qZA()(),t.TgZ(7,"cdk-virtual-scroll-viewport",25)(8,"ul"),t.YNc(9,oe,5,4,"li",26),t.qZA()(),t.YNc(10,ae,1,1,"mat-spinner",27),t.ALo(11,"async"),t.qZA()}if(2&i){const e=o.$implicit,n=t.oxw(2);t.xp6(4),t.Q6J("svgIcon",e.type),t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("itemSize",29),t.xp6(2),t.Q6J("cdkVirtualForOf",e.dataSource)("cdkVirtualForTrackBy",n.trackByRepository),t.xp6(1),t.Q6J("ngIf",t.lcZ(11,7,e.dataSource.loading))}}function se(i,o){if(1&i&&(t.TgZ(0,"div",16),t.ALo(1,"async"),t.TgZ(2,"mat-accordion",17),t.YNc(3,re,12,9,"mat-expansion-panel",18),t.qZA()()),2&i){const e=t.oxw();t.ekj("vertical",t.lcZ(1,4,e.displayVertical)),t.xp6(3),t.Q6J("ngForOf",e.integrationsWithRepos)("ngForTrackBy",e.trackByIntegrations)}}let le=(()=>{class i extends((0,it.j)(nt.A,jt.P)){constructor(e,n,a,s,y,p,x,b){super(),this.elementRef=e,this.router=n,this.store=a,this.bitbucketApiService=s,this.gitHubApiService=y,this.gitLabApiService=p,this.filesApi=x,this.repositoriesApi=b,this.cloning=new L.X(!1),this.form=new l.cw({url:new l.NI(null,l.kI.required),path:new l.NI(null,l.kI.required),credential:new l.NI(null)}),this.validCredentials=(0,Ct.aj)([this.allCredentials,this.form.controls.url.valueChanges.pipe((0,tt.O)(null))]).pipe((0,J.U)(([v,g])=>{const u=[...v.entries()];return Object.fromEntries(g?/^https?:\/\//.test(g)?u.filter(([R,_])=>"password"===_.type||"oauth-bitbucket"===_.type||"oauth-github"===_.type||"oauth-gitlab"===_.type):/^(git|file)?:\/\//.test(g)||/^\//.test(g)||!/:/.test(g)?[]:u.filter(([R,_])=>"ssh"===_.type):u)})),this.integrationsWithRepos=[],this.displayVertical=new L.X(!1),this.browsePath=()=>{this.filesApi.openFolderDialog().pipe((0,O.R)(this.destroyed$)).subscribe(v=>{if(!v)return;const g=this.form.controls.url.value;if(null!==g){const R=/\/([^/]*?)(?:\.git)?\/?$/.exec(g);if(R)return void this.filesApi.getResolvedPath(v,R[1]).subscribe(_=>{this.form.controls.path.setValue(_)})}this.form.controls.path.setValue(v)})},this.browsePathIfEmpty=()=>{this.form.controls.path.value||this.browsePath()},this.clone=()=>{if(this.cloning.value)throw new Error("Already cloning");const{url:v,path:g,credential:u}=this.form.value;if(!v)throw new Error("Cannot clone repository with no url");if(!g)throw new Error("Cannot clone repository with no local path");const R=this.store.selectSnapshot(P.$.credentials);this.cloning.next(!0),this.repositoriesApi.cloneRepository(v,g,u?R.get(u):void 0).pipe((0,K.s)(_=>{lt.Ay.matches(_)||lt.T0.matches(_)||lt.o8.matches(_)?this.store.dispatch(new V.NN("error",_.message)):this.store.dispatch(new V.NN("unhandled",`${_}`))}),(0,h.w)(()=>this.store.dispatch(new w.gz(g))),(0,h.w)(()=>{const _=this.store.selectSnapshot(P.$.selectedProfile),Q=u&&"all"!==_?.credentialIds&&!_?.credentialIds.includes(u)?0:this.store.selectSnapshot(P.$.selectedProfileId),j=u?{remotes:{origin:{credentialId:u}}}:null;return _&&Q>0&&"all"!==_.allowedRepositories&&this.store.dispatch(new Wt.Bu(Q,{..._,allowedRepositories:[..._.allowedRepositories,g]})),this.store.dispatch(new w.xs(g,Q,j))}),(0,h.w)(()=>this.store.dispatch(new w.he(g))),(0,h.w)(()=>this.store.dispatch(new w.BZ(g))),(0,z.x)(()=>{this.cloning.next(!1)}),(0,O.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/standard/default"])})},this.updateViewportSizes=()=>{this.viewports.forEach(v=>v.checkViewportSize())}}get classVertical(){return this.displayVertical.value}ngOnInit(){this.integrationsWithRepos=this.store.selectSnapshot(P.$.integrations).flatMap(a=>{switch(a.type){case"github":{const s=()=>(0,st.z)((0,J.U)(p=>({next:p.next,values:p.values.map(x=>({type:"github",id:x.id,name:x.full_name,private:x.private,cloneUrl:x.clone_url}))})),(0,H.K)(p=>this.store.dispatch(new V.NN("error",`Failed to download repositories list from GitHub. ${p}`)).pipe((0,h.w)(()=>(0,D.of)({next:void 0,values:[]})))),(0,et.b)(()=>this.updateViewportSizes())),y=new dt(p=>this.gitHubApiService.getPage(p,a.id).pipe(s()),this.gitHubApiService.getRepositories(a.token).pipe(s()));return{type:"github",id:a.id,email:a.email,dataSource:y}}case"gitlab":{const s=()=>(0,st.z)((0,J.U)(p=>({next:p.next,values:p.values.map(x=>({type:"gitlab",id:x.id,name:x.path_with_namespace,private:"private"===x.visibility,cloneUrl:x.http_url_to_repo}))})),(0,H.K)(p=>this.store.dispatch(new V.NN("error",`Failed to download repositories list from GitLab. ${p}`)).pipe((0,h.w)(()=>(0,D.of)({next:void 0,values:[]})))),(0,et.b)(()=>this.updateViewportSizes())),y=new dt(p=>this.gitLabApiService.getPage(p,a.id).pipe(s()),this.gitLabApiService.getProjects(a).pipe(s()));return{type:"gitlab",id:a.id,email:a.email,dataSource:y}}case"bitbucket":{const s=()=>(0,st.z)((0,J.U)(p=>({next:p.next,values:p.values.map(x=>({type:"bitbucket",id:x.repository.uuid,name:x.repository.full_name,private:x.repository.is_private,cloneUrl:x.repository.links.clone[0].href}))})),(0,H.K)(p=>this.store.dispatch(new V.NN("error",`Failed to download repositories list from Bitbucket. ${p}`)).pipe((0,h.w)(()=>(0,D.of)({next:void 0,values:[]})))),(0,et.b)(()=>this.updateViewportSizes())),y=new dt(p=>this.bitbucketApiService.getPage(p,a.id).pipe(s()),this.bitbucketApiService.getRepositories(a).pipe(s()));return{type:"bitbucket",id:a.id,email:a.email,dataSource:y}}default:return[]}});const e=new vt.xQ,n=new ResizeObserver(()=>e.next());e.pipe((0,zt.p)(20,void 0,{leading:!0,trailing:!0}),(0,O.R)(this.destroyed$)).subscribe(()=>{this.displayVertical.next(this.elementRef.nativeElement.clientWidth<1040)}),n.observe(this.elementRef.nativeElement),this.destroyed$.subscribe(()=>n.disconnect())}setFromIntegration(e,n){this.form.controls.url.setValue(n.cloneUrl);const a="github"===e.type?s=>"oauth-github"===s.type&&s.gitHubId===e.id:"gitlab"===e.type?s=>"oauth-gitlab"===s.type&&s.gitLabId===e.id:"bitbucket"===e.type?s=>"oauth-bitbucket"===s.type&&s.bitbucketId===e.id:null;if(a){const s=[...this.store.selectSnapshot(P.$.credentials)].find(([y,p])=>a(p));s&&this.form.controls.credential.setValue(s[0])}}trackByIntegrations(e,n){return`${n.type}:${n.id}`}trackByRepository(e,n){return n.id}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(E.F0),t.Y36(G.yh),t.Y36(xt.L),t.Y36(wt.t),t.Y36(yt.T),t.Y36(ct.k),t.Y36(Zt.a))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-clone-repository-view"]],viewQuery:function(e,n){if(1&e&&t.Gf(X.N7,5),2&e){let a;t.iGM(a=t.CRH())&&(n.viewports=a)}},hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("vertical",n.classVertical)},features:[t.qOj],decls:6,vars:9,consts:[["class","cloning",4,"ngIf"],[3,"formGroup","vertical","ngSubmit",4,"ngIf"],["class","integrations",3,"vertical",4,"ngIf"],[1,"cloning"],[3,"formGroup","ngSubmit"],[1,"url"],["matPrefix",""],["type","text","matInput","","required","","formControlName","url"],[1,"path",3,"click"],["type","text","matInput","","required","","formControlName","path"],["type","button","matSuffix","","mat-button","",3,"click"],[1,"credential"],["formControlName","credential","placeholder","Select credential"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"integrations"],["multi",""],[3,"afterCollapse","afterExpand",4,"ngFor","ngForOf","ngForTrackBy"],[3,"afterCollapse","afterExpand"],[1,"info"],[1,"icons"],[3,"svgIcon"],[3,"email","type",4,"ngIf"],["class","email",3,"matTooltip",4,"ngIf"],[3,"itemSize"],[3,"click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"diameter",4,"ngIf"],[3,"email","type"],[1,"email",3,"matTooltip"],[3,"click"],["inline","","color","accent","matTooltip","Private"],[3,"matTooltip"],[3,"diameter"]],template:function(e,n){1&e&&(t.YNc(0,Xt,3,0,"div",0),t.ALo(1,"async"),t.YNc(2,ee,29,12,"form",1),t.ALo(3,"async"),t.YNc(4,se,4,6,"div",2),t.ALo(5,"async")),2&e&&(t.Q6J("ngIf",t.lcZ(1,3,n.cloning)),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,5,n.cloning)),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(5,7,n.cloning)))},dependencies:[k.pp,k.ib,k.yz,k.yK,d.KE,d.hX,d.qo,d.R9,M.Nt,f.Ou,T.gD,C.ey,X.xd,X.x0,X.N7,U.sg,U.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,pt.lW,mt.Hw,Tt.gM,Ot.A,U.Ov,U.Nd],styles:["[_nghost-%COMP%]{display:flex;height:100%;padding:10px}.vertical[_nghost-%COMP%]{display:block}.cloning[_ngcontent-%COMP%]{margin:10px;font-size:24px}.cloning[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:20px}form[_ngcontent-%COMP%]{max-width:500px;margin-bottom:20px;margin-right:20px}form.vertical[_ngcontent-%COMP%]{margin-right:0}form[_ngcontent-%COMP%]   .url[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .credential[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]     .mat-form-field-prefix{margin-right:10px}form[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]     .mat-form-field-suffix{top:-.25em}.integrations[_ngcontent-%COMP%]{display:flex}.integrations.vertical[_ngcontent-%COMP%]{max-height:calc(100% - 290px)}mat-accordion[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:500px;min-height:300px}mat-expansion-panel[_ngcontent-%COMP%]{flex-shrink:1;display:flex;flex-direction:column;min-height:48px}mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%]{min-height:167px}mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%] + mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%]{margin:0 0 16px}mat-expansion-panel.mat-expansion-panel-spacing[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{flex:0 0 auto;height:48px}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:64px}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{flex:0 0 auto;cursor:pointer}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{width:24px;height:24px;vertical-align:middle;margin:0 5px}mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content{overflow:hidden}mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content.ng-animating cdk-virtual-scroll-viewport{overflow-y:hidden}mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content .mat-expansion-panel-body{display:flex;flex-direction:column;overflow:hidden}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{contain:content;scrollbar-gutter:stable}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-spacer{position:relative}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:29px;line-height:29px;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}mat-expansion-panel[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px;margin-top:-2px}mat-expansion-panel[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{flex:0 0 auto;margin-top:10px}"],changeDetection:0}),(0,rt.gn)([(0,G.Ph)(P.$.credentials)],i.prototype,"allCredentials",void 0),i})();class dt extends Ht.o2{constructor(o,e,n=10,a=""){super(),this.getPage=o,this.buffer=n,this.type=a,this.loading=new L.X(!1),this.dataStream=new L.X([]),this.subscription=new Yt.w,this.maxRequested=new L.X(0),this.completed=new vt.xQ;const s=()=>{const y=(0,Ct.aj)([this.maxRequested,this.loading]).pipe((0,O.R)(this.completed),(0,Kt.h)(([p,x])=>!x&&p>this.dataStream.value.length-this.buffer),(0,et.b)(()=>this.loading.next(!0)),(0,h.w)(()=>("bitbucket"===this.type&&console.log("Getting next page",!!this.nextUrl),this.nextUrl?this.getPage(this.nextUrl):(this.completed.next(),this.completed.complete(),this.loading.next(!1),$t.E)))).subscribe(({next:p,values:x})=>{this.dataStream.next([...this.dataStream.value,...x]),this.nextUrl=p,this.loading.next(!1)});this.subscription.add(y)};"string"==typeof e||"number"==typeof e?(this.nextUrl=e,s()):e.subscribe(({next:y,values:p})=>{this.dataStream.next(p),this.nextUrl=y,s()})}connect(o){return this.subscription.add(o.viewChange.subscribe(e=>{e.end>this.maxRequested.value&&this.maxRequested.next(e.end)})),this.dataStream}disconnect(){this.subscription.unsubscribe()}}var gt=r(1737),ut=r(5154),ht=r(2986),Mt=r(744);function ce(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",14),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.create())}),t.TgZ(1,"div",15)(2,"mat-form-field",16),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.browsePathIfEmpty(a,s.localForm.controls.path))}),t.TgZ(3,"mat-label"),t._uU(4,"Path to create in"),t.qZA(),t.TgZ(5,"mat-icon",17),t._uU(6,"folder"),t.qZA(),t._UZ(7,"input",18),t.TgZ(8,"button",19),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.browsePath(a,s.localForm.controls.path))}),t._uU(9,"Browse"),t.qZA()(),t.TgZ(10,"mat-form-field",20)(11,"mat-label"),t._uU(12,"Default branch"),t.qZA(),t._UZ(13,"mat-icon",21)(14,"input",22),t.qZA()(),t.TgZ(15,"button",23),t._uU(16,"Create"),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.localForm),t.xp6(15),t.Q6J("disabled",e.localForm.invalid)}}function pe(i,o){if(1&i&&t._UZ(0,"app-avatar",37),2&i){const e=t.oxw().ngIf;t.Q6J("email",e.email)}}function me(i,o){if(1&i&&(t.TgZ(0,"span",3),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function de(i,o){if(1&i&&(t.ynx(0),t.YNc(1,pe,1,1,"app-avatar",35),t.YNc(2,me,2,2,"span",36),t.BQk()),2&i){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email)}}function ge(i,o){if(1&i&&t._UZ(0,"app-avatar",40),2&i){const e=t.oxw().$implicit;t.Q6J("email",e.email)}}function ue(i,o){if(1&i&&(t.TgZ(0,"span",3),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function he(i,o){if(1&i&&(t.TgZ(0,"mat-option",38),t.YNc(1,ge,1,1,"app-avatar",39),t.YNc(2,ue,2,2,"span",36),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email)}}function fe(i,o){if(1&i&&(t.ynx(0),t._UZ(1,"img",41),t.TgZ(2,"span",3),t._uU(3),t.qZA(),t.BQk()),2&i){const e=o.ngIf;t.xp6(1),t.Q6J("src",e.avatarUrl,t.LSH),t.xp6(1),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name)}}function _e(i,o){if(1&i&&(t.TgZ(0,"mat-option",38),t._UZ(1,"img",41),t.TgZ(2,"span",3),t._uU(3),t.qZA()()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("src",e.avatarUrl,t.LSH),t.xp6(1),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name)}}function be(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",24),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.createGitHub())}),t.TgZ(1,"div",15)(2,"mat-form-field",25)(3,"mat-label"),t._uU(4,"Credential"),t.qZA(),t.TgZ(5,"mat-select",26)(6,"mat-select-trigger"),t.YNc(7,de,3,2,"ng-container",27),t.qZA(),t.YNc(8,he,3,3,"mat-option",28),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"mat-form-field",29),t.ALo(11,"async"),t.TgZ(12,"mat-label"),t._uU(13,"Organization"),t.qZA(),t.TgZ(14,"mat-select",30)(15,"mat-select-trigger"),t.YNc(16,fe,4,3,"ng-container",27),t.qZA(),t.TgZ(17,"mat-option",31),t._uU(18,"None"),t.qZA(),t.YNc(19,_e,4,4,"mat-option",28),t.ALo(20,"async"),t.qZA(),t.TgZ(21,"mat-hint"),t._uU(22,"Leave blank to create the repository under your own user"),t.qZA()(),t.TgZ(23,"mat-form-field",32)(24,"mat-label"),t._uU(25,"Name"),t.qZA(),t.TgZ(26,"mat-icon",17),t._uU(27,"short_text"),t.qZA(),t._UZ(28,"input",33),t.qZA(),t.TgZ(29,"mat-form-field",16),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.browsePathIfEmpty(a,s.gitHubForm.controls.path))}),t.TgZ(30,"mat-label"),t._uU(31,"Path to create in"),t.qZA(),t.TgZ(32,"mat-icon",17),t._uU(33,"folder"),t.qZA(),t._UZ(34,"input",18),t.TgZ(35,"button",19),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.browsePath(a,s.gitHubForm.controls.path))}),t._uU(36,"Browse"),t.qZA()(),t.TgZ(37,"mat-form-field",20)(38,"mat-label"),t._uU(39,"Default branch"),t.qZA(),t._UZ(40,"mat-icon",21)(41,"input",22),t.qZA()(),t.TgZ(42,"button",23),t._uU(43,"Create"),t.qZA(),t.TgZ(44,"mat-slide-toggle",34),t._uU(45,"Private"),t.qZA()()}if(2&i){const e=t.oxw();let n;t.Q6J("formGroup",e.gitHubForm),t.xp6(7),t.Q6J("ngIf",e.gitHubForm.controls.credential.value),t.xp6(1),t.Q6J("ngForOf",t.lcZ(9,9,e.validGitHubCredentials)),t.xp6(2),t.ekj("show",null==(n=t.lcZ(11,11,e.validGitHubOrganizations))?null:n.length),t.xp6(6),t.Q6J("ngIf",e.gitHubForm.controls.organization.value),t.xp6(1),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",t.lcZ(20,13,e.validGitHubOrganizations)),t.xp6(23),t.Q6J("disabled",e.gitHubForm.invalid)}}function Ce(i,o){if(1&i&&t._UZ(0,"app-avatar",46),2&i){const e=t.oxw().ngIf;t.Q6J("email",e.email)}}function ve(i,o){if(1&i&&(t.TgZ(0,"span",3),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function xe(i,o){if(1&i&&(t.ynx(0),t.YNc(1,Ce,1,1,"app-avatar",45),t.YNc(2,ve,2,2,"span",36),t.BQk()),2&i){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email)}}function we(i,o){if(1&i&&t._UZ(0,"app-avatar",48),2&i){const e=t.oxw().$implicit;t.Q6J("email",e.email)}}function ye(i,o){if(1&i&&(t.TgZ(0,"span",3),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function Ze(i,o){if(1&i&&(t.TgZ(0,"mat-option",38),t.YNc(1,we,1,1,"app-avatar",47),t.YNc(2,ye,2,2,"span",36),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email)}}function Te(i,o){if(1&i&&t._UZ(0,"img",41),2&i){const e=t.oxw().ngIf;t.Q6J("src",e.avatarUrl,t.LSH)}}function Oe(i,o){if(1&i&&(t.ynx(0),t.YNc(1,Te,1,1,"img",49),t.TgZ(2,"span",3),t._uU(3),t.qZA(),t.BQk()),2&i){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.avatarUrl),t.xp6(1),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name)}}function Me(i,o){if(1&i&&t._UZ(0,"img",41),2&i){const e=t.oxw().$implicit;t.Q6J("src",e.avatarUrl,t.LSH)}}function Ae(i,o){if(1&i&&(t.TgZ(0,"mat-option",38),t.YNc(1,Me,1,1,"img",49),t.TgZ(2,"span",3),t._uU(3),t.qZA()()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("ngIf",e.avatarUrl),t.xp6(1),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name)}}function ke(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",42),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.createGitLab())}),t.TgZ(1,"div",15)(2,"mat-form-field",25)(3,"mat-label"),t._uU(4,"Credential"),t.qZA(),t.TgZ(5,"mat-select",26)(6,"mat-select-trigger"),t.YNc(7,xe,3,2,"ng-container",27),t.qZA(),t.YNc(8,Ze,3,3,"mat-option",28),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"mat-form-field",43),t.ALo(11,"async"),t.TgZ(12,"mat-label"),t._uU(13,"Namespace"),t.qZA(),t.TgZ(14,"mat-select",44)(15,"mat-select-trigger"),t.YNc(16,Oe,4,3,"ng-container",27),t.qZA(),t.TgZ(17,"mat-option",31),t._uU(18,"None"),t.qZA(),t.YNc(19,Ae,4,4,"mat-option",28),t.ALo(20,"async"),t.qZA(),t.TgZ(21,"mat-hint"),t._uU(22,"Leave blank to create the repository under your own user"),t.qZA()(),t.TgZ(23,"mat-form-field",32)(24,"mat-label"),t._uU(25,"Name"),t.qZA(),t.TgZ(26,"mat-icon",17),t._uU(27,"short_text"),t.qZA(),t._UZ(28,"input",33),t.qZA(),t.TgZ(29,"mat-form-field",16),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.browsePathIfEmpty(a,s.gitLabForm.controls.path))}),t.TgZ(30,"mat-label"),t._uU(31,"Path to create in"),t.qZA(),t.TgZ(32,"mat-icon",17),t._uU(33,"folder"),t.qZA(),t._UZ(34,"input",18),t.TgZ(35,"button",19),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.browsePath(a,s.gitLabForm.controls.path))}),t._uU(36,"Browse"),t.qZA()(),t.TgZ(37,"mat-form-field",20)(38,"mat-label"),t._uU(39,"Default branch"),t.qZA(),t._UZ(40,"mat-icon",21)(41,"input",22),t.qZA()(),t.TgZ(42,"button",23),t._uU(43,"Create"),t.qZA(),t.TgZ(44,"mat-slide-toggle",34),t._uU(45,"Private"),t.qZA()()}if(2&i){const e=t.oxw();let n;t.Q6J("formGroup",e.gitLabForm),t.xp6(7),t.Q6J("ngIf",e.gitLabForm.controls.credential.value),t.xp6(1),t.Q6J("ngForOf",t.lcZ(9,9,e.validGitLabCredentials)),t.xp6(2),t.ekj("show",null==(n=t.lcZ(11,11,e.validGitLabNamespaces))?null:n.length),t.xp6(6),t.Q6J("ngIf",e.gitLabForm.controls.namespace.value),t.xp6(1),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",t.lcZ(20,13,e.validGitLabNamespaces)),t.xp6(23),t.Q6J("disabled",e.gitLabForm.invalid)}}function Pe(i,o){if(1&i&&t._UZ(0,"app-avatar",54),2&i){const e=t.oxw().ngIf;t.Q6J("email",e.email)}}function Re(i,o){if(1&i&&(t.TgZ(0,"span",3),t._uU(1),t.qZA()),2&i){const e=t.oxw().ngIf;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function Ie(i,o){if(1&i&&(t.ynx(0),t.YNc(1,Pe,1,1,"app-avatar",53),t.YNc(2,Re,2,2,"span",36),t.BQk()),2&i){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email)}}function Ve(i,o){if(1&i&&t._UZ(0,"app-avatar",56),2&i){const e=t.oxw().$implicit;t.Q6J("email",e.email)}}function Ue(i,o){if(1&i&&(t.TgZ(0,"span",3),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("matTooltip",e.email),t.xp6(1),t.Oqu(e.email)}}function Ne(i,o){if(1&i&&(t.TgZ(0,"mat-option",38),t.YNc(1,Ve,1,1,"app-avatar",55),t.YNc(2,Ue,2,2,"span",36),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("ngIf",e.email),t.xp6(1),t.Q6J("ngIf",e.email)}}function Se(i,o){if(1&i&&t._UZ(0,"img",41),2&i){const e=t.oxw().ngIf;t.Q6J("src",e.avatarUrl,t.LSH)}}function Je(i,o){if(1&i&&(t.ynx(0),t.YNc(1,Se,1,1,"img",49),t.TgZ(2,"span",3),t._uU(3),t.qZA(),t.BQk()),2&i){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.avatarUrl),t.xp6(1),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name)}}function Le(i,o){if(1&i&&t._UZ(0,"img",41),2&i){const e=t.oxw().$implicit;t.Q6J("src",e.avatarUrl,t.LSH)}}function Qe(i,o){if(1&i&&(t.TgZ(0,"mat-option",38),t.YNc(1,Le,1,1,"img",49),t.TgZ(2,"span",3),t._uU(3),t.qZA()()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("ngIf",e.avatarUrl),t.xp6(1),t.Q6J("matTooltip",e.name),t.xp6(1),t.Oqu(e.name)}}function Ee(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",50),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.createBitbucket())}),t.TgZ(1,"div",15)(2,"mat-form-field",25)(3,"mat-label"),t._uU(4,"Credential"),t.qZA(),t.TgZ(5,"mat-select",26)(6,"mat-select-trigger"),t.YNc(7,Ie,3,2,"ng-container",27),t.qZA(),t.YNc(8,Ne,3,3,"mat-option",28),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"mat-form-field",51),t.ALo(11,"async"),t.TgZ(12,"mat-label"),t._uU(13,"Workspace"),t.qZA(),t.TgZ(14,"mat-select",52)(15,"mat-select-trigger"),t.YNc(16,Je,4,3,"ng-container",27),t.qZA(),t.YNc(17,Qe,4,4,"mat-option",28),t.ALo(18,"async"),t.qZA()(),t.TgZ(19,"mat-form-field",32)(20,"mat-label"),t._uU(21,"Name"),t.qZA(),t.TgZ(22,"mat-icon",17),t._uU(23,"short_text"),t.qZA(),t._UZ(24,"input",33),t.qZA(),t.TgZ(25,"mat-form-field",16),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.browsePathIfEmpty(a,s.bitbucketForm.controls.path))}),t.TgZ(26,"mat-label"),t._uU(27,"Path to create in"),t.qZA(),t.TgZ(28,"mat-icon",17),t._uU(29,"folder"),t.qZA(),t._UZ(30,"input",18),t.TgZ(31,"button",19),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.browsePath(a,s.bitbucketForm.controls.path))}),t._uU(32,"Browse"),t.qZA()(),t.TgZ(33,"mat-form-field",20)(34,"mat-label"),t._uU(35,"Default branch"),t.qZA(),t._UZ(36,"mat-icon",21)(37,"input",22),t.qZA()(),t.TgZ(38,"button",23),t._uU(39,"Create"),t.qZA(),t.TgZ(40,"mat-slide-toggle",34),t._uU(41,"Private"),t.qZA()()}if(2&i){const e=t.oxw();let n;t.Q6J("formGroup",e.bitbucketForm),t.xp6(7),t.Q6J("ngIf",e.bitbucketForm.controls.credential.value),t.xp6(1),t.Q6J("ngForOf",t.lcZ(9,8,e.validBitbucketCredentials)),t.xp6(2),t.ekj("show",null==(n=t.lcZ(11,10,e.validBitbucketWorkspaces))?null:n.length),t.xp6(6),t.Q6J("ngIf",e.bitbucketForm.controls.workspace.value),t.xp6(1),t.Q6J("ngForOf",t.lcZ(18,12,e.validBitbucketWorkspaces)),t.xp6(21),t.Q6J("disabled",e.bitbucketForm.invalid)}}function Fe(i,o){1&i&&(t.TgZ(0,"div",57),t._UZ(1,"mat-spinner"),t._uU(2," Creating... "),t.qZA())}let qe=(()=>{class i extends((0,it.j)(nt.A)){constructor(e,n,a,s,y,p,x){super(),this.router=e,this.store=n,this.filesApi=a,this.bitbucketApi=s,this.gitHubApi=y,this.gitLabApi=p,this.repositoriesApi=x,this.view=new L.X("local"),this.localForm=new l.cw({path:new l.NI(null,l.kI.required),defaultBranch:new l.NI("main",{nonNullable:!0})}),this.bitbucketForm=new l.cw({credential:new l.NI(null,l.kI.required),workspace:new l.NI(null,l.kI.required),name:new l.NI(null,l.kI.required),private:new l.NI(!1,{nonNullable:!0,validators:l.kI.required}),path:new l.NI(null,l.kI.required),defaultBranch:new l.NI("main",{nonNullable:!0})}),this.validBitbucketWorkspaces=new L.X([]),this.gitHubForm=new l.cw({credential:new l.NI(null,l.kI.required),organization:new l.NI(null),name:new l.NI(null,l.kI.required),private:new l.NI(!1,{nonNullable:!0,validators:l.kI.required}),path:new l.NI(null,l.kI.required),defaultBranch:new l.NI("main",{nonNullable:!0})}),this.validGitHubOrganizations=new L.X([]),this.gitLabForm=new l.cw({credential:new l.NI(null,l.kI.required),namespace:new l.NI(null),name:new l.NI(null,l.kI.required),private:new l.NI(!1,{nonNullable:!0,validators:l.kI.required}),path:new l.NI(null,l.kI.required),defaultBranch:new l.NI("main",{nonNullable:!0})}),this.validGitLabNamespaces=new L.X([]),this.browsePath=(b,v)=>{b.preventDefault(),b.stopPropagation(),this.filesApi.openFolderDialog().pipe((0,O.R)(this.destroyed$)).subscribe(g=>{g&&v.setValue(g)})},this.browsePathIfEmpty=(b,v)=>{v.value||this.browsePath(b,v)},this.create=()=>{if("creating"===this.view.value)throw new Error("Already creating");const{path:b,defaultBranch:v}=this.localForm.value;if(!b)throw new Error("Cannot create repository with no local path.");const g=this.view.value;this.view.next("creating"),this.repositoriesApi.createRepository(b,v??"main").pipe((0,K.s)(u=>this.store.dispatch(new V.NN("unhandled",`${u}`))),(0,h.w)(()=>this.store.dispatch(new w.gz(b))),(0,h.w)(()=>this.store.dispatch(new w.he(b))),(0,h.w)(()=>this.store.dispatch(new w.BZ(b))),(0,z.x)(()=>{this.view.next(g)})).subscribe(()=>{this.router.navigate(["/standard/default"])})},this.createBitbucket=()=>{if("creating"===this.view.value)throw new Error("Already creating");const{credential:b,workspace:v,name:g,path:u,private:R,defaultBranch:_}=this.bitbucketForm.getRawValue();if(!b)throw new Error("Cannot create Bitbucket repository without a credential.");if(!g)throw new Error("Cannot create Bitbucket repository with no name.");if(!u)throw new Error("Cannot create Bitbucket repository with no local path.");if(!v)throw new Error("Cannot create Bitbucket repository with no workspace.");const Q=this.view.value;this.view.next("creating");const Y=[...this.store.selectSnapshot(P.$.credentials)].find(([I,N])=>"oauth-bitbucket"===N.type&&N.bitbucketId===b.bitbucketId);if(!Y)throw new Error("Cannot create Bitbucket repository without a credential.");const $=new Map([[this.store.selectSnapshot(P.$.selectedProfileId),{remotes:{origin:{credentialId:Y[0]}}}]]);this.bitbucketApi.createRepository({...b,id:b.bitbucketId},g,R,v.id).pipe((0,H.K)(I=>(0,gt._)(new Error("Couldn't create repository on Bitbucket. Check your credentials are valid."))),(0,h.w)(I=>this.repositoriesApi.createRepository(u,_??"main",I?.links.clone[0].href)),(0,K.s)(I=>this.store.dispatch(new V.NN("unhandled",`${I}`))),(0,h.w)(()=>this.store.dispatch(new w.gz(u,{profiles:$}))),(0,h.w)(()=>this.store.dispatch(new w.he(u))),(0,h.w)(()=>this.store.dispatch(new w.BZ(u))),(0,z.x)(()=>{this.view.next(Q)})).subscribe(()=>{this.router.navigate(["/standard/default"])})},this.createGitHub=()=>{if("creating"===this.view.value)throw new Error("Already creating");const{credential:b,organization:v,name:g,path:u,private:R,defaultBranch:_}=this.gitHubForm.getRawValue();if(!b)throw new Error("Cannot create GitHub repository without a credential.");if(!g)throw new Error("Cannot create GitHub repository with no name.");if(!u)throw new Error("Cannot create GitHub repository with no local path.");const Q=this.view.value;this.view.next("creating");const j=v?this.gitHubApi.createOrganizationRepository(b.token,v.name,g,R):this.gitHubApi.createRepository(b.token,g,R),$=[...this.store.selectSnapshot(P.$.credentials)].find(([N,Rt])=>"oauth-github"===Rt.type&&Rt.gitHubId===b.gitHubId);if(!$)throw new Error("Cannot create GitHub repository without a credential.");const I=new Map([[this.store.selectSnapshot(P.$.selectedProfileId),{remotes:{origin:{credentialId:$[0]}}}]]);j.pipe((0,H.K)(N=>(0,gt._)(new Error("Couldn't create repository on GitHub. Check your credentials are valid."))),(0,h.w)(N=>this.repositoriesApi.createRepository(u,_??"main",N?.clone_url)),(0,K.s)(N=>this.store.dispatch(new V.NN("unhandled",`${N}`))),(0,h.w)(()=>this.store.dispatch(new w.gz(u,{profiles:I}))),(0,h.w)(()=>this.store.dispatch(new w.he(u))),(0,h.w)(()=>this.store.dispatch(new w.BZ(u))),(0,z.x)(()=>{this.view.next(Q)})).subscribe(()=>{this.router.navigate(["/standard/default"])})},this.createGitLab=()=>{if("creating"===this.view.value)throw new Error("Already creating");const{credential:b,namespace:v,name:g,path:u,private:R,defaultBranch:_}=this.gitLabForm.getRawValue();if(!b)throw new Error("Cannot create GitLab repository without a credential.");if(!g)throw new Error("Cannot create GitLab repository with no name.");if(!u)throw new Error("Cannot create GitLab repository with no local path.");const Q=this.view.value;this.view.next("creating");const Y=[...this.store.selectSnapshot(P.$.credentials)].find(([I,N])=>"oauth-gitlab"===N.type&&N.gitLabId===b.gitLabId);if(!Y)throw new Error("Cannot create GitLab repository without a credential.");const $=new Map([[this.store.selectSnapshot(P.$.selectedProfileId),{remotes:{origin:{credentialId:Y[0]}}}]]);this.gitLabApi.createProject({...b,id:b.gitLabId},g,R,v?.id).pipe((0,H.K)(I=>(0,gt._)(new Error("Couldn't create repository on GitLab. Check your credentials are valid."))),(0,h.w)(I=>this.repositoriesApi.createRepository(u,_??"main",I?.http_url_to_repo)),(0,K.s)(I=>this.store.dispatch(new V.NN("unhandled",`${I}`))),(0,h.w)(()=>this.store.dispatch(new w.gz(u,{profiles:$}))),(0,h.w)(()=>this.store.dispatch(new w.he(u))),(0,h.w)(()=>this.store.dispatch(new w.BZ(u))),(0,z.x)(()=>{this.view.next(Q)})).subscribe(()=>{this.router.navigate(["/standard/default"])})}}ngOnInit(){this.validBitbucketCredentials=this.allCredentials.pipe((0,J.U)(e=>[...e.values()].filter(n=>"oauth-bitbucket"===n.type)),(0,O.R)(this.destroyed$),(0,ut.d)(1)),this.bitbucketForm.controls.credential.valueChanges.pipe((0,tt.O)(this.bitbucketForm.controls.credential.value),(0,h.w)(e=>e?this.bitbucketApi.getWorkspaces({...e,id:e.bitbucketId}).pipe((0,J.U)(n=>(n??[]).sort((a,s)=>"owner"===a.permission?-1:0).map(({workspace:a})=>({id:a.uuid,name:a.name,avatarUrl:a.links.avatar.href})))):(0,D.of)([])),(0,O.R)(this.destroyed$)).subscribe(e=>{this.validBitbucketWorkspaces.next(e),!this.bitbucketForm.controls.workspace.value&&e.length>0&&this.bitbucketForm.controls.workspace.setValue(e[0])}),this.validBitbucketCredentials.pipe((0,ht.q)(1)).subscribe(e=>{this.bitbucketForm.controls.credential.setValue(e[0]??null)}),this.validGitHubCredentials=this.allCredentials.pipe((0,J.U)(e=>[...e.values()].filter(n=>"oauth-github"===n.type)),(0,O.R)(this.destroyed$),(0,ut.d)(1)),this.gitHubForm.controls.credential.valueChanges.pipe((0,tt.O)(this.gitHubForm.controls.credential.value),(0,h.w)(e=>e?this.gitHubApi.getOrganizations(e.token).pipe((0,J.U)(n=>n.map(a=>({name:a.login,avatarUrl:a.avatar_url})))):(0,D.of)([])),(0,O.R)(this.destroyed$)).subscribe(e=>{this.validGitHubOrganizations.next(e)}),this.validGitHubCredentials.pipe((0,ht.q)(1)).subscribe(e=>{this.gitHubForm.controls.credential.setValue(e[0]??null)}),this.validGitLabCredentials=this.allCredentials.pipe((0,J.U)(e=>[...e.values()].filter(n=>"oauth-gitlab"===n.type)),(0,O.R)(this.destroyed$),(0,ut.d)(1)),this.gitLabForm.controls.credential.valueChanges.pipe((0,tt.O)(this.gitLabForm.controls.credential.value),(0,h.w)(e=>e?this.gitLabApi.getNamespaces({...e,id:e.gitLabId}).pipe((0,J.U)(n=>n.filter(a=>"group"===a.kind).map(a=>({id:a.id,name:a.name,avatarUrl:a.avatar_url})))):(0,D.of)([])),(0,O.R)(this.destroyed$)).subscribe(e=>{this.validGitLabNamespaces.next(e)}),this.validGitLabCredentials.pipe((0,ht.q)(1)).subscribe(e=>{this.gitLabForm.controls.credential.setValue(e[0]??null)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(E.F0),t.Y36(G.yh),t.Y36(ct.k),t.Y36(xt.L),t.Y36(wt.t),t.Y36(yt.T),t.Y36(Zt.a))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-repository-view"]],features:[t.qOj],decls:40,vars:50,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","click"],[1,"prefix"],[3,"matTooltip"],["mat-tab-link","",3,"active","disabled","click"],["svgIcon","github",1,"prefix"],["svgIcon","gitlab",1,"prefix"],["svgIcon","bitbucket",1,"prefix"],[3,"ngSwitch"],["class","local",3,"formGroup","ngSubmit",4,"ngSwitchCase"],["class","github",3,"formGroup","ngSubmit",4,"ngSwitchCase"],["class","gitlab",3,"formGroup","ngSubmit",4,"ngSwitchCase"],["class","bitbucket",3,"formGroup","ngSubmit",4,"ngSwitchCase"],["class","cloning",4,"ngSwitchCase"],[1,"local",3,"formGroup","ngSubmit"],[1,"form-fields"],[1,"path",3,"click"],["matPrefix",""],["type","text","matInput","","required","","formControlName","path"],["type","button","matSuffix","","mat-button","",3,"click"],[1,"default-branch"],["matPrefix","","svgIcon","source-branch"],["type","text","placeholder","main","matInput","","formControlName","defaultBranch"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"github",3,"formGroup","ngSubmit"],[1,"credential-selector"],["formControlName","credential"],[4,"ngIf"],["class","create-repository-select-option",3,"value",4,"ngFor","ngForOf"],[1,"organization-selector"],["formControlName","organization"],[3,"value"],[1,"name"],["type","text","matInput","","formControlName","name"],["formControlName","private"],["type","github",3,"email",4,"ngIf"],[3,"matTooltip",4,"ngIf"],["type","github",3,"email"],[1,"create-repository-select-option",3,"value"],["class","create-repository-select-avatar","type","github",3,"email",4,"ngIf"],["type","github",1,"create-repository-select-avatar",3,"email"],[3,"src"],[1,"gitlab",3,"formGroup","ngSubmit"],[1,"namespace-selector"],["formControlName","namespace"],["type","gitlab",3,"email",4,"ngIf"],["type","gitlab",3,"email"],["class","create-repository-select-avatar","type","gitlab",3,"email",4,"ngIf"],["type","gitlab",1,"create-repository-select-avatar",3,"email"],[3,"src",4,"ngIf"],[1,"bitbucket",3,"formGroup","ngSubmit"],[1,"workspace-selector"],["formControlName","workspace"],["type","bitbucket",3,"email",4,"ngIf"],["type","bitbucket",3,"email"],["class","create-repository-select-avatar","type","bitbucket",3,"email",4,"ngIf"],["type","bitbucket",1,"create-repository-select-avatar",3,"email"],[1,"cloning"]],template:function(e,n){1&e&&(t.TgZ(0,"nav",0)(1,"a",1),t.NdJ("click",function(){return n.view.next("local")}),t.ALo(2,"async"),t.TgZ(3,"mat-icon",2),t._uU(4,"desktop_windows"),t.qZA(),t._uU(5," Local "),t.qZA(),t.TgZ(6,"span",3),t.ALo(7,"nullEmpty"),t.ALo(8,"async"),t.TgZ(9,"a",4),t.NdJ("click",function(){return n.view.next("github")}),t.ALo(10,"async"),t.ALo(11,"nullEmpty"),t.ALo(12,"async"),t._UZ(13,"mat-icon",5),t._uU(14," GitHub "),t.qZA()(),t.TgZ(15,"span",3),t.ALo(16,"nullEmpty"),t.ALo(17,"async"),t.TgZ(18,"a",4),t.NdJ("click",function(){return n.view.next("gitlab")}),t.ALo(19,"async"),t.ALo(20,"nullEmpty"),t.ALo(21,"async"),t._UZ(22,"mat-icon",6),t._uU(23," GitLab "),t.qZA()(),t.TgZ(24,"span",3),t.ALo(25,"nullEmpty"),t.ALo(26,"async"),t.TgZ(27,"a",4),t.NdJ("click",function(){return n.view.next("bitbucket")}),t.ALo(28,"async"),t.ALo(29,"nullEmpty"),t.ALo(30,"async"),t._UZ(31,"mat-icon",7),t._uU(32," Bitbucket "),t.qZA()()(),t.ynx(33,8),t.ALo(34,"async"),t.YNc(35,ce,17,2,"form",9),t.YNc(36,be,46,15,"form",10),t.YNc(37,ke,46,15,"form",11),t.YNc(38,Ee,42,14,"form",12),t.YNc(39,Fe,3,0,"div",13),t.BQk()),2&e&&(t.xp6(1),t.Q6J("active","local"===t.lcZ(2,16,n.view)),t.xp6(5),t.Q6J("matTooltip",t.lcZ(7,18,t.lcZ(8,20,n.validGitHubCredentials))?"":"To create repositories on GitHub, go to settings and add an integration"),t.xp6(3),t.Q6J("active","github"===t.lcZ(10,22,n.view))("disabled",!t.lcZ(11,24,t.lcZ(12,26,n.validGitHubCredentials))),t.xp6(6),t.Q6J("matTooltip",t.lcZ(16,28,t.lcZ(17,30,n.validGitLabCredentials))?"":"To create repositories on GitLab, go to settings and add an integration"),t.xp6(3),t.Q6J("active","gitlab"===t.lcZ(19,32,n.view))("disabled",!t.lcZ(20,34,t.lcZ(21,36,n.validGitLabCredentials))),t.xp6(6),t.Q6J("matTooltip",t.lcZ(25,38,t.lcZ(26,40,n.validBitbucketCredentials))?"":"To create repositories on Bitbucket, go to settings and add an integration"),t.xp6(3),t.Q6J("active","bitbucket"===t.lcZ(28,42,n.view))("disabled",!t.lcZ(29,44,t.lcZ(30,46,n.validBitbucketCredentials))),t.xp6(6),t.Q6J("ngSwitch",t.lcZ(34,48,n.view)),t.xp6(2),t.Q6J("ngSwitchCase","local"),t.xp6(1),t.Q6J("ngSwitchCase","github"),t.xp6(1),t.Q6J("ngSwitchCase","gitlab"),t.xp6(1),t.Q6J("ngSwitchCase","bitbucket"),t.xp6(1),t.Q6J("ngSwitchCase","creating"))},dependencies:[d.KE,d.bx,d.hX,d.qo,d.R9,M.Nt,f.Ou,T.gD,T.$L,C.ey,_t,at.BU,at.Nj,U.sg,U.O5,U.RF,U.n9,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,pt.lW,mt.Hw,Tt.gM,Ot.A,U.Ov,Mt.x],styles:["[_nghost-%COMP%]{display:block;padding:10px}nav[_ngcontent-%COMP%]{margin-bottom:10px}nav[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{margin-right:10px}.local[_ngcontent-%COMP%], .github[_ngcontent-%COMP%], .gitlab[_ngcontent-%COMP%], .bitbucket[_ngcontent-%COMP%]{max-width:1010px}.local[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%], .gitlab[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%], .bitbucket[_ngcontent-%COMP%]   .form-fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.local[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .local[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%], .gitlab[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .gitlab[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%], .bitbucket[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .bitbucket[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:500px}.local[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%], .gitlab[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%], .bitbucket[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{height:20px;width:20px;line-height:0;vertical-align:middle;margin-right:5px}.local[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .gitlab[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .bitbucket[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px;width:20px;display:inline-block;border-radius:10%;vertical-align:middle;margin-right:5px}.local[_ngcontent-%COMP%]   .organization-selector[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   .organization-selector[_ngcontent-%COMP%], .gitlab[_ngcontent-%COMP%]   .organization-selector[_ngcontent-%COMP%], .bitbucket[_ngcontent-%COMP%]   .organization-selector[_ngcontent-%COMP%]{display:none}.local[_ngcontent-%COMP%]   .organization-selector.show[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   .organization-selector.show[_ngcontent-%COMP%], .gitlab[_ngcontent-%COMP%]   .organization-selector.show[_ngcontent-%COMP%], .bitbucket[_ngcontent-%COMP%]   .organization-selector.show[_ngcontent-%COMP%]{display:block}.local[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%], .github[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%], .gitlab[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%], .bitbucket[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin-left:20px}.local[_ngcontent-%COMP%]     .mat-form-field-prefix, .github[_ngcontent-%COMP%]     .mat-form-field-prefix, .gitlab[_ngcontent-%COMP%]     .mat-form-field-prefix, .bitbucket[_ngcontent-%COMP%]     .mat-form-field-prefix{margin-right:10px}.local[_ngcontent-%COMP%]     .mat-form-field-suffix, .github[_ngcontent-%COMP%]     .mat-form-field-suffix, .gitlab[_ngcontent-%COMP%]     .mat-form-field-suffix, .bitbucket[_ngcontent-%COMP%]     .mat-form-field-suffix{top:-.25em}"],changeDetection:0}),(0,rt.gn)([(0,G.Ph)(P.$.credentials)],i.prototype,"allCredentials",void 0),i})();var Be=r(6966),At=r(9251),ft=r(3546),kt=r(5724),Pt=r(3943),Ge=r(5174);function De(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.searchControl.setValue(null))}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function He(i,o){if(1&i&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"Search"),t.qZA(),t.TgZ(3,"span",8)(4,"mat-icon"),t._uU(5,"search"),t.qZA(),t._uU(6,"\xa0"),t.qZA(),t._UZ(7,"input",9),t.YNc(8,De,3,0,"button",10),t.qZA()),2&i){const e=t.oxw();t.xp6(7),t.Q6J("formControl",e.searchControl),t.xp6(1),t.Q6J("ngIf",e.searchControl.value)}}function Ye(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),t._uU(3,"history"),t.qZA(),t._uU(4," Recently opened"),t.qZA(),t.TgZ(5,"mat-card-content")(6,"app-repository-history-view",12),t.NdJ("clicked",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.openRecent(a))})("dragStarted",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.dragstartListener(a[0],a[1]))}),t.qZA()()()}}let $e=(()=>{class i extends((0,it.j)(nt.A)){constructor(e,n,a){super(),this.router=e,this.store=n,this.filesApi=a,this.searchControl=new l.NI(null),this.openBookmark=s=>{(0,At.b)(s)||this.store.dispatch(new w.he(s.id)).pipe((0,h.w)(()=>this.store.dispatch(new w.BZ(s.id))),(0,O.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/standard/default"])})},this.openRecent=s=>{this.store.dispatch(new w.he(s)).pipe((0,h.w)(()=>this.store.dispatch(new w.BZ(s))),(0,O.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/standard/default"])})},this.openFromDisk=()=>{this.filesApi.openFolderDialog().pipe((0,O.R)(this.destroyed$)).subscribe(s=>{s&&this.store.dispatch(new w.gz(s)).pipe((0,h.w)(()=>this.store.dispatch(new w.he(s))),(0,h.w)(()=>this.store.dispatch(new w.BZ(s))),(0,O.R)(this.destroyed$)).subscribe(()=>{this.router.navigate(["/standard/default"])})})},this.dragstartListener=(s,y)=>{s.dataTransfer&&(s.dataTransfer.setData("app/repository",y),s.dataTransfer.effectAllowed="move")}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(E.F0),t.Y36(G.yh),t.Y36(ct.k))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-open-repository-view"]],features:[t.qOj],decls:20,vars:6,consts:[["type","button","mat-flat-button","",1,"open-from-disk-button",3,"click"],["class","search-box",4,"ngIf"],["id","open-repository-view"],["min","210px"],[3,"nodeClick"],["min","300px"],[4,"ngIf"],[1,"search-box"],["matPrefix",""],["matInput","","type","text",3,"formControl"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["matSuffix","","mat-icon-button","",3,"click"],[3,"clicked","dragStarted"]],template:function(e,n){1&e&&(t.TgZ(0,"header")(1,"button",0),t.NdJ("click",function(){return n.openFromDisk()}),t.TgZ(2,"mat-icon"),t._uU(3,"folder_open"),t.qZA(),t._uU(4," Open from disk "),t.qZA(),t.YNc(5,He,9,2,"mat-form-field",1),t.qZA(),t.TgZ(6,"main")(7,"app-grid",2)(8,"app-grid-cell",3)(9,"mat-card")(10,"mat-card-title")(11,"mat-icon"),t._uU(12,"bookmarks"),t.qZA(),t._uU(13," Bookmarks"),t.qZA(),t.TgZ(14,"mat-card-content")(15,"app-repository-bookmarks-view",4),t.NdJ("nodeClick",function(s){return n.openBookmark(s)}),t.qZA()()()(),t.TgZ(16,"app-grid-cell",5),t.YNc(17,Ye,7,0,"mat-card",6),t.ALo(18,"nullEmpty"),t.ALo(19,"async"),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",!1),t.xp6(12),t.Q6J("ngIf",t.lcZ(18,2,t.lcZ(19,4,n.recentRepositories))))},dependencies:[d.KE,d.hX,d.qo,d.R9,M.Nt,U.O5,l.Fj,l.JJ,l.oH,pt.lW,ft.a8,ft.dn,ft.n5,mt.Hw,kt.Y,Pt.M,At.j,Ge.J,U.Ov,Mt.x],styles:["header[_ngcontent-%COMP%]{margin:10px 10px 0;display:flex;align-items:baseline}header[_ngcontent-%COMP%]   .open-from-disk-button[_ngcontent-%COMP%]{margin-bottom:26px}header[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{flex:auto;margin-left:10px}main[_ngcontent-%COMP%]{padding:0 5px 10px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin:0 5px}"],changeDetection:0}),(0,rt.gn)([(0,G.Ph)(Be.E.recentRepositories)],i.prototype,"recentRepositories",void 0),i})();var ze=r(4745);const Ke=function(){return["./open"]},je=function(){return["./clone"]},We=function(){return["./create"]},Xe=[{path:"",component:(()=>{class i extends((0,it.j)(nt.A,ze.H)){}return i.\u0275fac=function(){let o;return function(n){return(o||(o=t.n5z(i)))(n||i)}}(),i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t.qOj],decls:11,vars:6,consts:[["id","open-repository-layout"],["min","150px"],[1,"links"],["routerLinkActive","active",3,"routerLink"],["min","510px"]],template:function(e,n){1&e&&(t.TgZ(0,"app-grid",0)(1,"app-grid-cell",1)(2,"mat-list",2)(3,"mat-list-item",3),t._uU(4,"Open"),t.qZA(),t.TgZ(5,"mat-list-item",3),t._uU(6,"Clone"),t.qZA(),t.TgZ(7,"mat-list-item",3),t._uU(8,"Create"),t.qZA()()(),t.TgZ(9,"app-grid-cell",4),t._UZ(10,"router-outlet"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(3,Ke)),t.xp6(2),t.Q6J("routerLink",t.DdM(4,je)),t.xp6(2),t.Q6J("routerLink",t.DdM(5,We)))},dependencies:[Z.i$,Z.Tg,kt.Y,Pt.M,E.lC,E.rH,E.Od],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 50px)}.links[_ngcontent-%COMP%]{padding-top:0}.links[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{outline:none;cursor:pointer}.links[_ngcontent-%COMP%]   mat-list-item.active[_ngcontent-%COMP%]{background:#78909c}"],changeDetection:0}),i})(),children:[{path:"open",component:$e},{path:"clone",component:le},{path:"create",component:qe},{path:"",redirectTo:"open",pathMatch:"full"}]}];let ti=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[E.Bz.forChild(Xe),E.Bz]}),i})(),ei=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Z.ie,T.LD,A.I,F,qt,Dt,ti]}),i})()},6271:(W,S,r)=>{r.d(S,{k:()=>k});var Z=r(3779),T=r(4650),A=r(468);let k=(()=>{class d{constructor(f){this.baseApi=f}getRelativePath(f,t){return this.baseApi.single(Z.w.files.getRelativePath,f,t)}getResolvedPath(f,t){return this.baseApi.single(Z.w.files.getResolvedPath,f,t)}getFileContents(f){return this.baseApi.single(Z.w.files.getFileContents,f)}openFileDialog(f){return this.baseApi.single(Z.w.files.openFileDialog,f)}openFolderDialog(f,t){return this.baseApi.single(Z.w.files.openFolderDialog,f,t)}openFileWithShell(f){return this.baseApi.single(Z.w.files.openFileWithShell,f)}hasTerminal(){return this.baseApi.single(Z.w.files.hasTerminal)}openTerminal(f){return this.baseApi.single(Z.w.files.openTerminal,f)}hasVsCode(){return this.baseApi.single(Z.w.files.hasVsCode)}openVsCode(f){return this.baseApi.single(Z.w.files.openVsCode,f)}}return d.\u0275fac=function(f){return new(f||d)(T.LFG(A._))},d.\u0275prov=T.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},3164:(W,S,r)=>{r.d(S,{p:()=>f});var Z=r(3489),T=r(353);const A={leading:!0,trailing:!1};function f(C,c=T.P,m=A){return l=>l.lift(new t(C,c,m.leading,m.trailing))}class t{constructor(c,m,l,B){this.duration=c,this.scheduler=m,this.leading=l,this.trailing=B}call(c,m){return m.subscribe(new F(c,this.duration,this.scheduler,this.leading,this.trailing))}}class F extends Z.L{constructor(c,m,l,B,ot){super(c),this.duration=m,this.scheduler=l,this.leading=B,this.trailing=ot,this._hasTrailingValue=!1,this._trailingValue=null}_next(c){this.throttled?this.trailing&&(this._trailingValue=c,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(q,this.duration,{subscriber:this})),this.leading?this.destination.next(c):this.trailing&&(this._trailingValue=c,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const c=this.throttled;c&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),c.unsubscribe(),this.remove(c),this.throttled=null)}}function q(C){const{subscriber:c}=C;c.clearThrottle()}}}]);