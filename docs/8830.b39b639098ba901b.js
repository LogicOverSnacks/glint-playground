"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[8830],{88784:(z,R,a)=>{a.d(R,{r:()=>L});var d=a(83668);let L=(()=>{class v{transform(p,f,c=p+"s"){return 1===f?p:c}}return v.\u0275fac=function(p){return new(p||v)},v.\u0275pipe=d.Yjl({name:"plural",type:v,pure:!0}),v})()},76769:(z,R,a)=>{a.d(R,{c:()=>v});var d=a(1869),L=a(83668);let v=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275mod=L.oAB({type:m}),m.\u0275inj=L.cJS({imports:[[d.I]]}),m})()},72352:(z,R,a)=>{a.d(R,{d:()=>m});var d=a(73967),L=a(76769),v=a(83668);let m=(()=>{class p{getPatchPath(c){switch(c.status){case d.v.Added:case d.v.Untracked:return c.newFilePath;case d.v.Conflicted:case d.v.Modified:case d.v.Renamed:return c.oldFilePath===c.newFilePath?c.newFilePath:`${c.oldFilePath} --\x3e ${c.newFilePath}`;case d.v.Deleted:return c.oldFilePath;default:throw new Error(`Don't know how to deal with patch status: ${d.v[c.status]}`)}}getPatchIcon(c){switch(c.status){case d.v.Added:case d.v.Untracked:return"add";case d.v.Conflicted:return"warning";case d.v.Modified:return"create";case d.v.Deleted:return"remove";case d.v.Renamed:return"swap_horiz";default:throw new Error(`Don't know how to deal with patch status: ${d.v[c.status]}`)}}getPatchIconColorClass(c){switch(c.status){case d.v.Added:case d.v.Untracked:return"green";case d.v.Conflicted:case d.v.Modified:return"orange";case d.v.Deleted:return"red";case d.v.Renamed:return"blue";default:throw new Error(`Don't know how to deal with patch status: ${d.v[c.status]}`)}}}return p.\u0275fac=function(c){return new(c||p)},p.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac,providedIn:L.c}),p})()},16702:(z,R,a)=>{a.d(R,{p:()=>v});var d=a(41152),L=a(83668);let v=(()=>{class m{constructor(){this.parseReference=f=>{const c=m.referenceRegex.exec(f);if(!c)throw new Error(`Reference invalid: ${f}`);if("remotes"===c[1]){const F=m.remoteBranchRegex.exec(f);if(!F)throw new Error(`Remote reference invalid: ${f}`);return{branch:F[2],sourceName:F[1],sourceType:"remote"}}return"stash"===c[1]?{branch:"stash",sourceName:"stash",sourceType:"stash"}:{branch:c[2],sourceName:"heads"===c[1]?"local":"tag",sourceType:"heads"===c[1]?"local":"tag"}},this.getBranchTypeIcon=f=>{switch(f){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"edit";case"tag":return"label";default:throw new Error(`Unknown reference type: ${f}`)}}}calculateBranches(f,c){const F=(0,d.Z)(f.map(this.parseReference),({branch:M})=>M);return Object.entries(F).map(([M,O])=>({name:M,sources:O.map(B=>({name:B.sourceName,type:B.sourceType,icon:this.getBranchTypeIcon(B.sourceType)}))})).sort((M,O)=>{const B=M.sources.some(I=>"local"===I.type&&`refs/heads/${M.name}`===c),P=M.sources.some(I=>"local"===I.type&&`refs/heads/${O.name}`===c);if(B&&!P)return-1;if(!B&&P)return 1;const j=M.sources.some(I=>"local"===I.type),S=O.sources.some(I=>"local"===I.type);if(j&&!S)return-1;if(!j&&S)return 1;const K=M.sources.some(I=>"remote"===I.type),b=O.sources.some(I=>"remote"===I.type);return K&&!b?-1:!K&&b?1:M.sources.length>O.sources.length?-1:M.sources.length<O.sources.length?1:M.name>O.name?-1:M.name<O.name?1:0})}}return m.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/,m.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/,m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=L.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},13358:(z,R,a)=>{a.d(R,{$:()=>D});var d=a(67115),L=a(47621);const m=function(g,n){return g<n},f=function(g,n){return g&&g.length?(0,d.Z)(g,(0,L.Z)(n,2),m):void 0};var c=a(31397);var O=a(34537),B=a(83298),P=a(46540),j=a(54928),S=a(93490),K=a(10381);var E=a(64305),U=a(16410);const H=(0,E.Z)(function(g,n){return(0,U.Z)(g)?function(g,n,i,l){var s=-1,e=B.Z,o=!0,t=g.length,u=[],T=n.length;if(!t)return u;i&&(n=(0,j.Z)(n,(0,S.Z)(i))),l?(e=P.Z,o=!1):n.length>=200&&(e=K.Z,o=!1,n=new O.Z(n));e:for(;++s<t;){var W=g[s],$=null==i?W:i(W);if(W=l||0!==W?W:0,o&&$==$){for(var x=T;x--;)if(n[x]===$)continue e;u.push(W)}else e(n,$,l)||u.push(W)}return u}(g,n):[]});var N=a(48823),G=a(83668);class D{isIndexInBounds(n,i,l){const s=n*D.yUnit;return s>=i&&s<l-D.yUnit}calculateVisible(n,i,l,s,e){return{commitDetails:n.slice(s,e),commitTrails:i.filter(o=>o.minYIndexWithMerges<=e&&o.maxYIndexWithMerges>=s),mergePaths:l.filter(o=>o.from.yIndex>=s&&o.to.some(t=>t.yIndex<=e))}}calculate(n,i,l,s,e,o){const t={},u=[];let T=[],W=[];const $=(n?1:0)+i.length;l.forEach((r,h)=>{t[r.id]={id:r.id,yIndex:h+$,commit:r}});const x=[];i.forEach(r=>{const h=`merge:${r.fromCommitId}:${r.toCommitId}`,y={id:h,message:r.message??`merge: from '${r.fromCommitId}' into '${r.toCommitId}'`,parentIds:[r.toCommitId,r.fromCommitId],time:0,references:[],authorEmail:"",authorName:""};x.push(y),t[h]={id:h,yIndex:n?1:0,commit:y}});const w=n?{id:"head",message:"",parentIds:n.parentId?[n.parentId,...n.mergeHeads]:[...n.mergeHeads],time:0,references:[],authorEmail:"",authorName:""}:null;n&&(t.head={id:"head",yIndex:0,commit:w});const A=w?[w,...x,...l]:[...x,...l];if(A.forEach(r=>{const h=t[r.id];h.trail||this.calculateTrail(h,t,u,T),r.parentIds.length>1&&r.parentIds.slice(1).forEach(y=>{const _=t[y];if(_)if(_.mergeFrom)_.mergeFrom.to.push(h);else{const C={from:_,to:[h],isDashed:"head"===r.id||r.id.startsWith("merge:")};_.mergeFrom=C,W.push(C)}})}),({mergePaths:W,lanes:T}=this.calculateMergePaths(W,T,s,e)),this.calculateColors(u,o),n&&n.parentId){const r=u.find(h=>0===h.minYIndex);if(r){r.commits=r.commits.filter(y=>"head"!==y.id);const h=f(r.commits,y=>y.yIndex);r.minYIndex=h?.yIndex??0,r.minYIndexWithMerges=h?.yIndex??0,this.createUncommittedTrail(t.head,t[n.parentId],u,r.colorIndex,r.lane)}}return x.forEach((r,h)=>{const y=u.find(_=>_.minYIndex===h+(n?1:0));if(y){y.commits=y.commits.filter(C=>C.id!==r.id);const _=f(y.commits,C=>C.yIndex);y.minYIndex=_?.yIndex??0,y.minYIndexWithMerges=_?.yIndex??0,this.createUncommittedTrail(t[r.id],t[r.parentIds[0]],u,y.colorIndex,y.lane)}}),{commitDetails:t,commitTrails:u,lanes:T,mergePaths:W,headCommit:w,orderedCommits:A}}createUncommittedTrail(n,i,l,s,e){let o=i.yIndex;i.mergeFrom&&i.mergeFrom.to.length>0&&!i.mergeFrom.isDashed&&(o=Math.min(...i.mergeFrom.to.map(u=>u.yIndex))+.25,l.push({trailIndex:l.length,minYIndex:o,maxYIndex:i.yIndex,minYIndexWithMerges:o,maxYIndexWithMerges:i.yIndex,colorIndex:s,commits:[],isDashed:!1,lane:e}));const t={trailIndex:l.length,minYIndex:n.yIndex,maxYIndex:o,minYIndexWithMerges:n.yIndex,maxYIndexWithMerges:o,colorIndex:s,commits:[n],isDashed:!0,lane:e};return n.trail=t,l.push(t),t}calculateTrail(n,i,l,s){const e={trailIndex:l.length,minYIndex:n.yIndex,maxYIndex:n.yIndex,minYIndexWithMerges:n.yIndex,maxYIndexWithMerges:n.yIndex,colorIndex:null,commits:[],isDashed:!1};if(n.commit.parentIds.length<=0)n.trail=e,e.commits.push(n),e.maxYIndex=n.yIndex,e.maxYIndexWithMerges=n.yIndex;else{let t=n;for(;t&&!t.trail&&t.commit.parentIds.length>0;)t.trail=e,e.maxYIndex=t.yIndex,e.maxYIndexWithMerges=t.yIndex,e.commits.push(t),t=i[t.commit.parentIds[0]];t&&(e.maxYIndex=t.yIndex,e.maxYIndexWithMerges=t.yIndex,t.trail||(t.trail=e,e.commits.push(t)))}let o=s.find(t=>this.getLaneMaxYIndex(t)<e.minYIndex);return o||(o={xIndex:s.length,occupations:[]},s.push(o)),o.occupations.push({type:"commit-trail",minYIndex:e.minYIndex,maxYIndex:e.maxYIndex}),e.lane=o,l.push(e),e}calculateMergePaths(n,i,l,s){return i=i.map(e=>({...e,occupations:e.occupations.filter(o=>"merge-path"!==o.type)})).filter(e=>e.occupations.length>0),n.forEach(e=>{const o=[];let t;e.to.forEach(x=>{e.from.trail.minYIndexWithMerges>x.yIndex&&(e.from.trail.minYIndexWithMerges=x.yIndex),e.from.trail.maxYIndexWithMerges<x.yIndex&&(e.from.trail.maxYIndexWithMerges=x.yIndex),x.trail.minYIndexWithMerges>e.from.yIndex&&(x.trail.minYIndexWithMerges=e.from.yIndex),x.trail.maxYIndexWithMerges<e.from.yIndex&&(x.trail.maxYIndexWithMerges=e.from.yIndex)});const u=e.from.trail.lane.xIndex,T=l(u);let W=[],$=e.to;if(e.from.trail.minYIndex<e.from.yIndex){const x=e.from.trail.commits.findIndex(A=>A.id===e.from.id),w=e.from.trail.commits[x-1];W=e.to.filter(A=>A.yIndex>w.yIndex),$=e.to.filter(A=>A.yIndex<=w.yIndex),t=w.yIndex}else{t=e.from.yIndex-1;const x=function(g,n){return g&&g.length?(0,d.Z)(g,(0,L.Z)(n,2),c.Z):void 0}($,w=>w.yIndex);x&&x.yIndex===e.from.yIndex-1&&($=$.filter(w=>w.id!==x.id),o.push(`M ${T} ${s(e.from.yIndex-.5)}`,`L ${l(x.trail.lane.xIndex)} ${s(x.yIndex)}`)),o.push(`M ${T} ${s(e.from.yIndex)}`),o.push(`V ${s(e.from.yIndex-.5)}`)}if($.length>0){const x=Math.min(...$.map(r=>r.yIndex)),w=i.filter(r=>!this.isLaneOccupied(r,x+1,t)),A=f(w,r=>[...$,e.from].reduce((h,y)=>h+Math.abs(y.trail.lane.xIndex-r.xIndex),0))??{xIndex:i.length,occupations:[]};0===w.length&&i.push(A),A.occupations.push({type:"merge-path",minYIndex:x+1,maxYIndex:t}),o.push(`M ${T} ${s(t+.5)}`,`L ${l(A.xIndex)} ${s(t+.25)}`,`V ${s(x+.5)}`,...$.flatMap(r=>[`M ${l(A.xIndex)} ${s(r.yIndex+.5)}`,`L ${this.adjustForDashedLine(e.isDashed,u,r.trail.lane.xIndex,r.yIndex+.5,r.yIndex,l,s)}`]))}o.push(...W.flatMap(x=>[`M ${T} ${s(x.yIndex+.25)}`,`L ${this.adjustForDashedLine(e.isDashed,u,x.trail.lane.xIndex,x.yIndex+.25,x.yIndex,l,s)}`])),e.path=o.join(" ")}),{mergePaths:n,lanes:i}}calculateColors(n,i){const l=(0,N.Z)(0,i),s=[];n.forEach(e=>{const o=s.filter(u=>u.minYIndexWithMerges<=e.maxYIndexWithMerges&&u.maxYIndexWithMerges>=e.minYIndexWithMerges).map(u=>u.colorIndex),t=H(l,...o);e.colorIndex=t.length>0?t[0]:e.trailIndex%i,s.push(e)})}getLaneMaxYIndex(n){return n.occupations[n.occupations.length-1].maxYIndex}isLaneOccupied(n,i,l){return n.occupations.some(s=>s.minYIndex<=l&&s.maxYIndex>=i)}adjustForDashedLine(n,i,l,s,e,o,t){const T=n?s>e?.15:-.15:0;return`${o(l+(n?i>l?.3:-.3:0))} ${t(e+T)}`}}D.xUnit=15,D.yUnit=26,D.xOffset=D.xUnit/2,D.yOffset=D.yUnit/2,D.\u0275fac=function(n){return new(n||D)},D.\u0275prov=G.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})},41152:(z,R,a)=>{a.d(R,{Z:()=>b});var d=a(84058);const p=function(I,Y,E,U){for(var Z=-1,H=null==I?0:I.length;++Z<H;){var N=I[Z];Y(U,N,E(N),I)}return U};var f=a(74126);const F=function(I,Y,E,U){return(0,f.Z)(I,function(Z,H,N){Y(U,Z,E(Z),N)}),U};var M=a(47621),O=a(7765),S=Object.prototype.hasOwnProperty;const b=(I=function(I,Y,E){S.call(I,E)?I[E].push(Y):function(I,Y,E){"__proto__"==Y&&d.Z?(0,d.Z)(I,Y,{configurable:!0,enumerable:!0,value:E,writable:!0}):I[Y]=E}(I,E,[Y])},function(E,U){var H={};return((0,O.Z)(E)?p:F)(E,I,(0,M.Z)(U,2),H)});var I}}]);