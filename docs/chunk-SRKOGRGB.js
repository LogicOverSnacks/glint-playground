import{Ba as g,Ca as M,E as h,Ia as v,Ja as E,Va as C,Wa as w,Xa as y,Z as u,_ as m,aa as a,j as c,jb as U,kb as L,lb as I,na as f,z as l,za as p}from"./chunk-R5KNYV3F.js";var _=["diffEditor"],x=".monaco-editor[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.editor-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:table;width:100%;height:100%;min-width:0}",V="MONACO_PATH",b=(()=>{class e{constructor(i,t){if(this.ngZone=i,this.monacoPathConfig=t,this.isMonacoLoaded$=new c(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized){i.run(()=>this.isMonacoLoaded$.next(!0));return}window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco()}set monacoPath(i){i&&(this._monacoPath=i)}loadMonaco(){let i=()=>{let d=this._monacoPath;window.amdRequire=window.require;let D=!!this.nodeRequire,O=d.includes("http");D&&(window.require=this.nodeRequire,O||(d=window.require("path").resolve(window.__dirname,this._monacoPath))),window.amdRequire.config({paths:{vs:d}}),window.amdRequire(["vs/editor/editor.main"],()=>{this.ngZone.run(()=>this.isMonacoLoaded$.next(!0))},s=>console.error("Error loading monaco-editor: ",s))};if(!!window.amdRequire)return i();!!window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);let n=document.createElement("script");n.type="text/javascript",n.src=`${this._monacoPath}/loader.js`,n.addEventListener("load",i),document.body.appendChild(n)}addElectronFixScripts(){let i=document.createElement("script"),t=document.createTextNode("self.module = undefined;"),o=document.createTextNode("self.process.browser = true;");i.appendChild(t),i.appendChild(o),document.body.appendChild(i)}}return e.\u0275fac=function(i){return new(i||e)(a(E),a(V,8))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ei=(()=>{class e{constructor(i){this.monacoLoader=i,this.init=new v}ngOnInit(){this.container=this.editorContent.nativeElement,this.monacoLoader.isMonacoLoaded$.pipe(l(i=>i),h(1)).subscribe(()=>{this.initMonaco()})}ngOnChanges(i){if(this.editor&&(i.original&&!i.original.firstChange||i.modified&&!i.modified.firstChange||i.originalUri&&!i.originalUri.firstChange||i.modifiedUri&&!i.modifiedUri.firstChange)){this.originalModelUriInstance&&this.originalModelUriInstance.dispose(),this.modifiedModelUriInstance&&this.modifiedModelUriInstance.dispose();let t,o;this.originalUri&&(t=monaco.editor.getModels().find(n=>n.uri.path===this.originalUri.path)),this.modifiedUri&&(o=monaco.editor.getModels().find(n=>n.uri.path===this.modifiedUri.path)),this.originalModelUriInstance=t||monaco.editor.createModel(i.original.currentValue||this.editor.getOriginalEditor().getValue(),void 0,this.originalUri),this.modifiedModelUriInstance=o||monaco.editor.createModel(i.modified.currentValue||this.editor.getModifiedEditor().getValue(),void 0,this.modifiedUri),i.original&&this.originalModelUriInstance.setValue(this.original),i.modified&&this.modifiedModelUriInstance.setValue(this.modified),this.editor.setModel({original:this.originalModelUriInstance,modified:this.modifiedModelUriInstance})}this.editor&&i.options&&!i.options.firstChange&&(i.options.previousValue.theme!==i.options.currentValue.theme&&monaco.editor.setTheme(i.options.currentValue.theme),this.editor.updateOptions(i.options.currentValue))}initMonaco(){let i={readOnly:!0,automaticLayout:!0,theme:"vc"};this.options&&(i=Object.assign({},i,this.options)),this.editor=monaco.editor.createDiffEditor(this.container,i),this.originalModelUriInstance=monaco.editor.createModel(this.original,void 0,this.originalUri),this.modifiedModelUriInstance=monaco.editor.createModel(this.modified,void 0,this.modifiedUri),this.editor.setModel({original:this.originalModelUriInstance,modified:this.modifiedModelUriInstance}),this.editor.layout(),this.init.emit(this.editor)}ngOnDestroy(){this.editor&&this.editor.dispose()}}return e.\u0275fac=function(i){return new(i||e)(p(b))},e.\u0275cmp=g({type:e,selectors:[["ngx-monaco-diff-editor"]],viewQuery:function(i,t){if(i&1&&U(_,7),i&2){let o;L(o=I())&&(t.editorContent=o.first)}},inputs:{original:"original",modified:"modified",originalUri:"originalUri",modifiedUri:"modifiedUri",options:"options"},outputs:{init:"init"},standalone:!1,features:[f],decls:4,vars:0,consts:[["container",""],["diffEditor",""],["fxFlex","",1,"editor-container"],[1,"monaco-editor"]],template:function(i,t){i&1&&(C(0,"div",2,0),y(2,"div",3,1),w())},styles:[x],changeDetection:0}),e})(),ti=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=M({type:e}),e.\u0275inj=m({imports:[[]]}),e})();export{ei as a,ti as b};
