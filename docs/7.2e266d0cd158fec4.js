"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[7],{1307:(N,T,s)=>{s.d(T,{P:()=>u});var p=s(9630),e=s(4438),m=s(2021);let u=(()=>{class C{constructor(d){this.baseApi=d}getRelativePath(d,h){return this.baseApi.single(p.x.files.getRelativePath,d,h)}getResolvedPath(d,h){return this.baseApi.single(p.x.files.getResolvedPath,d,h)}getFileContents(d){return this.baseApi.single(p.x.files.getFileContents,d)}openFileDialog(d){return this.baseApi.single(p.x.files.openFileDialog,d)}openFolderDialog(d,h){return this.baseApi.single(p.x.files.openFolderDialog,d,h)}openFileWithShell(d){return this.baseApi.single(p.x.files.openFileWithShell,d)}hasTerminal(){return this.baseApi.single(p.x.files.hasTerminal)}openTerminal(d){return this.baseApi.single(p.x.files.openTerminal,d)}hasVsCode(){return this.baseApi.single(p.x.files.hasVsCode)}openVsCode(d){return this.baseApi.single(p.x.files.openVsCode,d)}static{this.\u0275fac=function(h){return new(h||C)(e.KVO(m.v))}}static{this.\u0275prov=e.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},8756:(N,T,s)=>{s.d(T,{S:()=>he,p:()=>G});var p=s(1635),e=s(4438),m=s(9417),u=s(9843),C=s(7468),D=s(6354),d=s(6697),h=s(6977),f=s(4548),R=s(3130),x=s(949),F=s(8672),O=s(2039),v=s(877),B=s(5351),g=s(2102),k=s(9042),_=s(177),b=s(8834),L=s(9213),X=s(4823),U=s(5969);let j=(()=>{class i{constructor(o){this.template=o}static{this.\u0275fac=function(t){return new(t||i)(e.rXU(e.C4Q))}}static{this.\u0275dir=e.FsC({type:i,selectors:[["","appTreeLeafNode",""]]})}}return i})(),$=(()=>{class i{constructor(o){this.template=o}static{this.\u0275fac=function(t){return new(t||i)(e.rXU(e.C4Q))}}static{this.\u0275dir=e.FsC({type:i,selectors:[["","appTreeNode",""]]})}}return i})();var P=s(9969);const Y=i=>({$implicit:i});function W(i,c){1&i&&e.eu8(0)}let A=(()=>{class i{get classDragAbove(){return"above"===this.dragoverPosition}get classDragBelow(){return"below"===this.dragoverPosition}constructor(o){this.element=o,this.dragListeners=[],this.attrDraggable=!0,this.dragstartListener=t=>{t.dataTransfer&&(t.dataTransfer.setData("app/tree",this.node.id),t.dataTransfer.effectAllowed="move")},this.dragenterListener=t=>{this.dragoverPosition=this.getDragoverPosition(t.offsetY)},this.dragleaveListener=t=>{this.dragoverPosition="none"},this.dragoverListener=t=>{if(t.dataTransfer){const n=t.dataTransfer;["app/tree",...this.dragListeners.map(([r])=>r)].some(r=>n.types.includes(r)&&n.getData(r)!==this.node.id)&&(t.preventDefault(),t.dataTransfer.dropEffect="move",this.dragoverPosition=this.getDragoverPosition(t.offsetY))}},this.dropListener=t=>{if(t.dataTransfer){const n=t.dataTransfer,a=this.getDragoverPosition(t.offsetY);if(n.types.includes("app/tree")){const r=n.getData("app/tree");this.isDescendant(r,this.node.id)||(t.preventDefault(),this.update(r,this.node.id,a))}this.dragListeners.forEach(([r,l])=>{n.types.includes(r)&&(t.preventDefault(),l(n.getData(r),this.node.id,a,!0))})}this.dragoverPosition="none"},this.dragoverPosition="none",this.getDragoverPosition=t=>t/this.element.nativeElement.clientHeight<.5?"above":"below"}static{this.\u0275fac=function(t){return new(t||i)(e.rXU(e.aKT))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-tree-leaf-node"]],hostVars:5,hostBindings:function(t,n){1&t&&e.bIt("dragstart",function(r){return n.dragstartListener(r)})("dragenter",function(r){return n.dragenterListener(r)})("dragleave",function(r){return n.dragleaveListener(r)})("dragover",function(r){return n.dragoverListener(r)})("drop",function(r){return n.dropListener(r)}),2&t&&(e.BMQ("draggable",n.attrDraggable),e.AVh("drag-above",n.classDragAbove)("drag-below",n.classDragBelow))},inputs:{node:"node",update:"update",isDescendant:"isDescendant",template:"template",dragListeners:"dragListeners"},decls:1,vars:4,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){1&t&&e.DNE(0,W,1,0,"ng-container",0),2&t&&e.Y8G("ngTemplateOutlet",n.template)("ngTemplateOutletContext",e.eq3(2,Y,n.node))},dependencies:[_.T3],styles:["[_nghost-%COMP%]{display:block;border-top:5px solid transparent;border-bottom:5px solid transparent}.dark-theme   .drag-above[_nghost-%COMP%]{border-top-color:#2d2d2d}.dark-theme   .drag-below[_nghost-%COMP%]{border-bottom-color:#2d2d2d}.light-theme   .drag-above[_nghost-%COMP%]{border-top-color:#bdbdbd}.light-theme   .drag-below[_nghost-%COMP%]{border-bottom-color:#bdbdbd}"],changeDetection:0})}}return i})();const S=i=>({$implicit:i});function K(i,c){1&i&&e.eu8(0)}function H(i,c){if(1&i&&e.nrm(0,"app-tree-node",7),2&i){const o=e.XpG().$implicit,t=e.XpG(2);e.Y8G("node",o)("update",t.update)("updateExpanded",t.updateExpanded)("isDescendant",t.isDescendant)("templates",t.templates)("dragListeners",t.dragListeners)}}function J(i,c){if(1&i&&e.nrm(0,"app-tree-leaf-node",8),2&i){const o=e.XpG().$implicit,t=e.XpG(2);e.Y8G("node",o)("update",t.update)("isDescendant",t.isDescendant)("template",t.templates.leafNode)("dragListeners",t.dragListeners)}}function Q(i,c){if(1&i&&(e.qex(0),e.DNE(1,H,1,6,"app-tree-node",5)(2,J,1,5,"app-tree-leaf-node",6),e.bVm()),2&i){const o=c.$implicit,t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.isNode(o)),e.R7$(),e.Y8G("ngIf",t.isLeaf(o))}}function z(i,c){if(1&i&&(e.j41(0,"div",3),e.DNE(1,Q,3,2,"ng-container",4),e.k0s()),2&i){const o=e.XpG();e.Y8G("@.disabled",o.animationsDisabled)("@slide",void 0),e.R7$(),e.Y8G("ngForOf",o.node.children)("ngForTrackBy",o.trackById)}}let Z=(()=>{class i{static{this.padding=5}static{this.expandWaitPeriod=750}constructor(o){this.element=o,this.dragListeners=[],this.animationsDisabled=!0,this.dragoverPosition="none",this.dragoverStarted=null,this.dragstartListener=t=>{t.dataTransfer&&(t.dataTransfer.setData("app/tree",this.node.id),t.dataTransfer.effectAllowed="move")},this.dragenterListener=t=>{this.dragoverPosition=this.getDragoverPosition(t.offsetY),this.dragoverStarted=(new Date).getTime()},this.dragleaveListener=t=>{this.dragoverPosition="none",this.dragoverStarted=null},this.dragoverListener=t=>{if(t.dataTransfer){const n=t.dataTransfer;if(["app/tree",...this.dragListeners.map(([r])=>r)].some(r=>n.types.includes(r)&&n.getData(r)!==this.node.id)&&(t.preventDefault(),t.dataTransfer.dropEffect="move",this.dragoverPosition=this.getDragoverPosition(t.offsetY),!this.node.expanded))if("center"===this.dragoverPosition){const r=(new Date).getTime();null===this.dragoverStarted?this.dragoverStarted=r:r-this.dragoverStarted>i.expandWaitPeriod&&(this.node.expanded=!0)}else this.dragoverStarted=null}},this.dropListener=t=>{if(t.dataTransfer){const n=t.dataTransfer,a=this.getDragoverPosition(t.offsetY);if(n.types.includes("app/tree")){const r=n.getData("app/tree");this.isDescendant(r,this.node.id)||(t.preventDefault(),this.update(r,this.node.id,a))}this.dragListeners.forEach(([r,l])=>{n.types.includes(r)&&(t.preventDefault(),l(n.getData(r),this.node.id,a,!1))})}this.dragoverPosition="none",this.dragoverStarted=null},this.clickListener=t=>{t.preventDefault(),this.node.expanded=!this.node.expanded,this.updateExpanded(this.node.id,this.node.expanded)},this.isLeaf=t=>!t.children,this.isNode=t=>!!t.children,this.getDragoverPosition=t=>t<0?"above":t<this.element.nativeElement.clientHeight-2*i.padding?"center":"below"}ngAfterViewInit(){this.animationsDisabled=!1}trackById(o,t){return t.id}static{this.\u0275fac=function(t){return new(t||i)(e.rXU(e.aKT))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-tree-node"]],inputs:{node:"node",update:"update",updateExpanded:"updateExpanded",isDescendant:"isDescendant",templates:"templates",dragListeners:"dragListeners"},decls:3,vars:11,consts:[["draggable","true",1,"tree-node-heading",3,"dragstart","dragenter","dragleave","dragover","drop","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","tree-node-children",4,"ngIf"],[1,"tree-node-children"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","update","updateExpanded","isDescendant","templates","dragListeners",4,"ngIf"],[3,"node","update","isDescendant","template","dragListeners",4,"ngIf"],[3,"node","update","updateExpanded","isDescendant","templates","dragListeners"],[3,"node","update","isDescendant","template","dragListeners"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.bIt("dragstart",function(r){return n.dragstartListener(r)})("dragenter",function(r){return n.dragenterListener(r)})("dragleave",function(r){return n.dragleaveListener(r)})("dragover",function(r){return n.dragoverListener(r)})("drop",function(r){return n.dropListener(r)})("click",function(r){return n.clickListener(r)}),e.DNE(1,K,1,0,"ng-container",1),e.k0s(),e.DNE(2,z,2,4,"div",2)),2&t&&(e.AVh("drag-above","above"===n.dragoverPosition)("drag-below","below"===n.dragoverPosition)("drag-center","center"===n.dragoverPosition),e.R7$(),e.Y8G("ngTemplateOutlet",n.templates.node)("ngTemplateOutletContext",e.eq3(9,S,n.node)),e.R7$(),e.Y8G("ngIf",n.node.expanded))},dependencies:[_.Sq,_.bT,_.T3,i,A],styles:["[_nghost-%COMP%]{display:block}.tree-node-heading[_ngcontent-%COMP%]{cursor:pointer;border-top:5px solid transparent;border-bottom:5px solid transparent}.tree-node-children[_ngcontent-%COMP%]{margin-left:20px;overflow:hidden}.dark-theme[_nghost-%COMP%]   .tree-node-heading.drag-above[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .tree-node-heading.drag-above[_ngcontent-%COMP%]{border-top-color:#2d2d2d}.dark-theme[_nghost-%COMP%]   .tree-node-heading.drag-below[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .tree-node-heading.drag-below[_ngcontent-%COMP%]{border-bottom-color:#2d2d2d}.dark-theme[_nghost-%COMP%]   .tree-node-heading.drag-center[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .tree-node-heading.drag-center[_ngcontent-%COMP%]{background-color:#2d2d2d}.light-theme[_nghost-%COMP%]   .tree-node-heading.drag-above[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .tree-node-heading.drag-above[_ngcontent-%COMP%]{border-top-color:#bdbdbd}.light-theme[_nghost-%COMP%]   .tree-node-heading.drag-below[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .tree-node-heading.drag-below[_ngcontent-%COMP%]{border-bottom-color:#bdbdbd}.light-theme[_nghost-%COMP%]   .tree-node-heading.drag-center[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .tree-node-heading.drag-center[_ngcontent-%COMP%]{background-color:#bdbdbd}"],data:{animation:[(0,P.hZ)("slide",[(0,P.kY)(":enter",[(0,P.iF)({height:0}),(0,P.i0)("225ms ease-in-out",(0,P.iF)({height:"*"}))]),(0,P.kY)(":leave",[(0,P.iF)({height:"*"}),(0,P.i0)("225ms ease-in-out",(0,P.iF)({height:0}))])])]},changeDetection:0})}}return i})();function q(i,c){if(1&i&&e.nrm(0,"app-tree-node",3),2&i){const o=e.XpG().$implicit,t=e.XpG();e.Y8G("node",o)("update",t.update)("updateExpanded",t.updateExpanded)("isDescendant",t.isDescendant)("templates",t.templates)("dragListeners",t.dragListeners)}}function ee(i,c){if(1&i&&e.nrm(0,"app-tree-leaf-node",4),2&i){const o=e.XpG().$implicit,t=e.XpG();e.Y8G("node",o)("update",t.update)("isDescendant",t.isDescendant)("template",t.templates.leafNode)("dragListeners",t.dragListeners)}}function te(i,c){if(1&i&&(e.qex(0),e.DNE(1,q,1,6,"app-tree-node",1)(2,ee,1,5,"app-tree-leaf-node",2),e.bVm()),2&i){const o=c.$implicit,t=e.XpG();e.R7$(),e.Y8G("ngIf",t.isNode(o)),e.R7$(),e.Y8G("ngIf",t.isLeaf(o))}}let ne=(()=>{class i extends((0,R.c)(x.N)){constructor(){super(...arguments),this.indent=20,this.indentUnits="px",this.dragListeners=[],this.outputTree=new e.bkB,this.isDescendant=(o,t)=>{if(o===t)return!0;const n=this.getNodeById(o,this.tree);if(!n)throw new f.wu(o);return null!==this.getNodeById(t,n.children)},this.update=(o,t,n)=>{const a=this.removeNode(o,this.tree);if(!a)throw new f.wu(o);const[r,l]=a,M=this.findSiblingNodesWithIndex(t,l);if(!M)throw new f.wu(t);const[E,y]=M;switch(n){case"above":E.splice(y,0,r);break;case"below":E.splice(y+1,0,r);break;case"center":const I=E[y].children;if(!I)throw new f.x1;I.push(r),E[y].expanded=!0;break;default:throw new Error(`Check not exhaustive '${n}'.`)}this.tree=l,this.outputTree.next(l)},this.updateExpanded=(o,t)=>{const n=this.updateNodeExpanded(o,t,this.tree);if(!n)throw new f.wu(o);this.tree=n,this.outputTree.next(n)},this.isLeaf=o=>!o.children,this.isNode=o=>!!o.children}get templates(){return{node:this.nodeDirective.template,leafNode:this.leafNodeDirective.template}}trackById(o,t){return t.id}getNodeById(o,t){if(t)for(const n of t){if(n.id===o)return n;const a=this.getNodeById(o,n.children);if(a)return a}return null}findSiblingNodesWithIndex(o,t){if(t)for(let n=0;n<t.length;n++){const a=t[n];if(!a)continue;if(a.id===o)return[t,n];const r=this.findSiblingNodesWithIndex(o,a.children);if(r)return r}return null}removeNode(o,t){if(t)for(let n=0;n<t.length;n++){const a=t[n];if(!a)continue;if(a.id===o)return[a,[...t.slice(0,n),...t.slice(n+1)]];const r=this.removeNode(o,a.children);if(r)return[r[0],[...t.slice(0,n),{...a,children:r[1]},...t.slice(n+1)]]}return null}updateNodeExpanded(o,t,n){if(n)for(let a=0;a<n.length;a++){const r=n[a];if(!r)continue;if(r.id===o)return[...n.slice(0,a),{...r,expanded:t},...n.slice(a+1)];const l=this.updateNodeExpanded(o,t,r.children);if(l)return[...n.slice(0,a),{...r,children:l},...n.slice(a+1)]}return null}static{this.\u0275fac=(()=>{let o;return function(n){return(o||(o=e.xGo(i)))(n||i)}})()}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-tree"]],contentQueries:function(t,n,a){if(1&t&&(e.wni(a,$,5),e.wni(a,j,5)),2&t){let r;e.mGM(r=e.lsd())&&(n.nodeDirective=r.first),e.mGM(r=e.lsd())&&(n.leafNodeDirective=r.first)}},inputs:{tree:"tree",indent:"indent",indentUnits:"indentUnits",dragListeners:"dragListeners"},outputs:{outputTree:"treeChange"},features:[e.Vt3],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","update","updateExpanded","isDescendant","templates","dragListeners",4,"ngIf"],[3,"node","update","isDescendant","template","dragListeners",4,"ngIf"],[3,"node","update","updateExpanded","isDescendant","templates","dragListeners"],[3,"node","update","isDescendant","template","dragListeners"]],template:function(t,n){1&t&&e.DNE(0,te,3,2,"ng-container",0),2&t&&e.Y8G("ngForOf",n.tree)("ngForTrackBy",n.trackById)},dependencies:[_.Sq,_.bT,Z,A],encapsulation:2,changeDetection:0})}}return i})();var oe=s(1751);const ie=["dialogTemplate"],re=i=>["app/repository",i],ae=i=>[i];function se(i,c){if(1&i&&(e.j41(0,"mat-icon"),e.EFF(1),e.k0s()),2&i){const o=e.XpG().$implicit;e.R7$(),e.JRh(o.expanded?"expand_more":"chevron_right")}}function de(i,c){if(1&i){const o=e.RV6();e.j41(0,"div",12)(1,"button",13),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.addFolder(n.id))}),e.j41(2,"mat-icon"),e.EFF(3,"create_new_folder"),e.k0s(),e.j41(4,"span"),e.EFF(5),e.nI1(6,"translate"),e.k0s()(),e.j41(7,"button",13),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.renameFolder(n))}),e.j41(8,"mat-icon"),e.EFF(9,"edit"),e.k0s(),e.j41(10,"span"),e.EFF(11),e.nI1(12,"translate"),e.k0s()(),e.j41(13,"button",13),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.deleteNode(n))}),e.j41(14,"mat-icon"),e.EFF(15,"delete"),e.k0s(),e.j41(16,"span"),e.EFF(17),e.nI1(18,"translate"),e.k0s()()()}2&i&&(e.R7$(5),e.JRh(e.bMT(6,3,"New !bookmark! folder")),e.R7$(6),e.JRh(e.bMT(12,5,"Rename")),e.R7$(6),e.JRh(e.bMT(18,7,"Delete")))}function le(i,c){if(1&i){const o=e.RV6();e.j41(0,"div",9,1),e.bIt("click",function(){const n=e.eBV(o).$implicit,a=e.XpG(2);return e.Njj(a.nodeClick.next(n))}),e.j41(2,"span")(3,"mat-icon",10),e.EFF(4,"folder"),e.k0s(),e.EFF(5),e.k0s(),e.j41(6,"button",11),e.DNE(7,se,2,1,"mat-icon",3),e.k0s(),e.DNE(8,de,19,9,"ng-template",null,2,e.C5r),e.k0s()}if(2&i){const o=c.$implicit,t=e.sdS(9),n=e.XpG(2);e.AVh("selected",n.selectedNodeId===o.id),e.Y8G("appContextMenu",t),e.R7$(5),e.SpI(" ",o.name," "),e.R7$(2),e.Y8G("ngIf",o.children.length>0)}}function ce(i,c){if(1&i){const o=e.RV6();e.j41(0,"div",12)(1,"button",13),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.deleteNode(n))}),e.j41(2,"mat-icon"),e.EFF(3,"delete"),e.k0s(),e.j41(4,"span"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()()}2&i&&(e.R7$(5),e.JRh(e.bMT(6,1,"Delete")))}function pe(i,c){if(1&i){const o=e.RV6();e.j41(0,"div",14,1),e.bIt("click",function(){const n=e.eBV(o).$implicit,a=e.XpG(2);return e.Njj(a.nodeClick.next(n))}),e.j41(2,"span"),e.EFF(3),e.k0s(),e.DNE(4,ce,7,3,"ng-template",null,2,e.C5r),e.k0s()}if(2&i){const o=c.$implicit,t=e.sdS(5),n=e.XpG(2);e.AVh("selected",n.selectedNodeId===o.id),e.Y8G("appContextMenu",t)("matTooltip",o.id),e.R7$(3),e.JRh(o.name)}}function ge(i,c){if(1&i){const o=e.RV6();e.j41(0,"div",15),e.bIt("dragover",function(n){e.eBV(o);const a=e.XpG(2);return e.Njj(a.dragoverListener(n))})("drop",function(n){e.eBV(o);const a=e.XpG(2);return e.Njj(a.dropListener(n))}),e.k0s()}}function _e(i,c){if(1&i){const o=e.RV6();e.qex(0),e.j41(1,"app-tree",5),e.bIt("treeChange",function(n){e.eBV(o);const a=e.XpG();return e.Njj(a.treeChanged(n))}),e.DNE(2,le,10,5,"div",6)(3,pe,6,5,"div",7),e.k0s(),e.DNE(4,ge,1,0,"div",8),e.bVm()}if(2&i){const o=c.ngIf,t=e.XpG();e.R7$(),e.Y8G("tree",o)("dragListeners",e.eq3(5,ae,e.eq3(3,re,t.addNode))),e.R7$(3),e.Y8G("ngIf",0===o.length)}}function me(i,c){if(1&i&&(e.j41(0,"div",16),e.EFF(1),e.k0s(),e.j41(2,"form",17)(3,"mat-dialog-content")(4,"mat-form-field",18)(5,"mat-label"),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.nrm(8,"input",19),e.k0s()(),e.j41(9,"mat-dialog-actions")(10,"button",20),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"button",21),e.EFF(14),e.nI1(15,"translate"),e.k0s()()()),2&i){const o=e.XpG();e.R7$(),e.JRh(o.dialogTitle),e.R7$(),e.Y8G("formGroup",o.dialogForm),e.R7$(4),e.JRh(e.bMT(7,8,"Name")),e.R7$(4),e.Y8G("mat-dialog-close",null),e.R7$(),e.JRh(e.bMT(12,10,"Cancel")),e.R7$(2),e.Y8G("mat-dialog-close",o.dialogForm.controls.name.value)("disabled",o.dialogForm.invalid),e.R7$(),e.JRh(e.bMT(15,12,"Save"))}}const G=i=>!!i.children;let he=(()=>{class i extends((0,R.c)(x.N)){constructor(o,t){super(),this.dialog=o,this.store=t,this.selectedNodeId=null,this.nodeClick=new e.bkB,this.tree=this.repositoryBookmarks.pipe((0,D.T)(n=>n.map(a=>this.convertBookmarkToNode(a,"")))),this.dialogTitle="New Folder",this.dialogForm=new m.gE({name:new m.MJ(null)}),this.dialogRef=null,this.addNode=(n,a,r,l)=>{(0,C.p)([this.repositoryNames.pipe((0,d.s)(1)),this.repositoryBookmarks.pipe((0,d.s)(1))]).subscribe(([M,E])=>{const y={name:M[n]??"",repositoryId:n},V=this.replaceBookmark(E,a,"",w=>{if("above"===r)return[y,w];if("below"===r)return[w,y];if(l||!this.isBookmarkFolder(w))throw new f.x1;return[{...w,expanded:!0,children:[...w.children,y]}]});if(!V)throw new f.wu(a);this.store.dispatch(new O.bd(V))})},this.dragoverListener=n=>{n.dataTransfer?.types.includes("app/repository")&&(n.preventDefault(),n.dataTransfer.dropEffect="move")},this.dropListener=n=>{if(n.dataTransfer?.types.includes("app/repository")){n.preventDefault();const a=n.dataTransfer.getData("app/repository");(0,C.p)([this.repositoryNames.pipe((0,d.s)(1)),this.repositoryBookmarks.pipe((0,d.s)(1))]).subscribe(([r,l])=>{this.store.dispatch(new O.bd([{name:r[a]??"",repositoryId:a}]))})}},this.convertBookmarkToNode=(n,a)=>this.isBookmarkFolder(n)?{id:`folder:${this.getPath(n,a)}`,name:n.name,children:n.children.map(r=>this.convertBookmarkToNode(r,this.getPath(n,a))),expanded:n.expanded}:{id:n.repositoryId,name:n.name},this.convertNodeToBookmark=n=>G(n)?{name:n.name,expanded:n.expanded??!1,children:n.children.map(this.convertNodeToBookmark)}:{name:n.name,repositoryId:n.id}}ngOnDestroy(){super.ngOnDestroy(),this.dialogRef&&this.dialogRef.close()}treeChanged(o){this.store.dispatch(new O.bd(o.map(this.convertNodeToBookmark)))}toggleMenu(o,t){o.stopPropagation();const n=o.currentTarget.getBoundingClientRect();t.toggleMenu(n.x,n.y+n.height)}addFolder(o){this.dialogRef&&this.dialogRef.close(),this.dialogTitle=(0,F.Tl)("New !bookmark! Folder"),this.dialogForm.reset(),this.dialogRef=this.dialog.open(this.dialogTemplate),this.dialogRef.afterClosed().pipe((0,h.Q)(this.destroyed$)).subscribe(t=>{t&&this.repositoryBookmarks.pipe((0,d.s)(1)).subscribe(n=>{const a={name:t,children:[],expanded:!1},r=o?this.replaceBookmark(n,o,"",l=>{if(!this.isBookmarkFolder(l))throw new f.x1;return[{...l,children:[...l.children,a]}]}):[...n,a];if(!r)throw new f.wu(o??"");this.store.dispatch(new O.bd(r))})})}deleteNode(o){this.repositoryBookmarks.pipe((0,d.s)(1)).subscribe(t=>{const n=this.replaceBookmark(t,o.id,"",()=>[]);if(!n)throw new f.wu(o.id);this.store.dispatch(new O.bd(n))})}renameFolder(o){if(!G(o))throw new f.Tt(o.id);this.dialogTitle=(0,F.Tl)("Rename !bookmark! Folder"),this.dialogForm.reset({name:o.name}),this.dialog.open(this.dialogTemplate).afterClosed().pipe((0,h.Q)(this.destroyed$)).subscribe(t=>{t&&this.repositoryBookmarks.pipe((0,d.s)(1)).subscribe(n=>{const a=this.replaceBookmark(n,o.id,"",r=>[{...r,name:t}]);if(!a)throw new f.wu(o.id);this.store.dispatch(new O.bd(a))})})}isBookmarkFolder(o){return!!o.children}replaceBookmark(o,t,n,a){for(let r=0;r<o.length;r++){const l=o[r];if(t===(this.isBookmarkFolder(l)?`folder:${this.getPath(l,n)}`:l.repositoryId))return[...o.slice(0,r),...a(l),...o.slice(r+1)];if(this.isBookmarkFolder(l)){const M=this.replaceBookmark(l.children,t,this.getPath(l,n),a);if(M)return[...o.slice(0,r),{...l,children:M},...o.slice(r+1)]}}return null}getPath(o,t){return t?`${t}///${o.name.replace("/","//")}`:o.name.replace("/","//")}static{this.\u0275fac=function(t){return new(t||i)(e.rXU(B.bZ),e.rXU(u.il))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-repository-bookmarks-view"]],viewQuery:function(t,n){if(1&t&&e.GBs(ie,5),2&t){let a;e.mGM(a=e.lsd())&&(n.dialogTemplate=a.first)}},inputs:{selectedNodeId:"selectedNodeId"},outputs:{nodeClick:"nodeClick"},features:[e.Vt3],decls:8,vars:6,consts:[["dialogTemplate",""],["contextMenu","appContextMenu"],["menu",""],[4,"ngIf"],["type","button","mat-stroked-button","",1,"add-folder-button",3,"click","matTooltip"],[3,"treeChange","tree","dragListeners"],["class","bookmark-node",3,"appContextMenu","selected","click",4,"appTreeNode"],["class","bookmark-node",3,"appContextMenu","selected","matTooltip","click",4,"appTreeLeafNode"],["class","first-drag-zone","draggable","true",3,"dragover","drop",4,"ngIf"],[1,"bookmark-node",3,"click","appContextMenu"],[1,"folder-icon"],["type","button","mat-icon-button","",1,"expand-button","app-icon-button-md"],[1,"menu-panel"],[1,"menu-item",3,"click"],[1,"bookmark-node",3,"click","appContextMenu","matTooltip"],["draggable","true",1,"first-drag-zone",3,"dragover","drop"],["mat-dialog-title",""],[3,"formGroup"],["subscriptSizing","dynamic",1,"full-width"],["type","text","matInput","","required","","formControlName","name"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close","disabled"]],template:function(t,n){if(1&t){const a=e.RV6();e.DNE(0,_e,5,7,"ng-container",3),e.nI1(1,"async"),e.j41(2,"button",4),e.nI1(3,"translate"),e.bIt("click",function(){return e.eBV(a),e.Njj(n.addFolder())}),e.j41(4,"mat-icon"),e.EFF(5,"create_new_folder"),e.k0s()(),e.DNE(6,me,16,14,"ng-template",null,0,e.C5r)}2&t&&(e.Y8G("ngIf",e.bMT(1,2,n.tree)),e.R7$(2),e.Y8G("matTooltip",e.bMT(3,4,"Add !bookmark! folder")))},dependencies:[B.tx,B.BI,B.E7,B.Yi,g.rl,g.nJ,k.fg,_.bT,m.qT,m.me,m.BC,m.cb,m.YS,m.j4,m.JD,b.$z,b.iY,L.An,X.oV,U.Q,ne,$,j,_.Jj,oe.D],styles:["app-tree[_ngcontent-%COMP%]{display:block;margin-left:-8px}app-tree[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{vertical-align:middle}app-tree[_ngcontent-%COMP%]   .bookmark-node[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:space-between;padding-left:10px}app-tree[_ngcontent-%COMP%]   .bookmark-node[_ngcontent-%COMP%]   .folder-icon[_ngcontent-%COMP%]{margin-right:5px}app-tree[_ngcontent-%COMP%]     app-tree-leaf-node .bookmark-node{padding-top:5px;padding-bottom:5px}.first-drag-zone[_ngcontent-%COMP%]{height:50px}.full-width[_ngcontent-%COMP%]{width:100%}.add-folder-button[_ngcontent-%COMP%]{margin-top:10px}.dark-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(>.bookmark-node.selected):not(.drag-above), .dark-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(>.bookmark-node.selected):not(.drag-above){border-top-color:#78909c}.dark-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(>.bookmark-node.selected):not(.drag-below), .dark-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(>.bookmark-node.selected):not(.drag-below){border-bottom-color:#78909c}.dark-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]   .bookmark-node.selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]   .bookmark-node.selected[_ngcontent-%COMP%]{background:#78909c}.light-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(>.bookmark-node.selected):not(.drag-above), .light-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(>.bookmark-node.selected):not(.drag-above){border-top-color:#cfd8dc}.light-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(>.bookmark-node.selected):not(.drag-below), .light-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]     app-tree-leaf-node:has(>.bookmark-node.selected):not(.drag-below){border-bottom-color:#cfd8dc}.light-theme[_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]   .bookmark-node.selected[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   app-tree[_ngcontent-%COMP%]   .bookmark-node.selected[_ngcontent-%COMP%]{background:#cfd8dc}"],changeDetection:0})}}return(0,p.Cg)([(0,u.l6)(v.s.repositoryBookmarks)],i.prototype,"repositoryBookmarks",void 0),(0,p.Cg)([(0,u.l6)(v.s.repositoryNames)],i.prototype,"repositoryNames",void 0),i})()},9445:(N,T,s)=>{s.d(T,{h:()=>d});var p=s(5351),e=s(2102),m=s(9042),u=s(9115),C=s(1117),D=s(4438);let d=(()=>{class h{static{this.\u0275fac=function(x){return new(x||h)}}static{this.\u0275mod=D.$C({type:h})}static{this.\u0275inj=D.G2t({imports:[p.hM,e.RG,m.fS,u.Cn,C.U]})}}return h})()},4714:(N,T,s)=>{s.d(T,{P:()=>O});var p=s(1635),e=s(4438),m=s(9843),u=s(7673),C=s(2039),D=s(877),d=s(177),h=s(8834),f=s(9213),R=s(4823),x=s(1751);function F(v,B){if(1&v){const g=e.RV6();e.j41(0,"li",1),e.nI1(1,"async"),e.bIt("click",function(){const _=e.eBV(g).$implicit,b=e.XpG();return e.Njj(b.clicked.next(_.repositoryId))})("dblclick",function(){const _=e.eBV(g).$implicit,b=e.XpG();return e.Njj(b.openRepository(_.repositoryId))})("dragstart",function(_){const b=e.eBV(g).$implicit,L=e.XpG();return e.Njj(L.dragStarted.next([_,b.repositoryId]))}),e.j41(2,"span",2),e.EFF(3),e.k0s(),e.j41(4,"button",3),e.nI1(5,"translate"),e.bIt("click",function(_){const b=e.eBV(g).$implicit;return e.XpG().deleteRepository(b.repositoryId),_.preventDefault(),e.Njj(_.stopPropagation())}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()()}if(2&v){const g=B.$implicit,k=e.XpG();e.AVh("selected",g.repositoryId===e.bMT(1,6,k.selectedId)),e.BMQ("draggable",k.draggable?"true":"false"),e.R7$(2),e.Y8G("matTooltip",g.repositoryId),e.R7$(),e.JRh(g.name),e.R7$(),e.Y8G("matTooltip",e.bMT(5,8,"Remove repository (all settings saved in Glint will be removed)"))}}let O=(()=>{class v{constructor(g){this.store=g,this.draggable=!0,this.selectedId=(0,u.of)(null),this.clicked=new e.bkB,this.dragStarted=new e.bkB}openRepository(g){this.store.dispatch(new C.lO(g))}deleteRepository(g){this.store.dispatch(new C.QM(g))}static{this.\u0275fac=function(k){return new(k||v)(e.rXU(m.il))}}static{this.\u0275cmp=e.VBU({type:v,selectors:[["app-repository-history-view"]],inputs:{draggable:"draggable",selectedId:"selectedId"},outputs:{clicked:"clicked",dragStarted:"dragStarted"},decls:3,vars:3,consts:[[3,"selected","click","dblclick","dragstart",4,"ngFor","ngForOf"],[3,"click","dblclick","dragstart"],[1,"name",3,"matTooltip"],["mat-icon-button","","color","warn",1,"close-icon",3,"click","matTooltip"],["inline",""]],template:function(k,_){1&k&&(e.j41(0,"ul"),e.DNE(1,F,8,10,"li",0),e.nI1(2,"async"),e.k0s()),2&k&&(e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,_.recentRepositories)))},dependencies:[d.Sq,h.iY,f.An,R.oV,d.Jj,x.D],styles:["ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;display:flex;justify-content:space-between}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding-right:5px}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{flex:0 0 20px;width:20px;height:20px;padding:0;font-size:18px;opacity:0;transition:opacity .1s ease-in-out}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:20px}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .close-icon[_ngcontent-%COMP%]{opacity:1}.dark-theme[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background:#78909c}.light-theme[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{background:#cfd8dc}"],changeDetection:0})}}return(0,p.Cg)([(0,m.l6)(D.s.recentRepositories)],v.prototype,"recentRepositories",void 0),v})()},8317:(N,T,s)=>{s.d(T,{y:()=>m});var p=s(1117),e=s(4438);let m=(()=>{class u{static{this.\u0275fac=function(d){return new(d||u)}}static{this.\u0275mod=e.$C({type:u})}static{this.\u0275inj=e.G2t({imports:[p.U]})}}return u})()}}]);