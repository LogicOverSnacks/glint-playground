"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[150],{9131:(H,U,i)=>{i.d(U,{j:()=>F});var D=i(591),t=i(4650),Z=i(6895),_=i(266);function e(I,B){if(1&I&&(t.TgZ(0,"div",3),t._uU(1),t.ALo(2,"async"),t.qZA()),2&I){const E=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,E.leftPath))}}let F=(()=>{class I{constructor(){this.leftPath=new D.X(""),this.rightPath=new D.X("")}onCopy(E){E.preventDefault();const P=document.getSelection();P&&E.clipboardData?.setData("text/plain",P.toString().replace("\n",""))}ngOnChanges(E){if(E.path){const P=/^(.*)(\/[^\/]+)$/.exec(E.path.currentValue);P?(this.leftPath.next(P[1]),this.rightPath.next(P[2])):(this.leftPath.next(""),this.rightPath.next(E.path.currentValue))}}}return I.\u0275fac=function(E){return new(E||I)},I.\u0275cmp=t.Xpm({type:I,selectors:[["app-condensed-path"]],hostBindings:function(E,P){1&E&&t.NdJ("copy",function(g){return P.onCopy(g)})},inputs:{path:"path"},features:[t.TTD],decls:6,vars:7,consts:[[1,"container",3,"matTooltip"],["class","left",4,"ngIf"],[1,"right"],[1,"left"]],template:function(E,P){1&E&&(t.TgZ(0,"div",0),t.YNc(1,e,3,3,"div",1),t.ALo(2,"async"),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"async"),t.qZA()()),2&E&&(t.Q6J("matTooltip",P.path||""),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,P.leftPath)),t.xp6(3),t.Oqu(t.lcZ(5,5,P.rightPath)))},dependencies:[Z.O5,_.gM,Z.Ov],styles:[".container[_ngcontent-%COMP%]{display:flex}",".left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",".left[_ngcontent-%COMP%]{min-width:15px}",".right[_ngcontent-%COMP%]{flex:1 0 auto;max-width:100%;margin-left:-4px;padding-left:4px}",".left[_ngcontent-%COMP%] + .right[_ngcontent-%COMP%]{max-width:calc(100% - 15px)}"],changeDetection:0}),I})()},127:(H,U,i)=>{i.d(U,{m:()=>_});var D=i(3779),t=i(4650),Z=i(468);let _=(()=>{class e{constructor(I){this.baseApi=I}getHighlightedFile(I,B,E,P){return this.baseApi.single(D.w.highlight.getHighlightedFile,I,B,E,P)}}return e.\u0275fac=function(I){return new(I||e)(t.LFG(Z._))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5410:(H,U,i)=>{i.d(U,{s:()=>_e});var D=i(655),t=i(4650),Z=i(4006),_=i(9253),e=i(7717),F=i(1135),I=i(591),B=i(6053),E=i(567),P=i(1086),S=i(1737),g=i(4850),u=i(5778),v=i(2994),w=i(7545),y=i(7625),p=i(1307),f=i(2198),m=i(7221),n=i(13),c=i(1059),r=i(2986),C=i(1712),A=i(4810),h=i(9967),T=i(4889),R=i(6197),G=i(9578),L=i(9077),j=i(127),Y=i(3058),$=i(315);const ne=["findControlInput"];function oe(k,K){if(1&k&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&k){const a=t.oxw(2);t.xp6(1),t.Oqu(a.findControl.getError("regex"))}}function q(k,K){if(1&k){const a=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(a);const x=t.oxw(2);return t.KtG(x.modifyLinesStage("stage"))}),t._uU(1," Stage Selection "),t.qZA()}}function ee(k,K){if(1&k){const a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(a);const x=t.oxw(2);return t.KtG(x.modifyLinesStage("discard"))}),t._uU(1," Discard Selection "),t.qZA()}}function ce(k,K){if(1&k){const a=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(a);const x=t.oxw(2);return t.KtG(x.modifyLinesStage("unstage"))}),t._uU(1," Unstage Selection "),t.qZA()}}function ie(k,K){if(1&k){const a=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(a);const x=t.oxw(2);return t.KtG(x.edited.next())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function re(k,K){if(1&k){const a=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(a);const x=t.oxw(2);return t.KtG(x.closed.next())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function ae(k,K){1&k&&(t.TgZ(0,"main"),t._uU(1,"Loading..."),t.qZA())}function se(k,K){1&k&&(t.TgZ(0,"main"),t._uU(1,"Cannot load binary file."),t.qZA())}function le(k,K){1&k&&(t.TgZ(0,"main"),t._uU(1,"Cannot load file."),t.qZA())}function de(k,K){if(1&k&&t._UZ(0,"app-hunk-view",27),2&k){const a=t.oxw(3);t.Q6J("diffLines",a.diffLines)("search",a.search$)}}function ge(k,K){if(1&k&&t._UZ(0,"app-inline-view",27),2&k){const a=t.oxw(3);t.Q6J("diffLines",a.diffLines)("search",a.search$)}}function ue(k,K){if(1&k&&t._UZ(0,"app-split-view",27),2&k){const a=t.oxw(3);t.Q6J("diffLines",a.diffLines)("search",a.search$)}}function pe(k,K){if(1&k&&(t.TgZ(0,"main"),t.YNc(1,de,1,2,"app-hunk-view",26),t.YNc(2,ge,1,2,"app-inline-view",26),t.YNc(3,ue,1,2,"app-split-view",26),t.qZA()),2&k){const a=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf","hunk"===a),t.xp6(1),t.Q6J("ngIf","inline"===a),t.xp6(1),t.Q6J("ngIf","split"===a)}}function he(k,K){if(1&k){const a=t.EpF();t.ynx(0),t.TgZ(1,"header")(2,"mat-form-field",1)(3,"mat-label"),t._uU(4,"Find"),t.qZA(),t.TgZ(5,"mat-icon",2),t._uU(6,"search"),t.qZA(),t._UZ(7,"input",3,4),t.TgZ(9,"button",5),t.NdJ("click",function(){t.CHM(a);const x=t.oxw();return t.KtG(x.matchCaseControl.setValue(!x.matchCaseControl.value))}),t._UZ(10,"mat-icon",6),t.qZA(),t.TgZ(11,"button",7),t.NdJ("click",function(){t.CHM(a);const x=t.oxw();return t.KtG(x.useRegularExpressionControl.setValue(!x.useRegularExpressionControl.value))}),t._UZ(12,"mat-icon",8),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){t.CHM(a);const x=t.oxw();return t.KtG(x.findControl.setValue(""))}),t.TgZ(14,"mat-icon"),t._uU(15,"close"),t.qZA()(),t.YNc(16,oe,2,1,"mat-error",0),t.qZA(),t.TgZ(17,"div",10),t.YNc(18,q,2,0,"button",11),t.ALo(19,"async"),t.YNc(20,ee,2,0,"button",12),t.ALo(21,"async"),t.YNc(22,ce,2,0,"button",13),t.ALo(23,"async"),t.TgZ(24,"mat-button-toggle-group",14),t.NdJ("change",function(x){t.CHM(a);const V=t.oxw();return t.KtG(V.changeView(x.value))}),t.TgZ(25,"mat-button-toggle",15)(26,"mat-icon"),t._uU(27,"calendar_view_day"),t.qZA()(),t.TgZ(28,"mat-button-toggle",16)(29,"mat-icon"),t._uU(30,"view_headline"),t.qZA()(),t.TgZ(31,"mat-button-toggle",17)(32,"mat-icon"),t._uU(33,"vertical_split"),t.qZA()()(),t.TgZ(34,"div",18),t.YNc(35,ie,3,0,"button",19),t.YNc(36,re,3,0,"button",20),t.qZA()()(),t.YNc(37,ae,2,0,"main",0),t.ALo(38,"async"),t.YNc(39,se,2,0,"main",0),t.ALo(40,"async"),t.YNc(41,le,2,0,"main",0),t.ALo(42,"async"),t.YNc(43,pe,4,3,"main",0),t.ALo(44,"async"),t.BQk()}if(2&k){const a=K.ngIf,l=t.oxw();t.xp6(7),t.Q6J("formControl",l.findControl),t.xp6(2),t.ekj("selected",l.matchCaseControl.value),t.xp6(2),t.ekj("selected",l.useRegularExpressionControl.value),t.xp6(5),t.Q6J("ngIf",l.findControl.hasError("regex")),t.xp6(2),t.Q6J("ngIf",t.lcZ(19,16,l.showStage)),t.xp6(2),t.Q6J("ngIf",t.lcZ(21,18,l.showStage)),t.xp6(2),t.Q6J("ngIf",t.lcZ(23,20,l.showUnstage)),t.xp6(2),t.Q6J("value",a),t.xp6(11),t.Q6J("ngIf",l.showEdit),t.xp6(1),t.Q6J("ngIf",!l.hideClose),t.xp6(1),t.Q6J("ngIf","loading"===t.lcZ(38,22,l.currentView)),t.xp6(2),t.Q6J("ngIf","binary-file"===t.lcZ(40,24,l.currentView)),t.xp6(2),t.Q6J("ngIf","error"===t.lcZ(42,26,l.currentView)),t.xp6(2),t.Q6J("ngIf","normal"===t.lcZ(44,28,l.currentView))}}let _e=(()=>{class k extends((0,A.j)(h.A)){constructor(a,l,x,V){super(),this.store=a,this.highlightApi=l,this.repositoriesApi=x,this.diffService=V,this.hideClose=!1,this.showEdit=!1,this.search=null,this.closed=new t.vpe,this.edited=new t.vpe,this.currentView=new I.X("loading"),this.diffLines=new I.X(null),this.search$=new I.X(null),this.findControl=new Z.NI("",{nonNullable:!0,validators:J=>{if(this.useRegularExpressionControl?.value)try{new RegExp(J.value,"g")}catch(X){return{regex:X.message}}return null}}),this.matchCaseControl=new Z.NI(!1,{nonNullable:!0}),this.useRegularExpressionControl=new Z.NI(!1,{nonNullable:!0})}hostKeyDown(a){a.ctrlKey&&("f"===a.key||"F"===a.key)&&(a.preventDefault(),this.findControlInput.nativeElement.focus({preventScroll:!0}))}ngOnInit(){this.showStage=(0,B.aj)([this.patch,this.selectedCommitId,this.diffService.selectedLines]).pipe((0,g.U)(([a,l,x])=>"head"===l&&!0===a?.isUnstaged&&x.length>0)),this.showUnstage=(0,B.aj)([this.patch,this.selectedCommitId,this.diffService.selectedLines]).pipe((0,g.U)(([a,l,x])=>"head"===l&&!1===a?.isUnstaged&&x.length>0)),this.patch.pipe((0,u.x)((a,l)=>a&&l?!(a.repositoryPath!==l.repositoryPath||a.isUnstaged!==l.isUnstaged||a.patch.newFileId!==l.patch.newFileId||a.patch.newFileIsDir!==l.patch.newFileIsDir||a.patch.newFileIsSubmodule!==l.patch.newFileIsSubmodule||a.patch.newFilePath!==l.patch.newFilePath||a.patch.oldFileId!==l.patch.oldFileId||a.patch.oldFileIsDir!==l.patch.oldFileIsDir||a.patch.oldFileIsSubmodule!==l.patch.oldFileIsSubmodule||a.patch.oldFilePath!==l.patch.oldFilePath||a.patch.status!==l.patch.status||a.patch.hunks.length!==l.patch.hunks.length||(0,e.Z)(a.patch.hunks,l.patch.hunks).some(([x,V])=>x?.lines.length!==V?.lines.length||x?.newStart!==V?.newStart||x?.oldStart!==V?.oldStart||x?.header!==V?.header||x&&V&&(0,e.Z)(x.lines,V.lines).some(([J,X])=>J?.content.length!==X?.content.length||J?.contentOffset!==X?.contentOffset||J?.newLineNo!==X?.newLineNo||J?.oldLineNo!==X?.oldLineNo||J?.origin!==X?.origin||J?.content!==X?.content))):!a&&!l),(0,v.b)(()=>{this.currentView.next("loading")}),(0,w.w)(a=>a?(0,E.D)(this.getLines(a,!1)).pipe((0,y.R)(this.currentView.pipe((0,p.T)(1),(0,f.h)(l=>"loading"===l))),(0,y.R)(this.destroyed$),(0,g.U)(([l,x])=>[a,l,x]),(0,m.K)(l=>C.OZ.matches(l)?(this.currentView.next("binary-file"),(0,P.of)(null)):C.hK.matches(l)?(this.currentView.next("error"),(0,P.of)(null)):(0,S._)(l))):(0,P.of)(null)),(0,v.b)(a=>{if(a){const[l,x,V]=a;this.diffLines.next({hunks:l.patch.hunks,oldLines:x,newLines:V,oldFilePath:l.patch.oldFilePath,newFilePath:l.patch.newFilePath,highlighted:!1}),this.currentView.next("normal")}else this.diffLines.next(null)}),(0,w.w)(a=>a?.[0]?(0,E.D)(this.getLines(a?.[0],!0)).pipe((0,y.R)(this.currentView.pipe((0,p.T)(1),(0,f.h)(l=>"loading"===l))),(0,y.R)(this.destroyed$),(0,g.U)(([l,x])=>[a?.[0],l,x]),(0,m.K)(l=>C.OZ.matches(l)?(this.currentView.next("binary-file"),(0,P.of)(null)):C.hK.matches(l)?(this.currentView.next("error"),(0,P.of)(null)):(0,S._)(l))):(0,P.of)(null)),(0,y.R)(this.destroyed$)).subscribe(a=>{if(a){const[l,x,V]=a;this.diffLines.next({hunks:l.patch.hunks,oldLines:x,newLines:V,oldFilePath:l.patch.oldFilePath,newFilePath:l.patch.newFilePath,highlighted:!0}),this.currentView.next("normal")}else this.diffLines.next(null)}),this.search&&(this.findControl.setValue(this.search.text),this.matchCaseControl.setValue(this.search.matchCase),this.useRegularExpressionControl.setValue(this.search.useRegularExpression)),(0,B.aj)([this.findControl.valueChanges.pipe((0,n.b)(200),(0,f.h)(()=>this.findControl.valid),(0,c.O)(this.findControl.value)),this.matchCaseControl.valueChanges.pipe((0,c.O)(this.matchCaseControl.value)),this.useRegularExpressionControl.valueChanges.pipe((0,c.O)(this.useRegularExpressionControl.value))]).pipe((0,y.R)(this.destroyed$)).subscribe(([a,l,x])=>{if(this.findControl.updateValueAndValidity({emitEvent:!1}),a)try{const V=new RegExp(x?a:(0,F.Z)(a),l?"g":"ig");this.search$.next(V)}catch{}else this.search$.next(null)})}changeView(a){this.store.dispatch(new G.zb(a))}modifyLinesStage(a){const l=this.store.selectSnapshot(R.E.selectedRepositoryPath);if(!l)throw new Error("Cannot stage file line when no repository is selected");this.patch.pipe((0,r.q)(1)).subscribe(x=>{x&&x.patch.newFilePath&&("discard"===a?this.repositoriesApi.discardFileLines:"stage"===a?this.repositoriesApi.stageFileLines:this.repositoriesApi.unstageFileLines).bind(this.repositoriesApi)(l,x.patch.newFilePath,this.diffService.selectedLines.value).pipe((0,w.w)(()=>this.store.dispatch(new T.Vu(l,[T.nh.stagedChanges,T.nh.unstagedChanges])))).subscribe()})}getLines(a,l){if(a.patch.oldFileIsSubmodule||a.patch.newFileIsSubmodule){const x=a.patch.hunks[0].lines.find(J=>J.oldLineNo>0),V=a.patch.hunks[0].lines.find(J=>J.newLineNo>0);return[(0,P.of)([{lineNumber:1,text:x?.content??"",tokens:[{startIndex:0,endIndex:x?.content.length??0,scopes:["normal"]}]}]),(0,P.of)([{lineNumber:1,text:V?.content??"",tokens:[{startIndex:0,endIndex:V?.content.length??0,scopes:["normal"]}]}])]}return[a.patch.oldFileId?this.highlightApi.getHighlightedFile(a.repositoryPath,a.patch.oldFileId,a.patch.oldFilePath,l):(0,P.of)([]),a.isUnstaged?this.highlightApi.getHighlightedFile(a.repositoryPath,null,a.patch.newFilePath,l):a.patch.newFileId?this.highlightApi.getHighlightedFile(a.repositoryPath,a.patch.newFileId,a.patch.newFilePath,l):(0,P.of)([])]}}return k.\u0275fac=function(a){return new(a||k)(t.Y36(_.yh),t.Y36(j.m),t.Y36(Y.a),t.Y36($.S))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-diff-view"]],viewQuery:function(a,l){if(1&a&&t.Gf(ne,5,t.SBq),2&a){let x;t.iGM(x=t.CRH())&&(l.findControlInput=x.first)}},hostBindings:function(a,l){1&a&&t.NdJ("keydown",function(V){return l.hostKeyDown(V)},!1,t.evT)},inputs:{patch:"patch",hideClose:"hideClose",showEdit:"showEdit",search:"search"},outputs:{closed:"closed",edited:"edited"},features:[t.qOj],decls:2,vars:3,consts:[[4,"ngIf"],["appearance","standard",1,"find-control"],["matPrefix",""],["type","text","matInput","",3,"formControl"],["findControlInput",""],["type","button","matSuffix","","mat-icon-button","","disableRipple","","matTooltip","Match case",3,"click"],["svgIcon","format-letter-case"],["type","button","matSuffix","","mat-icon-button","","disableRipple","","matTooltip","Use regular expression",3,"click"],["svgIcon","regex"],["type","button","matSuffix","","mat-icon-button","","matTooltip","Cancel",3,"click"],[1,"right"],["type","button","class","stage-button","mat-stroked-button","",3,"click",4,"ngIf"],["type","button","class","discard-button","mat-stroked-button","","color","warn",3,"click",4,"ngIf"],["type","button","class","unstage-button","mat-stroked-button","",3,"click",4,"ngIf"],[3,"value","change"],["value","hunk","matTooltip","Hunk View"],["value","inline","matTooltip","Inline View"],["value","split","matTooltip","Split View"],[1,"close-container"],["type","button","class","edit-button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","class","close-button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-stroked-button","",1,"stage-button",3,"click"],["type","button","mat-stroked-button","","color","warn",1,"discard-button",3,"click"],["type","button","mat-stroked-button","",1,"unstage-button",3,"click"],["type","button","mat-icon-button","",1,"edit-button",3,"click"],["type","button","mat-icon-button","",1,"close-button",3,"click"],[3,"diffLines","search",4,"ngIf"],[3,"diffLines","search"]],template:function(a,l){1&a&&(t.YNc(0,he,45,30,"ng-container",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,l.view))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background:#1e1e1e;position:absolute}[_nghost-%COMP%]     .mat-button-toggle>.mat-button-toggle-button>.mat-button-toggle-label-content{padding:0 6px}header[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:5px;outline:none}header[_ngcontent-%COMP%]   .find-control[_ngcontent-%COMP%]{min-width:200px}header[_ngcontent-%COMP%]   .find-control[_ngcontent-%COMP%]  .mat-form-field-wrapper>.mat-form-field-flex{align-items:flex-end}header[_ngcontent-%COMP%]   .find-control[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-prefix{margin-right:5px}header[_ngcontent-%COMP%]   .find-control[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-prefix, header[_ngcontent-%COMP%]   .find-control[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-suffix{font-size:12px}header[_ngcontent-%COMP%]   .find-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}header[_ngcontent-%COMP%]   .find-control[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]     .mat-button-wrapper{padding:2px;background:#37474f}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;gap:5px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{height:40px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{font-size:0}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:38px}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .close-container[_ngcontent-%COMP%]{display:flex;align-items:center}main[_ngcontent-%COMP%]{flex:1 0 auto;outline:none;overflow-x:auto;overflow-y:auto}"],changeDetection:0}),(0,D.gn)([(0,_.Ph)(R.E.selectedCommitId)],k.prototype,"selectedCommitId",void 0),(0,D.gn)([(0,_.Ph)(L.$.diffView)],k.prototype,"view",void 0),k})()},206:(H,U,i)=>{i.d(U,{m:()=>ye});var D=i(811),t=i(284),Z=i(3179),_=i(5410),e=i(4650),F=i(1134),I=i(2382),B=i(9940);const P=function E(d){return d&&d.length?(0,F.Z)(d,B.Z,I.Z):void 0};var S=i(1256),g=i(8344),u=i(5601);const w=function v(d){var b=(0,u.Z)(d),o=b%1;return b==b?o?b-o:b:0},p=function y(d,b,o){var s=null==d?0:d.length;return s?(b=o||void 0===b?1:w(b),(0,g.Z)(d,0,(b=s-b)<0?0:b)):[]},m=function f(d,b,o){var s=null==d?0:d.length;return s?(b=o||void 0===b?1:w(b),(0,g.Z)(d,(b=s-b)<0?0:b,s)):[]};var n=i(591),c=i(3753),r=i(6053),C=i(1059),A=i(519),h=i(7625),T=i(13),R=i(4850),G=i(4810),L=i(9967),j=i(315),Y=i(3668),$=i(6895),ne=i(4859),oe=i(7392);let q=(()=>{class d{transform(o,s,O){if(!O||!s)return o;const M=Array.from(s.matchAll(O),N=>({startIndex:N.index??0,endIndex:(N.index??0)+N[0].length,scopes:["search-result"]}));return[...o,...M]}}return d.\u0275fac=function(o){return new(o||d)},d.\u0275pipe=e.Yjl({name:"searchToken",type:d,pure:!0}),d})();var ee=i(1264);const ce=["scrollContainer"];function ie(d,b){if(1&d){const o=e.EpF();e.ynx(0),e.TgZ(1,"button",7),e.NdJ("click",function(){e.CHM(o);const O=e.oxw().$implicit,M=e.oxw();return e.KtG(M.expandSeparator(O))}),e.TgZ(2,"mat-icon",8),e._uU(3),e.qZA()(),e.TgZ(4,"span",9),e._uU(5),e.qZA(),e.BQk()}if(2&d){const o=e.oxw(),s=o.first,O=o.last,M=o.$implicit,N=e.oxw();e.xp6(1),e.Udp("width",N.lineNumberMargin+26,"px"),e.xp6(2),e.Oqu(s?"expand_less":O?"expand_more":"unfold_more"),e.xp6(2),e.Oqu(M.separatorHeader)}}function re(d,b){if(1&d&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&d){const o=b.$implicit;e.Q6J("ngClass",o.class),e.xp6(1),e.Oqu(o.text)}}function ae(d,b){if(1&d&&(e.ynx(0),e.YNc(1,re,2,2,"span",13),e.ALo(2,"tokens"),e.ALo(3,"searchToken"),e.ALo(4,"async"),e.BQk()),2&d){const o=b.ngIf,s=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.Dn7(3,4,o.tokens,o.text,e.lcZ(4,8,s.search)),o.text))}}function se(d,b){if(1&d&&(e.TgZ(0,"span",10),e._uU(1),e.qZA(),e.TgZ(2,"span",11),e._uU(3),e.qZA(),e.YNc(4,ae,5,10,"ng-container",12)),2&d){const o=e.oxw().$implicit,s=e.oxw();e.Udp("right","calc(100% + 26px + "+(s.lineNumberMargin/2).toString()+"px)")("width",s.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==o.diffLine.oldLine?null:o.diffLine.oldLine.lineNumber),e.xp6(1),e.Udp("width",s.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==o.diffLine.newLine?null:o.diffLine.newLine.lineNumber),e.xp6(1),e.Q6J("ngIf",s.getLineView(o.diffLine))}}function le(d,b){if(1&d&&(e.TgZ(0,"li",4),e.YNc(1,ie,6,4,"ng-container",5),e.YNc(2,se,5,9,"ng-template",null,6,e.W1O),e.qZA()),2&d){const o=b.$implicit,s=e.MAs(3);e.Q6J("ngClass","line-"+(o.isSeparator?"separator":o.diffLine.status)),e.xp6(1),e.Q6J("ngIf",o.isSeparator)("ngIfElse",s)}}let de=(()=>{class d extends((0,G.j)(L.A)){constructor(o){super(),this.diffService=o,this.lineNumberMargin=0,this.lines$=new n.X([]),this.selectedLines=new n.X([]),this.currentPatch=null}ngOnInit(){this.diffLines.pipe((0,C.O)(null),(0,A.G)(),(0,h.R)(this.destroyed$)).subscribe(([o,s])=>{const O=this.currentPatch?{...this.currentPatch}:null;if(s){this.currentPatch={newFilePath:s.newFilePath,oldFilePath:s.oldFilePath};const M=P([s.oldLines.length,s.newLines.length])??0;this.lineNumberMargin=this.diffService.calculateMargin(M.toString().length),this.diffService.calculateHunkLines(s.oldLines,s.newLines,s.hunks).pipe((0,h.R)(this.destroyed$)).subscribe(N=>{o&&o.newFilePath===s.newFilePath&&o.oldFilePath===s.oldFilePath&&!o.highlighted&&s.highlighted?this.updateLines(N):this.lines$.next(N),(!O||O.oldFilePath!==this.currentPatch?.oldFilePath||O.newFilePath!==this.currentPatch?.newFilePath)&&this.scrollContainer?.nativeElement?.scrollTo(0,0)})}else this.currentPatch=null,this.lineNumberMargin=0,this.lines$.next([]),O&&this.scrollContainer?.nativeElement?.scrollTo(0,0)}),(0,c.R)(document,"selectionchange").pipe((0,T.b)(100),(0,h.R)(this.destroyed$)).subscribe(()=>{const o=document.getSelection();if(!o)return void this.selectedLines.next([]);const s=[];for(let O=0;O<o.rangeCount;O++){const M=o.getRangeAt(O);if(!M.startContainer.parentElement||!M.endContainer.parentElement||!this.scrollContainer.nativeElement.contains(M.startContainer.parentElement)||!this.scrollContainer.nativeElement.contains(M.endContainer.parentElement)||M.startContainer.parentElement===M.endContainer.parentElement&&M.startOffset===M.endOffset)continue;const N=this.scrollContainer.nativeElement.getBoundingClientRect().top,W=this.scrollContainer.nativeElement.scrollTop;s.push([Math.floor((W+M.startContainer.parentElement.getBoundingClientRect().top-N)/19),Math.floor((W+M.endContainer.parentElement.getBoundingClientRect().top-N)/19)])}this.selectedLines.next(s)}),(0,r.aj)([this.lines$,this.selectedLines]).pipe((0,R.U)(([o,s])=>s.flatMap(([O,M])=>(0,S.Z)(O,M+1)).flatMap(O=>{const M=o[O];return!M||M.isSeparator?[]:[{oldLineNo:M.diffLine.oldLine?.lineNumber??-1,newLineNo:M.diffLine.newLine?.lineNumber??-1}]})),(0,h.R)(this.destroyed$)).subscribe(o=>{this.diffService.selectedLines.next(o)})}expandSeparator(o){const O=this.lines$.value;this.lines$.next(O.flatMap((M,N)=>{if(M!==o)return M;if(o.hiddenDiffLines.length<=25)return o.hiddenDiffLines.map(z=>({isSeparator:!1,diffLine:z}));if(0===N)return[{isSeparator:!0,separatorHeader:o.separatorHeader,hiddenDiffLines:p(o.hiddenDiffLines,20)},...m(o.hiddenDiffLines,20).map(z=>({isSeparator:!1,diffLine:z}))];if(N===O.length-1)return[...o.hiddenDiffLines.slice(0,20).map(z=>({isSeparator:!1,diffLine:z})),{isSeparator:!0,separatorHeader:null,hiddenDiffLines:o.hiddenDiffLines.slice(20)}];const W=o.hiddenDiffLines.slice(0,10),Q=p(o.hiddenDiffLines.slice(10),10),ve=m(o.hiddenDiffLines,10);return[...W.map(z=>({isSeparator:!1,diffLine:z})),{isSeparator:!0,separatorHeader:o.separatorHeader,hiddenDiffLines:Q},...ve.map(z=>({isSeparator:!1,diffLine:z}))]}))}getLineView(o){return"added"===o.status?o.newLine:"removed"===o.status?o.oldLine:"unchanged"===o.status?o.newLine??o.oldLine:null}trackByHunkLine(o,s){return o}updateLines(o){const s=this.lines$.value;let O=0,M=0;const N=[];for(;M<o.length;){const W=s[O],Q=o[M];if(Q.isSeparator){if(W.isSeparator){if(W.hiddenDiffLines.length===Q.hiddenDiffLines.length){N.push(Q),O++,M++;continue}N.push({isSeparator:!0,separatorHeader:Q.separatorHeader,hiddenDiffLines:Q.hiddenDiffLines.slice(0,W.hiddenDiffLines.length)}),Q.hiddenDiffLines=Q.hiddenDiffLines.slice(W.hiddenDiffLines.length),O++;continue}if(0===Q.hiddenDiffLines.length){M++;continue}N.push({isSeparator:!1,diffLine:Q.hiddenDiffLines[0]}),Q.hiddenDiffLines=Q.hiddenDiffLines.slice(1),O++}else{if(s[O].isSeparator)throw new Error("");N.push(Q),O++,M++}}this.lines$.next(N)}}return d.\u0275fac=function(o){return new(o||d)(e.Y36(j.S))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-hunk-view"]],viewQuery:function(o,s){if(1&o&&e.Gf(ce,7,e.SBq),2&o){let O;e.iGM(O=e.CRH())&&(s.scrollContainer=O.first)}},inputs:{diffLines:"diffLines",search:"search"},features:[e.qOj],decls:7,vars:9,consts:[[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["scrollContainer",""],["code",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"line",3,"ngClass"],[4,"ngIf","ngIfElse"],["diffLineContent",""],["mat-button","",1,"separator-icon",3,"click"],["inline",""],[1,"separator-header"],[1,"old-line-number"],[1,"new-line-number"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,s){1&o&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0,1)(2,"code",null,2)(4,"ul"),e.YNc(5,le,4,3,"li",3),e.ALo(6,"async"),e.qZA()()()),2&o&&(e.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),e.xp6(4),e.Udp("margin-left",s.lineNumberMargin+26,"px"),e.xp6(1),e.Q6J("cdkVirtualForOf",e.lcZ(6,7,s.lines$))("cdkVirtualForTrackBy",s.trackByHunkLine))},dependencies:[Y.xd,Y.x0,Y.N7,$.mk,$.sg,$.O5,ne.lW,oe.Hw,$.Ov,q,ee.U],styles:['code[_ngcontent-%COMP%]{display:block;white-space:pre;color:#d4d4d4;font-family:Consolas,Courier New,monospace;font-size:14px;font-weight:400;letter-spacing:0px;line-height:19px}code[_ngcontent-%COMP%]     .line{height:19px}code[_ngcontent-%COMP%]     .line.line-added{background:#1f2c19}code[_ngcontent-%COMP%]     .line.line-removed{background:#501515}code[_ngcontent-%COMP%]     .line.line-void{background:#111}code[_ngcontent-%COMP%]     .diff-added{background-color:#1d572c}code[_ngcontent-%COMP%]     .diff-removed{background-color:#803030}code[_ngcontent-%COMP%]     .search-result{background-color:#a14e1b}code[_ngcontent-%COMP%]     .meta-embedded, code[_ngcontent-%COMP%]     .source-groovy-embedded{color:#d4d4d4}code[_ngcontent-%COMP%]     .emphasis{font-style:italic}code[_ngcontent-%COMP%]     .strong{font-weight:700}code[_ngcontent-%COMP%]     .header{color:navy}code[_ngcontent-%COMP%]     .comment{color:#6a9955}code[_ngcontent-%COMP%]     .constant-language{color:#569cd6}code[_ngcontent-%COMP%]     .constant-numeric, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-number, code[_ngcontent-%COMP%]     .variable-other-enummember, code[_ngcontent-%COMP%]     .keyword-operator-plus-exponent, code[_ngcontent-%COMP%]     .keyword-operator-minus-exponent{color:#b5cea8}code[_ngcontent-%COMP%]     .constant-regexp{color:#646695}code[_ngcontent-%COMP%]     .entity-name-tag{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-tag-css{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-other-attribute-name{color:#9cdcfe}code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-mixin-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-id-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-parent-selector-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-element-css, code[_ngcontent-%COMP%]     .source-css-less .entity-other-attribute-name-id, code[_ngcontent-%COMP%]     .entity-other-attribute-name-attribute-scss, code[_ngcontent-%COMP%]     .entity-other-attribute-name-scss{color:#d7ba7d}code[_ngcontent-%COMP%]     .invalid{color:#f44747}code[_ngcontent-%COMP%]     .markup-underline{text-decoration:underline}code[_ngcontent-%COMP%]     .markup-bold{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-heading{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-italic{font-style:italic}code[_ngcontent-%COMP%]     .markup-inserted{color:#b5cea8}code[_ngcontent-%COMP%]     .markup-deleted{color:#ce9178}code[_ngcontent-%COMP%]     .markup-changed{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-quote-begin-markdown{color:#6a9955}code[_ngcontent-%COMP%]     .punctuation-definition-list-begin-markdown{color:#6796e6}code[_ngcontent-%COMP%]     .markup-inline-raw{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-tag{color:gray}code[_ngcontent-%COMP%]     .meta-preprocessor{color:#569cd6}code[_ngcontent-%COMP%]     .meta-preprocessor-string{color:#ce9178}code[_ngcontent-%COMP%]     .meta-preprocessor-numeric{color:#b5cea8}code[_ngcontent-%COMP%]     .meta-structure-dictionary-key-python{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-diff-header{color:#569cd6}code[_ngcontent-%COMP%]     .storage{color:#569cd6}code[_ngcontent-%COMP%]     .storage-type{color:#569cd6}code[_ngcontent-%COMP%]     .storage-modifier, code[_ngcontent-%COMP%]     .keyword-operator-noexcept{color:#569cd6}code[_ngcontent-%COMP%]     .string, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-string{color:#ce9178}code[_ngcontent-%COMP%]     .string-tag{color:#ce9178}code[_ngcontent-%COMP%]     .string-value{color:#ce9178}code[_ngcontent-%COMP%]     .string-regexp{color:#d16969}code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-begin, code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-end, code[_ngcontent-%COMP%]     .punctuation-section-embedded{color:#569cd6}code[_ngcontent-%COMP%]     .meta-template-expression{color:#d4d4d4}code[_ngcontent-%COMP%]     .support-type-vendored-property-name, code[_ngcontent-%COMP%]     .support-type-property-name, code[_ngcontent-%COMP%]     .variable-css, code[_ngcontent-%COMP%]     .variable-scss, code[_ngcontent-%COMP%]     .variable-other-less, code[_ngcontent-%COMP%]     .source-coffee-embedded{color:#9cdcfe}code[_ngcontent-%COMP%]     .keyword{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-control{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-operator{color:#d4d4d4}code[_ngcontent-%COMP%]     .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-expression, code[_ngcontent-%COMP%]     .keyword-operator-cast, code[_ngcontent-%COMP%]     .keyword-operator-sizeof, code[_ngcontent-%COMP%]     .keyword-operator-typeid, code[_ngcontent-%COMP%]     .keyword-operator-alignas, code[_ngcontent-%COMP%]     .keyword-operator-instanceof, code[_ngcontent-%COMP%]     .keyword-operator-logical-python, code[_ngcontent-%COMP%]     .keyword-operator-wordlike{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-other-unit{color:#b5cea8}code[_ngcontent-%COMP%]     .punctuation-section-embedded-begin-php, code[_ngcontent-%COMP%]     .punctuation-section-embedded-end-php{color:#569cd6}code[_ngcontent-%COMP%]     .support-function-git-rebase{color:#9cdcfe}code[_ngcontent-%COMP%]     .constant-sha-git-rebase{color:#b5cea8}code[_ngcontent-%COMP%]     .storage-modifier-import-java, code[_ngcontent-%COMP%]     .variable-language-wildcard-java, code[_ngcontent-%COMP%]     .storage-modifier-package-java{color:#d4d4d4}code[_ngcontent-%COMP%]     .variable-language{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-function, code[_ngcontent-%COMP%]     .support-function, code[_ngcontent-%COMP%]     .support-constant-handlebars, code[_ngcontent-%COMP%]     .source-powershell .variable-other-member{color:#dcdcaa}code[_ngcontent-%COMP%]     .meta-return-type, code[_ngcontent-%COMP%]     .support-class, code[_ngcontent-%COMP%]     .support-type, code[_ngcontent-%COMP%]     .entity-name-type, code[_ngcontent-%COMP%]     .entity-name-namespace, code[_ngcontent-%COMP%]     .entity-other-attribute, code[_ngcontent-%COMP%]     .entity-name-scope-resolution, code[_ngcontent-%COMP%]     .entity-name-class, code[_ngcontent-%COMP%]     .storage-type-numeric-go, code[_ngcontent-%COMP%]     .storage-type-byte-go, code[_ngcontent-%COMP%]     .storage-type-boolean-go, code[_ngcontent-%COMP%]     .storage-type-string-go, code[_ngcontent-%COMP%]     .storage-type-uintptr-go, code[_ngcontent-%COMP%]     .storage-type-error-go, code[_ngcontent-%COMP%]     .storage-type-rune-go, code[_ngcontent-%COMP%]     .storage-type-cs, code[_ngcontent-%COMP%]     .storage-type-generic-cs, code[_ngcontent-%COMP%]     .storage-type-modifier-cs, code[_ngcontent-%COMP%]     .storage-type-variable-cs, code[_ngcontent-%COMP%]     .storage-type-annotation-java, code[_ngcontent-%COMP%]     .storage-type-generic-java, code[_ngcontent-%COMP%]     .storage-type-java, code[_ngcontent-%COMP%]     .storage-type-object-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-java, code[_ngcontent-%COMP%]     .storage-type-token-java, code[_ngcontent-%COMP%]     .storage-type-groovy, code[_ngcontent-%COMP%]     .storage-type-annotation-groovy, code[_ngcontent-%COMP%]     .storage-type-parameters-groovy, code[_ngcontent-%COMP%]     .storage-type-generic-groovy, code[_ngcontent-%COMP%]     .storage-type-object-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-groovy{color:#4ec9b0}code[_ngcontent-%COMP%]     .meta-type-cast-expr, code[_ngcontent-%COMP%]     .meta-type-new-expr, code[_ngcontent-%COMP%]     .support-constant-math, code[_ngcontent-%COMP%]     .support-constant-dom, code[_ngcontent-%COMP%]     .support-constant-json, code[_ngcontent-%COMP%]     .entity-other-inherited-class{color:#4ec9b0}code[_ngcontent-%COMP%]     .keyword-control, code[_ngcontent-%COMP%]     .source-cpp .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-delete, code[_ngcontent-%COMP%]     .keyword-other-using, code[_ngcontent-%COMP%]     .keyword-other-operator, code[_ngcontent-%COMP%]     .entity-name-operator{color:#c586c0}code[_ngcontent-%COMP%]     .variable, code[_ngcontent-%COMP%]     .meta-definition-variable-name, code[_ngcontent-%COMP%]     .support-variable, code[_ngcontent-%COMP%]     .entity-name-variable{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-object-literal-key{color:#9cdcfe}code[_ngcontent-%COMP%]     .support-constant-property-value, code[_ngcontent-%COMP%]     .support-constant-font-name, code[_ngcontent-%COMP%]     .support-constant-media-type, code[_ngcontent-%COMP%]     .support-constant-media, code[_ngcontent-%COMP%]     .constant-other-color-rgb-value, code[_ngcontent-%COMP%]     .constant-other-rgb-value, code[_ngcontent-%COMP%]     .support-constant-color{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-group-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-group-assertion-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-character-class-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-begin-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-end-regexp, code[_ngcontent-%COMP%]     .keyword-operator-negation-regexp, code[_ngcontent-%COMP%]     .support-other-parenthesis-regexp{color:#ce9178}code[_ngcontent-%COMP%]     .constant-character-character-class-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-set-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-regexp, code[_ngcontent-%COMP%]     .constant-character-set-regexp{color:#d16969}code[_ngcontent-%COMP%]     .keyword-operator-or-regexp, code[_ngcontent-%COMP%]     .keyword-control-anchor-regexp{color:#dcdcaa}code[_ngcontent-%COMP%]     .keyword-operator-quantifier-regexp{color:#d7ba7d}code[_ngcontent-%COMP%]     .constant-character{color:#569cd6}code[_ngcontent-%COMP%]     .constant-character-escape{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-name-label{color:#c8c8c8}code[_ngcontent-%COMP%]     .punctuation-definition-string{color:#ce9178}code[_ngcontent-%COMP%]     .variable-language-this{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-comment{color:#6a9955}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-separator[_ngcontent-%COMP%]{background:#252525}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none;color:#858585}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{right:calc(100% + 26px)}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{right:100%}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]{cursor:pointer;height:19px;line-height:19px;padding:0;text-align:center;min-width:0}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]:before{background:#252525;content:"";position:absolute;left:0;top:0;height:100%;width:100%;z-index:-1}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:19px}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .separator-header[_ngcontent-%COMP%]{margin-left:5px}.viewport[_ngcontent-%COMP%]{height:100%;width:100%}'],changeDetection:0}),d})();const ge=["scrollContainer"];function ue(d,b){if(1&d&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&d){const o=b.$implicit;e.Q6J("ngClass",o.class),e.xp6(1),e.Oqu(o.text)}}function pe(d,b){if(1&d&&(e.ynx(0),e.YNc(1,ue,2,2,"span",8),e.ALo(2,"tokens"),e.ALo(3,"searchToken"),e.ALo(4,"async"),e.BQk()),2&d){const o=b.ngIf,s=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.Dn7(3,4,o.tokens,o.text,e.lcZ(4,8,s.search)),o.text))}}function he(d,b){if(1&d&&(e.TgZ(0,"li",4)(1,"span",5),e._uU(2),e.qZA(),e.TgZ(3,"span",6),e._uU(4),e.qZA(),e.YNc(5,pe,5,10,"ng-container",7),e.qZA()),2&d){const o=b.$implicit,s=e.oxw();e.Q6J("ngClass","line-"+o.status),e.xp6(1),e.Udp("right","calc(100% + 26px + "+(s.lineNumberMargin/2).toString()+"px)")("width",s.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==o.oldLine?null:o.oldLine.lineNumber),e.xp6(1),e.Udp("width",s.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==o.newLine?null:o.newLine.lineNumber),e.xp6(1),e.Q6J("ngIf",s.getLineView(o))}}let _e=(()=>{class d extends((0,G.j)(L.A)){constructor(o){super(),this.diffService=o,this.lineNumberMargin=0,this.lines$=new n.X([]),this.selectedLines=new n.X([]),this.currentPatch=null}ngOnInit(){this.diffLines.pipe((0,h.R)(this.destroyed$)).subscribe(o=>{const s=this.currentPatch?{...this.currentPatch}:null;if(o){this.currentPatch={newFilePath:o.newFilePath,oldFilePath:o.oldFilePath};const O=P([o.oldLines.length,o.newLines.length])??0;this.lineNumberMargin=this.diffService.calculateMargin(O.toString().length),this.diffService.calculateInlineLines(o.oldLines,o.newLines,o.hunks).pipe((0,h.R)(this.destroyed$)).subscribe(M=>{this.lines$.next(M),(!s||s.oldFilePath!==this.currentPatch?.oldFilePath||s.newFilePath!==this.currentPatch?.newFilePath)&&this.scrollContainer.nativeElement?.scrollTo(0,0)})}else this.currentPatch=null,this.lineNumberMargin=0,this.lines$.next([]),s&&this.scrollContainer.nativeElement?.scrollTo(0,0)}),(0,c.R)(document,"selectionchange").pipe((0,T.b)(100),(0,h.R)(this.destroyed$)).subscribe(()=>{const o=document.getSelection();if(!o)return void this.selectedLines.next([]);const s=[];for(let O=0;O<o.rangeCount;O++){const M=o.getRangeAt(O);if(!M.startContainer.parentElement||!M.endContainer.parentElement||!this.scrollContainer.nativeElement.contains(M.startContainer.parentElement)||!this.scrollContainer.nativeElement.contains(M.endContainer.parentElement)||M.startContainer.parentElement===M.endContainer.parentElement&&M.startOffset===M.endOffset)continue;const N=this.scrollContainer.nativeElement.getBoundingClientRect().top,W=this.scrollContainer.nativeElement.scrollTop;s.push([Math.floor((W+M.startContainer.parentElement.getBoundingClientRect().top-N)/19),Math.floor((W+M.endContainer.parentElement.getBoundingClientRect().top-N)/19)])}this.selectedLines.next(s)}),(0,r.aj)([this.lines$,this.selectedLines]).pipe((0,R.U)(([o,s])=>s.flatMap(([O,M])=>(0,S.Z)(O,M+1)).map(O=>({oldLineNo:o[O]?.oldLine?.lineNumber??-1,newLineNo:o[O]?.newLine?.lineNumber??-1}))),(0,h.R)(this.destroyed$)).subscribe(o=>{this.diffService.selectedLines.next(o)})}getLineView(o){return"added"===o.status?o.newLine:"removed"===o.status?o.oldLine:"unchanged"===o.status?o.newLine??o.oldLine:null}trackByDiffLine(o,s){return o}}return d.\u0275fac=function(o){return new(o||d)(e.Y36(j.S))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-inline-view"]],viewQuery:function(o,s){if(1&o&&e.Gf(ge,7,e.SBq),2&o){let O;e.iGM(O=e.CRH())&&(s.scrollContainer=O.first)}},inputs:{diffLines:"diffLines",search:"search"},features:[e.qOj],decls:7,vars:9,consts:[[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["scrollContainer",""],["code",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"line",3,"ngClass"],[1,"old-line-number"],[1,"new-line-number"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,s){1&o&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0,1)(2,"code",null,2)(4,"ul"),e.YNc(5,he,6,10,"li",3),e.ALo(6,"async"),e.qZA()()()),2&o&&(e.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),e.xp6(4),e.Udp("margin-left",s.lineNumberMargin+26,"px"),e.xp6(1),e.Q6J("cdkVirtualForOf",e.lcZ(6,7,s.lines$))("cdkVirtualForTrackBy",s.trackByDiffLine))},dependencies:[Y.xd,Y.x0,Y.N7,$.mk,$.sg,$.O5,$.Ov,q,ee.U],styles:["code[_ngcontent-%COMP%]{display:block;white-space:pre;color:#d4d4d4;font-family:Consolas,Courier New,monospace;font-size:14px;font-weight:400;letter-spacing:0px;line-height:19px}code[_ngcontent-%COMP%]     .line{height:19px}code[_ngcontent-%COMP%]     .line.line-added{background:#1f2c19}code[_ngcontent-%COMP%]     .line.line-removed{background:#501515}code[_ngcontent-%COMP%]     .line.line-void{background:#111}code[_ngcontent-%COMP%]     .diff-added{background-color:#1d572c}code[_ngcontent-%COMP%]     .diff-removed{background-color:#803030}code[_ngcontent-%COMP%]     .search-result{background-color:#a14e1b}code[_ngcontent-%COMP%]     .meta-embedded, code[_ngcontent-%COMP%]     .source-groovy-embedded{color:#d4d4d4}code[_ngcontent-%COMP%]     .emphasis{font-style:italic}code[_ngcontent-%COMP%]     .strong{font-weight:700}code[_ngcontent-%COMP%]     .header{color:navy}code[_ngcontent-%COMP%]     .comment{color:#6a9955}code[_ngcontent-%COMP%]     .constant-language{color:#569cd6}code[_ngcontent-%COMP%]     .constant-numeric, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-number, code[_ngcontent-%COMP%]     .variable-other-enummember, code[_ngcontent-%COMP%]     .keyword-operator-plus-exponent, code[_ngcontent-%COMP%]     .keyword-operator-minus-exponent{color:#b5cea8}code[_ngcontent-%COMP%]     .constant-regexp{color:#646695}code[_ngcontent-%COMP%]     .entity-name-tag{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-tag-css{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-other-attribute-name{color:#9cdcfe}code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-mixin-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-id-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-parent-selector-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-element-css, code[_ngcontent-%COMP%]     .source-css-less .entity-other-attribute-name-id, code[_ngcontent-%COMP%]     .entity-other-attribute-name-attribute-scss, code[_ngcontent-%COMP%]     .entity-other-attribute-name-scss{color:#d7ba7d}code[_ngcontent-%COMP%]     .invalid{color:#f44747}code[_ngcontent-%COMP%]     .markup-underline{text-decoration:underline}code[_ngcontent-%COMP%]     .markup-bold{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-heading{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-italic{font-style:italic}code[_ngcontent-%COMP%]     .markup-inserted{color:#b5cea8}code[_ngcontent-%COMP%]     .markup-deleted{color:#ce9178}code[_ngcontent-%COMP%]     .markup-changed{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-quote-begin-markdown{color:#6a9955}code[_ngcontent-%COMP%]     .punctuation-definition-list-begin-markdown{color:#6796e6}code[_ngcontent-%COMP%]     .markup-inline-raw{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-tag{color:gray}code[_ngcontent-%COMP%]     .meta-preprocessor{color:#569cd6}code[_ngcontent-%COMP%]     .meta-preprocessor-string{color:#ce9178}code[_ngcontent-%COMP%]     .meta-preprocessor-numeric{color:#b5cea8}code[_ngcontent-%COMP%]     .meta-structure-dictionary-key-python{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-diff-header{color:#569cd6}code[_ngcontent-%COMP%]     .storage{color:#569cd6}code[_ngcontent-%COMP%]     .storage-type{color:#569cd6}code[_ngcontent-%COMP%]     .storage-modifier, code[_ngcontent-%COMP%]     .keyword-operator-noexcept{color:#569cd6}code[_ngcontent-%COMP%]     .string, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-string{color:#ce9178}code[_ngcontent-%COMP%]     .string-tag{color:#ce9178}code[_ngcontent-%COMP%]     .string-value{color:#ce9178}code[_ngcontent-%COMP%]     .string-regexp{color:#d16969}code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-begin, code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-end, code[_ngcontent-%COMP%]     .punctuation-section-embedded{color:#569cd6}code[_ngcontent-%COMP%]     .meta-template-expression{color:#d4d4d4}code[_ngcontent-%COMP%]     .support-type-vendored-property-name, code[_ngcontent-%COMP%]     .support-type-property-name, code[_ngcontent-%COMP%]     .variable-css, code[_ngcontent-%COMP%]     .variable-scss, code[_ngcontent-%COMP%]     .variable-other-less, code[_ngcontent-%COMP%]     .source-coffee-embedded{color:#9cdcfe}code[_ngcontent-%COMP%]     .keyword{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-control{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-operator{color:#d4d4d4}code[_ngcontent-%COMP%]     .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-expression, code[_ngcontent-%COMP%]     .keyword-operator-cast, code[_ngcontent-%COMP%]     .keyword-operator-sizeof, code[_ngcontent-%COMP%]     .keyword-operator-typeid, code[_ngcontent-%COMP%]     .keyword-operator-alignas, code[_ngcontent-%COMP%]     .keyword-operator-instanceof, code[_ngcontent-%COMP%]     .keyword-operator-logical-python, code[_ngcontent-%COMP%]     .keyword-operator-wordlike{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-other-unit{color:#b5cea8}code[_ngcontent-%COMP%]     .punctuation-section-embedded-begin-php, code[_ngcontent-%COMP%]     .punctuation-section-embedded-end-php{color:#569cd6}code[_ngcontent-%COMP%]     .support-function-git-rebase{color:#9cdcfe}code[_ngcontent-%COMP%]     .constant-sha-git-rebase{color:#b5cea8}code[_ngcontent-%COMP%]     .storage-modifier-import-java, code[_ngcontent-%COMP%]     .variable-language-wildcard-java, code[_ngcontent-%COMP%]     .storage-modifier-package-java{color:#d4d4d4}code[_ngcontent-%COMP%]     .variable-language{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-function, code[_ngcontent-%COMP%]     .support-function, code[_ngcontent-%COMP%]     .support-constant-handlebars, code[_ngcontent-%COMP%]     .source-powershell .variable-other-member{color:#dcdcaa}code[_ngcontent-%COMP%]     .meta-return-type, code[_ngcontent-%COMP%]     .support-class, code[_ngcontent-%COMP%]     .support-type, code[_ngcontent-%COMP%]     .entity-name-type, code[_ngcontent-%COMP%]     .entity-name-namespace, code[_ngcontent-%COMP%]     .entity-other-attribute, code[_ngcontent-%COMP%]     .entity-name-scope-resolution, code[_ngcontent-%COMP%]     .entity-name-class, code[_ngcontent-%COMP%]     .storage-type-numeric-go, code[_ngcontent-%COMP%]     .storage-type-byte-go, code[_ngcontent-%COMP%]     .storage-type-boolean-go, code[_ngcontent-%COMP%]     .storage-type-string-go, code[_ngcontent-%COMP%]     .storage-type-uintptr-go, code[_ngcontent-%COMP%]     .storage-type-error-go, code[_ngcontent-%COMP%]     .storage-type-rune-go, code[_ngcontent-%COMP%]     .storage-type-cs, code[_ngcontent-%COMP%]     .storage-type-generic-cs, code[_ngcontent-%COMP%]     .storage-type-modifier-cs, code[_ngcontent-%COMP%]     .storage-type-variable-cs, code[_ngcontent-%COMP%]     .storage-type-annotation-java, code[_ngcontent-%COMP%]     .storage-type-generic-java, code[_ngcontent-%COMP%]     .storage-type-java, code[_ngcontent-%COMP%]     .storage-type-object-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-java, code[_ngcontent-%COMP%]     .storage-type-token-java, code[_ngcontent-%COMP%]     .storage-type-groovy, code[_ngcontent-%COMP%]     .storage-type-annotation-groovy, code[_ngcontent-%COMP%]     .storage-type-parameters-groovy, code[_ngcontent-%COMP%]     .storage-type-generic-groovy, code[_ngcontent-%COMP%]     .storage-type-object-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-groovy{color:#4ec9b0}code[_ngcontent-%COMP%]     .meta-type-cast-expr, code[_ngcontent-%COMP%]     .meta-type-new-expr, code[_ngcontent-%COMP%]     .support-constant-math, code[_ngcontent-%COMP%]     .support-constant-dom, code[_ngcontent-%COMP%]     .support-constant-json, code[_ngcontent-%COMP%]     .entity-other-inherited-class{color:#4ec9b0}code[_ngcontent-%COMP%]     .keyword-control, code[_ngcontent-%COMP%]     .source-cpp .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-delete, code[_ngcontent-%COMP%]     .keyword-other-using, code[_ngcontent-%COMP%]     .keyword-other-operator, code[_ngcontent-%COMP%]     .entity-name-operator{color:#c586c0}code[_ngcontent-%COMP%]     .variable, code[_ngcontent-%COMP%]     .meta-definition-variable-name, code[_ngcontent-%COMP%]     .support-variable, code[_ngcontent-%COMP%]     .entity-name-variable{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-object-literal-key{color:#9cdcfe}code[_ngcontent-%COMP%]     .support-constant-property-value, code[_ngcontent-%COMP%]     .support-constant-font-name, code[_ngcontent-%COMP%]     .support-constant-media-type, code[_ngcontent-%COMP%]     .support-constant-media, code[_ngcontent-%COMP%]     .constant-other-color-rgb-value, code[_ngcontent-%COMP%]     .constant-other-rgb-value, code[_ngcontent-%COMP%]     .support-constant-color{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-group-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-group-assertion-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-character-class-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-begin-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-end-regexp, code[_ngcontent-%COMP%]     .keyword-operator-negation-regexp, code[_ngcontent-%COMP%]     .support-other-parenthesis-regexp{color:#ce9178}code[_ngcontent-%COMP%]     .constant-character-character-class-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-set-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-regexp, code[_ngcontent-%COMP%]     .constant-character-set-regexp{color:#d16969}code[_ngcontent-%COMP%]     .keyword-operator-or-regexp, code[_ngcontent-%COMP%]     .keyword-control-anchor-regexp{color:#dcdcaa}code[_ngcontent-%COMP%]     .keyword-operator-quantifier-regexp{color:#d7ba7d}code[_ngcontent-%COMP%]     .constant-character{color:#569cd6}code[_ngcontent-%COMP%]     .constant-character-escape{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-name-label{color:#c8c8c8}code[_ngcontent-%COMP%]     .punctuation-definition-string{color:#ce9178}code[_ngcontent-%COMP%]     .variable-language-this{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-comment{color:#6a9955}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none;color:#858585}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{right:calc(100% + 26px)}.viewport[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),d})();var k=i(2198),K=i(2994),a=i(5724),l=i(3943);const x=["leftScrollContainer"],V=["rightScrollContainer"];function J(d,b){if(1&d&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&d){const o=b.$implicit;e.Q6J("ngClass",o.class),e.xp6(1),e.Oqu(o.text)}}function X(d,b){if(1&d&&(e.ynx(0),e.TgZ(1,"span",12),e._uU(2),e.qZA(),e.YNc(3,J,2,2,"span",13),e.ALo(4,"tokens"),e.ALo(5,"searchToken"),e.ALo(6,"async"),e.BQk()),2&d){const o=e.oxw().$implicit,s=e.oxw();e.xp6(2),e.Oqu(null==o.oldLine?null:o.oldLine.lineNumber),e.xp6(1),e.Q6J("ngForOf",e.xi3(4,2,e.Dn7(5,5,null==o.oldLine?null:o.oldLine.tokens,null==o.oldLine?null:o.oldLine.text,e.lcZ(6,9,s.search)),null==o.oldLine?null:o.oldLine.text))}}function me(d,b){if(1&d&&(e.TgZ(0,"li",10),e.YNc(1,X,7,11,"ng-container",11),e.qZA()),2&d){const o=b.$implicit;e.Q6J("ngClass","line-"+o.status),e.xp6(1),e.Q6J("ngIf","added"!==o.status)}}function Ce(d,b){if(1&d&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&d){const o=b.$implicit;e.Q6J("ngClass",o.class),e.xp6(1),e.Oqu(o.text)}}function Me(d,b){if(1&d&&(e.ynx(0),e.TgZ(1,"span",12),e._uU(2),e.qZA(),e.YNc(3,Ce,2,2,"span",13),e.ALo(4,"tokens"),e.ALo(5,"searchToken"),e.ALo(6,"async"),e.BQk()),2&d){const o=e.oxw().$implicit,s=e.oxw();e.xp6(2),e.Oqu(null==o.newLine?null:o.newLine.lineNumber),e.xp6(1),e.Q6J("ngForOf",e.xi3(4,2,e.Dn7(5,5,null==o.newLine?null:o.newLine.tokens,null==o.newLine?null:o.newLine.text,e.lcZ(6,9,s.search)),null==o.newLine?null:o.newLine.text))}}function Pe(d,b){if(1&d&&(e.TgZ(0,"li",10),e.YNc(1,Me,7,11,"ng-container",11),e.qZA()),2&d){const o=b.$implicit;e.Q6J("ngClass","line-"+o.status),e.xp6(1),e.Q6J("ngIf","removed"!==o.status)}}let Oe=(()=>{class d extends((0,G.j)(L.A)){constructor(o,s){super(),this.zone=o,this.diffService=s,this.leftLineNumberMargin=0,this.rightLineNumberMargin=0,this.lines$=new n.X([]),this.selectedLines=new n.X([]),this.currentPatch=null}ngOnInit(){this.diffLines.pipe((0,h.R)(this.destroyed$)).subscribe(o=>{const s=this.currentPatch?{...this.currentPatch}:null;o?(this.currentPatch={newFilePath:o.newFilePath,oldFilePath:o.oldFilePath},this.leftLineNumberMargin=this.diffService.calculateMargin(o.oldLines.length.toString().length,!0),this.rightLineNumberMargin=this.diffService.calculateMargin(o.newLines.length.toString().length,!0),this.diffService.calculateSplitLines(o.oldLines,o.newLines,o.hunks).pipe((0,h.R)(this.destroyed$)).subscribe(O=>{this.lines$.next(O),(!s||s.oldFilePath!==this.currentPatch?.oldFilePath||s.newFilePath!==this.currentPatch?.newFilePath)&&(this.leftScrollContainer?.nativeElement?.scrollTo(0,0),this.rightScrollContainer?.nativeElement?.scrollTo(0,0))})):(this.currentPatch=null,this.leftLineNumberMargin=0,this.rightLineNumberMargin=0,this.lines$.next([]),s&&(this.leftScrollContainer?.nativeElement?.scrollTo(0,0),this.rightScrollContainer?.nativeElement?.scrollTo(0,0)))}),this.zone.runOutsideAngular(()=>{let o=!1,s=!1;(0,c.R)(this.leftScrollContainer.nativeElement,"scroll",{passive:!0}).pipe((0,k.h)(()=>!s),(0,K.b)(()=>{o=!0,this.rightScrollContainer.nativeElement.scrollTo(this.leftScrollContainer.nativeElement.scrollLeft,this.leftScrollContainer.nativeElement.scrollTop)}),(0,T.b)(100),(0,h.R)(this.destroyed$)).subscribe(()=>{o=!1}),(0,c.R)(this.rightScrollContainer.nativeElement,"scroll",{passive:!0}).pipe((0,k.h)(()=>!o),(0,K.b)(()=>{s=!0,this.leftScrollContainer.nativeElement.scrollTo(this.rightScrollContainer.nativeElement.scrollLeft,this.rightScrollContainer.nativeElement.scrollTop)}),(0,T.b)(100),(0,h.R)(this.destroyed$)).subscribe(()=>{s=!1})}),(0,c.R)(document,"selectionchange").pipe((0,T.b)(100),(0,h.R)(this.destroyed$)).subscribe(()=>{const o=document.getSelection();if(!o)return void this.selectedLines.next([]);const s=[];for(let O=0;O<o.rangeCount;O++){const M=o.getRangeAt(O);if(!M.startContainer.parentElement||!M.endContainer.parentElement||!(this.leftScrollContainer.nativeElement.contains(M.startContainer.parentElement)&&this.leftScrollContainer.nativeElement.contains(M.endContainer.parentElement)||this.rightScrollContainer.nativeElement.contains(M.startContainer.parentElement)&&this.rightScrollContainer.nativeElement.contains(M.endContainer.parentElement))||M.startContainer.parentElement===M.endContainer.parentElement&&M.startOffset===M.endOffset)continue;const N=this.leftScrollContainer.nativeElement.contains(M.startContainer.parentElement)?this.leftScrollContainer:this.rightScrollContainer,W=N.nativeElement.getBoundingClientRect().top,Q=N.nativeElement.scrollTop;s.push([Math.floor((Q+M.startContainer.parentElement.getBoundingClientRect().top-W)/19),Math.floor((Q+M.endContainer.parentElement.getBoundingClientRect().top-W)/19)])}this.selectedLines.next(s)}),(0,r.aj)([this.lines$,this.selectedLines]).pipe((0,R.U)(([o,s])=>s.flatMap(([O,M])=>(0,S.Z)(O,M+1)).map(O=>({oldLineNo:o[O]?.oldLine?.lineNumber??-1,newLineNo:o[O]?.newLine?.lineNumber??-1}))),(0,h.R)(this.destroyed$)).subscribe(o=>{this.diffService.selectedLines.next(o)})}trackByDiffLine(o,s){return o}}return d.\u0275fac=function(o){return new(o||d)(e.Y36(e.R0b),e.Y36(j.S))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-split-view"]],viewQuery:function(o,s){if(1&o&&(e.Gf(x,7,e.SBq),e.Gf(V,7,e.SBq)),2&o){let O;e.iGM(O=e.CRH())&&(s.leftScrollContainer=O.first),e.iGM(O=e.CRH())&&(s.rightScrollContainer=O.first)}},inputs:{diffLines:"diffLines",search:"search"},features:[e.qOj],decls:17,vars:18,consts:[["id","diff-view_split-left"],[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["leftScrollContainer",""],[1,"left-code"],["leftCode",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["id","diff-view_split-right"],["rightScrollContainer",""],[1,"right-code"],["rightCode",""],[1,"line",3,"ngClass"],[4,"ngIf"],[1,"line-number"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,s){1&o&&(e.TgZ(0,"app-grid")(1,"app-grid-cell",0)(2,"cdk-virtual-scroll-viewport",1,2)(4,"code",3,4)(6,"ul"),e.YNc(7,me,2,2,"li",5),e.ALo(8,"async"),e.qZA()()()(),e.TgZ(9,"app-grid-cell",6)(10,"cdk-virtual-scroll-viewport",1,7)(12,"code",8,9)(14,"ul"),e.YNc(15,Pe,2,2,"li",5),e.ALo(16,"async"),e.qZA()()()()()),2&o&&(e.xp6(2),e.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),e.xp6(4),e.Udp("margin-left",s.leftLineNumberMargin+26,"px"),e.xp6(1),e.Q6J("cdkVirtualForOf",e.lcZ(8,14,s.lines$))("cdkVirtualForTrackBy",s.trackByDiffLine),e.xp6(3),e.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),e.xp6(4),e.Udp("margin-left",s.rightLineNumberMargin+26,"px"),e.xp6(1),e.Q6J("cdkVirtualForOf",e.lcZ(16,16,s.lines$))("cdkVirtualForTrackBy",s.trackByDiffLine))},dependencies:[Y.xd,Y.x0,Y.N7,$.mk,$.sg,$.O5,a.Y,l.M,$.Ov,q,ee.U],styles:["code[_ngcontent-%COMP%]{display:block;white-space:pre;color:#d4d4d4;font-family:Consolas,Courier New,monospace;font-size:14px;font-weight:400;letter-spacing:0px;line-height:19px}code[_ngcontent-%COMP%]     .line{height:19px}code[_ngcontent-%COMP%]     .line.line-added{background:#1f2c19}code[_ngcontent-%COMP%]     .line.line-removed{background:#501515}code[_ngcontent-%COMP%]     .line.line-void{background:#111}code[_ngcontent-%COMP%]     .diff-added{background-color:#1d572c}code[_ngcontent-%COMP%]     .diff-removed{background-color:#803030}code[_ngcontent-%COMP%]     .search-result{background-color:#a14e1b}code[_ngcontent-%COMP%]     .meta-embedded, code[_ngcontent-%COMP%]     .source-groovy-embedded{color:#d4d4d4}code[_ngcontent-%COMP%]     .emphasis{font-style:italic}code[_ngcontent-%COMP%]     .strong{font-weight:700}code[_ngcontent-%COMP%]     .header{color:navy}code[_ngcontent-%COMP%]     .comment{color:#6a9955}code[_ngcontent-%COMP%]     .constant-language{color:#569cd6}code[_ngcontent-%COMP%]     .constant-numeric, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-number, code[_ngcontent-%COMP%]     .variable-other-enummember, code[_ngcontent-%COMP%]     .keyword-operator-plus-exponent, code[_ngcontent-%COMP%]     .keyword-operator-minus-exponent{color:#b5cea8}code[_ngcontent-%COMP%]     .constant-regexp{color:#646695}code[_ngcontent-%COMP%]     .entity-name-tag{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-tag-css{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-other-attribute-name{color:#9cdcfe}code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-mixin-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-id-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-parent-selector-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-element-css, code[_ngcontent-%COMP%]     .source-css-less .entity-other-attribute-name-id, code[_ngcontent-%COMP%]     .entity-other-attribute-name-attribute-scss, code[_ngcontent-%COMP%]     .entity-other-attribute-name-scss{color:#d7ba7d}code[_ngcontent-%COMP%]     .invalid{color:#f44747}code[_ngcontent-%COMP%]     .markup-underline{text-decoration:underline}code[_ngcontent-%COMP%]     .markup-bold{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-heading{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-italic{font-style:italic}code[_ngcontent-%COMP%]     .markup-inserted{color:#b5cea8}code[_ngcontent-%COMP%]     .markup-deleted{color:#ce9178}code[_ngcontent-%COMP%]     .markup-changed{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-quote-begin-markdown{color:#6a9955}code[_ngcontent-%COMP%]     .punctuation-definition-list-begin-markdown{color:#6796e6}code[_ngcontent-%COMP%]     .markup-inline-raw{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-tag{color:gray}code[_ngcontent-%COMP%]     .meta-preprocessor{color:#569cd6}code[_ngcontent-%COMP%]     .meta-preprocessor-string{color:#ce9178}code[_ngcontent-%COMP%]     .meta-preprocessor-numeric{color:#b5cea8}code[_ngcontent-%COMP%]     .meta-structure-dictionary-key-python{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-diff-header{color:#569cd6}code[_ngcontent-%COMP%]     .storage{color:#569cd6}code[_ngcontent-%COMP%]     .storage-type{color:#569cd6}code[_ngcontent-%COMP%]     .storage-modifier, code[_ngcontent-%COMP%]     .keyword-operator-noexcept{color:#569cd6}code[_ngcontent-%COMP%]     .string, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-string{color:#ce9178}code[_ngcontent-%COMP%]     .string-tag{color:#ce9178}code[_ngcontent-%COMP%]     .string-value{color:#ce9178}code[_ngcontent-%COMP%]     .string-regexp{color:#d16969}code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-begin, code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-end, code[_ngcontent-%COMP%]     .punctuation-section-embedded{color:#569cd6}code[_ngcontent-%COMP%]     .meta-template-expression{color:#d4d4d4}code[_ngcontent-%COMP%]     .support-type-vendored-property-name, code[_ngcontent-%COMP%]     .support-type-property-name, code[_ngcontent-%COMP%]     .variable-css, code[_ngcontent-%COMP%]     .variable-scss, code[_ngcontent-%COMP%]     .variable-other-less, code[_ngcontent-%COMP%]     .source-coffee-embedded{color:#9cdcfe}code[_ngcontent-%COMP%]     .keyword{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-control{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-operator{color:#d4d4d4}code[_ngcontent-%COMP%]     .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-expression, code[_ngcontent-%COMP%]     .keyword-operator-cast, code[_ngcontent-%COMP%]     .keyword-operator-sizeof, code[_ngcontent-%COMP%]     .keyword-operator-typeid, code[_ngcontent-%COMP%]     .keyword-operator-alignas, code[_ngcontent-%COMP%]     .keyword-operator-instanceof, code[_ngcontent-%COMP%]     .keyword-operator-logical-python, code[_ngcontent-%COMP%]     .keyword-operator-wordlike{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-other-unit{color:#b5cea8}code[_ngcontent-%COMP%]     .punctuation-section-embedded-begin-php, code[_ngcontent-%COMP%]     .punctuation-section-embedded-end-php{color:#569cd6}code[_ngcontent-%COMP%]     .support-function-git-rebase{color:#9cdcfe}code[_ngcontent-%COMP%]     .constant-sha-git-rebase{color:#b5cea8}code[_ngcontent-%COMP%]     .storage-modifier-import-java, code[_ngcontent-%COMP%]     .variable-language-wildcard-java, code[_ngcontent-%COMP%]     .storage-modifier-package-java{color:#d4d4d4}code[_ngcontent-%COMP%]     .variable-language{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-function, code[_ngcontent-%COMP%]     .support-function, code[_ngcontent-%COMP%]     .support-constant-handlebars, code[_ngcontent-%COMP%]     .source-powershell .variable-other-member{color:#dcdcaa}code[_ngcontent-%COMP%]     .meta-return-type, code[_ngcontent-%COMP%]     .support-class, code[_ngcontent-%COMP%]     .support-type, code[_ngcontent-%COMP%]     .entity-name-type, code[_ngcontent-%COMP%]     .entity-name-namespace, code[_ngcontent-%COMP%]     .entity-other-attribute, code[_ngcontent-%COMP%]     .entity-name-scope-resolution, code[_ngcontent-%COMP%]     .entity-name-class, code[_ngcontent-%COMP%]     .storage-type-numeric-go, code[_ngcontent-%COMP%]     .storage-type-byte-go, code[_ngcontent-%COMP%]     .storage-type-boolean-go, code[_ngcontent-%COMP%]     .storage-type-string-go, code[_ngcontent-%COMP%]     .storage-type-uintptr-go, code[_ngcontent-%COMP%]     .storage-type-error-go, code[_ngcontent-%COMP%]     .storage-type-rune-go, code[_ngcontent-%COMP%]     .storage-type-cs, code[_ngcontent-%COMP%]     .storage-type-generic-cs, code[_ngcontent-%COMP%]     .storage-type-modifier-cs, code[_ngcontent-%COMP%]     .storage-type-variable-cs, code[_ngcontent-%COMP%]     .storage-type-annotation-java, code[_ngcontent-%COMP%]     .storage-type-generic-java, code[_ngcontent-%COMP%]     .storage-type-java, code[_ngcontent-%COMP%]     .storage-type-object-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-java, code[_ngcontent-%COMP%]     .storage-type-token-java, code[_ngcontent-%COMP%]     .storage-type-groovy, code[_ngcontent-%COMP%]     .storage-type-annotation-groovy, code[_ngcontent-%COMP%]     .storage-type-parameters-groovy, code[_ngcontent-%COMP%]     .storage-type-generic-groovy, code[_ngcontent-%COMP%]     .storage-type-object-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-groovy{color:#4ec9b0}code[_ngcontent-%COMP%]     .meta-type-cast-expr, code[_ngcontent-%COMP%]     .meta-type-new-expr, code[_ngcontent-%COMP%]     .support-constant-math, code[_ngcontent-%COMP%]     .support-constant-dom, code[_ngcontent-%COMP%]     .support-constant-json, code[_ngcontent-%COMP%]     .entity-other-inherited-class{color:#4ec9b0}code[_ngcontent-%COMP%]     .keyword-control, code[_ngcontent-%COMP%]     .source-cpp .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-delete, code[_ngcontent-%COMP%]     .keyword-other-using, code[_ngcontent-%COMP%]     .keyword-other-operator, code[_ngcontent-%COMP%]     .entity-name-operator{color:#c586c0}code[_ngcontent-%COMP%]     .variable, code[_ngcontent-%COMP%]     .meta-definition-variable-name, code[_ngcontent-%COMP%]     .support-variable, code[_ngcontent-%COMP%]     .entity-name-variable{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-object-literal-key{color:#9cdcfe}code[_ngcontent-%COMP%]     .support-constant-property-value, code[_ngcontent-%COMP%]     .support-constant-font-name, code[_ngcontent-%COMP%]     .support-constant-media-type, code[_ngcontent-%COMP%]     .support-constant-media, code[_ngcontent-%COMP%]     .constant-other-color-rgb-value, code[_ngcontent-%COMP%]     .constant-other-rgb-value, code[_ngcontent-%COMP%]     .support-constant-color{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-group-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-group-assertion-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-character-class-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-begin-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-end-regexp, code[_ngcontent-%COMP%]     .keyword-operator-negation-regexp, code[_ngcontent-%COMP%]     .support-other-parenthesis-regexp{color:#ce9178}code[_ngcontent-%COMP%]     .constant-character-character-class-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-set-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-regexp, code[_ngcontent-%COMP%]     .constant-character-set-regexp{color:#d16969}code[_ngcontent-%COMP%]     .keyword-operator-or-regexp, code[_ngcontent-%COMP%]     .keyword-control-anchor-regexp{color:#dcdcaa}code[_ngcontent-%COMP%]     .keyword-operator-quantifier-regexp{color:#d7ba7d}code[_ngcontent-%COMP%]     .constant-character{color:#569cd6}code[_ngcontent-%COMP%]     .constant-character-escape{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-name-label{color:#c8c8c8}code[_ngcontent-%COMP%]     .punctuation-definition-string{color:#ce9178}code[_ngcontent-%COMP%]     .variable-language-this{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-comment{color:#6a9955}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .line-number[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none;color:#858585;right:calc(100% + 26px)}code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-added[_ngcontent-%COMP%]{background:#111}code.left-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%]{background:#501515}code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-removed[_ngcontent-%COMP%]{background:#111}code.right-code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.line-replaced[_ngcontent-%COMP%]{background:#1f2c19}.viewport[_ngcontent-%COMP%]{height:100%;width:100%;overflow-x:scroll}"],changeDetection:0}),d})();var te=i(9549),fe=i(4006),be=i(266);let ye=(()=>{class d{}return d.\u0275fac=function(o){return new(o||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[D.vV,t.c,Z.I]}),d})();e.B6R(_.s,[D.A9,D.Yi,te.TO,te.KE,te.hX,te.qo,te.R9,t.Nt,$.O5,fe.Fj,fe.JJ,fe.oH,ne.lW,oe.Hw,be.gM,de,_e,Oe],[$.Ov])},315:(H,U,i)=>{i.d(U,{S:()=>E});var D=i(3969),Z=i(7717),_=i(591),e=i(1086),F=i(567),I=i(4850),B=i(4650);let E=(()=>{class P{constructor(){this.selectedLines=new _.X([]),this.calculateInlineLines=(g,u,v)=>{const w=[];let y=0,p=0,f=[];const m=(n,c)=>{(n>y||c>p)&&(w.push(...(0,Z.Z)(g.slice(y,n),u.slice(p,c)).map(([r,C])=>({oldLine:r??null,newLine:C??null,status:"unchanged"}))),y=n,p=c)};for(const n of v){m(n.oldStart-1,n.newStart-1),[f,y,p]=this.calculateGroups(g,u,y,p,n);for(const c of f)"modified"===c.type?w.push(...c.lines.flatMap(r=>"replaced"===r.status?[{...r,status:"removed",newLine:null},{...r,status:"added",oldLine:null}]:[r]).sort((r,C)=>"removed"===r.status&&"removed"===C.status?0:"removed"===r.status?-1:"removed"===C.status?1:0)):w.push(...c.lines)}return m(g.length,u.length),(0,e.of)(w)},this.calculateHunkLines=(g,u,v)=>{const w=[];let y=0,p=0,f=[];const m=(n,c,r)=>{(n>y||c>p)&&(w.push({isSeparator:!0,separatorHeader:r,hiddenDiffLines:(0,Z.Z)(g.slice(y,n),u.slice(p,c)).map(([C,A])=>({oldLine:C??null,newLine:A??null,status:"unchanged"}))}),y=n,p=c)};for(const n of v){m(n.oldStart-1,n.newStart-1,n.header),[f,y,p]=this.calculateGroups(g,u,y,p,n);for(const c of f)"modified"===c.type?w.push(...c.lines.flatMap(r=>"replaced"===r.status?[{isSeparator:!1,diffLine:{...r,status:"removed",newLine:null}},{isSeparator:!1,diffLine:{...r,status:"added",oldLine:null}}]:[{isSeparator:!1,diffLine:r}]).sort((r,C)=>"removed"===r.diffLine.status&&"removed"===C.diffLine.status?0:"removed"===r.diffLine.status?-1:"removed"===C.diffLine.status?1:0)):w.push(...c.lines.map(r=>({isSeparator:!1,diffLine:r})))}return m(g.length,u.length,null),(0,e.of)(w)},this.calculateSplitLines=(g,u,v)=>{const w=[];let y=0,p=0,f=[];const m=(n,c)=>{(n>y||c>p)&&(w.push(...(0,Z.Z)(g.slice(y,n),u.slice(p,c)).map(([r,C])=>({oldLine:r??null,newLine:C??null,status:"unchanged"}))),y=n,p=c)};for(const n of v){m(n.oldStart-1,n.newStart-1),[f,y,p]=this.calculateGroups(g,u,y,p,n);for(const c of f)w.push(...c.lines)}return m(g.length,u.length),(0,e.of)(w)},this.calculateMergeLines=(g,u,v,w,y)=>{const p=[],f=this.calculateSplitLines(g,u,w),m=this.calculateSplitLines(g,v,y);return(0,F.D)([f,m]).pipe((0,I.U)(([n,c])=>{let r=1,C=0,A=0;for(;C<n.length&&A<c.length;){const h=n[C],T=c[A];if(h.oldLine||T.oldLine){if(!h.oldLine&&T.oldLine)p.push({baseLine:null,yoursLine:h.newLine,yoursStatus:h.status,theirsLine:null,theirsStatus:null}),C++;else if(h.oldLine&&!T.oldLine)p.push({baseLine:null,yoursLine:null,yoursStatus:null,theirsLine:T.newLine,theirsStatus:T.status}),A++;else if(h.oldLine&&T.oldLine){if(r!==h.oldLine.lineNumber||r!==T.oldLine.lineNumber)throw new Error(`Base line numbers do not match - yours: ${h.oldLine.lineNumber}, theirs: ${T.oldLine.lineNumber}`);p.push({baseLine:T.oldLine,yoursLine:h.newLine,yoursStatus:h.status,theirsLine:T.newLine,theirsStatus:T.status}),r++,C++,A++}}else p.push({baseLine:null,yoursLine:h.newLine,yoursStatus:h.status,theirsLine:T.newLine,theirsStatus:T.status}),C++,A++}for(;C<n.length;){const h=n[C];p.push({baseLine:h.oldLine,yoursLine:h.newLine,yoursStatus:h.status,theirsLine:null,theirsStatus:null}),C++}for(;A<c.length;){const h=c[A];p.push({baseLine:h.oldLine,yoursLine:null,yoursStatus:null,theirsLine:h.newLine,theirsStatus:h.status}),A++}return p}))},this.calculateGroups=(g,u,v,w,y)=>{const p=y.lines.filter(r=>">"!==r.origin&&"<"!==r.origin),f=[];let m=v,n=w,c=0;for(;c<p.length;)if(-1===p[c].newLineNo){const r=[];for(;c<p.length&&-1===p[c].newLineNo;)r.push(g[m]),m++,c++;if(c<p.length&&-1===p[c].oldLineNo){const C=[];for(;c<p.length&&-1===p[c].oldLineNo;)C.push(u[n]),n++,c++;f.push(this.createModifiedGroup(r,C))}else f.push({type:"removed",lines:r.map(C=>({oldLine:C,newLine:null,status:"removed"}))})}else if(-1===p[c].oldLineNo){const r=[];for(;c<p.length&&-1===p[c].oldLineNo;)r.push(u[n]),n++,c++;if(c<p.length&&-1===p[c].newLineNo){const C=[];for(;c<p.length&&-1===p[c].newLineNo;)C.push(g[m]),m++,c++;f.push(this.createModifiedGroup(C,r))}else f.push({type:"added",lines:r.map(C=>({oldLine:null,newLine:C,status:"added"}))})}else{const r=[],C=[];for(;c<p.length&&-1!==p[c].oldLineNo&&-1!==p[c].newLineNo;)r.push(g[m]),C.push(u[n]),m++,n++,c++;f.push({type:"unchanged",lines:(0,Z.Z)(r,C).map(([A,h])=>({oldLine:A??null,newLine:h??null,status:"unchanged"}))})}return[f,m,n]},this.createModifiedGroup=(g,u)=>{const v=g.map(R=>R.text.replace("\n","")).join("\n"),w=u.map(R=>R.text.replace("\n","")).join("\n"),y=new D.diff_match_patch,p=y.diff_main(v,w);y.diff_cleanupSemantic(p);const f=[];let m=0,n=0,c=null,r=null,C=[],A=[],h=[];const T=R=>{R===D.DIFF_EQUAL?(f.push({status:null!==c&&null!==r?"replaced":null!==c?"removed":"added",oldLine:null!==c?{...g[m],tokens:[...g[m].tokens,...C]}:null,newLine:null!==r?{...u[n],tokens:[...u[n].tokens,...A]}:null}),m++,n++,c=null,r=null,C=[],A=[]):R===D.DIFF_INSERT?(null===c&&(f.push(...h),h=[]),(null===c?f:h).push({status:"added",oldLine:null,newLine:{...u[n],tokens:[...u[n].tokens,...A]}}),n++,r=null,A=[]):R===D.DIFF_DELETE&&(null===r&&(f.push(...h),h=[]),(null===r?f:h).push({status:"removed",oldLine:{...g[m],tokens:[...g[m].tokens,...C]},newLine:null}),m++,c=null,C=[])};for(const[R,G]of p){const L=G.split("\n");if(R===D.DIFF_EQUAL){if(L.length>1){f.push(...h),h=[],null!==c||null!==r?(c=(c??0)+L[0].length,r=(r??0)+L[0].length,T(R)):(f.push({status:"unchanged",oldLine:g[m],newLine:u[n]}),m++,n++);for(let j=1;j<L.length-1;j++)f.push({status:"unchanged",oldLine:g[m],newLine:u[n]}),m++,n++}c=(c??0)+L[L.length-1].length,r=(r??0)+L[L.length-1].length}else if(R===D.DIFF_INSERT){if(L.length>1)if(null!==r){L[0].length>0&&A.push({startIndex:r??0,endIndex:(r??0)+L[0].length,scopes:["diff-added"]}),r+=L[0].length,T(R);for(let j=1;j<L.length-1;j++)(null===c?f:h).push({status:"added",oldLine:null,newLine:{...u[n],tokens:[...u[n].tokens,{startIndex:0,endIndex:L[j].length,scopes:["diff-added"]}]}}),n++}else for(let j=0;j<L.length-1;j++)(null===c?f:h).push({status:"added",oldLine:null,newLine:{...u[n],tokens:[...u[n].tokens,{startIndex:0,endIndex:L[j].length,scopes:["diff-added"]}]}}),n++;L[L.length-1].length>0&&A.push({startIndex:r??0,endIndex:(r??0)+L[L.length-1].length,scopes:["diff-added"]}),r=(r??0)+L[L.length-1].length}else if(R===D.DIFF_DELETE){if(L.length>1)if(null!==c){L[0].length>0&&C.push({startIndex:c??0,endIndex:(c??0)+L[0].length,scopes:["diff-removed"]}),c+=L[0].length,T(R);for(let j=1;j<L.length-1;j++)(null===r?f:h).push({status:"removed",oldLine:{...g[m],tokens:[...g[m].tokens,{startIndex:0,endIndex:L[j].length,scopes:["diff-removed"]}]},newLine:null}),m++}else for(let j=0;j<L.length-1;j++)(null===r?f:h).push({status:"removed",oldLine:{...g[m],tokens:[...g[m].tokens,{startIndex:0,endIndex:L[j].length,scopes:["diff-removed"]}]},newLine:null}),m++;L[L.length-1].length>0&&C.push({startIndex:c??0,endIndex:(c??0)+L[L.length-1].length,scopes:["diff-removed"]}),c=(c??0)+L[L.length-1].length}}return f.push(...h),(null!==c||null!==r)&&T(D.DIFF_EQUAL),{type:"modified",lines:f}}}calculateMargin(g,u=!1){return P.lineNumberSpacing+g*P.lineNumberCharacterWidth*(u?1:2)}getFileExtension(g){if(!g)return null;const u=g.lastIndexOf(".");return u>0?g.substring(u+1):null}}return P.lineNumberCharacterWidth=8.3,P.lineNumberSpacing=10,P.\u0275fac=function(g){return new(g||P)},P.\u0275prov=B.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()},1264:(H,U,i)=>{i.d(U,{U:()=>P});var D=i(113),t=i(5944),Z=i(7965),_=i(8639);const F=(0,Z.Z)(function(S,g){if(null==S)return[];var u=g.length;return u>1&&(0,_.Z)(S,g[0],g[1])?g=[]:u>2&&(0,_.Z)(g[0],g[1],g[2])&&(g=[g[0]]),(0,t.Z)(S,(0,D.Z)(g,1),[])});var I=i(1256),B=i(4650);let P=(()=>{class S{constructor(){this.renderScopes=u=>u.map(v=>this.renderScope(v)).join(" "),this.areEqual=(u,v)=>{if(u.length!==v.length)return!1;const w=new Set(u);for(const y of v)if(!w.has(y))return!1;return!0}}transform(u,v=""){if(!v)return[];if(v.length>1e4)return[{class:"normal",text:v.slice(0,1e4)+"... Max line length reached!"}];const w=F(u,m=>m.startIndex),y=[];let p=0,f=w.filter(m=>m.startIndex<=p&&m.endIndex>p);for(;p<v.length;){let m=w.filter(c=>c.startIndex<=p&&c.endIndex>p);const n=p;for(;this.areEqual(f,m)&&p<v.length;)p++,m=w.filter(c=>c.startIndex<=p&&c.endIndex>p);y.push({class:this.renderScopes(f.map(c=>c.scopes)),text:v.substring(n,p)||"\n"}),f=m}return y}renderScope(u){const w=u[u.length-1].split(".");return(0,I.Z)(1,w.length+1).map(y=>w.slice(0,y).join("-")).join(" ")}}return S.\u0275fac=function(u){return new(u||S)},S.\u0275pipe=B.Yjl({name:"tokens",type:S,pure:!0}),S})()},811:(H,U,i)=>{i.d(U,{A9:()=>v,Yi:()=>y,vV:()=>p});var D=i(2687),t=i(1281),Z=i(5017),_=i(4650),e=i(4006),F=i(3238);const I=["button"],B=["*"],E=new _.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),P=new _.OlP("MatButtonToggleGroup"),S={provide:e.JU,useExisting:(0,_.Gpc)(()=>v),multi:!0};let g=0;class u{constructor(m,n){this.source=m,this.value=n}}let v=(()=>{class f{constructor(n,c){this._changeDetector=n,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+g++,this.valueChange=new _.vpe,this.change=new _.vpe,this.appearance=c&&c.appearance?c.appearance:"standard"}get name(){return this._name}set name(n){this._name=n,this._buttonToggles&&this._buttonToggles.forEach(c=>{c.name=this._name,c._markForCheck()})}get vertical(){return this._vertical}set vertical(n){this._vertical=(0,t.Ig)(n)}get value(){const n=this._selectionModel?this._selectionModel.selected:[];return this.multiple?n.map(c=>c.value):n[0]?n[0].value:void 0}set value(n){this._setSelectionByValue(n),this.valueChange.emit(this.value)}get selected(){const n=this._selectionModel?this._selectionModel.selected:[];return this.multiple?n:n[0]||null}get multiple(){return this._multiple}set multiple(n){this._multiple=(0,t.Ig)(n)}get disabled(){return this._disabled}set disabled(n){this._disabled=(0,t.Ig)(n),this._buttonToggles&&this._buttonToggles.forEach(c=>c._markForCheck())}ngOnInit(){this._selectionModel=new Z.Ov(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(n=>n.checked))}writeValue(n){this.value=n,this._changeDetector.markForCheck()}registerOnChange(n){this._controlValueAccessorChangeFn=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this.disabled=n}_emitChangeEvent(){const n=this.selected,c=Array.isArray(n)?n[n.length-1]:n,r=new u(c,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(n,c,r=!1,C=!1){!this.multiple&&this.selected&&!n.checked&&(this.selected.checked=!1),this._selectionModel?c?this._selectionModel.select(n):this._selectionModel.deselect(n):C=!0,C?Promise.resolve().then(()=>this._updateModelValue(r)):this._updateModelValue(r)}_isSelected(n){return this._selectionModel&&this._selectionModel.isSelected(n)}_isPrechecked(n){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(c=>null!=n.value&&c===n.value):n.value===this._rawValue)}_setSelectionByValue(n){this._rawValue=n,this._buttonToggles&&(this.multiple&&n?(Array.isArray(n),this._clearSelection(),n.forEach(c=>this._selectValue(c))):(this._clearSelection(),this._selectValue(n)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(n=>n.checked=!1)}_selectValue(n){const c=this._buttonToggles.find(r=>null!=r.value&&r.value===n);c&&(c.checked=!0,this._selectionModel.select(c))}_updateModelValue(n){n&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}return f.\u0275fac=function(n){return new(n||f)(_.Y36(_.sBO),_.Y36(E,8))},f.\u0275dir=_.lG2({type:f,selectors:[["mat-button-toggle-group"]],contentQueries:function(n,c,r){if(1&n&&_.Suo(r,y,5),2&n){let C;_.iGM(C=_.CRH())&&(c._buttonToggles=C)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(n,c){2&n&&(_.uIk("aria-disabled",c.disabled),_.ekj("mat-button-toggle-vertical",c.vertical)("mat-button-toggle-group-appearance-standard","standard"===c.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[_._Bn([S,{provide:P,useExisting:f}])]}),f})();const w=(0,F.Kr)(class{});let y=(()=>{class f extends w{constructor(n,c,r,C,A,h){super(),this._changeDetectorRef=c,this._elementRef=r,this._focusMonitor=C,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new _.vpe;const T=Number(A);this.tabIndex=T||0===T?T:null,this.buttonToggleGroup=n,this.appearance=h&&h.appearance?h.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(n){this._appearance=n}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(n){const c=(0,t.Ig)(n);c!==this._checked&&(this._checked=c,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(n){this._disabled=(0,t.Ig)(n)}ngOnInit(){const n=this.buttonToggleGroup;this._isSingleSelector=n&&!n.multiple,this.id=this.id||"mat-button-toggle-"+g++,this._isSingleSelector&&(this.name=n.name),n&&(n._isPrechecked(this)?this.checked=!0:n._isSelected(this)!==this._checked&&n._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const n=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),n&&n._isSelected(this)&&n._syncButtonToggle(this,!1,!1,!0)}focus(n){this._buttonElement.nativeElement.focus(n)}_onButtonClick(){const n=!!this._isSingleSelector||!this._checked;n!==this._checked&&(this._checked=n,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new u(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return f.\u0275fac=function(n){return new(n||f)(_.Y36(P,8),_.Y36(_.sBO),_.Y36(_.SBq),_.Y36(D.tE),_.$8M("tabindex"),_.Y36(E,8))},f.\u0275cmp=_.Xpm({type:f,selectors:[["mat-button-toggle"]],viewQuery:function(n,c){if(1&n&&_.Gf(I,5),2&n){let r;_.iGM(r=_.CRH())&&(c._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(n,c){1&n&&_.NdJ("focus",function(){return c.focus()}),2&n&&(_.uIk("aria-label",null)("aria-labelledby",null)("id",c.id)("name",null),_.ekj("mat-button-toggle-standalone",!c.buttonToggleGroup)("mat-button-toggle-checked",c.checked)("mat-button-toggle-disabled",c.disabled)("mat-button-toggle-appearance-standard","standard"===c.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[_.qOj],ngContentSelectors:B,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,c){if(1&n&&(_.F$t(),_.TgZ(0,"button",0,1),_.NdJ("click",function(){return c._onButtonClick()}),_.TgZ(2,"span",2),_.Hsn(3),_.qZA()(),_._UZ(4,"span",3)(5,"span",4)),2&n){const r=_.MAs(1);_.Q6J("id",c.buttonId)("disabled",c.disabled||null),_.uIk("tabindex",c.disabled?-1:c.tabIndex)("aria-pressed",c.checked)("name",c.name||null)("aria-label",c.ariaLabel)("aria-labelledby",c.ariaLabelledby),_.xp6(5),_.Q6J("matRippleTrigger",r)("matRippleDisabled",c.disableRipple||c.disabled)}},dependencies:[F.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),f})(),p=(()=>{class f{}return f.\u0275fac=function(n){return new(n||f)},f.\u0275mod=_.oAB({type:f}),f.\u0275inj=_.cJS({imports:[F.BQ,F.si,F.BQ]}),f})()},3693:(H,U,i)=>{i.d(U,{Z:()=>g});const _=function D(u){return function(v,w,y){for(var p=-1,f=Object(v),m=y(v),n=m.length;n--;){var c=m[u?n:++p];if(!1===w(f[c],c,f))break}return v}}();var e=i(4157);var B=i(8706);const g=function E(u,v){return function(w,y){if(null==w)return w;if(!(0,B.Z)(w))return u(w,y);for(var p=w.length,f=v?p:-1,m=Object(w);(v?f--:++f<p)&&!1!==y(m[f],f,m););return w}}(function F(u,v){return u&&_(u,v,e.Z)})},1134:(H,U,i)=>{i.d(U,{Z:()=>Z});var D=i(6460);const Z=function t(_,e,F){for(var I=-1,B=_.length;++I<B;){var E=_[I],P=e(E);if(null!=P&&(void 0===S?P==P&&!(0,D.Z)(P):F(P,S)))var S=P,g=E}return g}},2382:(H,U,i)=>{i.d(U,{Z:()=>t});const t=function D(Z,_){return Z>_}},5944:(H,U,i)=>{i.d(U,{Z:()=>m});var D=i(7988),t=i(7298),Z=i(4253),_=i(3693),e=i(8706);var P=i(6932),S=i(6460);const u=function g(n,c){if(n!==c){var r=void 0!==n,C=null===n,A=n==n,h=(0,S.Z)(n),T=void 0!==c,R=null===c,G=c==c,L=(0,S.Z)(c);if(!R&&!L&&!h&&n>c||h&&T&&G&&!R&&!L||C&&T&&G||!r&&G||!A)return 1;if(!C&&!h&&!L&&n<c||L&&r&&A&&!C&&!h||R&&r&&A||!T&&A||!G)return-1}return 0};var y=i(9940),p=i(4177);const m=function f(n,c,r){c=c.length?(0,D.Z)(c,function(h){return(0,p.Z)(h)?function(T){return(0,t.Z)(T,1===h.length?h[0]:h)}:h}):[y.Z];var C=-1;c=(0,D.Z)(c,(0,P.Z)(Z.Z));var A=function F(n,c){var r=-1,C=(0,e.Z)(n)?Array(n.length):[];return(0,_.Z)(n,function(A,h,T){C[++r]=c(A,h,T)}),C}(n,function(h,T,R){return{criteria:(0,D.Z)(c,function(L){return L(h)}),index:++C,value:h}});return function B(n,c){var r=n.length;for(n.sort(c);r--;)n[r]=n[r].value;return n}(A,function(h,T){return function v(n,c,r){for(var C=-1,A=n.criteria,h=c.criteria,T=A.length,R=r.length;++C<T;){var G=u(A[C],h[C]);if(G)return C>=R?G:G*("desc"==r[C]?-1:1)}return n.index-c.index}(h,T,r)})}},8639:(H,U,i)=>{i.d(U,{Z:()=>F});var D=i(3093),t=i(8706),Z=i(6667),_=i(1999);const F=function e(I,B,E){if(!(0,_.Z)(E))return!1;var P=typeof B;return!!("number"==P?(0,t.Z)(E)&&(0,Z.Z)(B,E.length):"string"==P&&B in E)&&(0,D.Z)(E[B],I)}},1256:(H,U,i)=>{i.d(U,{Z:()=>P});var D=Math.ceil,t=Math.max;var e=i(8639),F=i(5601);const P=function I(S){return function(g,u,v){return v&&"number"!=typeof v&&(0,e.Z)(g,u,v)&&(u=v=void 0),g=(0,F.Z)(g),void 0===u?(u=g,g=0):u=(0,F.Z)(u),function Z(S,g,u,v){for(var w=-1,y=t(D((g-S)/(u||1)),0),p=Array(y);y--;)p[v?y:++w]=S,S+=u;return p}(g,u,v=void 0===v?g<u?1:-1:(0,F.Z)(v),S)}}()},5601:(H,U,i)=>{i.d(U,{Z:()=>m});var D=/\s/;var _=/^\s+/;const F=function e(n){return n&&n.slice(0,function t(n){for(var c=n.length;c--&&D.test(n.charAt(c)););return c}(n)+1).replace(_,"")};var I=i(1999),B=i(6460),P=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,g=/^0o[0-7]+$/i,u=parseInt;var y=1/0;const m=function f(n){return n?(n=function v(n){if("number"==typeof n)return n;if((0,B.Z)(n))return NaN;if((0,I.Z)(n)){var c="function"==typeof n.valueOf?n.valueOf():n;n=(0,I.Z)(c)?c+"":c}if("string"!=typeof n)return 0===n?n:+n;n=F(n);var r=S.test(n);return r||g.test(n)?u(n.slice(2),r?2:8):P.test(n)?NaN:+n}(n))===y||n===-y?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}}}]);