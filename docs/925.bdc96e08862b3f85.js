"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[925],{8310:(j,_,s)=>{s.d(_,{t:()=>I});var c=s(6787),D=s(3753),p=s(2198);const I=(f,u=!0)=>(0,c.T)(f.backdropClick(),f.outsidePointerEvents().pipe((0,p.h)(i=>"auxclick"!==i.type)),...u?[(0,D.R)(f.overlayElement,"click")]:[])},8070:(j,_,s)=>{s.d(_,{r:()=>D});var c=s(4650);let D=(()=>{class p{transform(f,u,i=f+"s"){return 1===u?f:i}}return p.\u0275fac=function(f){return new(f||p)},p.\u0275pipe=c.Yjl({name:"plural",type:p,pure:!0}),p})()},9418:(j,_,s)=>{s.d(_,{c:()=>p});var c=s(3179),D=s(4650);let p=(()=>{class I{}return I.\u0275fac=function(u){return new(u||I)},I.\u0275mod=D.oAB({type:I}),I.\u0275inj=D.cJS({imports:[c.I]}),I})()},7615:(j,_,s)=>{s.d(_,{d:()=>I});var c=s(6421),D=s(9418),p=s(4650);let I=(()=>{class f{getPatchPath(i){switch(i.status){case c.v.Added:case c.v.Untracked:return i.newFilePath;case c.v.Conflicted:case c.v.Modified:case c.v.Renamed:return i.oldFilePath===i.newFilePath?i.newFilePath:`${i.oldFilePath} --\x3e ${i.newFilePath}`;case c.v.Deleted:return i.oldFilePath;default:throw new Error(`Don't know how to deal with patch status: ${c.v[i.status]}`)}}getPatchIcon(i){switch(i.status){case c.v.Added:case c.v.Untracked:return"add";case c.v.Conflicted:return"warning";case c.v.Modified:return"create";case c.v.Deleted:return"remove";case c.v.Renamed:return"swap_horiz";default:throw new Error(`Don't know how to deal with patch status: ${c.v[i.status]}`)}}getPatchIconColorClass(i){switch(i.status){case c.v.Added:case c.v.Untracked:return"green";case c.v.Conflicted:case c.v.Modified:return"orange";case c.v.Deleted:return"red";case c.v.Renamed:return"blue";default:throw new Error(`Don't know how to deal with patch status: ${c.v[i.status]}`)}}}return f.\u0275fac=function(i){return new(i||f)},f.\u0275prov=p.Yz7({token:f,factory:f.\u0275fac,providedIn:D.c}),f})()},3888:(j,_,s)=>{s.d(_,{p:()=>p});var c=s(2686),D=s(4650);let p=(()=>{class I{constructor(){this.parseReference=u=>{const i=I.referenceRegex.exec(u);if(!i)throw new Error(`Reference invalid: ${u}`);if("remotes"===i[1]){const U=I.remoteBranchRegex.exec(u);if(!U)throw new Error(`Remote reference invalid: ${u}`);return{branch:U[2],sourceName:U[1],sourceType:"remote"}}return"stash"===i[1]?{branch:"stash",sourceName:"stash",sourceType:"stash"}:{branch:i[2],sourceName:"heads"===i[1]?"local":"tag",sourceType:"heads"===i[1]?"local":"tag"}},this.getBranchTypeIcon=u=>{switch(u){case"local":return"desktop_windows";case"remote":return"cloud_queue";case"stash":return"edit";case"tag":return"label";default:throw new Error(`Unknown reference type: ${u}`)}}}calculateBranches(u,i){const U=(0,c.Z)(u.map(this.parseReference),({branch:M})=>M);return Object.entries(U).map(([M,A])=>({name:M,sources:A.map(R=>({name:R.sourceName,type:R.sourceType,icon:this.getBranchTypeIcon(R.sourceType)}))})).sort((M,A)=>{const R=M.sources.some(h=>"local"===h.type&&`refs/heads/${M.name}`===i),K=M.sources.some(h=>"local"===h.type&&`refs/heads/${A.name}`===i);if(R&&!K)return-1;if(!R&&K)return 1;const C=M.sources.some(h=>"local"===h.type),S=A.sources.some(h=>"local"===h.type);if(C&&!S)return-1;if(!C&&S)return 1;const g=M.sources.some(h=>"remote"===h.type),L=A.sources.some(h=>"remote"===h.type);return g&&!L?-1:!g&&L?1:M.sources.length>A.sources.length?-1:M.sources.length<A.sources.length?1:M.name>A.name?-1:M.name<A.name?1:0})}}return I.referenceRegex=/refs\/(heads|remotes|tags|stash)(?:\/(.*))?/,I.remoteBranchRegex=/refs\/remotes\/([^\/]*)\/(.*)/,I.\u0275fac=function(u){return new(u||I)},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},3989:(j,_,s)=>{s.d(_,{$:()=>W});var c=s(1134),D=s(4253);const I=function p(Y,n){return Y<n},u=function f(Y,n){return Y&&Y.length?(0,c.Z)(Y,(0,D.Z)(n,2),I):void 0};var i=s(2382);var A=s(3713),R=s(7711),K=s(9512),C=s(7988),S=s(6932),g=s(3228);var Z=s(7965),H=s(7118);const b=(0,Z.Z)(function(Y,n){return(0,H.Z)(Y)?function h(Y,n,d,l){var a=-1,e=R.Z,o=!0,t=Y.length,m=[],B=n.length;if(!t)return m;d&&(n=(0,C.Z)(n,(0,S.Z)(d))),l?(e=K.Z,o=!1):n.length>=200&&(e=g.Z,o=!1,n=new A.Z(n));e:for(;++a<t;){var $=Y[a],O=null==d?$:d($);if($=l||0!==$?$:0,o&&O==O){for(var x=B;x--;)if(n[x]===O)continue e;m.push($)}else e(n,O,l)||m.push($)}return m}(Y,n):[]});var z=s(1256),G=s(4650);class W{isIndexInBounds(n,d,l){const a=n*W.yUnit;return a>=d&&a<l-W.yUnit}calculateVisible(n,d,l,a,e){return{commitDetails:n.slice(a,e),commitTrails:d.filter(o=>o.minYIndexWithMerges<=e&&o.maxYIndexWithMerges>=a),mergePaths:l.filter(o=>o.from.yIndex>=a&&o.to.some(t=>t.yIndex<=e))}}calculate(n,d,l,a,e,o){const t={};let m=[],B=[],$=[];const O=(n?1:0)+d.length;l.forEach((r,v)=>{t[r.id]={id:r.id,yIndex:v+O,commit:r}});const x=[];d.forEach((r,v)=>{const y=`merge:${r.fromCommitId}:${r.toCommitId}`,E={id:y,message:r.message??`merge: from '${r.fromCommitId}' into '${r.toCommitId}'`,parentIds:[r.toCommitId,r.fromCommitId],time:0,references:[],authorEmail:"",authorName:""};x.push(E),t[y]={id:y,yIndex:v+(n?1:0),commit:E}});const w=n?{id:"head",message:"",parentIds:n.parentId?[n.parentId,...n.mergeHeads]:[...n.mergeHeads],time:0,references:[],authorEmail:"",authorName:""}:null;n&&(t.head={id:"head",yIndex:0,commit:w});const T=w?[w,...x,...l]:[...x,...l];if(T.forEach(r=>{const v=t[r.id];v.trail||this.calculateTrail(v,t,m,B),r.parentIds.length>1&&r.parentIds.slice(1).forEach(y=>{const E=t[y];if(E)if(E.mergeFrom)E.mergeFrom.to.push(v);else{const P={from:E,to:[v],isDashed:"head"===r.id||r.id.startsWith("merge:")};E.mergeFrom=P,$.push(P)}})}),({mergePaths:$,lanes:B}=this.calculateMergePaths($,B,a,e)),this.calculateColors(m,o),n&&n.parentId&&t[n.parentId]){const r=m.find(v=>0===v.minYIndex);if(r){r.commits=r.commits.filter(y=>"head"!==y.id);const v=u(r.commits,y=>y.yIndex);r.minYIndex=v?.yIndex??0,r.minYIndexWithMerges=v?.yIndex??0,this.createUncommittedTrail(t.head,t[n.parentId],m,r.colorIndex,r.lane)}}return x.forEach((r,v)=>{const y=m.find(E=>E.minYIndex===v+(n?1:0));if(y&&t[r.parentIds[0]]){if(y.commits=y.commits.filter(E=>E.id!==r.id),y.commits.length<=0)m=m.filter(E=>E!==y);else{const E=u(y.commits.filter(P=>"head"!==P.id&&!P.id.startsWith("merge:")),P=>P.yIndex);y.minYIndex=E?.yIndex??0,y.minYIndexWithMerges=E?.yIndex??0}this.createUncommittedTrail(t[r.id],t[r.parentIds[0]],m,y.colorIndex,y.lane)}}),{commitDetails:t,commitTrails:m,lanes:B,mergePaths:$,headCommit:w,orderedCommits:T}}createUncommittedTrail(n,d,l,a,e){let o=d.yIndex;d.mergeFrom&&d.mergeFrom.to.length>0&&!d.mergeFrom.isDashed&&(o=Math.min(...d.mergeFrom.to.map(m=>m.yIndex))+.25,l.push({trailIndex:l.length,minYIndex:o,maxYIndex:d.yIndex,minYIndexWithMerges:o,maxYIndexWithMerges:d.yIndex,colorIndex:a,commits:[],isDashed:!1,lane:e}));const t={trailIndex:l.length,minYIndex:n.yIndex,maxYIndex:o,minYIndexWithMerges:n.yIndex,maxYIndexWithMerges:o,colorIndex:a,commits:[n],isDashed:!0,lane:e};return n.trail=t,l.push(t),t}calculateTrail(n,d,l,a){const e={trailIndex:l.length,minYIndex:n.yIndex,maxYIndex:n.yIndex,minYIndexWithMerges:n.yIndex,maxYIndexWithMerges:n.yIndex,colorIndex:null,commits:[],isDashed:!1};if(n.commit.parentIds.length<=0)n.trail=e,e.commits.push(n),e.maxYIndex=n.yIndex,e.maxYIndexWithMerges=n.yIndex;else{let t=n;for(;t&&!t.trail&&t.commit.parentIds.length>0;)t.trail=e,e.maxYIndex=t.yIndex,e.maxYIndexWithMerges=t.yIndex,e.commits.push(t),t=d[t.commit.parentIds[0]];t&&(e.maxYIndex=t.yIndex,e.maxYIndexWithMerges=t.yIndex,t.trail||(t.trail=e,e.commits.push(t)))}let o=a.find(t=>this.getLaneMaxYIndex(t)<e.minYIndex);return o||(o={xIndex:a.length,occupations:[]},a.push(o)),o.occupations.push({type:"commit-trail",minYIndex:e.minYIndex,maxYIndex:e.maxYIndex}),e.lane=o,l.push(e),e}calculateMergePaths(n,d,l,a){return d=d.map(e=>({...e,occupations:e.occupations.filter(o=>"merge-path"!==o.type)})).filter(e=>e.occupations.length>0),n.forEach(e=>{const o=[];let t;e.to.forEach(x=>{e.from.trail.minYIndexWithMerges>x.yIndex&&(e.from.trail.minYIndexWithMerges=x.yIndex),e.from.trail.maxYIndexWithMerges<x.yIndex&&(e.from.trail.maxYIndexWithMerges=x.yIndex),x.trail.minYIndexWithMerges>e.from.yIndex&&(x.trail.minYIndexWithMerges=e.from.yIndex),x.trail.maxYIndexWithMerges<e.from.yIndex&&(x.trail.maxYIndexWithMerges=e.from.yIndex)});const m=e.from.trail.lane.xIndex,B=l(m);let $=[],O=e.to;if(e.from.trail.minYIndex<e.from.yIndex){const x=e.from.trail.commits.findIndex(T=>T.id===e.from.id),w=e.from.trail.commits[x-1];$=e.to.filter(T=>T.yIndex>w.yIndex),O=e.to.filter(T=>T.yIndex<=w.yIndex),t=w.yIndex}else{t=e.from.yIndex-1;const x=function U(Y,n){return Y&&Y.length?(0,c.Z)(Y,(0,D.Z)(n,2),i.Z):void 0}(O,w=>w.yIndex);x&&x.yIndex===e.from.yIndex-1&&(O=O.filter(w=>w.id!==x.id),o.push(`M ${B} ${a(e.from.yIndex-.5)}`,`L ${l(x.trail.lane.xIndex)} ${a(x.yIndex)}`)),o.push(`M ${B} ${a(e.from.yIndex)}`),o.push(`V ${a(e.from.yIndex-.5)}`)}if(O.length>0){const x=Math.min(...O.map(r=>r.yIndex)),w=d.filter(r=>!this.isLaneOccupied(r,x+1,t)),T=u(w,r=>[...O,e.from].reduce((v,y)=>v+Math.abs(y.trail.lane.xIndex-r.xIndex),0))??{xIndex:d.length,occupations:[]};0===w.length&&d.push(T),T.occupations.push({type:"merge-path",minYIndex:x+1,maxYIndex:t}),o.push(`M ${B} ${a(t+.5)}`,`L ${l(T.xIndex)} ${a(t+.25)}`,`V ${a(x+.5)}`,...O.flatMap(r=>[`M ${l(T.xIndex)} ${a(r.yIndex+.5)}`,`L ${this.adjustForDashedLine(e.isDashed,T.xIndex,r.trail.lane.xIndex,r.yIndex+.5,r.yIndex,l,a)}`]))}o.push(...$.flatMap(x=>[`M ${B} ${a(x.yIndex+.25)}`,`L ${this.adjustForDashedLine(e.isDashed,m,x.trail.lane.xIndex,x.yIndex+.25,x.yIndex,l,a)}`])),e.path=o.join(" ")}),{mergePaths:n,lanes:d}}calculateColors(n,d){const l=(0,z.Z)(0,d),a=[];n.forEach(e=>{const o=a.filter(m=>m.minYIndexWithMerges<=e.maxYIndexWithMerges&&m.maxYIndexWithMerges>=e.minYIndexWithMerges).map(m=>m.colorIndex),t=b(l,...o);e.colorIndex=t.length>0?t[0]:e.trailIndex%d,a.push(e)})}getLaneMaxYIndex(n){return n.occupations[n.occupations.length-1].maxYIndex}isLaneOccupied(n,d,l){return n.occupations.some(a=>a.minYIndex<=l&&a.maxYIndex>=d)}adjustForDashedLine(n,d,l,a,e,o,t){const B=n?a>e?.15:-.15:0;return`${o(l+(n?d>l?.3:-.3:0))} ${t(e+B)}`}}W.xUnit=15,W.yUnit=26,W.xOffset=W.xUnit/2,W.yOffset=W.yUnit/2,W.\u0275fac=function(n){return new(n||W)},W.\u0275prov=G.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"})},2686:(j,_,s)=>{s.d(_,{Z:()=>S});var c=s(3496);const p=function D(g,L,h,F){for(var Z=-1,H=null==g?0:g.length;++Z<H;){var N=g[Z];L(F,N,h(N),g)}return F};var I=s(3693);const u=function f(g,L,h,F){return(0,I.Z)(g,function(Z,H,N){L(F,Z,h(Z),N)}),F};var i=s(4253),U=s(4177),K=Object.prototype.hasOwnProperty;const S=function M(g,L){return function(h,F){var Z=(0,U.Z)(h)?p:u,H=L?L():{};return Z(h,g,(0,i.Z)(F,2),H)}}(function(g,L,h){K.call(g,h)?g[h].push(L):(0,c.Z)(g,h,[L])})}}]);