"use strict";(self.webpackChunkgit_glint=self.webpackChunkgit_glint||[]).push([[181],{3178:(V,b,o)=>{o.d(b,{l:()=>h});var _=o(4080),w=o(2986),L=o(7625),I=o(9967),e=o(8926),U=o(8310),m=o(4650),N=o(8184);let h=(()=>{class C extends((0,e.j)(I.A)){constructor(p,u){super(),this.overlay=p,this.viewContainerRef=u,this.overlayRef=null,this.closeMenu=()=>{this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)},this.openMenu=(l,M)=>{this.closeMenu(),this.overlayRef=this.overlay.create({positionStrategy:this.overlay.position().flexibleConnectedTo({x:l,y:M}).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this.overlayRef.attach(new _.UE(this.menuTemplate,this.viewContainerRef,{data:this.data})),(0,U.t)(this.overlayRef).pipe((0,w.q)(1),(0,L.R)(this.destroyed$)).subscribe(this.closeMenu)},this.toggleMenu=(l,M)=>{this.overlayRef?this.closeMenu():this.openMenu(l,M)}}contextmenuListener(p){p.preventDefault(),p.stopPropagation(),this.openMenu(p.x,p.y)}ngOnDestroy(){super.ngOnDestroy(),this.closeMenu()}}return C.\u0275fac=function(p){return new(p||C)(m.Y36(N.aV),m.Y36(m.s_b))},C.\u0275dir=m.lG2({type:C,selectors:[["","appContextMenu",""]],hostBindings:function(p,u){1&p&&m.NdJ("contextmenu",function(M){return u.contextmenuListener(M)})},inputs:{menuTemplate:["appContextMenu","menuTemplate"],data:["appContextMenuData","data"]},exportAs:["appContextMenu"],features:[m.qOj]}),C})()},8310:(V,b,o)=>{o.d(b,{t:()=>I});var _=o(6787),w=o(3753),L=o(2198);const I=(e,U=!0)=>(0,_.T)(e.backdropClick(),e.outsidePointerEvents().pipe((0,L.h)(m=>"auxclick"!==m.type)),...U?[(0,w.R)(e.overlayElement,"click")]:[])},8181:(V,b,o)=>{o.r(b),o.d(b,{BlameLayoutModule:()=>Le});var _=o(4385),w=o(3179),L=o(1572),I=o(1446),e=o(4650);let U=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[L.Cq,w.I,I.m]}),a})();var m=o(1800),N=o(655),h=o(7340),C=o(4006),T=o(240),p=o(7717),u=o(591),l=o(1086),M=o(1737),$=o(6053),D=o(567),x=o(4850),P=o(7625),j=o(5778),q=o(3164),S=o(2994),B=o(7545),R=o(7221),F=o(1712),Q=o(8926),Y=o(9967),ee=o(8523),k=o(1336),E=o(6966),te=o(790),ne=o(127),oe=o(3058),ce=o(7784),K=o(9549),ae=o(3238),O=o(6895),ie=o(4859),X=o(7392),W=o(266),z=o(3051),se=o(9131),re=o(3061),le=o(1580),de=o(2986),H=o(4889),ge=o(315),J=o(3668),me=o(3178),pe=o(744),ue=o(1899),he=o(1453);function Ce(a,i){1&a&&(e.TgZ(0,"div",6),e._UZ(1,"mat-spinner"),e._uU(2," Loading...\n"),e.qZA())}function Me(a,i){if(1&a&&(e.TgZ(0,"span",12)(1,"span",13),e._uU(2),e.qZA(),e._UZ(3,"app-avatar",14),e.ALo(4,"async"),e.TgZ(5,"span",15),e._uU(6),e.qZA(),e.TgZ(7,"span",16),e._uU(8),e.ALo(9,"date"),e.qZA()()),2&a){const t=i.ngIf,n=e.oxw(2),c=e.MAs(11);e.Udp("left",-n.lineNumberMargin-26-400,"px"),e.Q6J("appContextMenu",c)("appContextMenuData",t),e.xp6(1),e.Q6J("matTooltip",t.commitId),e.xp6(1),e.Oqu(t.commitId),e.xp6(1),e.Q6J("matTooltip",t.name+" ("+t.email+")")("remotes",e.lcZ(4,12,n.remotes))("email",t.email),e.xp6(2),e.Q6J("matTooltip",t.message),e.xp6(1),e.Oqu(t.message),e.xp6(2),e.Oqu(e.xi3(9,14,t.date,"d MMM y"))}}function Pe(a,i){if(1&a&&(e.TgZ(0,"span",18),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.Q6J("ngClass",t.class),e.xp6(1),e.Oqu(t.text)}}function Oe(a,i){if(1&a&&(e.ynx(0),e.YNc(1,Pe,2,2,"span",17),e.ALo(2,"tokens"),e.ALo(3,"searchToken"),e.ALo(4,"async"),e.BQk()),2&a){const t=i.ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.Dn7(3,4,t.tokens,t.text,e.lcZ(4,8,n.search)),t.text))}}function fe(a,i){if(1&a&&(e.TgZ(0,"li",7),e.YNc(1,Me,10,17,"span",8),e.ALo(2,"async"),e.TgZ(3,"span",9),e._uU(4),e.qZA(),e.TgZ(5,"span",10),e._uU(6),e.qZA(),e.YNc(7,Oe,5,10,"ng-container",11),e.qZA()),2&a){const t=i.$implicit,n=e.oxw();let c;e.Q6J("ngClass","line-"+t.status),e.xp6(1),e.Q6J("ngIf",null==(c=e.lcZ(2,11,n.blameLines$))?null:c[null==t.newLine?null:t.newLine.lineNumber]),e.xp6(2),e.Udp("right","calc(100% + 26px + "+(n.lineNumberMargin/2).toString()+"px)")("width",n.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==t.oldLine?null:t.oldLine.lineNumber),e.xp6(1),e.Udp("width",n.lineNumberMargin/2-5,"px"),e.xp6(1),e.Oqu(null==t.newLine?null:t.newLine.lineNumber),e.xp6(1),e.Q6J("ngIf",n.getLineView(t))}}function ye(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){const r=e.CHM(t).data,s=e.oxw();return e.KtG(s.copyToClipboard(r.commitId))}),e.TgZ(2,"mat-icon"),e._uU(3,"content_copy"),e.qZA(),e.TgZ(4,"span"),e._uU(5,"Copy Commit ID"),e.qZA()(),e.TgZ(6,"button",20),e.NdJ("click",function(){const r=e.CHM(t).data,s=e.oxw();return e.KtG(s.selectCommit(r.commitId))}),e.TgZ(7,"mat-icon"),e._uU(8,"document_scanner"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"Blame from this Commit"),e.qZA()(),e.TgZ(11,"button",20),e.NdJ("click",function(){const r=e.CHM(t).data,s=e.oxw();return e.KtG(s.jumpToCommit(r.commitId))}),e.TgZ(12,"mat-icon"),e._uU(13,"launch"),e.qZA(),e.TgZ(14,"span"),e._uU(15,"Jump to Commit"),e.qZA()()()}if(2&a){const t=i.data;e.xp6(1),e.Q6J("matTooltip",t.commitId),e.xp6(5),e.Q6J("matTooltip",t.commitId),e.xp6(5),e.Q6J("matTooltip",t.commitId)}}let xe=(()=>{class a extends((0,Q.j)(Y.A)){constructor(t,n,c){super(),this.router=t,this.store=n,this.diffService=c,this.commitChanged=new e.vpe,this.lineNumberMargin=0,this.lines$=new u.X([]),this.blameLines$=new u.X({})}ngOnInit(){this.remotes=this.repository.pipe((0,x.U)(t=>t?.remotes??[])),this.blame.pipe((0,P.R)(this.destroyed$)).subscribe(t=>{if(t){const n=t.hunks.map(c=>[c.startLineNo,{name:c.authorName,email:c.authorEmail,commitId:c.commitId,message:c.commitMessage,date:c.commitDate}]);this.blameLines$.next(Object.fromEntries(n))}else this.blameLines$.next({})}),this.diffLines.pipe((0,P.R)(this.destroyed$)).subscribe(t=>{if(t){const n=(0,le.Z)([t.oldLines.length,t.newLines.length])??0;this.lineNumberMargin=this.diffService.calculateMargin(n.toString().length),this.diffService.calculateInlineLines(t.oldLines,t.newLines,t.hunks).pipe((0,P.R)(this.destroyed$)).subscribe(c=>{this.lines$.next(c)})}else this.lineNumberMargin=0,this.lines$.next([])})}getLineView(t){return"added"===t.status?t.newLine:"removed"===t.status?t.oldLine:"unchanged"===t.status?t.newLine??t.oldLine:null}trackByDiffLine(t,n){return t}copyToClipboard(t){navigator.clipboard.writeText(t??"")}selectCommit(t){this.commitChanged.next(t)}jumpToCommit(t){this.repository.pipe((0,de.q)(1),(0,P.R)(this.destroyed$)).subscribe(n=>{if(!n)throw new Error("Cannot jump to commit when no repository is selected");this.store.dispatch([new H.jQ(n.path,t),new H.BK(n.path,t)]).subscribe(()=>{this.router.navigate(["/standard/default"])})})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.F0),e.Y36(T.yh),e.Y36(ge.S))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-blame-view"]],inputs:{repository:"repository",blame:"blame",diffLines:"diffLines",search:"search"},outputs:{commitChanged:"commitChanged"},features:[e.qOj],decls:12,vars:14,consts:[["class","loading",4,"ngIf"],[1,"viewport",3,"itemSize","maxBufferPx","minBufferPx"],["scrollContainer",""],["code",""],["class","line",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["contextMenu",""],[1,"loading"],[1,"line",3,"ngClass"],["class","blame",3,"left","appContextMenu","appContextMenuData",4,"ngIf"],[1,"old-line-number"],[1,"new-line-number"],[4,"ngIf"],[1,"blame",3,"appContextMenu","appContextMenuData"],[1,"commit-id",3,"matTooltip"],[3,"matTooltip","remotes","email"],[1,"message",3,"matTooltip"],[1,"date"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"menu-panel"],[1,"menu-item",3,"matTooltip","click"]],template:function(t,n){1&t&&(e.YNc(0,Ce,3,0,"div",0),e.ALo(1,"nullEmpty"),e.ALo(2,"async"),e.TgZ(3,"cdk-virtual-scroll-viewport",1,2)(5,"code",null,3)(7,"ul"),e.YNc(8,fe,8,13,"li",4),e.ALo(9,"async"),e.qZA()()(),e.YNc(10,ye,16,3,"ng-template",null,5,e.W1O)),2&t&&(e.Q6J("ngIf",!e.lcZ(1,8,e.lcZ(2,10,n.lines$))),e.xp6(3),e.Q6J("itemSize",19)("maxBufferPx",1e3)("minBufferPx",200),e.xp6(4),e.Udp("margin-left",n.lineNumberMargin+26+400+10,"px"),e.xp6(1),e.Q6J("cdkVirtualForOf",e.lcZ(9,12,n.lines$))("cdkVirtualForTrackBy",n.trackByDiffLine))},dependencies:[L.Ou,J.xd,J.x0,J.N7,O.mk,O.sg,O.O5,X.Hw,W.gM,z.A,me.l,O.Ov,O.uU,pe.x,ue.y,he.U],styles:[".loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;margin:20px;width:100px}code[_ngcontent-%COMP%]{display:block;white-space:pre;color:#d4d4d4;font-family:Consolas,Courier New,monospace;font-size:14px;font-weight:400;letter-spacing:0px;line-height:19px}code[_ngcontent-%COMP%]     .line{height:19px}code[_ngcontent-%COMP%]     .line.line-added{background:#1f2c19}code[_ngcontent-%COMP%]     .line.line-removed{background:#501515}code[_ngcontent-%COMP%]     .line.line-void{background:#111}code[_ngcontent-%COMP%]     .diff-added{background-color:#1d572c}code[_ngcontent-%COMP%]     .diff-removed{background-color:#803030}code[_ngcontent-%COMP%]     .search-result{background-color:#a14e1b}code[_ngcontent-%COMP%]     .meta-embedded, code[_ngcontent-%COMP%]     .source-groovy-embedded{color:#d4d4d4}code[_ngcontent-%COMP%]     .emphasis{font-style:italic}code[_ngcontent-%COMP%]     .strong{font-weight:700}code[_ngcontent-%COMP%]     .header{color:navy}code[_ngcontent-%COMP%]     .comment{color:#6a9955}code[_ngcontent-%COMP%]     .constant-language{color:#569cd6}code[_ngcontent-%COMP%]     .constant-numeric, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-number, code[_ngcontent-%COMP%]     .variable-other-enummember, code[_ngcontent-%COMP%]     .keyword-operator-plus-exponent, code[_ngcontent-%COMP%]     .keyword-operator-minus-exponent{color:#b5cea8}code[_ngcontent-%COMP%]     .constant-regexp{color:#646695}code[_ngcontent-%COMP%]     .entity-name-tag{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-tag-css{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-other-attribute-name{color:#9cdcfe}code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-class-mixin-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-id-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-parent-selector-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-class-css, code[_ngcontent-%COMP%]     .entity-other-attribute-name-pseudo-element-css, code[_ngcontent-%COMP%]     .source-css-less .entity-other-attribute-name-id, code[_ngcontent-%COMP%]     .entity-other-attribute-name-attribute-scss, code[_ngcontent-%COMP%]     .entity-other-attribute-name-scss{color:#d7ba7d}code[_ngcontent-%COMP%]     .invalid{color:#f44747}code[_ngcontent-%COMP%]     .markup-underline{text-decoration:underline}code[_ngcontent-%COMP%]     .markup-bold{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-heading{font-weight:700;color:#569cd6}code[_ngcontent-%COMP%]     .markup-italic{font-style:italic}code[_ngcontent-%COMP%]     .markup-inserted{color:#b5cea8}code[_ngcontent-%COMP%]     .markup-deleted{color:#ce9178}code[_ngcontent-%COMP%]     .markup-changed{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-quote-begin-markdown{color:#6a9955}code[_ngcontent-%COMP%]     .punctuation-definition-list-begin-markdown{color:#6796e6}code[_ngcontent-%COMP%]     .markup-inline-raw{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-tag{color:gray}code[_ngcontent-%COMP%]     .meta-preprocessor{color:#569cd6}code[_ngcontent-%COMP%]     .meta-preprocessor-string{color:#ce9178}code[_ngcontent-%COMP%]     .meta-preprocessor-numeric{color:#b5cea8}code[_ngcontent-%COMP%]     .meta-structure-dictionary-key-python{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-diff-header{color:#569cd6}code[_ngcontent-%COMP%]     .storage{color:#569cd6}code[_ngcontent-%COMP%]     .storage-type{color:#569cd6}code[_ngcontent-%COMP%]     .storage-modifier, code[_ngcontent-%COMP%]     .keyword-operator-noexcept{color:#569cd6}code[_ngcontent-%COMP%]     .string, code[_ngcontent-%COMP%]     .entity-name-operator-custom-literal-string{color:#ce9178}code[_ngcontent-%COMP%]     .string-tag{color:#ce9178}code[_ngcontent-%COMP%]     .string-value{color:#ce9178}code[_ngcontent-%COMP%]     .string-regexp{color:#d16969}code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-begin, code[_ngcontent-%COMP%]     .punctuation-definition-template-expression-end, code[_ngcontent-%COMP%]     .punctuation-section-embedded{color:#569cd6}code[_ngcontent-%COMP%]     .meta-template-expression{color:#d4d4d4}code[_ngcontent-%COMP%]     .support-type-vendored-property-name, code[_ngcontent-%COMP%]     .support-type-property-name, code[_ngcontent-%COMP%]     .variable-css, code[_ngcontent-%COMP%]     .variable-scss, code[_ngcontent-%COMP%]     .variable-other-less, code[_ngcontent-%COMP%]     .source-coffee-embedded{color:#9cdcfe}code[_ngcontent-%COMP%]     .keyword{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-control{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-operator{color:#d4d4d4}code[_ngcontent-%COMP%]     .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-expression, code[_ngcontent-%COMP%]     .keyword-operator-cast, code[_ngcontent-%COMP%]     .keyword-operator-sizeof, code[_ngcontent-%COMP%]     .keyword-operator-typeid, code[_ngcontent-%COMP%]     .keyword-operator-alignas, code[_ngcontent-%COMP%]     .keyword-operator-instanceof, code[_ngcontent-%COMP%]     .keyword-operator-logical-python, code[_ngcontent-%COMP%]     .keyword-operator-wordlike{color:#569cd6}code[_ngcontent-%COMP%]     .keyword-other-unit{color:#b5cea8}code[_ngcontent-%COMP%]     .punctuation-section-embedded-begin-php, code[_ngcontent-%COMP%]     .punctuation-section-embedded-end-php{color:#569cd6}code[_ngcontent-%COMP%]     .support-function-git-rebase{color:#9cdcfe}code[_ngcontent-%COMP%]     .constant-sha-git-rebase{color:#b5cea8}code[_ngcontent-%COMP%]     .storage-modifier-import-java, code[_ngcontent-%COMP%]     .variable-language-wildcard-java, code[_ngcontent-%COMP%]     .storage-modifier-package-java{color:#d4d4d4}code[_ngcontent-%COMP%]     .variable-language{color:#569cd6}code[_ngcontent-%COMP%]     .entity-name-function, code[_ngcontent-%COMP%]     .support-function, code[_ngcontent-%COMP%]     .support-constant-handlebars, code[_ngcontent-%COMP%]     .source-powershell .variable-other-member{color:#dcdcaa}code[_ngcontent-%COMP%]     .meta-return-type, code[_ngcontent-%COMP%]     .support-class, code[_ngcontent-%COMP%]     .support-type, code[_ngcontent-%COMP%]     .entity-name-type, code[_ngcontent-%COMP%]     .entity-name-namespace, code[_ngcontent-%COMP%]     .entity-other-attribute, code[_ngcontent-%COMP%]     .entity-name-scope-resolution, code[_ngcontent-%COMP%]     .entity-name-class, code[_ngcontent-%COMP%]     .storage-type-numeric-go, code[_ngcontent-%COMP%]     .storage-type-byte-go, code[_ngcontent-%COMP%]     .storage-type-boolean-go, code[_ngcontent-%COMP%]     .storage-type-string-go, code[_ngcontent-%COMP%]     .storage-type-uintptr-go, code[_ngcontent-%COMP%]     .storage-type-error-go, code[_ngcontent-%COMP%]     .storage-type-rune-go, code[_ngcontent-%COMP%]     .storage-type-cs, code[_ngcontent-%COMP%]     .storage-type-generic-cs, code[_ngcontent-%COMP%]     .storage-type-modifier-cs, code[_ngcontent-%COMP%]     .storage-type-variable-cs, code[_ngcontent-%COMP%]     .storage-type-annotation-java, code[_ngcontent-%COMP%]     .storage-type-generic-java, code[_ngcontent-%COMP%]     .storage-type-java, code[_ngcontent-%COMP%]     .storage-type-object-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-array-java, code[_ngcontent-%COMP%]     .storage-type-primitive-java, code[_ngcontent-%COMP%]     .storage-type-token-java, code[_ngcontent-%COMP%]     .storage-type-groovy, code[_ngcontent-%COMP%]     .storage-type-annotation-groovy, code[_ngcontent-%COMP%]     .storage-type-parameters-groovy, code[_ngcontent-%COMP%]     .storage-type-generic-groovy, code[_ngcontent-%COMP%]     .storage-type-object-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-array-groovy, code[_ngcontent-%COMP%]     .storage-type-primitive-groovy{color:#4ec9b0}code[_ngcontent-%COMP%]     .meta-type-cast-expr, code[_ngcontent-%COMP%]     .meta-type-new-expr, code[_ngcontent-%COMP%]     .support-constant-math, code[_ngcontent-%COMP%]     .support-constant-dom, code[_ngcontent-%COMP%]     .support-constant-json, code[_ngcontent-%COMP%]     .entity-other-inherited-class{color:#4ec9b0}code[_ngcontent-%COMP%]     .keyword-control, code[_ngcontent-%COMP%]     .source-cpp .keyword-operator-new, code[_ngcontent-%COMP%]     .keyword-operator-delete, code[_ngcontent-%COMP%]     .keyword-other-using, code[_ngcontent-%COMP%]     .keyword-other-operator, code[_ngcontent-%COMP%]     .entity-name-operator{color:#c586c0}code[_ngcontent-%COMP%]     .variable, code[_ngcontent-%COMP%]     .meta-definition-variable-name, code[_ngcontent-%COMP%]     .support-variable, code[_ngcontent-%COMP%]     .entity-name-variable{color:#9cdcfe}code[_ngcontent-%COMP%]     .meta-object-literal-key{color:#9cdcfe}code[_ngcontent-%COMP%]     .support-constant-property-value, code[_ngcontent-%COMP%]     .support-constant-font-name, code[_ngcontent-%COMP%]     .support-constant-media-type, code[_ngcontent-%COMP%]     .support-constant-media, code[_ngcontent-%COMP%]     .constant-other-color-rgb-value, code[_ngcontent-%COMP%]     .constant-other-rgb-value, code[_ngcontent-%COMP%]     .support-constant-color{color:#ce9178}code[_ngcontent-%COMP%]     .punctuation-definition-group-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-group-assertion-regexp, code[_ngcontent-%COMP%]     .punctuation-definition-character-class-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-begin-regexp, code[_ngcontent-%COMP%]     .punctuation-character-set-end-regexp, code[_ngcontent-%COMP%]     .keyword-operator-negation-regexp, code[_ngcontent-%COMP%]     .support-other-parenthesis-regexp{color:#ce9178}code[_ngcontent-%COMP%]     .constant-character-character-class-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-set-regexp, code[_ngcontent-%COMP%]     .constant-other-character-class-regexp, code[_ngcontent-%COMP%]     .constant-character-set-regexp{color:#d16969}code[_ngcontent-%COMP%]     .keyword-operator-or-regexp, code[_ngcontent-%COMP%]     .keyword-control-anchor-regexp{color:#dcdcaa}code[_ngcontent-%COMP%]     .keyword-operator-quantifier-regexp{color:#d7ba7d}code[_ngcontent-%COMP%]     .constant-character{color:#569cd6}code[_ngcontent-%COMP%]     .constant-character-escape{color:#d7ba7d}code[_ngcontent-%COMP%]     .entity-name-label{color:#c8c8c8}code[_ngcontent-%COMP%]     .punctuation-definition-string{color:#ce9178}code[_ngcontent-%COMP%]     .variable-language-this{color:#569cd6}code[_ngcontent-%COMP%]     .punctuation-definition-comment{color:#6a9955}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]{position:absolute;width:400px;overflow:hidden;user-select:none;font-size:0;display:flex;justify-content:space-between;align-items:center;gap:5px}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{width:16px;height:16px;flex:0 0 auto}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .commit-id[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .commit-id[_ngcontent-%COMP%]{max-width:50px}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{flex:1 1 auto}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .blame[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{flex:0 0 auto;color:#90a4ae}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .old-line-number[_ngcontent-%COMP%], code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{position:absolute;text-align:right;user-select:none;color:#858585}code[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .new-line-number[_ngcontent-%COMP%]{right:calc(100% + 26px)}.viewport[_ngcontent-%COMP%]{height:100%;width:100%}.menu-panel[_ngcontent-%COMP%]{background:#424242;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;max-height:calc(100vh - 48px);max-width:25vw;min-height:48px;min-width:112px;overflow-x:hidden;overflow-y:auto}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;display:flex;font-family:MontserratVariable;font-size:14px;height:48px;line-height:48px;max-width:100%;outline:none;overflow:hidden;padding:0 16px;user-select:none;text-align:left;text-overflow:ellipsis;width:100%;white-space:nowrap}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#565656}.menu-panel[_ngcontent-%COMP%]   .menu-item[disabled][_ngcontent-%COMP%]{pointer-events:none;color:#ffffff4d}.menu-panel[_ngcontent-%COMP%]   .menu-item.bold[_ngcontent-%COMP%]{font-weight:700}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:12px 16px 12px 0;vertical-align:middle;flex:0 0 auto}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .mat-icon.expand-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:0}.menu-panel[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.menu-panel.sub-menu-1[_ngcontent-%COMP%]{background:#4a4a4a}"],changeDetection:0}),a})();function _e(a,i){if(1&a&&(e.TgZ(0,"span"),e._UZ(1,"app-avatar",8),e.ALo(2,"async"),e.TgZ(3,"span",9),e._uU(4),e.qZA()()),2&a){const t=i.ngIf,n=e.oxw();e.xp6(1),e.Q6J("matTooltip",t.name+" ("+t.email+")")("remotes",e.lcZ(2,4,n.remotes))("email",t.email),e.xp6(3),e.Oqu(t.message)}}function ve(a,i){if(1&a&&(e.TgZ(0,"mat-option",10),e._UZ(1,"app-avatar",8),e.ALo(2,"async"),e.TgZ(3,"span",11),e._uU(4),e.qZA(),e.TgZ(5,"span",12),e._uU(6),e.ALo(7,"date"),e.qZA()()),2&a){const t=i.$implicit,n=e.oxw();e.Q6J("value",t.id),e.xp6(1),e.Q6J("matTooltip",t.name+" ("+t.email+")")("remotes",e.lcZ(2,7,n.remotes))("email",t.email),e.xp6(2),e.Q6J("matTooltip",t.message),e.xp6(1),e.Oqu(t.message),e.xp6(2),e.Oqu(e.xi3(7,9,t.date,"d MMM y"))}}const be=[{path:"",component:(()=>{class a extends((0,Q.j)(Y.A)){constructor(t,n,c,r,s,Z,d){super(),this.route=t,this.router=n,this.store=c,this.commitsApi=r,this.highlightApi=s,this.repositoriesApi=Z,this.routerHistoryService=d,this.blame=new u.X(null),this.headBlame=new u.X(null),this.commits=new u.X([]),this.diffLines=new u.X(null),this.search$=new u.X(null),this.selectedCommitControl=new C.NI(null),this.selectedCommit=new u.X(null),this.selectedPath=new u.X(null),this.previousUrl=null,this.close=()=>{this.router.navigate([this.previousUrl??"/"])},this.getPatch=(g,f,y,A)=>{if("head"===y){const G=("staged"===A?g.stagedChanges?.patches:"unstaged"===A?g.unstagedChanges?.patches:void 0)?.find(Te=>Te.newFilePath===f);return(0,l.of)(G?{repositoryPath:g.path,patch:G,isUnstaged:"unstaged"===A}:null)}return"commit"!==A?(0,l.of)(null):this.commitsApi.getPatch(g.path,y,void 0,f).pipe((0,x.U)(v=>({repositoryPath:g.path,patch:v,isUnstaged:!1})),(0,ee.s)(v=>(F.vE.matches(v)?this.store.dispatch(new k.NN("error",v.message)):this.store.dispatch(new k.NN("unhandled",`${v}`)),(0,M._)(v))))}}ngOnInit(){this.previousUrl=this.routerHistoryService.history.length>=2?this.routerHistoryService.history.slice(-2)[0]:null,this.remotes=this.selectedRepository.pipe((0,x.U)(t=>t?.remotes??[])),this.headBlame.pipe((0,x.U)(t=>{if(!t)return[];const n={};for(const c of t.hunks)n[c.commitId]||(n[c.commitId]={id:c.commitId,date:c.commitDate,email:c.authorEmail,name:c.authorName,message:c.commitMessage,path:c.path});return Object.values(n).sort((c,r)=>r.date.getTime()-c.date.getTime())}),(0,P.R)(this.destroyed$)).subscribe(t=>{this.commits.next(t);const n=this.selectedCommitControl.value;this.selectedCommit.next(t.find(c=>c.id===n)??null)}),this.selectedCommitControl.valueChanges.pipe((0,j.x)(),(0,P.R)(this.destroyed$)).subscribe(t=>{const n=this.commits.value.find(c=>c.id===t)??null;n&&(this.selectedCommit.next(n),this.router.navigate([],{relativeTo:this.route,queryParams:{area:"commit","commit-id":t??"head",path:n.path}}))}),this.store.select(E.E.selectedRepository).pipe((0,P.R)(this.destroyed$)).subscribe(t=>{t||this.router.navigate(["/standard/open-repository"])}),(0,$.aj)([this.store.select(E.E.selectedRepository),this.route.queryParamMap]).pipe((0,q.p)(100,void 0,{leading:!0,trailing:!0}),(0,x.U)(([t,n])=>({repository:t,area:n.get("area"),commitId:n.get("commit-id"),path:n.get("path")})),(0,S.b)(({commitId:t,path:n})=>{this.selectedCommitControl.setValue("head"===t?null:t,{emitEvent:!0}),this.selectedPath.next(n)}),(0,B.w)(({repository:t,path:n,commitId:c,area:r})=>t&&n&&c?(0,D.D)([this.getPatch(t,n,c,r),this.repositoriesApi.blameFile(t.path,n,"head"===c?void 0:c)]):(0,l.of)(null)),(0,j.x)((t,n)=>{if(!t||!n)return!t&&!n;const[c,r]=t,[s,Z]=n;return c&&s?!(c.repositoryPath!==s.repositoryPath||c.isUnstaged!==s.isUnstaged||c.patch.newFileId!==s.patch.newFileId||c.patch.newFileIsDir!==s.patch.newFileIsDir||c.patch.newFileIsSubmodule!==s.patch.newFileIsSubmodule||c.patch.newFilePath!==s.patch.newFilePath||c.patch.oldFileId!==s.patch.oldFileId||c.patch.oldFileIsDir!==s.patch.oldFileIsDir||c.patch.oldFileIsSubmodule!==s.patch.oldFileIsSubmodule||c.patch.oldFilePath!==s.patch.oldFilePath||c.patch.status!==s.patch.status||c.patch.hunks.length!==s.patch.hunks.length||(0,p.Z)(c.patch.hunks,s.patch.hunks).some(([d,g])=>d?.lines.length!==g?.lines.length||d?.newStart!==g?.newStart||d?.oldStart!==g?.oldStart||d?.header!==g?.header||d&&g&&(0,p.Z)(d.lines,g.lines).some(([f,y])=>f?.content.length!==y?.content.length||f?.contentOffset!==y?.contentOffset||f?.newLineNo!==y?.newLineNo||f?.oldLineNo!==y?.oldLineNo||f?.origin!==y?.origin||f?.content!==y?.content))||(0,p.Z)(r.hunks,Z.hunks).some(([d,g])=>d?.startLineNo!==g?.startLineNo||d?.endLineNo!==g?.endLineNo||d?.authorName!==g?.authorName||d?.authorEmail!==g?.authorEmail||d?.commitId!==g?.commitId||d?.commitMessage!==g?.commitMessage||d?.commitDate!==g?.commitDate||d?.path!==g?.path)):!c&&!s}),(0,B.w)(t=>t&&t[0]?(0,D.D)(this.getLines(t[0].repositoryPath,t[0].patch,t[0].isUnstaged,!1)).pipe((0,R.K)(n=>F.OZ.matches(n)||F.hK.matches(n)?(0,l.of)(null):(0,M._)(n)),(0,x.U)(n=>n?[t[0],t[1],n]:null)):(0,l.of)(null)),(0,S.b)(t=>{if(t&&t[0]){const[n,c,r]=t;this.blame.next(c),this.diffLines.next({hunks:n.patch.hunks,oldLines:r[0],newLines:r[1],oldFilePath:n.patch.oldFilePath,newFilePath:n.patch.newFilePath,highlighted:!1})}else this.blame.next(null),this.diffLines.next(null)}),(0,B.w)(t=>t&&t[0]?(0,D.D)(this.getLines(t[0].repositoryPath,t[0].patch,t[0].isUnstaged,!0)).pipe((0,R.K)(n=>F.OZ.matches(n)||F.hK.matches(n)?(0,l.of)(null):(0,M._)(n)),(0,x.U)(n=>n?[t[0],n]:null)):(0,l.of)(null)),(0,P.R)(this.destroyed$)).subscribe(t=>{if(t&&t[0]){const[n,c]=t;this.diffLines.next({hunks:n.patch.hunks,oldLines:c[0],newLines:c[1],oldFilePath:n.patch.oldFilePath,newFilePath:n.patch.newFilePath,highlighted:!1})}else this.blame.next(null),this.diffLines.next(null)}),(0,$.aj)([this.store.select(E.E.selectedRepository),this.route.queryParamMap.pipe((0,x.U)(t=>t.get("path")),(0,j.x)())]).pipe((0,B.w)(([t,n])=>t&&n?this.repositoriesApi.blameFile(t.path,n):(0,l.of)(null)),(0,R.K)(()=>(0,l.of)(null)),(0,P.R)(this.destroyed$)).subscribe(t=>{t&&this.headBlame.next(t)})}getLines(t,n,c,r){if(n.oldFileIsSubmodule||n.newFileIsSubmodule){const s=n.hunks[0].lines.find(d=>d.oldLineNo>0),Z=n.hunks[0].lines.find(d=>d.newLineNo>0);return[(0,l.of)([{lineNumber:1,text:s?.content??"",tokens:[{startIndex:0,endIndex:s?.content.length??0,scopes:["normal"]}]}]),(0,l.of)([{lineNumber:1,text:Z?.content??"",tokens:[{startIndex:0,endIndex:Z?.content.length??0,scopes:["normal"]}]}])]}return[n.oldFileId?this.highlightApi.getHighlightedFile(t,n.oldFileId,n.oldFilePath,r):(0,l.of)([]),c?this.highlightApi.getHighlightedFile(t,null,n.newFilePath,r):n.newFileId?this.highlightApi.getHighlightedFile(t,n.newFileId,n.newFilePath,r):(0,l.of)([])]}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(T.yh),e.Y36(te.T),e.Y36(ne.m),e.Y36(oe.a),e.Y36(ce.X))},a.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],features:[e.qOj],decls:18,vars:14,consts:[[3,"searched"],[3,"path"],["appearance","standard",1,"commit-selector"],["panelClass","commit-select-list",3,"formControl"],[4,"ngIf"],["class","commit-select-option",3,"value",4,"ngFor","ngForOf"],["type","button","mat-icon-button","",1,"close-button",3,"click"],[3,"repository","blame","diffLines","search","commitChanged"],[3,"matTooltip","remotes","email"],[1,"message"],[1,"commit-select-option",3,"value"],[1,"message",3,"matTooltip"],[1,"date"]],template:function(t,n){1&t&&(e.TgZ(0,"header")(1,"app-find-control",0),e.NdJ("searched",function(r){return n.search$.next(r)}),e.qZA(),e._UZ(2,"app-condensed-path",1),e.ALo(3,"async"),e.TgZ(4,"mat-form-field",2)(5,"mat-label"),e._uU(6,"Select Commit"),e.qZA(),e.TgZ(7,"mat-select",3)(8,"mat-select-trigger"),e.YNc(9,_e,5,6,"span",4),e.ALo(10,"async"),e.qZA(),e.YNc(11,ve,8,12,"mat-option",5),e.ALo(12,"async"),e.qZA()(),e.TgZ(13,"button",6),e.NdJ("click",function(){return n.close()}),e.TgZ(14,"mat-icon"),e._uU(15,"close"),e.qZA()()(),e.TgZ(16,"main")(17,"app-blame-view",7),e.NdJ("commitChanged",function(r){return n.selectedCommitControl.setValue(r)}),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("path",e.lcZ(3,8,n.selectedPath)),e.xp6(5),e.Q6J("formControl",n.selectedCommitControl),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,10,n.selectedCommit)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(12,12,n.commits)),e.xp6(6),e.Q6J("repository",n.selectedRepository)("blame",n.blame)("diffLines",n.diffLines)("search",n.search$))},dependencies:[K.KE,K.hX,_.gD,_.$L,ae.ey,O.sg,O.O5,C.JJ,C.oH,ie.lW,X.Hw,W.gM,z.A,se.j,re.T,xe,O.Ov,O.uU],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}header[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:5px;outline:none;padding:0 10px}header[_ngcontent-%COMP%]   app-condensed-path[_ngcontent-%COMP%]{flex:1 1 auto;min-width:200px}header[_ngcontent-%COMP%]   .commit-selector[_ngcontent-%COMP%]{width:500px;margin-right:12px}header[_ngcontent-%COMP%]   .commit-selector[_ngcontent-%COMP%]   mat-select-trigger[_ngcontent-%COMP%]   app-avatar[_ngcontent-%COMP%]{height:15px;vertical-align:middle;margin-right:5px}main[_ngcontent-%COMP%]{flex:1 0 auto;outline:none;overflow-x:auto;overflow-y:auto}"],data:{animation:[(0,h.X$)("slideLeft",[(0,h.eR)(":enter",[(0,h.oB)({position:"absolute",top:0,left:0,transform:"translateX(100%)"}),(0,h.jt)("200ms",(0,h.oB)({transform:"translateX(0)"}))]),(0,h.eR)(":leave",[(0,h.oB)({position:"absolute",top:0,left:0,transform:"translateX(0)"}),(0,h.jt)("200ms",(0,h.oB)({transform:"translateX(100%)"}))])])]},changeDetection:0}),(0,N.gn)([(0,T.Ph)(E.E.selectedRepository)],a.prototype,"selectedRepository",void 0),a})()}];let we=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.Bz.forChild(be),m.Bz]}),a})(),Le=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[_.LD,w.I,U,we]}),a})()}}]);